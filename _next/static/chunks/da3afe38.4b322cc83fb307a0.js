"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[446],{5382:function(e,i,r){r.d(i,{Ak:function(){return cT}});var a=Object.defineProperty,o=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=(e,i,r)=>i in e?a(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r,u=(e,i)=>{for(var r in i||(i={}))l.call(i,r)&&d(e,r,i[r]);if(s)for(var r of s(i))c.call(i,r)&&d(e,r,i[r]);return e},h=(e,i)=>o(e,n(i)),p=e=>"symbol"==typeof e?e:e+"",m=(e,i)=>{var r={};for(var a in e)l.call(e,a)&&0>i.indexOf(a)&&(r[a]=e[a]);if(null!=e&&s)for(var a of s(e))0>i.indexOf(a)&&c.call(e,a)&&(r[a]=e[a]);return r};function f(e){return Array.isArray(e)}function y(){return"window"in globalThis&&"document"in globalThis}function b(){return"function"==typeof navigator.vibrate}function g(){var e,i;if(!y())return"other";let r=null!=(i=null==(e=navigator.userAgentData)?void 0:e.platform)?i:navigator.platform;return/^mac/i.test(r)?5===navigator.maxTouchPoints?"ios":"macos":/^win/i.test(r)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}var v={strings:{en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo","menu.insert matrix":"Insert Matrix","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Delimiters","menu.array.add row above":"Add Row After","menu.array.add row below":"Add Row Before","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","submenu.array.insert separator":"Insert Separator","menu.insert table":"Insert Table","submenu.table style":"Table Style"},ar:{"keyboard.tooltip.functions":"مهام","keyboard.tooltip.symbols":"حرف او رمز","keyboard.tooltip.greek":"حروف يونانية","keyboard.tooltip.command":"حالة تلقي الأوامر اللاتك","keyboard.tooltip.numeric":"الرقمية","keyboard.tooltip.alphabetic":"رموز الاحرف الرومانية","tooltip.copy to clipboard":"نسخ إلى الحافظة","tooltip.cut to clipboard":"قص إلى الحافظة","tooltip.paste from clipboard":"لصق من الحافظة","tooltip.redo":"الإعادة","tooltip.toggle virtual keyboard":"تبديل لوحة المفاتيح الإفتراضية","tooltip.undo":"إلغاء","menu.insert matrix":"أدخل المصفوفة","menu.insert vector":"أدخل متجه","submenu.array.matrix delimiters":"محددات المصفوفة","menu.array.add row above":"أضف صفًا بعد ذلك","menu.array.add row below":"أضف الصف قبل","menu.array.add column after":"أضف العمود بعد ذلك","menu.array.add column before":"أضف العمود قبل","menu.array.delete row":"احذف صف","menu.array.delete rows":"حذف الصفوف المحددة","menu.array.delete column":"حذف العمود","menu.array.delete columns":"حذف الأعمدة المحددة","submenu.array.insert separator":"أدخل فاصل","menu.insert table":"إدراج جدول","submenu.table style":"نمط الجدول"},bg:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.symbols":"Символи","keyboard.tooltip.greek":"Гръцки букви","keyboard.tooltip.command":"Команден режим на латекс","keyboard.tooltip.numeric":"Числови","keyboard.tooltip.alphabetic":"Римски букви","tooltip.copy to clipboard":"Копиране в клипборда","tooltip.redo":"Повторно","tooltip.toggle virtual keyboard":"Превключване на виртуална клавиатура","tooltip.undo":"Отмяна","menu.insert matrix":"Вмъкване на матрица","menu.insert vector":"Вмъкване на вектор","submenu.array.matrix delimiters":"Матрични разделители","menu.array.add row above":"Добавяне на ред след","menu.array.add row below":"Добавяне на ред преди","menu.array.add column after":"Добавяне на колона след","menu.array.add column before":"Добавяне на колона преди","menu.array.delete row":"Изтриване на реда","menu.array.delete rows":"Изтриване на избраните редове","menu.array.delete column":"Изтриване на колона","menu.array.delete columns":"Изтриване на избраните колони","submenu.array.insert separator":"Поставете разделител","menu.insert table":"Вмъкване на таблица","submenu.table style":"Табличен стил"},bs:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grčka slova","keyboard.tooltip.command":"LaTeX naredbeni način","keyboard.tooltip.numeric":"Numerički","keyboard.tooltip.alphabetic":"Rimska slova","tooltip.copy to clipboard":"Kopirati u clipboard","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uključi / isključi virtualnu tipkovnicu","tooltip.undo":"Poništi","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matrični razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj red prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbriši red","menu.array.delete rows":"Izbriši odabrane redove","menu.array.delete column":"Izbriši stupac","menu.array.delete columns":"Izbriši odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Ubaci tabelu","submenu.table style":"Stil tabele"},cs:{"keyboard.tooltip.functions":"Funkce","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Řeck\xe9 dopisy","keyboard.tooltip.command":"Př\xedkazov\xfd režim LaTeX","keyboard.tooltip.numeric":"Č\xedseln\xe9","keyboard.tooltip.alphabetic":"Ř\xedmsk\xe9 dopisy","tooltip.copy to clipboard":"Zkop\xedrovat do schr\xe1nky","tooltip.redo":"Předělat","tooltip.toggle virtual keyboard":"Přepnout virtu\xe1ln\xed kl\xe1vesnici","tooltip.undo":"Vr\xe1tit","menu.insert matrix":"Vložte matici","menu.insert vector":"Vložit vektor","submenu.array.matrix delimiters":"Oddělovače matic","menu.array.add row above":"Přidat ř\xe1dek za","menu.array.add row below":"Přidat ř\xe1dek před","menu.array.add column after":"Přidat sloupec za","menu.array.add column before":"Přidat sloupec dř\xedve","menu.array.delete row":"Odstranit ř\xe1dek","menu.array.delete rows":"Odstranit vybran\xe9 ř\xe1dky","menu.array.delete column":"Odstranit sloupec","menu.array.delete columns":"Odstranit vybran\xe9 sloupce","submenu.array.insert separator":"Vložte oddělovač","menu.insert table":"Vložit tabulku","submenu.table style":"Styl tabulky"},da:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Gr\xe6ske bogstaver","keyboard.tooltip.command":"LaTeX kommandotilstand","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.alphabetic":"Romerske breve","tooltip.copy to clipboard":"Kopier til udklipsholder","tooltip.redo":"Gentag igen","tooltip.toggle virtual keyboard":"Skift virtuelt tastatur","tooltip.undo":"Fortryd","menu.insert matrix":"Inds\xe6t matrix","menu.insert vector":"Inds\xe6t vektor","submenu.array.matrix delimiters":"Matrixafgr\xe6nsere","menu.array.add row above":"Tilf\xf8j r\xe6kke efter","menu.array.add row below":"Tilf\xf8j r\xe6kke f\xf8r","menu.array.add column after":"Tilf\xf8j kolonne efter","menu.array.add column before":"Tilf\xf8j kolonne f\xf8r","menu.array.delete row":"Slet r\xe6kke","menu.array.delete rows":"Slet valgte r\xe6kker","menu.array.delete column":"Slet kolonne","menu.array.delete columns":"Slet valgte kolonner","submenu.array.insert separator":"Inds\xe6t separator","menu.insert table":"Inds\xe6t tabel","submenu.table style":"Tabelstil"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.alphabetic":"R\xf6mische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einf\xfcgen","menu.insert vector":"Vektor einf\xfcgen","submenu.array.matrix delimiters":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzuf\xfcgen nach","menu.array.add row below":"Zeile hinzuf\xfcgen vor","menu.array.add column after":"Spalte hinzuf\xfcgen nach","menu.array.add column before":"Spalte hinzuf\xfcgen vor","menu.array.delete row":"Zeile l\xf6schen","menu.array.delete rows":"Ausgew\xe4hlte Zeilen l\xf6schen","menu.array.delete column":"Spalte l\xf6schen","menu.array.delete columns":"Ausgew\xe4hlte Spalten l\xf6schen","submenu.array.insert separator":"Trennzeichen einf\xfcgen","menu.insert table":"Tabelle einf\xfcgen","submenu.table style":"Tabellenstil"},el:{"keyboard.tooltip.functions":"συναρτήσεις","keyboard.tooltip.symbols":"σύμβολα","keyboard.tooltip.greek":"ελληνικά γράμματα","keyboard.tooltip.command":"Λειτουργία εντολών LaTeX","keyboard.tooltip.numeric":"Αριθμητικός","keyboard.tooltip.alphabetic":"Ρωμαϊκά γράμματα","tooltip.copy to clipboard":"Αντιγραφή στο πρόχειρο","tooltip.redo":"Ξανακάνω","tooltip.toggle virtual keyboard":"Εναλλαγή εικονικού πληκτρολογίου","tooltip.undo":"Ξεκάνω","menu.insert matrix":"Εισαγωγή Matrix","menu.insert vector":"Εισαγωγή διανύσματος","submenu.array.matrix delimiters":"Οριοθέτες Matrix","menu.array.add row above":"Προσθήκη σειράς μετά","menu.array.add row below":"Προσθήκη σειράς πριν","menu.array.add column after":"Προσθήκη στήλης μετά","menu.array.add column before":"Προσθήκη στήλης πριν","menu.array.delete row":"Διαγραφή σειράς","menu.array.delete rows":"Διαγραφή επιλεγμένων σειρών","menu.array.delete column":"Διαγραφή στήλης","menu.array.delete columns":"Διαγραφή επιλεγμένων στηλών","submenu.array.insert separator":"Εισαγωγή διαχωριστικού","menu.insert table":"Εισαγωγή πίνακα","submenu.table style":"Στυλ πίνακα"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"A\xf1adir Matriz","menu.insert vector":"A\xf1adir vector","submenu.array.matrix delimiters":"Delimitadores de Matriz","menu.array.add row above":"A\xf1adir L\xednea Antes","menu.array.add row below":"A\xf1adir L\xednea Despues","menu.array.add column after":"A\xf1adir Columna Despues","menu.array.add column before":"A\xf1adir Columna Antes","menu.array.delete row":"Borrar L\xednea","menu.array.delete rows":"Borrar L\xedneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","submenu.array.insert separator":"Insertar un Separador","menu.insert table":"Insertar Tabla","submenu.table style":"Estilo de Tabla"},et:{"keyboard.tooltip.functions":"Funktsioonid","keyboard.tooltip.symbols":"S\xfcmbolid","keyboard.tooltip.greek":"Kreeka kirjad","keyboard.tooltip.command":"LaTeXi k\xe4surežiim","keyboard.tooltip.numeric":"Numbriline","keyboard.tooltip.alphabetic":"Rooma kirjad","tooltip.copy to clipboard":"Kopeerida l\xf5ikelauale","tooltip.redo":"Tee uuesti","tooltip.toggle virtual keyboard":"L\xfclitage sisse virtuaalne klaviatuur","tooltip.undo":"V\xf5ta tagasi","menu.insert matrix":"Sisesta maatriks","menu.insert vector":"Sisesta vektor","submenu.array.matrix delimiters":"Maatriksi eraldajad","menu.array.add row above":"Lisa rida p\xe4rast","menu.array.add row below":"Lisa rida enne","menu.array.add column after":"Lisa veerg p\xe4rast","menu.array.add column before":"Lisa veerg enne","menu.array.delete row":"Kustuta rida","menu.array.delete rows":"Kustuta valitud read","menu.array.delete column":"Kustuta veerg","menu.array.delete columns":"Kustuta valitud veerud","submenu.array.insert separator":"Sisestage eraldaja","menu.insert table":"Sisesta tabeli","submenu.table style":"Tabeli stiilis"},fa:{"keyboard.tooltip.functions":"توابع","keyboard.tooltip.symbols":"نمادها","keyboard.tooltip.greek":"حروف یونانی","keyboard.tooltip.command":"حالت دستور لاتک","keyboard.tooltip.numeric":"عددی","keyboard.tooltip.alphabetic":"حروف رومی","tooltip.copy to clipboard":"کپی به کلیپبورد","tooltip.redo":"بازگشت به بعد","tooltip.toggle virtual keyboard":"نمایش/نهفتن کیبورد مجازی","tooltip.undo":"بازگشت به قبل","menu.insert matrix":"ماتریس را وارد کنید","menu.insert vector":"درج بردار","submenu.array.matrix delimiters":"مرزهای ماتریس","menu.array.add row above":"بعد از آن ردیف اضافه کنید","menu.array.add row below":"ردیف را قبل اضافه کنید","menu.array.add column after":"اضافه کردن ستون بعد","menu.array.add column before":"ستون قبل را اضافه کنید","menu.array.delete row":"ردیف را حذف کنید","menu.array.delete rows":"ردیف های انتخاب شده را حذف کنید","menu.array.delete column":"حذف ستون","menu.array.delete columns":"ستون های انتخاب شده را حذف کنید","submenu.array.insert separator":"درج جدا کننده","menu.insert table":"قرار دادن جدول","submenu.table style":"سبک میز"},fi:{"keyboard.tooltip.functions":"Toiminnot","keyboard.tooltip.symbols":"Symbolit","keyboard.tooltip.greek":"Kreikkalaiset kirjeet","keyboard.tooltip.command":"LaTeX-komentotila","keyboard.tooltip.numeric":"Numeerinen","keyboard.tooltip.alphabetic":"Roomalaiset kirjeet","tooltip.copy to clipboard":"Kopioi leikep\xf6yd\xe4lle","tooltip.redo":"Tee uudelleen","tooltip.toggle virtual keyboard":"Vaihda virtuaalin\xe4pp\xe4imist\xf6","tooltip.undo":"Kumoa","menu.insert matrix":"Lis\xe4\xe4 matriisi","menu.insert vector":"Lis\xe4\xe4 vektori","submenu.array.matrix delimiters":"Matriisin erottimet","menu.array.add row above":"Lis\xe4\xe4 rivi j\xe4lkeen","menu.array.add row below":"Lis\xe4\xe4 rivi ennen","menu.array.add column after":"Lis\xe4\xe4 sarake j\xe4lkeen","menu.array.add column before":"Lis\xe4\xe4 sarake ennen","menu.array.delete row":"Poista rivi","menu.array.delete rows":"Poista valitut rivit","menu.array.delete column":"Poista sarake","menu.array.delete columns":"Poista valitut sarakkeet","submenu.array.insert separator":"Aseta erotin","menu.insert table":"Lis\xe4\xe4 taulukko","submenu.table style":"Taulukon tyyli"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Num\xe9rique","keyboard.tooltip.alphabetic":"Lettres romaines","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"R\xe9tablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Ins\xe9rer une Matrice","menu.insert vector":"Ins\xe9rer un Vecteur","submenu.array.matrix delimiters":"D\xe9limiteurs de la Matrice","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Apr\xe8s","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Apr\xe8s","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes S\xe9lection\xe9es","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes S\xe9lection\xe9es","submenu.array.insert separator":"Ins\xe9rer un S\xe9parateur","menu.insert table":"Ins\xe9rer une Table","submenu.table style":"Style de la  Table"},ga:{"keyboard.tooltip.functions":"Feidhmeanna","keyboard.tooltip.symbols":"Siombail\xed","keyboard.tooltip.greek":"Litreacha na Gr\xe9ige","keyboard.tooltip.command":"M\xf3d Ord\xfa LaTeX","keyboard.tooltip.numeric":"Uimhri\xfail","keyboard.tooltip.alphabetic":"Litreacha R\xf3mh\xe1nacha","tooltip.copy to clipboard":"C\xf3ipe\xe1il chuig an Ghearrthaisce","tooltip.redo":"Athdh\xe9an","tooltip.toggle virtual keyboard":"M\xe9archl\xe1ir F\xedor\xfail a Fh\xe1il","tooltip.undo":"Cealaigh","menu.insert matrix":"Cuir isteach Maitr\xeds","menu.insert vector":"Cuir isteach Veicteoir","submenu.array.matrix delimiters":"Delimiters Maitr\xeds","menu.array.add row above":"Cuir Rae Tar \xe9is","menu.array.add row below":"Cuir Rae Roimh","menu.array.add column after":"Cuir Col\xfan Tar \xe9is","menu.array.add column before":"Cuir Col\xfan Roimh","menu.array.delete row":"Scrios Rae","menu.array.delete rows":"Scrios Sraitheanna Roghnaithe","menu.array.delete column":"Scrios Col\xfan","menu.array.delete columns":"Scrios Col\xfain Roghnaithe","submenu.array.insert separator":"Cuir Deighilteoir isteach","menu.insert table":"Ions\xe1igh T\xe1bla","submenu.table style":"St\xedl T\xe1bla"},he:{"keyboard.tooltip.functions":"פונקציות","keyboard.tooltip.symbols":"סמלים","keyboard.tooltip.greek":"אותיות יווניות","keyboard.tooltip.command":"מצב פקודה לטקס","keyboard.tooltip.numeric":"מספרי","keyboard.tooltip.alphabetic":"מכתבים רומיים","tooltip.copy to clipboard":"העתק ללוח","tooltip.redo":"לַעֲשׂוֹת שׁוּב","tooltip.toggle virtual keyboard":"החלף את המקלדת הווירטואלית","tooltip.undo":"לבטל","menu.insert matrix":"הכנס מטריקס","menu.insert vector":"הכנס וקטור","submenu.array.matrix delimiters":"מפרידי מטריקס","menu.array.add row above":"הוסף שורה אחרי","menu.array.add row below":"הוסף שורה לפני","menu.array.add column after":"הוסף עמודה אחרי","menu.array.add column before":"הוסף עמודה לפני","menu.array.delete row":"מחק שורה","menu.array.delete rows":"מחק שורות שנבחרו","menu.array.delete column":"מחק עמודה","menu.array.delete columns":"מחק עמודות שנבחרו","submenu.array.insert separator":"הכנס מפריד","menu.insert table":"הכנס טבלה","submenu.table style":"טבלה סִגְנוֹן"},hr:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grčka slova","keyboard.tooltip.command":"LaTeX naredbeni način","keyboard.tooltip.numeric":"Numerički","keyboard.tooltip.alphabetic":"Rimska slova","tooltip.copy to clipboard":"Kopirati u međuspremnik","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uključi / isključi virtualnu tipkovnicu","tooltip.undo":"Poništi","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matrični razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj redak prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbriši redak","menu.array.delete rows":"Izbriši odabrane retke","menu.array.delete column":"Izbriši stupac","menu.array.delete columns":"Izbriši odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Umetni tablicu","submenu.table style":"Stil tabele"},id:{"keyboard.tooltip.functions":"Fungsi","keyboard.tooltip.symbols":"Simbol","keyboard.tooltip.greek":"Huruf Yunani","keyboard.tooltip.command":"Mode Perintah LaTeX","keyboard.tooltip.numeric":"Numerik","keyboard.tooltip.alphabetic":"Surat Romawi","tooltip.copy to clipboard":"Menyalin ke clipboard","tooltip.redo":"Mengulangi","tooltip.toggle virtual keyboard":"Alihkan Keyboard Virtual","tooltip.undo":"Membuka","menu.insert matrix":"Sisipkan Matriks","menu.insert vector":"Sisipkan Vektor","submenu.array.matrix delimiters":"Pembatas Matriks","menu.array.add row above":"Tambahkan Baris Setelah","menu.array.add row below":"Tambahkan Baris Sebelumnya","menu.array.add column after":"Tambahkan Kolom Setelah","menu.array.add column before":"Tambahkan Kolom Sebelumnya","menu.array.delete row":"Hapus Baris","menu.array.delete rows":"Hapus Baris yang Dipilih","menu.array.delete column":"Hapus Kolom","menu.array.delete columns":"Hapus Kolom yang Dipilih","submenu.array.insert separator":"Sisipkan Pemisah","menu.insert table":"Sisipkan Tabel","submenu.table style":"Gaya Tabel"},hi:{"keyboard.tooltip.functions":"कार्यों","keyboard.tooltip.symbols":"प्रतीक","keyboard.tooltip.greek":"ग्रीक अक्षर","keyboard.tooltip.command":"लाटेक्स कमांड मोड","keyboard.tooltip.numeric":"संख्यात्मक","keyboard.tooltip.alphabetic":"रोमन पत्र","tooltip.copy to clipboard":"क्लिपबोर्ड पर कॉपी करें","tooltip.redo":"फिर से करें","tooltip.toggle virtual keyboard":"वर्चुअल कीबोर्ड टॉगल करें","tooltip.undo":"पूर्ववत","menu.insert matrix":"मैट्रिक्स डालें","menu.insert vector":"वेक्टर डालें","submenu.array.matrix delimiters":"मैट्रिक्स सीमांकक","menu.array.add row above":"बाद में पंक्ति जोड़ें","menu.array.add row below":"पहले पंक्ति जोड़ें","menu.array.add column after":"बाद में कॉलम जोड़ें","menu.array.add column before":"पहले कॉलम जोड़ें","menu.array.delete row":"पंक्ति को हटाएं","menu.array.delete rows":"चयनित पंक्तियों को हटाएं","menu.array.delete column":"कॉलम हटाएं","menu.array.delete columns":"चयनित कॉलम हटाएं","submenu.array.insert separator":"विभाजक डालें","menu.insert table":"टेबल इंसर्ट करें","submenu.table style":"टेबल स्टाइल"},hu:{"keyboard.tooltip.functions":"Funkci\xf3k","keyboard.tooltip.symbols":"Szimb\xf3lumok","keyboard.tooltip.greek":"G\xf6r\xf6g levelek","keyboard.tooltip.command":"LaTeX Parancs m\xf3d","keyboard.tooltip.numeric":"Numerikus","keyboard.tooltip.alphabetic":"R\xf3mai levelek","tooltip.copy to clipboard":"M\xe1solja a v\xe1g\xf3lapra","tooltip.redo":"\xdajra","tooltip.toggle virtual keyboard":"V\xe1lt\xe1s a virtu\xe1lis billentyűzetre","tooltip.undo":"Visszavon\xe1s","menu.insert matrix":"Helyezze be a M\xe1trixot","menu.insert vector":"Vektor besz\xfar\xe1sa","submenu.array.matrix delimiters":"M\xe1trixhat\xe1rol\xf3k","menu.array.add row above":"Sor hozz\xe1ad\xe1sa ut\xe1n","menu.array.add row below":"Add Add Sor előtt","menu.array.add column after":"Oszlop hozz\xe1ad\xe1sa ut\xe1n","menu.array.add column before":"Add oszlop előtt","menu.array.delete row":"Sor t\xf6rl\xe9se","menu.array.delete rows":"Kijel\xf6lt sorok t\xf6rl\xe9se","menu.array.delete column":"Oszlop t\xf6rl\xe9se","menu.array.delete columns":"A kijel\xf6lt oszlopok t\xf6rl\xe9se","submenu.array.insert separator":"Helyezze be az elv\xe1laszt\xf3t","menu.insert table":"Helyezze be a t\xe1bl\xe1zatot","submenu.table style":"T\xe1bl\xe1zatos st\xedlus"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalit\xe0 di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.alphabetic":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare","menu.insert matrix":"Inserisci una Matrice","menu.insert vector":"Inserisci Vettore","submenu.array.matrix delimiters":"Delimitatori di Matrice","menu.array.add row above":"Aggiungi una Riga Prima","menu.array.add row below":"Aggiungi una Riga Dopo","menu.array.add column before":"Aggiungi una Colonna Prima","menu.array.add column after":"Aggiungi una Colonna Dopo","menu.array.delete row":"Rimuovi una Riga","menu.array.delete rows":"Rimuovi le Righe Selezionate","menu.array.delete column":"Rimuovi una Colonna","menu.array.delete columns":"Rimuovi le Colonne Selezionate","submenu.array.insert separator":"Inserisci un Separatore","menu.insert table":"Inserisci Tabella","submenu.table style":"Stile tabella"},is:{"keyboard.tooltip.functions":"A\xf0ger\xf0ir","keyboard.tooltip.symbols":"T\xe1kn","keyboard.tooltip.greek":"Gr\xedsk br\xe9f","keyboard.tooltip.command":"LaTeX stj\xf3rnunarstilling","keyboard.tooltip.numeric":"T\xf6lulegt","keyboard.tooltip.alphabetic":"R\xf3mversk br\xe9f","tooltip.copy to clipboard":"Afrita\xf0u \xe1 klemmuspjald","tooltip.redo":"Endurtaka","tooltip.toggle virtual keyboard":"Skiptu um s\xfdndarlyklabor\xf0","tooltip.undo":"Afturkalla","menu.insert matrix":"Settu fylki inn","menu.insert vector":"Settu inn Vector","submenu.array.matrix delimiters":"Matrix afm\xf6rkun","menu.array.add row above":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1 eftir","menu.array.add row below":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1\xf0ur","menu.array.add column after":"B\xe6ta vi\xf0 d\xe1lki \xe1 eftir","menu.array.add column before":"B\xe6ta vi\xf0 d\xe1lki \xe1\xf0ur","menu.array.delete row":"Ey\xf0a r\xf6\xf0","menu.array.delete rows":"Ey\xf0a v\xf6ldum l\xednum","menu.array.delete column":"Ey\xf0a d\xe1lki","menu.array.delete columns":"Ey\xf0a v\xf6ldum d\xe1lkum","submenu.array.insert separator":"Settu skiljuna \xed","menu.insert table":"Settu inn t\xf6flu","submenu.table style":"T\xf6flu st\xedl"},ja:{"keyboard.tooltip.functions":"関数","keyboard.tooltip.symbols":"シンボル","keyboard.tooltip.greek":"ギリシャ文字","keyboard.tooltip.command":"ラテックスコマンドモード","keyboard.tooltip.numeric":"数値","keyboard.tooltip.alphabetic":"ローマ字","tooltip.copy to clipboard":"クリップボードにコピー","tooltip.redo":"やり直し","tooltip.toggle virtual keyboard":"仮想キーボードの切り替え","tooltip.undo":"元に戻す","menu.insert matrix":"マトリックスを挿入","menu.insert vector":"ベクトルを挿入","submenu.array.matrix delimiters":"行列区切り文字","menu.array.add row above":"後に行を追加","menu.array.add row below":"前に行を追加","menu.array.add column after":"後に列を追加","menu.array.add column before":"前に列を追加","menu.array.delete row":"行を削除","menu.array.delete rows":"選択した行を削除する","menu.array.delete column":"列を削除","menu.array.delete columns":"選択した列を削除する","submenu.array.insert separator":"セパレーターを挿入","menu.insert table":"テーブルを挿入","submenu.table style":"テーブルスタイル"},ko:{"keyboard.tooltip.functions":"기능","keyboard.tooltip.symbols":"기호","keyboard.tooltip.greek":"그리스 문자","keyboard.tooltip.command":"유액 명령 모드","keyboard.tooltip.numeric":"숫자","keyboard.tooltip.alphabetic":"로마 문자","tooltip.copy to clipboard":"클립 보드에 복사","tooltip.redo":"다시 하다","tooltip.toggle virtual keyboard":"가상 키보드 전환","tooltip.undo":"실행 취소","menu.insert matrix":"매트릭스 삽입","menu.insert vector":"벡터 삽입","submenu.array.matrix delimiters":"행렬 구분 기호","menu.array.add row above":"뒤에 행 추가","menu.array.add row below":"앞에 행 추가","menu.array.add column after":"뒤에 열 추가","menu.array.add column before":"앞에 열 추가","menu.array.delete row":"행 삭제","menu.array.delete rows":"선택한 행 삭제","menu.array.delete column":"열 삭제","menu.array.delete columns":"선택한 열 삭제","submenu.array.insert separator":"구분자 삽입","menu.insert table":"표 삽입","submenu.table style":"테이블 스타일"},lv:{"keyboard.tooltip.functions":"Funkcijas","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grieķu burti","keyboard.tooltip.command":"LaTeX komandu režīms","keyboard.tooltip.numeric":"Ciparu skaitlis","keyboard.tooltip.alphabetic":"Romiešu vēstules","tooltip.copy to clipboard":"Kopēt starpliktuvē","tooltip.redo":"Pārtaisīt","tooltip.toggle virtual keyboard":"Pārslēgt virtuālo tastatūru","tooltip.undo":"Atsaukt","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobežotāji","menu.array.add row above":"Pievienot rindu pēc","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu pēc","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dzēst rindu","menu.array.delete rows":"Dzēst atlasītās rindas","menu.array.delete column":"Dzēst kolonnu","menu.array.delete columns":"Dzēst atlasītās kolonnas","submenu.array.insert separator":"Ievietojiet atdalītāju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Galda stils"},lt:{"keyboard.tooltip.functions":"Funkcijos","keyboard.tooltip.symbols":"Simboliai","keyboard.tooltip.greek":"Graikiškos raidės","keyboard.tooltip.command":"LaTeX komandų režimas","keyboard.tooltip.numeric":"Skaitmeninis","keyboard.tooltip.alphabetic":"Romos laiškai","tooltip.copy to clipboard":"Nukopijuoti į iškarpinę","tooltip.redo":"Perdaryti","tooltip.toggle virtual keyboard":"Perjungti virtualiąją klaviatūrą","tooltip.undo":"Atšaukti","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobežotāji","menu.array.add row above":"Pievienot rindu pēc","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu pēc","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dzēst rindu","menu.array.delete rows":"Dzēst atlasītās rindas","menu.array.delete column":"Dzēst kolonnu","menu.array.delete columns":"Dzēst atlasītās kolonnas","submenu.array.insert separator":"Ievietojiet atdalītāju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Tabulas stili"},lu:{"keyboard.tooltip.functions":"Funktiounen","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Griichesch Br\xe9iwer","keyboard.tooltip.command":"LaTeX Kommando Modus","keyboard.tooltip.numeric":"Numeresch","keyboard.tooltip.alphabetic":"R\xe9imesch Br\xe9iwer","tooltip.copy to clipboard":"Kop\xe9iert op Clipboard","tooltip.redo":"Nees nei maachen","tooltip.toggle virtual keyboard":"Wiesselt Virtuell Tastatur","tooltip.undo":"Undoen","menu.insert matrix":"Matrix asetzen","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Ofgrenzer","menu.array.add row above":"Dob\xe4izemaachen Rei No","menu.array.add row below":"F\xfc\xfcgt Rei vir","menu.array.add column after":"Dob\xe4izemaachen Kolonn No","menu.array.add column before":"Kolonn derb\xe4i Virun","menu.array.delete row":"Rad l\xe4schen","menu.array.delete rows":"L\xe4scht Ausgewielte Reien","menu.array.delete column":"L\xe4scht Kolonn","menu.array.delete columns":"L\xe4scht Ausgewielte Kolonnen","submenu.array.insert separator":"Insert Separator","menu.insert table":"D\xebsch anzeginn","submenu.table style":"D\xebsch Style"},nl:{"keyboard.tooltip.functions":"Functies","keyboard.tooltip.symbols":"Symbolen","keyboard.tooltip.greek":"Griekse letters","keyboard.tooltip.command":"LaTeX commando mode","keyboard.tooltip.numeric":"Numeriek","keyboard.tooltip.alphabetic":"Romeinse letters","tooltip.copy to clipboard":"Kopi\xebren naar klembord","tooltip.redo":"Opnieuw","tooltip.toggle virtual keyboard":"Schakel naar virtueel toetsenbord","tooltip.undo":"Ongedaan maken","menu.insert matrix":"Matrix invoegen","menu.insert vector":"Vector invoegen","submenu.array.matrix delimiters":"Matrixscheidingstekens","menu.array.add row above":"Rij toevoegen na","menu.array.add row below":"Rij toevoegen eerder","menu.array.add column after":"Kolom toevoegen na","menu.array.add column before":"Kolom toevoegen voor","menu.array.delete row":"Verwijder rij","menu.array.delete rows":"Geselecteerde rijen verwijderen","menu.array.delete column":"Kolom verwijderen","menu.array.delete columns":"Geselecteerde kolommen verwijderen","submenu.array.insert separator":"Scheidingsteken invoegen","menu.insert table":"Tabel invoegen","submenu.table style":"Tabelstijl"},no:{"keyboard.tooltip.functions":"Funksjoner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Greske bokstaver","keyboard.tooltip.command":"LaTeX kommandomodus","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.alphabetic":"Romerske bokstaver","tooltip.copy to clipboard":"Kopiere til utklippstavle","tooltip.redo":"Gj\xf8re om","tooltip.toggle virtual keyboard":"Bytt virtuelt tastatur","tooltip.undo":"Angre","menu.insert matrix":"Sett inn matrise","menu.insert vector":"Sett inn vektor","submenu.array.matrix delimiters":"Matrix avgrensere","menu.array.add row above":"Legg til rad etter","menu.array.add row below":"Legg til rad f\xf8r","menu.array.add column after":"Legg til kolonne etter","menu.array.add column before":"Legg til kolonne f\xf8r","menu.array.delete row":"Slett rad","menu.array.delete rows":"Slett valgte rader","menu.array.delete column":"Slett kolonne","menu.array.delete columns":"Slett valgte kolonner","submenu.array.insert separator":"Sett inn skilletegn","menu.insert table":"Sett inn tabell","submenu.table style":"Tabellstil"},mk:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.symbols":"Симболи","keyboard.tooltip.greek":"Грчки букви","keyboard.tooltip.command":"Режим на команда во латекс","keyboard.tooltip.numeric":"Нумерички","keyboard.tooltip.alphabetic":"Римски писма","tooltip.copy to clipboard":"Копирајте во клипборд","tooltip.redo":"Повторно","tooltip.toggle virtual keyboard":"Вклучете ја виртуелната тастатура","tooltip.undo":"Врати","menu.insert matrix":"Вметнете матрица","menu.insert vector":"Вметни вектор","submenu.array.matrix delimiters":"Разграничувачи на матрица","menu.array.add row above":"Додадете ред после","menu.array.add row below":"Додади ред пред тоа","menu.array.add column after":"Додадете колона после","menu.array.add column before":"Додадете колона пред тоа","menu.array.delete row":"Избриши го редот","menu.array.delete rows":"Избришете ги избраните редови","menu.array.delete column":"Избриши ја колоната","menu.array.delete columns":"Избриши ја колоната","submenu.array.insert separator":"Вметнете сепаратор","menu.insert table":"Вметни табела","submenu.table style":"Табела стил"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb poleceń LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.alphabetic":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywr\xf3ć","tooltip.toggle virtual keyboard":"Przełącz wirtualną klawiaturę","tooltip.undo":"Cofnij","menu.insert matrix":"Wstaw macierz","menu.insert vector":"Wstaw wektor","submenu.array.matrix delimiters":"Ograniczniki macierzy","menu.array.add row above":"Dodaj wiersz po","menu.array.add row below":"Dodaj wiersz przed","menu.array.add column after":"Dodaj kolumnę po","menu.array.add column before":"Dodaj kolumnę przed","menu.array.delete row":"Usuń wiersz","menu.array.delete rows":"Usuń wybrane wiersze","menu.array.delete column":"Usuń kolumnę","menu.array.delete columns":"Usuń wybrane kolumny","submenu.array.insert separator":"Wstaw separator","menu.insert table":"Wypełnij tabelę","submenu.table style":"Styl tabelę"},pt:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.command":"Modo de Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.alphabetic":"Letras romanas","tooltip.copy to clipboard":"Copiar para \xe1rea de transfer\xeancia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.insert vector":"Inserir vetor","submenu.array.matrix delimiters":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","submenu.array.insert separator":"Inserir Separador","menu.insert table":"Insira a tabela","submenu.table style":"Estilo tabela"},ro:{"keyboard.tooltip.functions":"Funcții","keyboard.tooltip.symbols":"Simboluri","keyboard.tooltip.greek":"Scrisori grecești","keyboard.tooltip.command":"Modul de comandă latex","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.alphabetic":"Scrisori romane","tooltip.copy to clipboard":"Copiați \xeen clipboard","tooltip.redo":"A reface","tooltip.toggle virtual keyboard":"Comutați tastatura virtuală","tooltip.undo":"Anula","menu.insert matrix":"Introduceți Matrix","menu.insert vector":"Inserați Vector","submenu.array.matrix delimiters":"Delimitatori de matrice","menu.array.add row above":"Adăugați r\xe2ndul după","menu.array.add row below":"Adăugați r\xe2ndul \xeenainte","menu.array.add column after":"Adăugați o coloană după","menu.array.add column before":"Adăugați o coloană \xeenainte","menu.array.delete row":"Ștergeți r\xe2ndul","menu.array.delete rows":"Ștergeți r\xe2ndurile selectate","menu.array.delete column":"Ștergeți coloana","menu.array.delete columns":"Ștergeți coloanele selectate","submenu.array.insert separator":"Introduceți separatorul","menu.insert table":"Introduceți tabelul","submenu.table style":"Table style"},ru:{"keyboard.tooltip.functions":"Функции","keyboard.tooltip.symbols":"Символы","keyboard.tooltip.greek":"Греческие буквы","keyboard.tooltip.command":"Режим командной строки Латекс","keyboard.tooltip.numeric":"числовой","keyboard.tooltip.alphabetic":"Латинские буквы","tooltip.copy to clipboard":"Скопировать в буфер обмена","tooltip.redo":"переделывать","tooltip.toggle virtual keyboard":"Переключить виртуальную клавиатуру","tooltip.undo":"расстегивать","menu.insert matrix":"Вставить матрицу","menu.insert vector":"Вставить вектор","submenu.array.matrix delimiters":"Матричные разделители","menu.array.add row above":"Добавить строку после","menu.array.add row below":"Добавить строку перед","menu.array.add column after":"Добавить столбец после","menu.array.add column before":"Добавить столбец перед","menu.array.delete row":"Удалить строку","menu.array.delete rows":"Удалить выбранные строки","menu.array.delete column":"Удалить столбец","menu.array.delete columns":"Удалить выбранные столбцы","submenu.array.insert separator":"Вставить разделитель","menu.insert table":"Вставить таблицу","submenu.table style":"Табличный стиль"},sk:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Gr\xe9cke listy","keyboard.tooltip.command":"Pr\xedkazov\xfd režim LaTeX","keyboard.tooltip.numeric":"Numerick\xe9","keyboard.tooltip.alphabetic":"R\xedmske listy","tooltip.copy to clipboard":"Skop\xedrovať do schr\xe1nky","tooltip.redo":"Znova","tooltip.toggle virtual keyboard":"Prepn\xfať virtu\xe1lnu kl\xe1vesnicu","tooltip.undo":"Vr\xe1tenie sp\xe4ť","menu.insert matrix":"Vložte maticu","menu.insert vector":"Vložte vektor","submenu.array.matrix delimiters":"Oddeľovače mat\xedc","menu.array.add row above":"Pridajte riadok za","menu.array.add row below":"Pridajte riadok pred","menu.array.add column after":"Pridať stĺpec za","menu.array.add column before":"Pridajte stĺpec predt\xfdm","menu.array.delete row":"Odstr\xe1niť riadok","menu.array.delete rows":"Odstr\xe1niť vybrat\xe9 riadky","menu.array.delete column":"Odstr\xe1niť stĺpec","menu.array.delete columns":"Odstr\xe1niť vybrat\xe9 stĺpce","submenu.array.insert separator":"Vložte oddeľovač","menu.insert table":"Vložte tabuľku","submenu.table style":"Št\xfdl tabuľky"},sl:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grška pisma","keyboard.tooltip.command":"Ukazni način LaTeX","keyboard.tooltip.numeric":"Številsko","keyboard.tooltip.alphabetic":"Rimska pisma","tooltip.copy to clipboard":"Kopirati v odložišče","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Preklop navidezne tipkovnice","tooltip.undo":"Razveljavi","menu.insert matrix":"Vstavi matrico","menu.insert vector":"Vstavi vektor","submenu.array.matrix delimiters":"Matrični ločevalniki","menu.array.add row above":"Dodaj vrstico po","menu.array.add row below":"Dodaj vrstico prej","menu.array.add column after":"Dodaj stolpec po","menu.array.add column before":"Dodaj stolpec prej","menu.array.delete row":"Izbriši vrstico","menu.array.delete rows":"Izbriši izbrane vrstice","menu.array.delete column":"Izbriši stolpec","menu.array.delete columns":"Izbriši izbrane stolpce","submenu.array.insert separator":"Vstavi ločilo","menu.insert table":"Vstavi tabelo","submenu.table style":"Tabela slog"},sq:{"keyboard.tooltip.functions":"Funksione","keyboard.tooltip.symbols":"Simbolet","keyboard.tooltip.greek":"Letrat Greke","keyboard.tooltip.command":"Modaliteti i komand\xebs latex","keyboard.tooltip.numeric":"Numerike","keyboard.tooltip.alphabetic":"Letrat romake","tooltip.copy to clipboard":"Kopjoni n\xeb Clipboard","tooltip.redo":"Riparo","tooltip.toggle virtual keyboard":"Aktivizo tastier\xebn virtuale","tooltip.undo":"Zhb\xebj","menu.insert matrix":"Vendosni Matric\xebn","menu.insert vector":"Vendos vektorin","submenu.array.matrix delimiters":"P\xebrcaktuesit e matric\xebs","menu.array.add row above":"Shto Rreshtin Pas","menu.array.add row below":"Shto Rreshtin Para","menu.array.add column after":"Shto kolon\xebn pas","menu.array.add column before":"Shto kolon\xebn para","menu.array.delete row":"Fshi Rreshtin","menu.array.delete rows":"Fshi rreshtat e zgjedhur","menu.array.delete column":"Fshi kolon\xebn","menu.array.delete columns":"Fshi kolonat e zgjedhura","submenu.array.insert separator":"Vendos Ndar\xebsin","menu.insert table":"Vendos tabel\xebn","submenu.table style":"Stili tabel\xebn"},sr:{"keyboard.tooltip.functions":"Функције","keyboard.tooltip.symbols":"Симболи","keyboard.tooltip.greek":"Греек Леттерс","keyboard.tooltip.command":"ЛаТеКс командни режим","keyboard.tooltip.numeric":"Нумерички","keyboard.tooltip.alphabetic":"Римска писма","tooltip.copy to clipboard":"Копирајте у међуспремник","tooltip.redo":"Понови","tooltip.toggle virtual keyboard":"Укључи / искључи виртуелну тастатуру","tooltip.undo":"Опозови","menu.insert matrix":"Уметни матрицу","menu.insert vector":"Уметни вектор","submenu.array.matrix delimiters":"Матрик Делимитерс","menu.array.add row above":"Додај ред после","menu.array.add row below":"Додај ред пре","menu.array.add column after":"Додај колону после","menu.array.add column before":"Додај колону пре","menu.array.delete row":"Избриши ред","menu.array.delete rows":"Избриши изабране редове","menu.array.delete column":"Избриши колону","menu.array.delete columns":"Избриши изабране колоне","submenu.array.insert separator":"Уметни сепаратор","menu.insert table":"Убаци табелу","submenu.table style":"Табеларни стил"},sv:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Grekiska bokst\xe4ver","keyboard.tooltip.command":"LaTeX kommandol\xe4ge","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.alphabetic":"Romerska bokst\xe4ver","tooltip.copy to clipboard":"Kopiera till Urklipp","tooltip.redo":"G\xf6ra om","tooltip.toggle virtual keyboard":"V\xe4xla virtuellt tangentbord","tooltip.undo":"\xc5ngra","menu.insert matrix":"S\xe4tt in matris","menu.insert vector":"Infoga vektor","submenu.array.matrix delimiters":"Matrisavgr\xe4nsare","menu.array.add row above":"L\xe4gg till rad efter","menu.array.add row below":"L\xe4gg till rad f\xf6re","menu.array.add column after":"L\xe4gg till kolumn efter","menu.array.add column before":"L\xe4gg till kolumn f\xf6re","menu.array.delete row":"Radera rad","menu.array.delete rows":"Ta bort valda rader","menu.array.delete column":"Ta bort kolumn","menu.array.delete columns":"Ta bort valda kolumner","submenu.array.insert separator":"S\xe4tt i separator","menu.insert table":"Infoga tabell","submenu.table style":"Tabellstil"},th:{"keyboard.tooltip.functions":"ฟังก์ชั่น","keyboard.tooltip.symbols":"สัญลักษณ์","keyboard.tooltip.greek":"อักษรกรีก","keyboard.tooltip.command":"โหมดคำสั่ง น้ำยาง","keyboard.tooltip.numeric":"ตัวเลข","keyboard.tooltip.alphabetic":"อักษรโรมัน","tooltip.copy to clipboard":"คัดลอกไปที่คลิปบอร์ด","tooltip.redo":"ทำซ้ำ","tooltip.toggle virtual keyboard":"สลับแป้นพิมพ์เสมือน","tooltip.undo":"เลิกทำ","menu.insert matrix":"แทรกเมทริกซ์","menu.insert vector":"แทรกเวกเตอร์","submenu.array.matrix delimiters":"ตัวคั่นเมทริกซ์","menu.array.add row above":"เพิ่มแถวหลัง","menu.array.add row below":"เพิ่มแถวก่อน","menu.array.add column after":"เพิ่มคอลัมน์หลัง","menu.array.add column before":"เพิ่มคอลัมน์ก่อน","menu.array.delete row":"ลบแถว","menu.array.delete rows":"ลบแถวที่เลือก","menu.array.delete column":"ลบคอลัมน์","menu.array.delete columns":"ลบคอลัมน์ที่เลือก","submenu.array.insert separator":"ตัวคั่นแทรก","menu.insert table":"แทรกตาราง","submenu.table style":"สไตล์ตาราง"},tr:{"keyboard.tooltip.functions":"Fonksiyonlar","keyboard.tooltip.symbols":"Semboller","keyboard.tooltip.greek":"Yunan harfleri","keyboard.tooltip.command":"LaTeX Komut Modu","keyboard.tooltip.numeric":"Sayısal","keyboard.tooltip.alphabetic":"Roma Harfleri","tooltip.copy to clipboard":"Panoya kopyala","tooltip.redo":"Yeniden yap","tooltip.toggle virtual keyboard":"Sanal Klavyeyi A\xe7/Kapat","tooltip.undo":"Geri alma","menu.insert matrix":"Matris Ekle","menu.insert vector":"Vekt\xf6r Ekle","submenu.array.matrix delimiters":"Matris Sınırlayıcılar","menu.array.add row above":"Satırdan Sonra Ekle","menu.array.add row below":"\xd6nce Satır Ekle","menu.array.add column after":"Sonra S\xfctun Ekle","menu.array.add column before":"\xd6nce S\xfctun Ekle","menu.array.delete row":"Sırayı sil","menu.array.delete rows":"Se\xe7ili Satırları Sil","menu.array.delete column":"S\xfctunu Sil","menu.array.delete columns":"Se\xe7ili S\xfctunları Sil","submenu.array.insert separator":"Ayırıcı Ekle","menu.insert table":"Tablo Ekle","submenu.table style":"Tablo Stili"},uk:{"keyboard.tooltip.functions":"Функції","keyboard.tooltip.symbols":"Символи","keyboard.tooltip.greek":"Грецькі літери","keyboard.tooltip.command":"Командний режим латексу","keyboard.tooltip.numeric":"Числовий","keyboard.tooltip.alphabetic":"Римські літери","tooltip.copy to clipboard":"Копіювати в буфер обміну","tooltip.redo":"Повторити","tooltip.toggle virtual keyboard":"Переключити віртуальну клавіатуру","tooltip.undo":"Скасувати","menu.insert matrix":"Вставити матрицю","menu.insert vector":"Вставити вектор","submenu.array.matrix delimiters":"Матричні роздільники","menu.array.add row above":"Додати рядок після","menu.array.add row below":"Додати рядок до","menu.array.add column after":"Додати стовпець після","menu.array.add column before":"Додати стовпець перед","menu.array.delete row":"Видалити рядок","menu.array.delete rows":"Видалити вибрані рядки","menu.array.delete column":"Видалити стовпець","menu.array.delete columns":"Видалити вибрані стовпці","submenu.array.insert separator":"Вставте роздільник","menu.insert table":"Вставити таблицю","submenu.table style":"Стиль таблиці"},vi:{"keyboard.tooltip.functions":"Chức năng","keyboard.tooltip.symbols":"K\xfd hiệu","keyboard.tooltip.greek":"Chữ Hy Lạp","keyboard.tooltip.command":"Chế độ lệnh LaTeX","keyboard.tooltip.numeric":"Số","keyboard.tooltip.alphabetic":"Chữ c\xe1i La m\xe3","tooltip.copy to clipboard":"Sao ch\xe9p v\xe0o clipboard","tooltip.redo":"L\xe0m lại","tooltip.toggle virtual keyboard":"Chuyển đổi b\xe0n ph\xedm ảo","tooltip.undo":"Ho\xe0n t\xe1c","menu.insert matrix":"Ch\xe8n ma trận","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Dấu ph\xe2n c\xe1ch ma trận","menu.array.add row above":"Th\xeam h\xe0ng sau","menu.array.add row below":"Th\xeam h\xe0ng trước","menu.array.add column after":"Th\xeam cột sau","menu.array.add column before":"Th\xeam cột trước","menu.array.delete row":"X\xf3a h\xe0ng","menu.array.delete rows":"X\xf3a h\xe0ng đ\xe3 chọn","menu.array.delete column":"X\xf3a cột","menu.array.delete columns":"X\xf3a c\xe1c cột đ\xe3 chọn","submenu.array.insert separator":"Ch\xe8n dấu ph\xe2n c\xe1ch","menu.insert table":"Ch\xe8n bảng","submenu.table style":"Kiểu bảng"},zh_cn:{"keyboard.tooltip.functions":"职能","keyboard.tooltip.symbols":"符号","keyboard.tooltip.greek":"希腊字母","keyboard.tooltip.command":"乳胶 命令模式","keyboard.tooltip.numeric":"数字","keyboard.tooltip.alphabetic":"罗马字母","tooltip.copy to clipboard":"复制到剪贴板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切换虚拟键盘","tooltip.undo":"撤消","menu.insert matrix":"插入矩阵","menu.insert vector":"插入向量","submenu.array.matrix delimiters":"矩阵分隔符","menu.array.add row above":"在后面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在后面添加列r","menu.array.add column before":"在前面添加列","menu.array.delete row":"删除行","menu.array.delete rows":"删除选定行","menu.array.delete column":"删除列","menu.array.delete columns":"删除选定的列","submenu.array.insert separator":"插入分隔符","menu.insert table":"插入表格","submenu.table style":"表格样式"},zh_tw:{"keyboard.tooltip.functions":"職能","keyboard.tooltip.symbols":"符號","keyboard.tooltip.greek":"希臘字母","keyboard.tooltip.command":"乳膠命令模式","keyboard.tooltip.numeric":"數字","keyboard.tooltip.alphabetic":"羅馬字母","tooltip.copy to clipboard":"複製到剪貼板","tooltip.redo":"重做","tooltip.toggle virtual keyboard":"切換虛擬鍵盤","tooltip.undo":"撤消","menu.insert matrix":"插入矩陣","menu.insert vector":"插入向量","submenu.array.matrix delimiters":"矩陣分隔符","menu.array.add row above":"在後面添加行","menu.array.add row below":"在前面添加行","menu.array.add column after":"在後面添加列","menu.array.add column before":"在前面添加列","menu.array.delete row":"刪除行","menu.array.delete rows":"刪除選定行","menu.array.delete column":"刪除列","menu.array.delete columns":"刪除選定的列","submenu.array.insert separator":"插入分隔符","menu.insert table":"插入表格","submenu.table style":"表格樣式"}},_locale:"",get locale(){return v._locale||(v._locale=y()?navigator.language.slice(0,5):"en"),v._locale},set locale(t){v._locale=t},merge(e,i){if(e&&i){let r=v._locale;v.locale=e,v.strings[e]=u(u({},v.strings[e]),i),v.locale=r}else if(e&&!i)for(let i of Object.keys(e))v.merge(i,e[i])}};function x(e){if(void 0===e)return;let i=v.locale.slice(0,2),r="";if(v.strings[v.locale]&&(r=v.strings[v.locale][e]),!r&&v.strings[i]&&(r=v.strings[i][e]),r||(r=v.strings.en[e]),r)return r}var w={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},k={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},_={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},S={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},M={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},L={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function C(e){var i,r,a,o,n,s;let l=e.split("!"),c,d,u,h=255,p=255,m=255,f=-1,y=l.length>0&&l[0].startsWith("-");y&&(l[0]=l[0].slice(1));for(let e=0;e<l.length;e++){c=h,d=p,u=m;let y=null==(i=l[e].trim().match(/^([A-Za-z\d]+)/))?void 0:i[1],b=null==y?void 0:y.toLowerCase(),g=y&&null!=(s=null!=(n=null!=(o=null!=(a=null!=(r=S[b])?r:S[M[y]])?a:k[y])?o:L[y])?n:w[y])?s:l[e].trim(),v=g.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(null!=v&&v[1]&&v[2]&&v[3])h=Math.max(0,Math.min(255,Number.parseInt(v[1],16))),p=Math.max(0,Math.min(255,Number.parseInt(v[2],16))),m=Math.max(0,Math.min(255,Number.parseInt(v[3],16)));else if(null!=(v=g.match(/^#([\da-f]{3})$/i))&&v[1]){let e=Number.parseInt(v[1][0],16),i=Number.parseInt(v[1][1],16),r=Number.parseInt(v[1][2],16);h=Math.max(0,Math.min(255,16*e+e)),p=Math.max(0,Math.min(255,16*i+i)),m=Math.max(0,Math.min(255,16*r+r))}else{if(null==(v=g.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i))||!v[1]||!v[2]||!v[3])return;h=Math.max(0,Math.min(255,Number.parseInt(v[1]))),p=Math.max(0,Math.min(255,Number.parseInt(v[2]))),m=Math.max(0,Math.min(255,Number.parseInt(v[3])))}f>=0&&(h=(1-f)*h+f*c,p=(1-f)*p+f*d,m=(1-f)*m+f*u,f=-1),e+1<l.length&&(f=Math.max(0,Math.min(100,Number.parseInt(l[++e])))/100)}return f>=0&&(h=f*h+(1-f)*c,p=f*p+(1-f)*d,m=f*m+(1-f)*u),y&&(h=255-h,p=255-p,m=255-m),"#"+("00"+Math.round(h).toString(16)).slice(-2)+("00"+Math.round(p).toString(16)).slice(-2)+("00"+Math.round(m).toString(16)).slice(-2)}function z(e){var i,r;return null!=(r=null!=(i=_[(e=e.trim()).toLowerCase()])?i:_[M[e]])?r:C(e)}function A(e,i,r){return r<0&&(r+=6),r>=6&&(r-=6),r<1?(i-e)*r+e:r<3?i:r<4?(i-e)*(4-r)+e:e}function E(e){return e<0?0:e>255?255:Math.round(e)}var K={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},D=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function T(e){return e?Array.isArray(e)?e:"object"==typeof e&&"group"in e?e.group:[]:[]}var B,$,P={},O={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},F={},q={},N={iff:"\\;⟺\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",rd:"\\mathrm{d}",rD:"\\mathrm{D}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}",mathstrut:{def:"\\vphantom{(}",primitive:!0},tripledash:{def:"\\vphantom{-}\\raise{4mu}{\\mkern1.5mu\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2.25mu}\\rule{2mu}{1.5mu}\\mkern{2mu}}",expand:!0},"braket.sty":{package:{bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"}},"amsmath.sty":{package:{varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},primitive:!0},"texvc.sty":{package:{darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",N:"\\mathbb{N}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",lArr:"\\Leftarrow",Larr:"\\Leftarrow",lrarr:"\\leftrightarrow",lrArr:"\\Leftrightarrow",Lrarr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",plusmn:"\\pm",rarr:"\\rightarrow",rArr:"\\Rightarrow",Rarr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",weierp:"\\wp",Zeta:"\\mathrm{Z}"},primitive:!1}},R={" ":32,"\\#":35,"\\&":38,"\\$":36,"\\%":37,"-":45,"\\_":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbraceleft":123,"\\textbraceright":125,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"–":8211,"—":8212,"‘":8216,"’":8217,"“":8220,"”":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},I=/[\w!@*()-=+{}[\]\\';:?/.,~<>`|$%#&^" ]/;function V(e,i,r="mord",a){void 0!==i&&(P[e]={definitionType:"symbol",type:r,variant:a,codepoint:i},O[i]||(O[i]=e),R[e]||(R[e]=i))}function j(e,i,r){if("string"==typeof e){for(let i=0;i<e.length;i++){let r=e.charAt(i);V(r,r.codePointAt(0))}return}for(let[a,o,n,s]of e)V(a,o,null!=n?n:i,null!=s?s:r)}function H(e,i){for(let r=e;r<=i;r++)V(String.fromCodePoint(r),r)}function W(e){let i="auto",r=e.match(/:([^=]+)/);return r&&(i=r[1].trim()),i}function U(e){if(!e)return[];let i=[],r=e.split("]");if(r[0].startsWith("[")){i.push({isOptional:!0,type:W(r[0].slice(1))});for(let e=1;e<=r.length;e++)i.push(...U(r[e]))}else if((r=e.split("}"))[0].startsWith("{")){i.push({isOptional:!1,type:W(r[0].slice(1))});for(let e=1;e<=r.length;e++)i.push(...U(r[e]))}return i}function J(e){if(!e)return"";let i="",r=!0;for(let a of e)"string"==typeof a.value?i+=a.value:r=!1;return r?i:""}function X(e,i){"string"==typeof e&&(e=[e]);let r={tabular:!1,params:[],createAtom:i};for(let i of e)q[i]=r}function G(e,i,r){"string"==typeof e&&(e=[e]);let a={tabular:!0,params:U(i),createAtom:r};for(let i of e)q[i]=a}function Z(e,i,r){var a,o;r||(r={});let n={definitionType:"function",params:U(i),ifMode:r.ifMode,isFunction:null!=(a=r.isFunction)&&a,applyMode:r.applyMode,infix:null!=(o=r.infix)&&o,createAtom:r.createAtom,applyStyle:r.applyStyle,serialize:r.serialize,render:r.render};if("string"==typeof e)F["\\"+e]=n;else for(let i of e)F["\\"+i]=n}function Y(e){return aW||(aW=ee(N)),e?ee(u(u({},aW),e)):aW}function Q(e,i){var r,a,o,n;if("string"==typeof e){let o=0;return/(^|[^\\])#1/.test(e)&&(o=1),/(^|[^\\])#2/.test(e)&&(o=2),/(^|[^\\])#3/.test(e)&&(o=3),/(^|[^\\])#4/.test(e)&&(o=4),/(^|[^\\])#5/.test(e)&&(o=5),/(^|[^\\])#6/.test(e)&&(o=6),/(^|[^\\])#7/.test(e)&&(o=7),/(^|[^\\])#8/.test(e)&&(o=8),/(^|[^\\])#9/.test(e)&&(o=9),{expand:null==(r=null==i?void 0:i.expand)||r,captureSelection:null==(a=null==i?void 0:i.captureSelection)||a,args:o,def:e}}return u({expand:null==(o=null==i?void 0:i.expand)||o,captureSelection:null==(n=null==i?void 0:i.captureSelection)||n,args:0},e)}function ee(e){if(!e)return{};let i={};for(let r of Object.keys(e)){let a=e[r];if(null==a)delete i[r];else if("object"==typeof a&&"package"in a)for(let e of Object.keys(a.package))i[e]=Q(a.package[e],{expand:!a.primitive,captureSelection:a.captureSelection});else i[r]=Q(a)}return i}function et(e,i="math"){if(!e||0===e.length)return null;let r=null;if(e.startsWith("\\")){if(r=F[e])return r.ifMode&&r.ifMode!==i?null:r;"math"===i?r=P[e]:R[e]&&(r={definitionType:"symbol",type:"mord",codepoint:R[e]})}else if("math"===i){if(!(r=P[e])&&1===e.length){let i=er("math",e.codePointAt(0));return i.startsWith("\\")?h(u({},et(i,"math")),{command:i}):null}}else R[e]?r={definitionType:"symbol",type:"mord",codepoint:R[e]}:"text"===i&&(r={definitionType:"symbol",type:"mord",codepoint:e.codePointAt(0)});return r&&"symbol"===r.definitionType&&"mord"===r.type&&(102===r.codepoint||103===r.codepoint||104===r.codepoint)&&(r.isFunction=!0),null!=r?r:null}function ei(e,i){return e.startsWith("\\")?i[e.slice(1)]:null}function er(e,i){if(void 0===i)return"";if("math"===e&&O[i])return O[i];if("text"===e){let e=Object.keys(R).find(e=>R[e]===i);if(!e){let r=i.toString(16);e="^".repeat(r.length)+r}return e}return String.fromCodePoint(i)}!function(){if(!y())return!0;if(/firefox/i.test(navigator.userAgent)){let e=navigator.userAgent.match(/firefox\/(\d+)/i);return!!e&&parseInt(e[1])>=78}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let e=navigator.userAgent.match(/edg\/(\d+)/i);return!!e&&parseInt(e[1])>=79}return!0}()?(B=/[a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/,$=/[\da-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/):(B=RegExp("\\p{Letter}","u"),$=RegExp("[0-9\\p{Letter}]","u"));var ea=[0,.68889,0,0,.72222],eo=[0,.68889,0,0,.66667],en=[0,.68889,0,0,.77778],es=[0,.68889,0,0,.61111],el=[.16667,.68889,0,0,.77778],ec=[0,.68889,0,0,.55556],ed=[0,0,0,0,.25],eu=[0,.825,0,0,2.33334],eh=[0,.9,0,0,2.33334],ep=[0,.68889,0,0,.54028],em=[-.03598,.46402,0,0,.5],ef=[-.13313,.36687,0,0,1],ey=[.01354,.52239,0,0,1],eb=[.01354,.52239,0,0,1.11111],eg=[0,.54986,0,0,1],ev=[0,.69224,0,0,.5],ex=[0,.43056,0,0,1],ew=[.08198,.58198,0,0,.77778],ek=[.19444,.69224,0,0,.41667],e_=[.1808,.675,0,0,1],eS=[.19444,.69224,0,0,.83334],eM=[.13667,.63667,0,0,1],eL=[-.064,.437,0,0,1.334],eC=[.08167,.58167,0,0,.77778],ez=[0,.69224,0,0,.72222],eA=[0,.69224,0,0,.66667],eE=[-.13313,.36687,0,0,.77778],eK=[.06062,.54986,0,0,.77778],eD=[0,.69224,0,0,.77778],eT=[.25583,.75583,0,0,.77778],eB=[.25142,.75726,0,0,.77778],e$=[.20576,.70576,0,0,.77778],eP=[.30274,.79383,0,0,.77778],eO=[.22958,.72958,0,0,.77778],eF=[.1808,.675,0,0,.77778],eq=[.13667,.63667,0,0,.77778],eN=[.13597,.63597,0,0,.77778],eR=[.03517,.54986,0,0,.77778],eI=[0,.675,0,0,.77778],eV=[.19444,.69224,0,0,.61111],ej=[0,.54986,0,0,.76042],eH=[0,.54986,0,0,.66667],eW=[.0391,.5391,0,0,.77778],eU=[.03517,.54986,0,0,1.33334],eJ=[.38569,.88569,0,0,.77778],eX=[.23222,.74111,0,0,.77778],eG=[.19444,.69224,0,0,.77778],eZ=[0,.37788,0,0,.5],eY=[0,.54986,0,0,.72222],eQ=[0,.69224,0,0,.83334],e0=[.11111,.69224,0,0,.66667],e1=[.26167,.75726,0,0,.77778],e4=[.48256,.98256,0,0,.77778],e2=[.28481,.79383,0,0,.77778],e3=[.08167,.58167,0,0,.22222],e6=[.08167,.58167,0,0,.38889],e8=[0,.43056,.04028,0,.66667],e5=[.41951,.91951,0,0,.77778],e7=[.24982,.74947,0,0,.38865],e9=[.08319,.58283,0,0,.75623],te=[0,.10803,0,0,.27764],tt=[0,.47534,0,0,.50181],ti=[.18906,.47534,0,0,.50181],tr=[0,.69141,0,0,.50181],ta=[.24982,.74947,0,0,.27764],to=[0,.69141,0,0,.21471],tn=[.25,.75,0,0,.44722],ts=[0,.64444,0,0,.575],tl=[.08556,.58556,0,0,.89444],tc=[0,.69444,0,0,.89444],td=[0,.68611,0,0,.9],tu=[0,.68611,0,0,.86944],th=[.25,.75,0,0,.575],tp=[.25,.75,0,0,.31944],tm=[0,.69444,0,0,.63889],tf=[0,.69444,0,0,.31944],ty=[0,.44444,0,0,.63889],tb=[0,.44444,0,0,.51111],tg=[0,.69444,0,0,.575],tv=[.13333,.63333,0,0,.89444],tx=[0,.44444,0,0,.31944],tw=[0,.69444,0,0,.86944],tk=[0,.68611,0,0,.69166],t_=[0,.68611,0,0,.83055],tS=[0,.68611,0,0,.89444],tM=[0,.69444,0,0,.60278],tL=[.19444,.69444,0,0,.51111],tC=[0,.69444,0,0,.83055],tz=[-.10889,.39111,0,0,1.14999],tA=[.19444,.69444,0,0,.575],tE=[.19444,.69444,0,0,1.14999],tK=[.19444,.69444,0,0,.70277],tD=[.05556,.75,0,0,.575],tT=[0,.68611,0,0,.95833],tB=[.08556,.58556,0,0,.76666],t$=[-.02639,.47361,0,0,.575],tP=[0,.44444,0,0,.89444],tO=[0,.55556,0,0,.76666],tF=[-.10889,.39111,0,0,.89444],tq=[.00222,.50222,0,0,.89444],tN=[.19667,.69667,0,0,.89444],tR=[.08556,.58556,0,0,1.14999],tI=[0,.69444,0,0,.70277],tV=[-.02778,.47222,0,0,.575],tj=[.25,.75,0,0,.51111],tH=[-.13889,.36111,0,0,1.14999],tW=[.19444,.69444,0,0,1.02222],tU=[.12963,.69444,0,0,.89444],tJ=[.19444,.69444,0,0,.44722],tX=[0,.64444,.13167,0,.59111],tG=[.19444,.64444,.13167,0,.59111],tZ=[0,.68611,.17208,0,.8961],tY=[.19444,.44444,.105,0,.53222],tQ=[0,.44444,.085,0,.82666],t0=[0,.69444,.06709,0,.59111],t1=[0,.69444,.12945,0,.35555],t4=[0,.69444,0,0,.94888],t2=[0,.69444,.11472,0,.59111],t3=[0,.68611,.10778,0,.88555],t6=[0,.69444,.07939,0,.62055],t8=[0,.69444,.12417,0,.30667],t5=[0,.64444,.13556,0,.51111],t7=[.19444,.64444,.13556,0,.51111],t9=[0,.68333,.16389,0,.74333],ie=[.19444,.43056,.08847,0,.46],it=[0,.43056,.07514,0,.71555],ii=[0,.69444,.06646,0,.51111],ir=[0,.69444,0,0,.83129],ia=[0,.69444,.1225,0,.51111],io=[0,.68333,.09403,0,.76666],is=[0,.68333,.11111,0,.76666],il=[0,.69444,.06961,0,.51444],ic=[0,.69444,0,0,.27778],id=[.25,.75,0,0,.38889],iu=[0,.64444,0,0,.5],ih=[0,.69444,0,0,.77778],ip=[0,.68333,0,0,.75],im=[0,.68333,0,0,.77778],iy=[0,.68333,0,0,.68056],ib=[0,.68333,0,0,.72222],ig=[.25,.75,0,0,.5],iv=[.25,.75,0,0,.27778],ix=[0,.69444,0,0,.5],iw=[0,.69444,0,0,.55556],ik=[0,.43056,0,0,.44445],i_=[0,.43056,0,0,.5],iS=[.19444,.43056,0,0,.55556],iM=[0,.43056,0,0,.55556],iL=[.08333,.58333,0,0,.77778],iC=[0,.43056,0,0,.27778],iz=[0,.66786,0,0,.27778],iA=[0,.69444,0,0,.75],iE=[0,.66786,0,0,.5],iK=[0,.68333,0,0,.625],iD=[.19444,.69444,0,0,.44445],iT=[0,.69444,0,0,.72222],iB=[.19444,.69444,0,0,.5],i$=[.19444,.69444,0,0,1],iP=[.011,.511,0,0,1.126],iO=[.19444,.69444,0,0,.61111],iF=[.05556,.75,0,0,.5],iq=[0,.68333,0,0,.83334],iN=[.0391,.5391,0,0,.66667],iR=[-.05555,.44445,0,0,.5],iI=[0,.43056,0,0,.77778],iV=[0,.55556,0,0,.66667],ij=[-.03625,.46375,0,0,.77778],iH=[-.01688,.48312,0,0,.77778],iW=[.0391,.5391,0,0,1],iU=[0,.69444,0,0,.61111],iJ=[-.03472,.46528,0,0,.5],iX=[.25,.75,0,0,.44445],iG=[-.14236,.35764,0,0,1],iZ=[.244,.744,0,0,.412],iY=[.19444,.69444,0,0,.88889],iQ=[.12963,.69444,0,0,.77778],i0=[.19444,.69444,0,0,.38889],i1=[.011,.511,0,0,1.638],i4=[.19444,.69444,0,0,0],i2=[0,.44444,0,0,.575],i3=[.19444,.44444,0,0,.575],i6=[0,.68611,0,0,.75555],i8=[0,.69444,0,0,.66759],i5=[0,.68611,0,0,.80555],i7=[0,.68611,.08229,0,.98229],i9=[0,.68611,0,0,.76666],re=[0,.44444,0,0,.58472],rt=[.19444,.44444,0,0,.6118],ri=[.19444,.43056,0,0,.5],rr=[0,.68333,.02778,.08334,.76278],ra=[0,.68333,.08125,.05556,.83125],ro=[0,.43056,0,.05556,.48472],rn=[.19444,.43056,0,.08334,.51702],rs=[.25,.75,0,0,.42778],rl=[0,.69444,0,0,.55],rc=[0,.69444,0,0,.73334],rd=[0,.69444,0,0,.79445],ru=[0,.69444,0,0,.51945],rh=[0,.69444,0,0,.70278],rp=[0,.69444,0,0,.76389],rm=[.25,.75,0,0,.34306],rf=[0,.69444,0,0,.56111],ry=[0,.69444,0,0,.25556],rb=[.19444,.45833,0,0,.56111],rg=[0,.45833,0,0,.56111],rv=[0,.69444,0,0,.30556],rx=[0,.69444,0,0,.58056],rw=[0,.69444,0,0,.67223],rk=[0,.69444,0,0,.85556],r_=[0,.69444,0,0,.55834],rS=[0,.65556,.11156,0,.5],rM=[0,.69444,.08094,0,.70834],rL=[.17014,0,0,0,.44445],rC=[0,.69444,.0799,0,.5],rz=[0,.69444,0,0,.73752],rA=[0,.69444,.09205,0,.5],rE=[0,.69444,.09031,0,.77778],rK=[0,.69444,.07816,0,.27778],rD=[0,.69444,.00316,0,.5],rT=[.19444,.69444,0,0,.83334],rB=[.05556,.75,0,0,.83334],r$=[0,.75,0,0,.5],rP=[.125,.08333,0,0,.27778],rO=[0,.08333,0,0,.27778],rF=[0,.65556,0,0,.5],rq=[0,.69444,0,0,.47222],rN=[0,.69444,0,0,.66667],rR=[0,.69444,0,0,.59722],rI=[0,.69444,0,0,.54167],rV=[0,.69444,0,0,.70834],rj=[.25,.75,0,0,.28889],rH=[0,.69444,0,0,.51667],rW=[0,.44444,0,0,.44445],rU=[.19444,.44444,0,0,.51667],rJ=[0,.44444,0,0,.38333],rX=[0,.44444,0,0,.51667],rG=[0,.69444,0,0,.83334],rZ=[.35001,.85,0,0,.45834],rY=[.35001,.85,0,0,.57778],rQ=[.35001,.85,0,0,.41667],r0=[.35001,.85,0,0,.58334],r1=[0,.72222,0,0,.55556],r4=[1e-5,.6,0,0,.66667],r2=[1e-5,.6,0,0,.77778],r3=[.25001,.75,0,0,.94445],r6=[.306,.805,.19445,0,.47222],r8=[.30612,.805,.19445,0,.47222],r5=[.25001,.75,0,0,.83334],r7=[.35001,.85,0,0,.47222],r9=[.25001,.75,0,0,1.11111],ae=[.65002,1.15,0,0,.59722],at=[.65002,1.15,0,0,.81111],ai=[.65002,1.15,0,0,.47222],ar=[.65002,1.15,0,0,.66667],aa=[0,.75,0,0,1],ao=[.55001,1.05,0,0,1.27778],an=[.862,1.36,.44445,0,.55556],as=[.86225,1.36,.44445,0,.55556],al=[.55001,1.05,0,0,1.11111],ac=[.65002,1.15,0,0,.52778],ad=[.65002,1.15,0,0,.61111],au=[.55001,1.05,0,0,1.51112],ah=[.95003,1.45,0,0,.73611],ap=[.95003,1.45,0,0,1.04445],am=[.95003,1.45,0,0,.52778],af=[.95003,1.45,0,0,.75],ay=[0,.75,0,0,1.44445],ab=[.95003,1.45,0,0,.58334],ag=[1.25003,1.75,0,0,.79167],av=[1.25003,1.75,0,0,1.27778],ax=[1.25003,1.75,0,0,.58334],aw=[1.25003,1.75,0,0,.80556],ak=[0,.825,0,0,1.8889],a_=[1.25003,1.75,0,0,.63889],aS=[.64502,1.155,0,0,.875],aM=[1e-5,.6,0,0,.875],aL=[-.00099,.601,0,0,.66667],aC=[.64502,1.155,0,0,.66667],az=[1e-5,.9,0,0,.88889],aA=[.65002,1.15,0,0,.88889],aE=[.90001,0,0,0,.88889],aK=[-.00499,.605,0,0,1.05556],aD=[0,.12,0,0,.45],aT=[0,.61111,0,0,.525],aB=[.08333,.69444,0,0,.525],a$=[-.08056,.53055,0,0,.525],aP=[-.05556,.55556,0,0,.525],aO=[0,.43056,0,0,.525],aF=[.22222,.43056,0,0,.525],aq=[0,0,0,0,.525],aN={"AMS-Regular":{32:ed,65:ea,66:eo,67:ea,68:ea,69:eo,70:es,71:en,72:en,73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:en,76:eo,77:[0,.68889,0,0,.94445],78:ea,79:el,80:es,81:el,82:ea,83:ec,84:eo,85:ea,86:ea,87:[0,.68889,0,0,1],88:ea,89:ea,90:eo,107:ec,160:ed,165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:ec,295:ep,710:eu,732:eh,770:eu,771:eh,989:eC,1008:e8,8245:[0,.54986,0,0,.275],8463:ep,8487:ea,8498:ec,8502:eo,8503:[0,.68889,0,0,.44445],8504:eo,8513:[0,.68889,0,0,.63889],8592:em,8594:em,8602:ef,8603:ef,8606:ey,8608:ey,8610:eb,8611:eb,8619:eg,8620:eg,8621:[-.13313,.37788,0,0,1.38889],8622:ef,8624:ev,8625:ev,8630:ex,8631:ex,8634:ew,8635:ew,8638:ek,8639:ek,8642:ek,8643:ek,8644:e_,8646:e_,8647:e_,8648:eS,8649:e_,8650:eS,8651:ey,8652:ey,8653:ef,8654:ef,8655:ef,8666:eM,8667:eM,8669:[-.13313,.37788,0,0,1],8672:eL,8674:eL,8705:[0,.825,0,0,.5],8708:ec,8709:eC,8717:[0,.43056,0,0,.42917],8722:em,8724:[.08198,.69224,0,0,.77778],8726:eC,8733:eD,8736:ez,8737:ez,8738:[.03517,.52239,0,0,.72222],8739:e3,8740:[.25142,.74111,0,0,.27778],8741:e6,8742:[.25142,.74111,0,0,.5],8756:eA,8757:eA,8764:eE,8765:[-.13313,.37788,0,0,.77778],8769:eE,8770:ij,8774:eP,8776:iH,8778:eC,8782:eK,8783:eK,8785:ew,8786:ew,8787:ew,8790:eD,8791:eO,8796:[.08198,.91667,0,0,.77778],8806:eT,8807:eT,8808:eB,8809:eB,8812:[.25583,.75583,0,0,.5],8814:e$,8815:e$,8816:eP,8817:eP,8818:eO,8819:eO,8822:eF,8823:eF,8828:eq,8829:eq,8830:eO,8831:eO,8832:e$,8833:e$,8840:eP,8841:eP,8842:eN,8843:eN,8847:eR,8848:eR,8858:ew,8859:ew,8861:ew,8862:eI,8863:eI,8864:eI,8865:eI,8872:[0,.69224,0,0,.61111],8873:ez,8874:[0,.69224,0,0,.88889],8876:es,8877:es,8878:ea,8879:ea,8882:eR,8883:eR,8884:eq,8885:eq,8888:[0,.54986,0,0,1.11111],8890:iS,8891:eV,8892:eV,8901:[0,.54986,0,0,.27778],8903:eC,8905:eC,8906:eC,8907:eD,8908:eD,8909:[-.03598,.46402,0,0,.77778],8910:ej,8911:ej,8912:eR,8913:eR,8914:eH,8915:eH,8916:eA,8918:eW,8919:eW,8920:eU,8921:eU,8922:eJ,8923:eJ,8926:eq,8927:eq,8928:eP,8929:eP,8934:eX,8935:eX,8936:eX,8937:eX,8938:e$,8939:e$,8940:eP,8941:eP,8994:eG,8995:eG,9416:[.15559,.69224,0,0,.90222],9484:ev,9488:ev,9492:eZ,9496:eZ,9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:eI,9633:eI,9650:eY,9651:eY,9654:eR,9660:eY,9661:eY,9664:eR,9674:e0,9733:[.19444,.69224,0,0,.94445],10003:eQ,10016:eQ,10731:e0,10846:[.19444,.75583,0,0,.61111],10877:eq,10878:eq,10885:eT,10886:eT,10887:eN,10888:eN,10889:e1,10890:e1,10891:e4,10892:e4,10901:eq,10902:eq,10933:eB,10934:eB,10935:e1,10936:e1,10937:e1,10938:e1,10949:eT,10950:eT,10955:e2,10956:e2,57350:e3,57351:e6,57352:eC,57353:e8,57356:eB,57357:eB,57358:e5,57359:eP,57360:eP,57361:e5,57366:eB,57367:eB,57368:eB,57369:eB,57370:eN,57371:eN},"Caligraphic-Regular":{32:ed,65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:ed},"Fraktur-Regular":{32:ed,33:[0,.69141,0,0,.29574],34:to,38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:e7,41:e7,42:[0,.62119,0,0,.27764],43:e9,44:te,45:e9,46:te,47:[.24982,.74947,0,0,.50181],48:tt,49:tt,50:tt,51:ti,52:ti,53:ti,54:tr,55:ti,56:tr,57:ti,58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:ta,93:ta,94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:ed,8216:to,8217:to,58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:ed,33:[0,.69444,0,0,.35],34:tM,35:[.19444,.69444,0,0,.95833],36:tD,37:[.05556,.75,0,0,.95833],38:tc,39:tf,40:tn,41:tn,42:[0,.75,0,0,.575],43:tv,44:[.19444,.15556,0,0,.31944],45:rJ,46:[0,.15556,0,0,.31944],47:th,48:ts,49:ts,50:ts,51:ts,52:ts,53:ts,54:ts,55:ts,56:ts,57:ts,58:tx,59:[.19444,.44444,0,0,.31944],60:tl,61:tF,62:tl,63:[0,.69444,0,0,.54305],64:tc,65:tu,66:[0,.68611,0,0,.81805],67:t_,68:[0,.68611,0,0,.88194],69:i6,70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:td,73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:tk,77:[0,.68611,0,0,1.09166],78:td,79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:tu,89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:tp,92:th,93:tp,94:tg,95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:tm,99:tb,100:tm,101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:tm,105:tf,106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:tf,109:[0,.44444,0,0,.95833],110:ty,111:i2,112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:ty,118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:tb,123:th,124:tp,125:th,126:[.35,.34444,0,0,.575],160:ed,163:[0,.69444,0,0,.86853],168:tg,172:[0,.44444,0,0,.76666],176:tw,177:tv,184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:tv,216:[.04861,.73472,0,0,.89444],223:rR,230:[0,.44444,0,0,.83055],247:tv,248:[.09722,.54167,0,0,.575],305:tx,338:[0,.68611,0,0,1.16944],339:tP,567:[.19444,.44444,0,0,.35139],710:tg,711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:tg,715:tg,728:tg,729:tf,730:tw,732:tg,733:tg,915:tk,916:tT,920:tS,923:i5,926:i9,928:td,931:t_,933:tS,934:t_,936:tS,937:t_,8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:tf,8217:tf,8220:tM,8221:tM,8224:tL,8225:tL,8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:i8,8465:tC,8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:tC,8501:tI,8592:tz,8593:tA,8594:tz,8595:tA,8596:tz,8597:th,8598:tE,8599:tE,8600:tE,8601:tE,8636:tz,8637:tz,8640:tz,8641:tz,8656:tz,8657:tK,8658:tz,8659:tK,8660:tz,8661:[.25,.75,0,0,.70277],8704:tm,8706:[0,.69444,.06389,0,.62847],8707:tm,8709:tD,8711:tT,8712:tB,8715:tB,8722:tv,8723:tv,8725:th,8726:th,8727:tV,8728:t$,8729:t$,8730:[.18,.82,0,0,.95833],8733:tP,8734:[0,.44444,0,0,1.14999],8736:ez,8739:tp,8741:th,8743:tO,8744:tO,8745:tO,8746:tO,8747:[.19444,.69444,.12778,0,.56875],8764:tF,8768:[.19444,.69444,0,0,.31944],8771:tq,8776:[.02444,.52444,0,0,.89444],8781:tq,8801:tq,8804:tN,8805:tN,8810:tR,8811:tR,8826:tl,8827:tl,8834:tl,8835:tl,8838:tN,8839:tN,8846:tO,8849:tN,8850:tN,8851:tO,8852:tO,8853:tv,8854:tv,8855:tv,8856:tv,8857:tv,8866:tI,8867:tI,8868:tc,8869:tc,8900:t$,8901:[-.02639,.47361,0,0,.31944],8902:tV,8968:tj,8969:tj,8970:tj,8971:tj,8994:tH,8995:tH,9651:tW,9657:tV,9661:tW,9667:tV,9711:tE,9824:tU,9825:tU,9826:tU,9827:tU,9837:[0,.75,0,0,.44722],9838:tJ,9839:tJ,10216:tn,10217:tn,10815:td,10927:tN,10928:tN,57376:i4},"Main-BoldItalic":{32:ed,33:[0,.69444,.11417,0,.38611],34:t6,35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:t1,40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:tX,49:tX,50:tX,51:tX,52:tG,53:tX,54:tX,55:tG,56:tX,57:tX,58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:t2,64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:tZ,73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:tZ,79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:t0,95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:tY,104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:tY,114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:ed,168:[0,.69444,.11473,0,.59111],176:t4,184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:tQ,248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:tQ,567:[.19444,.44444,.04611,0,.385],710:t0,711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:t1,730:t4,732:t2,733:t2,915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:tZ,931:[0,.68611,.11431,0,.82666],933:t3,934:[0,.68611,.05632,0,.82666],936:t3,937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:t1,8217:t1,8220:[0,.69444,.16772,0,.62055],8221:t6},"Main-Italic":{32:ed,33:t8,34:il,35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:t8,40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:t5,49:t5,50:t5,51:t5,52:t7,53:t5,54:t5,55:t7,56:t5,57:t5,58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:ia,64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:t9,73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:t9,79:io,80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:t9,86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:ii,95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:ie,104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:ie,114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:ed,168:[0,.66786,.10474,0,.51111],176:ir,184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:it,248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:it,710:ii,711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:ir,732:[0,.66786,.11585,0,.51111],733:ia,915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:io,923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:t9,931:[0,.68333,.12028,0,.71555],933:is,934:[0,.68333,.05986,0,.71555],936:is,937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:t8,8217:t8,8220:[0,.69444,.1685,0,.51444],8221:il,8463:ep},"Main-Regular":{32:ed,33:ic,34:ix,35:rT,36:iF,37:rB,38:ih,39:ic,40:id,41:id,42:r$,43:iL,44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:ig,48:iu,49:iu,50:iu,51:iu,52:iu,53:iu,54:iu,55:iu,56:iu,57:iu,58:iC,59:[.19444,.43056,0,0,.27778],60:eW,61:eE,62:eW,63:rq,64:ih,65:ip,66:[0,.68333,0,0,.70834],67:ib,68:[0,.68333,0,0,.76389],69:iy,70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:ip,73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:im,76:iK,77:[0,.68333,0,0,.91667],78:ip,79:im,80:iy,81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:ib,85:ip,86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:ip,89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:iv,92:ig,93:iv,94:ix,95:[.31,.12056,.02778,0,.5],97:i_,98:iw,99:ik,100:iw,101:ik,102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:iw,105:iz,106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:ic,109:[0,.43056,0,0,.83334],110:iM,111:i_,112:iS,113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:iM,118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:ik,123:ig,124:iv,125:ig,126:[.35,.31786,0,0,.5],160:ed,163:[0,.69444,0,0,.76909],167:iD,168:iE,172:[0,.43056,0,0,.66667],176:iA,177:iL,182:iO,184:rL,198:[0,.68333,0,0,.90278],215:iL,216:[.04861,.73194,0,0,.77778],223:ix,230:[0,.43056,0,0,.72222],247:iL,248:[.09722,.52778,0,0,.5],305:iC,338:[0,.68333,0,0,1.01389],339:iI,567:[.19444,.43056,0,0,.30556],710:ix,711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:ix,715:ix,728:ix,729:iz,730:iA,732:iE,733:ix,915:iK,916:iq,920:im,923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:ip,931:ib,933:im,934:ib,936:im,937:ib,8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:ic,8217:ic,8220:ix,8221:ix,8224:iD,8225:iD,8230:[0,.12,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:ep,8465:iT,8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:iT,8501:iU,8592:ef,8593:iB,8594:ef,8595:iB,8596:ef,8597:ig,8598:i$,8599:i$,8600:i$,8601:i$,8614:[.011,.511,0,0,1],8617:iP,8618:iP,8636:ef,8637:ef,8640:ef,8641:ef,8652:[.011,.671,0,0,1],8656:ef,8657:iO,8658:ef,8659:iO,8660:ef,8661:[.25,.75,0,0,.61111],8704:iw,8706:[0,.69444,.05556,.08334,.5309],8707:iw,8709:iF,8711:iq,8712:iN,8715:iN,8722:iL,8723:iL,8725:ig,8726:ig,8727:iJ,8728:iR,8729:iR,8730:[.2,.8,0,0,.83334],8733:iI,8734:ex,8736:ez,8739:iv,8741:ig,8743:iV,8744:iV,8745:iV,8746:iV,8747:[.19444,.69444,.11111,0,.41667],8764:eE,8768:[.19444,.69444,0,0,.27778],8771:ij,8773:[-.022,.589,0,0,1],8776:iH,8781:ij,8784:[-.133,.67,0,0,.778],8801:ij,8804:eN,8805:eN,8810:iW,8811:iW,8826:eW,8827:eW,8834:eW,8835:eW,8838:eN,8839:eN,8846:iV,8849:eN,8850:eN,8851:iV,8852:iV,8853:iL,8854:iL,8855:iL,8856:iL,8857:iL,8866:iU,8867:iU,8868:ih,8869:ih,8872:[.249,.75,0,0,.867],8900:iR,8901:[-.05555,.44445,0,0,.27778],8902:iJ,8904:[.005,.505,0,0,.9],8942:[.03,.9,0,0,.278],8943:[-.19,.31,0,0,1.172],8945:[-.1,.82,0,0,1.282],8968:iX,8969:iX,8970:iX,8971:iX,8994:iG,8995:iG,9136:iZ,9137:iZ,9651:iY,9657:iJ,9661:iY,9667:iJ,9711:i$,9824:iQ,9825:iQ,9826:iQ,9827:iQ,9837:[0,.75,0,0,.38889],9838:i0,9839:i0,10216:id,10217:id,10222:iZ,10223:iZ,10229:[.011,.511,0,0,1.609],10230:i1,10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:i1,10815:ip,10927:eN,10928:eN,57376:i4},"Math-BoldItalic":{32:ed,48:i2,49:i2,50:i2,51:i3,52:i3,53:i3,54:ts,55:i3,56:ts,57:i3,65:tu,66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:i7,73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:i6,77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:i8,105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:re,112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:ed,915:[0,.68611,.15972,0,.65694],916:tT,920:[0,.68611,.03194,0,.86722],923:i5,926:[0,.68611,.07458,0,.84125],928:i7,931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:i9,936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:re,960:[0,.44444,.03704,0,.68241],961:rt,962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:rt,1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:ed,48:i_,49:i_,50:i_,51:ri,52:ri,53:ri,54:iu,55:ri,56:iu,57:ri,65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:ra,73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:rr,80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:ro,112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:ed,915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:rr,923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:ra,931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:ro,960:[0,.43056,.03588,0,.57003],961:rn,962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:rn,1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:ed,33:[0,.69444,0,0,.36667],34:r_,35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:rv,40:rs,41:rs,42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:rl,49:rl,50:rl,51:rl,52:rl,53:rl,54:rl,55:rl,56:rl,57:rl,58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:ru,64:rc,65:rc,66:rc,67:rh,68:rd,69:[0,.69444,0,0,.64167],70:iU,71:rc,72:rd,73:[0,.69444,0,0,.33056],74:ru,75:rp,76:rx,77:[0,.69444,0,0,.97778],78:rd,79:rd,80:rh,81:[.10556,.69444,0,0,.79445],82:rh,83:iU,84:rc,85:rp,86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:rc,89:[0,.69444,.0275,0,.73334],90:rw,91:rm,93:rm,94:rl,95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:rf,99:[0,.45833,0,0,.48889],100:rf,101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:rf,105:ry,106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:ry,109:[0,.45833,0,0,.86667],110:rg,111:[0,.45833,0,0,.55],112:rb,113:rb,114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:rg,118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:ed,168:rl,176:rc,180:rl,184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:rl,711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:rl,729:rv,730:rc,732:rl,733:rl,915:rx,916:[0,.69444,0,0,.91667],920:rk,923:rw,926:rc,928:rd,931:rd,933:rk,934:rd,936:rk,937:rd,8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:rv,8217:rv,8220:r_,8221:r_},"SansSerif-Italic":{32:ed,33:[0,.69444,.05733,0,.31945],34:rD,35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:rK,40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:rP,45:[0,.44444,.01946,0,.33333],46:rO,47:[.25,.75,.13164,0,.5],48:rS,49:rS,50:rS,51:rS,52:rS,53:rS,54:rS,55:rS,56:rS,57:rS,58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:rN,66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:rM,73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:rI,77:[0,.69444,.08094,0,.875],78:rM,79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:rC,95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:ed,168:[0,.67937,.06385,0,.5],176:rz,184:rL,305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:rC,711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:rA,715:ix,728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:rz,732:[0,.67659,.08826,0,.5],733:rA,915:[0,.69444,.13372,0,.54167],916:rG,920:[0,.69444,.07555,0,.77778],923:iU,926:[0,.69444,.12816,0,.66667],928:rM,931:[0,.69444,.11983,0,.72222],933:rE,934:[0,.69444,.04603,0,.72222],936:rE,937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:rK,8217:rK,8220:[0,.69444,.14205,0,.5],8221:rD},"SansSerif-Regular":{32:ed,33:[0,.69444,0,0,.31945],34:ix,35:rT,36:iF,37:rB,38:[0,.69444,0,0,.75834],39:ic,40:id,41:id,42:r$,43:iL,44:rP,45:[0,.44444,0,0,.33333],46:rO,47:ig,48:rF,49:rF,50:rF,51:rF,52:rF,53:rF,54:rF,55:rF,56:rF,57:rF,58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:rq,64:rN,65:rN,66:rN,67:tm,68:[0,.69444,0,0,.72223],69:rR,70:[0,.69444,0,0,.56945],71:rN,72:rV,73:ic,74:rq,75:[0,.69444,0,0,.69445],76:rI,77:[0,.69444,0,0,.875],78:rV,79:[0,.69444,0,0,.73611],80:tm,81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:iw,84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:rN,89:[0,.69444,.025,0,.66667],90:iU,91:rj,93:rj,94:ix,95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:rH,99:rW,100:rH,101:rW,102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:rH,105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:rX,111:[0,.44444,0,0,.5],112:rU,113:rU,114:[0,.44444,.01389,0,.34167],115:rJ,116:[0,.57143,0,0,.36111],117:rX,118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:ed,168:[0,.67937,0,0,.5],176:rN,184:rL,305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:ix,711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:ix,715:ix,728:ix,729:[0,.67937,0,0,.27778],730:rN,732:[0,.67659,0,0,.5],733:ix,915:rI,916:rG,920:ih,923:iU,926:rN,928:rV,931:iT,933:ih,934:iT,936:ih,937:iT,8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:ic,8217:ic,8220:ix,8221:ix},"Script-Regular":{32:ed,65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:ed},"Size1-Regular":{32:ed,40:rZ,41:rZ,47:rY,91:rQ,92:rY,93:rQ,123:r0,125:r0,160:ed,710:r1,732:r1,770:r1,771:r1,8214:[-.00099,.601,0,0,.77778],8593:r4,8595:r4,8657:r2,8659:r2,8719:r3,8720:r3,8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:r8,8748:r6,8749:r6,8750:r8,8896:r5,8897:r5,8898:r5,8899:r5,8968:r7,8969:r7,8970:r7,8971:r7,9168:aL,10216:r7,10217:r7,10752:r9,10753:r9,10754:r9,10756:r5,10758:r5},"Size2-Regular":{32:ed,40:ae,41:ae,47:at,91:ai,92:at,93:ai,123:ar,125:ar,160:ed,710:aa,732:aa,770:aa,771:aa,8719:ao,8720:ao,8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:as,8748:an,8749:an,8750:as,8896:al,8897:al,8898:al,8899:al,8968:ac,8969:ac,8970:ac,8971:ac,10216:ad,10217:ad,10752:au,10753:au,10754:au,10756:al,10758:al},"Size3-Regular":{32:ed,40:ah,41:ah,47:ap,91:am,92:ap,93:am,123:af,125:af,160:ed,710:ay,732:ay,770:ay,771:ay,8730:[.95003,1.45,0,0,1],8968:ab,8969:ab,8970:ab,8971:ab,10216:af,10217:af},"Size4-Regular":{32:ed,40:ag,41:ag,47:av,91:ax,92:av,93:ax,123:aw,125:aw,160:ed,710:ak,732:ak,770:ak,771:ak,8730:[1.25003,1.75,0,0,1],8968:a_,8969:a_,8970:a_,8971:a_,9115:aS,9116:aM,9117:aS,9118:aS,9119:aM,9120:aS,9121:aC,9122:aL,9123:aC,9124:aC,9125:aL,9126:aC,9127:az,9128:aA,9129:aE,9130:[0,.3,0,0,.88889],9131:az,9132:aA,9133:aE,9143:[.88502,.915,0,0,1.05556],10216:aw,10217:aw,57344:aK,57345:aK,57680:aD,57681:aD,57682:aD,57683:aD},"Typewriter-Regular":{32:aq,33:aT,34:aT,35:aT,36:aB,37:aB,38:aT,39:aT,40:aB,41:aB,42:[0,.52083,0,0,.525],43:a$,44:[.13889,.125,0,0,.525],45:a$,46:[0,.125,0,0,.525],47:aB,48:aT,49:aT,50:aT,51:aT,52:aT,53:aT,54:aT,55:aT,56:aT,57:aT,58:aO,59:[.13889,.43056,0,0,.525],60:aP,61:[-.19549,.41562,0,0,.525],62:aP,63:aT,64:aT,65:aT,66:aT,67:aT,68:aT,69:aT,70:aT,71:aT,72:aT,73:aT,74:aT,75:aT,76:aT,77:aT,78:aT,79:aT,80:aT,81:[.13889,.61111,0,0,.525],82:aT,83:aT,84:aT,85:aT,86:aT,87:aT,88:aT,89:aT,90:aT,91:aB,92:aB,93:aB,94:aT,95:[.09514,0,0,0,.525],96:aT,97:aO,98:aT,99:aO,100:aT,101:aO,102:aT,103:aF,104:aT,105:aT,106:[.22222,.61111,0,0,.525],107:aT,108:aT,109:aO,110:aO,111:aO,112:aF,113:aF,114:aO,115:aO,116:[0,.55358,0,0,.525],117:aO,118:aO,119:aO,120:aO,121:aF,122:aO,123:aB,124:aB,125:aB,126:aT,127:aT,160:aq,176:aT,184:[.19445,0,0,0,.525],305:aO,567:aF,711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:aT,715:aT,728:aT,730:aT,770:aT,771:aT,776:aT,915:aT,916:aT,920:aT,923:aT,926:aT,928:aT,931:aT,933:aT,934:aT,936:aT,937:aT,8216:aT,8217:aT,8242:aT,9251:[.11111,.21944,0,0,.525]}},aR=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,aI={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.5,.732,.925],num2:[.394,.384,.5],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},aV=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],aj={"\xa0":" ","​":" ",Å:"A",Ç:"C",Ð:"D",Þ:"o",å:"a",ç:"c",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function aH(e,i){void 0===e&&(e=77);let r=aN[i][e];if(r)return{defaultMetrics:!1,depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]};if(11034===e)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0,width:.8};let a=String.fromCodePoint(e);if(a in aj)e=aj[a].codePointAt(0);else if(aR.test(a))return e=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0,width:1};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0,width:.8}}var aW,aU,aJ={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],longrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],longleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],longleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],longrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],longleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],longleftrightarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],longRightleftharpoons:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716],longLeftrightharpoons:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},aX={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},aG={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:`m 529 160
  c -179 0 -524 -115 -524 -115
  c -5 -1 -9 -5 -9 -10
  c 0 -1 1 -2 1 -3
  l 4 -22
  c 1 -5 5 -9 11 -9
  h 2
  s 338 93 512 92
  c 174 0 513 -92 513 -92
  h 2
  c 5 0 9 4 11 9
  l 5 22
  c 1 6 -2 12 -8 13
  c 0 0 -342 115 -520 115
  z
  `,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,widetilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,widetilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,widetilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,widetilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},aZ=[[8205,1],[65038,2],[127995,5],[129456,4],[917536,96]];function aY(e){var i;if(void 0===aU)for(let e of(aU={},aZ))for(let i=e[0];i<=e[0]+e[1]-1;i++)aU[i]=!0;return null!=(i=aU[e])&&i}function aQ(e){if(/^[\u0020-\u00FF]*$/.test(e))return e;let i=[],r=function(e){let i=[];for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);if(13===a&&10===e.charCodeAt(r+1)&&(a=10,r++),(13===a||12===a)&&(a=10),0===a&&(a=65533),a>=55296&&a<=56319){let i=e.charCodeAt(r+1);i>=56320&&i<=57343&&(a=65536+1024*(a-55296)+(i-56320),r++)}i.push(a)}return i}(e),a=0;for(;a<r.length;){let e=r[a++],o=r[a];if(8205===o){let e=a-1;for(a+=2;8205===r[a];)a+=2;i.push(String.fromCodePoint(...r.slice(e,a-e+1)))}else if(aY(o)){let e=a-1;for(;aY(r[a]);)a+=8205===r[a]?2:1;i.push(String.fromCodePoint(...r.slice(e,2*a-e-1)))}else e>=127462&&e<=127487?(a+=1,i.push(String.fromCodePoint(...r.slice(a-2,2)))):i.push(String.fromCodePoint(e))}return i}var a0=class{constructor(e){this.s=aQ(e),this.pos=0,this.obeyspaces=!1}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){let i="string"==typeof this.s?e.exec(this.s.slice(this.pos)):e.exec(this.s.slice(this.pos).join(""));return null!=i&&i[0]?(this.pos+=i[0].length,i[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let e=this.get();if("\\"===e){if(!this.end()){let e=this.match(/^[a-zA-Z\*]+/);return e?this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/):e=this.get(),"\\"+e}}else{if("{"===e)return"<{>";if("}"===e)return"<}>";if("^"===e){if("^"===this.peek()){this.get();let e=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(e)return String.fromCodePoint(Number.parseInt(e.slice(e.lastIndexOf("^")+1),16))}}else if("#"===e){if(!this.end()){let e=!1;if(/[\d?@]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){let i=this.s[this.pos+1];e=/[^\dA-Za-z]/.test(i)}return e?"#"+this.get():"#"}}else if("$"===e)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return e}};function a1(e,i=null){let r=[],a="";for(let i of e.toString().split(/\r?\n/)){a&&r.push(a),a=" ";let e=i.match(/((?:\\%)|[^%])*/);null!==e&&r.push(e[0])}let o=new a0(r.join("")),n=[];do n.push(...function(e,i){var r,a,o,n;let s=[],l=e.next();if(l&&"\\relax"!==l){if("\\noexpand"===l)(l=e.next())&&s.push(l);else if("\\obeyspaces"===l)e.obeyspaces=!0;else if("\\bgroup"===l)s.push("<{>");else if("\\egroup"===l)s.push("<}>");else if("\\string"===l){if(l=e.next()){if(l.startsWith("\\"))for(let e of l)s.push("\\"===e?"\\backslash":e);else"<{>"===l?s.push("\\{"):"<space>"===l?s.push("~"):"<}>"===l&&s.push("\\}")}}else if("\\csname"===l){for(;"<space>"===e.peek();)e.next();let o="",n=!1,c=[];do{if(0===c.length){if(/^#[\d?@]$/.test(e.peek())){let o=e.get().slice(1);l=(c=a1(null!=(a=null!=(r=null==i?void 0:i(o))?r:null==i?void 0:i("?"))?a:"\\placeholder{}",i))[0]}else c=(l=e.next())?[l]:[]}(n=0===c.length)||"\\endcsname"!==l||(n=!0,c.shift()),n||(n="<$>"===l||"<$$>"===l||"<{>"===l||"<}>"===l||"string"==typeof l&&l.length>1&&l.startsWith("\\")),n||(o+=c.shift())}while(!n);o&&s.push("\\"+o),s.push(...c)}else if("\\endcsname"!==l){if(l.length>1&&l.startsWith("#")){let e=l.slice(1);s.push(...a1(null!=(n=null!=(o=null==i?void 0:i(e))?o:null==i?void 0:i("?"))?n:"\\placeholder{}",i))}else s.push(l)}}return s}(o,i));while(!o.end());return n}function a4(e){let i="",r=[];for(let a of e)a&&(i&&/^[a-zA-Z\*]/.test(a)&&r.push(i),r.push(a),/^\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(a)&&r.push(" "),i=/\\[a-zA-Z]+\*?$/.test(a)?" ":"");return r.join("")}function a2(e,...i){return e.startsWith("\\"),0===i.length?e:a4([e,...i.map(e=>`{${e}}`)])}function a3(e){return a4(e.map(e=>{var i;return null!=(i=({"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"})[e])?i:e}))}var a6=class e{constructor(i){e._registry[i]=this}static createAtom(i,r,a){return e._registry[i].createAtom(r,et(r,i),a)}static serialize(i,r){var a;if(!i||0===i.length)return"";if(null!=(a=r.skipStyles)&&a){let a=[];for(let o of a5(i)){let i=e._registry[o[0].mode];a.push(...i.serialize(o,r))}return a4(a)}return a4(function(e,i){if(0===e.length)return[];let{parent:r}=e[0],a=null==r?void 0:r.computedStyle.fontSize,o=[];for(let n of a7(e,"fontSize")){let e=n[0].computedStyle.fontSize,s=function(e,i){let{parent:r}=e[0],a=null==r?void 0:r.computedStyle.backgroundColor;return a7(e,"backgroundColor").map(e=>{var o;if(e.length>0||"box"!==e[0].type){let n=e[0].computedStyle;if(n.backgroundColor&&"none"!==n.backgroundColor&&(!r||a!==n.backgroundColor))return a2("\\colorbox",null!=(o=n.verbatimBackgroundColor)?o:n.backgroundColor,a4(a9(e,h(u({},i),{defaultMode:"text"}))))}return a4(a9(e,i))})}(n,i);s&&(e&&"auto"!==e&&(!r||a!==e)?o.push(["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][e],...s):o.push(...s))}return o}(i,r))}static getFont(i,r,a){return e._registry[i].getFont(r,a)}};a6._registry={};var a8=a6;function a5(e){let i=[],r=[],a="NONE";for(let o of e)"first"!==o.type&&(o.mode!==a?(r.length>0&&i.push(r),r=[o],a=o.mode):r.push(o));return r.length>0&&i.push(r),i}function a7(e,i){let r=[],a=[],o;for(let n of e)if("first"!==n.type&&n.style){let e;"variant"===i?(e=n.style.variant,n.style.variantStyle&&"up"!==n.style.variantStyle&&(e+="-"+n.style.variantStyle)):e=n.style[i],e===o?a.push(n):(a.length>0&&r.push(a),a=[n],o=e)}return a.length>0&&r.push(a),r}function a9(e,i){var r;let{parent:a}=e[0],o=null==a?void 0:a.computedStyle.color,n=[];for(let s of a5(e)){let e=i.defaultMode;for(let l of a7(s,"color")){let s=l[0].computedStyle,c=a8._registry[l[0].mode].serialize(l,h(u({},i),{defaultMode:"text"===e?"text":"math"}));i.skipStyles||!s.color||"none"===s.color||a&&o===s.color?n.push(a4(c)):n.push(a2("\\textcolor",null!=(r=s.verbatimColor)?r:s.color,a4(c)))}}return n}function oe(e){return e?({mord:"ord",mbin:"bin",mop:"op",mrel:"rel",mopen:"open",mclose:"close",mpunct:"punct",minner:"inner",spacing:"ignore",latex:"latex",composition:"inner",error:"inner",placeholder:"ord",supsub:"ignore"})[e]:void 0}function ot(e){if(0===e.length)return"ord";let i=oe(e[0].type),r=oe(e[e.length-1].type);return i&&i===r?i:"ord"}function oi(e,i){if("string"==typeof e)return e;if("number"==typeof e){Number.isFinite(e);let r=Math.ceil(100*e)/100;return 0===r?"0":r.toString()+(null!=i?i:"")}return""}var or=class e{constructor(i,r){var a,o,n,s,l,c;if("number"==typeof i?this.value=String.fromCodePoint(i):"string"==typeof i?this.value=i:f(i)?this.children=i.filter(e=>null!==e):i&&i instanceof e&&(this.children=[i]),this.children)for(let e of this.children)e.parent=this;if(this.type=null!=(a=null==r?void 0:r.type)?a:"ignore",this.isSelected=(null==r?void 0:r.isSelected)===!0,null!=r&&r.caret&&(this.caret=r.caret),this.classes=null!=(o=null==r?void 0:r.classes)?o:"",this.isTight=null!=(n=null==r?void 0:r.isTight)&&n,null!=r&&r.properties)for(let e of Object.keys(r.properties))this.setStyle(e,r.properties[e]);null!=r&&r.attributes&&(this.attributes=r.attributes);let d=null==r?void 0:r.fontFamily;if(null!=r&&r.style&&this.value&&(d=null!=(l=a8.getFont(null!=(s=r.mode)?s:"math",this,h(u({variant:"normal"},r.style),{letterShapeStyle:r.letterShapeStyle})))?l:void 0),d||(d="Main-Regular"),this.height=0,this.depth=0,this._width=0,this.hasExplicitWidth=!1,this.skew=0,this.italic=0,this.maxFontSize=0,this.scale=1,"latex"===this.type)this.height=.8,this.depth=.2,this._width=1;else if("number"==typeof i){let e=aH(i,d);this.height=e.height,this.depth=e.depth,this._width=e.width,this.skew=e.skew,this.italic=e.italic}else if(this.value){this.height=-1/0,this.depth=-1/0,this._width=0,this.skew=-1/0,this.italic=-1/0;for(let e=0;e<this.value.length;e++){let i=aH(this.value.codePointAt(e),d);this.height=Math.max(this.height,i.height),this.depth=Math.max(this.depth,i.depth),this._width+=i.width,this.skew=i.skew,this.italic=i.italic}}else if(this.children&&this.children.length>0){if(1===this.children.length){let e=this.children[0];this.height=e.height,this.depth=e.depth,this._width=e.width,this.maxFontSize=e.maxFontSize,this.skew=e.skew,this.italic=e.italic}else{let e=-1/0,i=-1/0,r=0,a=0;for(let o of this.children)o.height>e&&(e=o.height),o.depth>i&&(i=o.depth),a=Math.max(a,null!=(c=o.maxFontSize)?c:0),r+=o.width;this.height=e,this.depth=i,this._width=r,this.maxFontSize=a}}(null==r?void 0:r.height)!==void 0&&(this.height=r.height),(null==r?void 0:r.depth)!==void 0&&(this.depth=r.depth),(null==r?void 0:r.width)!==void 0&&(this.width=r.width),(null==r?void 0:r.maxFontSize)!==void 0&&(this.maxFontSize=r.maxFontSize)}set atomID(e){void 0===e||0===e.length||(this.id=e)}selected(e){if(this.isSelected!==e&&(this.isSelected=e,this.children))for(let i of this.children)i.selected(e)}setStyle(e,i,r){if(void 0===i)return;let a=oi(i,r);a.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[e]=a)}setTop(e){Number.isFinite(e)&&Math.abs(e)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=oi(e,"em"),this.height-=e,this.depth+=e)}get left(){var e;return null!=(e=this.cssProperties)&&e["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(e){Number.isFinite(e)&&(0===e?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=oi(e,"em")))}set right(e){Number.isFinite(e)&&(0===e?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=oi(e,"em")))}get width(){return this._width}set width(e){this._width=e,this.hasExplicitWidth=!0}wrap(e){let i=e.parent;if(!i)return this;e.isPhantom&&this.setStyle("opacity",0);let r=e.color;r&&r!==i.color&&this.setStyle("color",r);let a=e.backgroundColor;this.isSelected&&(a=function(e){let i=function(e){let i;if(e&&"#"===e[0])return(e=e.slice(1)).length<=4?(i={r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16)},4===e.length&&(i.a=parseInt(e[3]+e[3],16)/255)):(i={r:parseInt(e[0]+e[1],16),g:parseInt(e[2]+e[3],16),b:parseInt(e[4]+e[5],16)},8===e.length&&(i.a=parseInt(e[6]+e[7],16)/255)),i&&void 0===i.a&&(i.a=1),i}(e);if(!i)return e;let{h:r,s:a,l:o}=function(e){let{r:i,g:r,b:a}=e,o=Math.min(i/=255,r/=255,a/=255),n=Math.max(i,r,a),s=n-o,l;n===o?l=0:i===n?l=(r-a)/s:r===n?l=2+(a-i)/s:a===n&&(l=4+(i-r)/s),(l=Math.min(60*l,360))<0&&(l+=360);let c=(o+n)/2;return{h:l,s:n===o?0:c<=.5?s/(n+o):s/(2-n-o),l:c}}(i);return function(e){let{r:i,g:r,b:a}=e,o=(16777216+(E(i)<<16)+(E(r)<<8)+E(a)).toString(16).slice(1);return o[0]===o[1]&&o[2]===o[3]&&o[4]===o[5]&&o[6]===o[7]&&(o=o[0]+o[2]+o[4]),"#"+o}(function(e){let[i,r,a]=[e.h,e.s,e.l];i=(i+360)%360/60,a=Math.max(0,Math.min(a,1)),r=Math.max(0,Math.min(r,1));let o=a<=.5?a*(r+1):a+r-a*r,n=2*a-o;return{r:Math.round(255*A(n,o,i+2)),g:Math.round(255*A(n,o,i)),b:Math.round(255*A(n,o,i-2))}}({h:r,s:a+=.1,l:o-=.1}))}(a)),a&&a!==i.backgroundColor&&(this.setStyle("background-color",a),this.setStyle("display","inline-block")),this.scale;let o=e.scalingFactor;return this.scale=o,this.height*=o,this.depth*=o,this._width*=o,this.skew*=o,this.italic*=o,this}toMarkup(){var e,i,r,a;let o=null!=(e=this.value)?e:"";if(this.children)for(let e of this.children)o+=e.toMarkup();let n="";if(this.svgBody)n=function(e){if(aX[e]){let[i,r,a]=aX[e];return`<span style="display:inline-block;height:${a/2}em;min-width:0"><span class="stretchy" style="height:${a}em"><svg width="100%" height="${a}em" viewBox="0 0 ${i} ${r}" preserveAspectRatio="none" ><path fill="currentcolor" d="${aG[e]}"></path></svg></span></span>`}let[i,r,a,o]=aJ[e],n,s,l=a/1e3;return 3===i.length?(n=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],s=["xMinYMin","xMidYMin","xMaxYMin"]):2===i.length?(n=["slice-1-of-2","slice-2-of-2"],s=["xMinYMin","xMaxYMin"]):(n=["slice-1-of-1"],s=[o]),`<span style="display:inline-block;height:${l}em;min-width:${r}em;">${i.map((e,i)=>`<span class="${n[i]}" style=height:${l}em><svg width=400em height=${l}em viewBox="0 0 400000 ${a}" preserveAspectRatio="${s[i]} slice"><path fill="currentcolor" d="${aG[e]}"></path></svg></span>`).join("")}</span>`}(this.svgBody);else if(this.svgOverlay){n=`<span style="display: inline-block;height:${this.height+this.depth}em;vertical-align:${this.depth}em;">`+o+'</span><svg style="position:absolute;overflow:overlay;'+`height:${this.height+this.depth}em;`;let e=null==(i=this.cssProperties)?void 0:i.padding;e?n+=`top:${e};left:${e};width:calc(100% - 2 * ${e} );`:n+="top:0;left:0;width:100%;",n+='z-index:2;"',this.svgStyle&&(n+=` style="${this.svgStyle}"`),n+=`>${this.svgOverlay}</svg>`}let s="",l=this.classes.split(" ");l.push(null!=(r=({latex:"ML__latex",placeholder:"ML__placeholder",error:"ML__error"})[this.type])?r:""),"latex"===this.caret&&l.push("ML__latex-caret"),this.isSelected&&l.push("ML__selected");let c=1===l.length?l[0]:l.filter((e,i,r)=>e.length>0&&r.indexOf(e)===i).join(" ");if(c.length>0&&(s+=` class="${c}"`),this.id&&(s+=` data-atom-id=${this.id}`),this.cssId&&(s+=` id="${this.cssId.replace(/ /g,"-")}" `),this.attributes&&(s+=" "+Object.keys(this.attributes).map(e=>`${e}="${this.attributes[e]}"`).join(" ")),this.htmlData)for(let e of this.htmlData.split(",")){let i=e.match(/([^=]+)=(.+$)/);if(i){let e=i[1].trim().replace(/ /g,"-");e&&(s+=` data-${e}="${i[2]}" `)}else{let i=e.trim().replace(/ /g,"-");i&&(s+=` data-${i} `)}}let d=null!=(a=this.cssProperties)?a:{};this.hasExplicitWidth&&(d.width,d.width=`${Math.round(100*this._width)/100}em`);let u=Object.keys(d).map(e=>`${e}:${d[e]}`);if(void 0!==this.scale&&1!==this.scale&&(o.length>0||n.length>0)&&u.push(`font-size: ${Math.round(1e4*this.scale)/100}%`),this.htmlStyle){let e=this.htmlStyle.split(";"),i="";for(let r of e){let e=r.match(/([^=]+):(.+$)/);if(e){let r=e[1].trim().replace(/ /g,"-");r&&(i+=`${r}:${e[2]};`)}}i&&(s+=` style="${i}"`)}u.length>0&&(s+=` style="${u.join(";")}"`);let h="";return h=s.length>0||n.length>0?`<span${s}>${o}${n}</span>`:o,"text"===this.caret?h+='<span class="ML__text-caret"></span>':"math"===this.caret&&(h+='<span class="ML__caret"></span>'),h}tryCoalesceWith(e){if(this.svgBody||!this.value||e.svgBody||!e.value)return!1;let i=this.children&&this.children.length>0,r=e.children&&e.children.length>0;if(i||r)return!1;if(e.cssProperties||this.cssProperties){for(let i of["border","border-left","border-right","border-right-width","left","margin","margin-left","margin-right","padding","position","width"])if(e.cssProperties&&i in e.cssProperties||this.cssProperties&&i in this.cssProperties)return!1}let a=this.cssProperties?Object.keys(this.cssProperties).length:0;if(a!==(e.cssProperties?Object.keys(e.cssProperties).length:0))return!1;if(a>0){for(let i of Object.keys(this.cssProperties))if(this.cssProperties[i]!==e.cssProperties[i])return!1}let o=this.classes.trim().replace(/\s+/g," ").split(" "),n=e.classes.trim().replace(/\s+/g," ").split(" ");if(o.length!==n.length)return!1;for(let[e,i]of(o.sort(),n.sort(),o.entries()))if("vertical-separator"===i||i!==n[e])return!1;return this.value+=e.value,this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this._width=this._width+e._width,this.maxFontSize=Math.max(this.maxFontSize,e.maxFontSize),this.italic=e.italic,!0}};function oa(e){return e.children&&(e.children=function e(i){if(!i||0===i.length)return[];i[0].children=e(i[0].children);let r=[i[0]];for(let a=1;a<i.length;a++)r[r.length-1].tryCoalesceWith(i[a])||(i[a].children=e(i[a].children),r.push(i[a]));return r}(e.children)),e}function oo(e,i){if(!e)return new or(null,i);let r=new or(null,{classes:"ML__strut",type:"ignore"});r.setStyle("height",Math.max(0,e.height),"em");let a=[r];if(0!==e.depth){let i=new or(null,{classes:"ML__strut--bottom",type:"ignore"});i.setStyle("height",e.height+e.depth,"em"),i.setStyle("vertical-align",-e.depth,"em"),a.push(i)}return a.push(e),new or(a,h(u({},i),{type:"lift"}))}function on(e,i,r){return e.svgOverlay=i,e.svgStyle=r,e}function os(e){let i=(aJ[e]?aJ[e][2]/1e3:aX[e][2])/2,r=new or(null,{height:i+.166,depth:i-.166,maxFontSize:0});return r.svgBody=e,r}var ol=class extends or{constructor(e,i){var r;let[a,o,n]=function(e){var i;let[r,a]=function(e){if("individualShift"in e){let i=e.individualShift,r=i[0],a=[r],o=-r.shift-r.box.depth,n=o;for(let e=1;e<i.length;e++){let o=i[e],s=-o.shift-n-o.box.depth,l=s-(r.box.height+r.box.depth);n+=s,a.push(l),a.push(o),r=o}return[a,o]}if("top"in e){let i=e.top;for(let r of e.children)i-="number"==typeof r?r:r.box.height+r.box.depth;return[e.children,i]}if("bottom"in e)return[e.children,-e.bottom];if("firstBaseline"in e){let i=e.firstBaseline[0];if("number"==typeof i)throw Error("First child must be an element.");return[e.firstBaseline,-i.box.depth]}if("shift"in e){let i=e.children[0];if("number"==typeof i)throw Error("First child must be an element.");return[e.children,-i.box.depth-e.shift]}return[null,0]}(e);if(!r)return[[],0,0];let o=0;for(let e of r)if("number"!=typeof e){let i=e.box;o=Math.max(o,i.maxFontSize,i.height)}o+=2;let n=new or(null,{classes:"pstrut",height:o});n.setStyle("height",o,"em");let s=[],l=a,c=a,d=a;for(let e of r){if("number"==typeof e)d+=e;else{let r=e.box,a=null!=(i=e.classes)?i:[],l=new or([n,r],{classes:a.join(" "),style:e.style});r.setStyle("height",r.height+r.depth,"em"),r.setStyle("display","inline-block"),l.setStyle("top",-o-d-r.depth,"em"),e.marginLeft&&l.setStyle("margin-left",e.marginLeft,"em"),e.marginRight&&l.setStyle("margin-right",e.marginRight,"em"),s.push(l),d+=r.height+r.depth}l=Math.min(l,d),c=Math.max(c,d)}let u=new or(s,{classes:"vlist"});if(u.setStyle("height",c,"em"),l>=0)return[[new or(u,{classes:"vlist-r"})],c,-l];let h=new or(new or(null),{classes:"vlist"});h.setStyle("height",-l,"em");let p=new or(8203,{classes:"vlist-s",maxFontSize:0,height:0,depth:0});return[[new or([u,p],{classes:"vlist-r"}),new or(h,{classes:"vlist-r"})],c,-l]}(e);super(1===a.length?a[0]:a,{classes:(null!=(r=null==i?void 0:i.classes)?r:"")+" vlist-t"+(2===a.length?" vlist-t2":""),height:o,depth:n,type:null==i?void 0:i.type})}},oc=class{constructor(e,i,r){this.id=e,this.sizeDelta=i,this.cramped=r;let a={"-4":2,"-3":1,0:0}[i];this.metrics=Object.keys(aI).reduce((e,i)=>h(u({},e),{[i]:aI[i][a]}),{})}getFontSize(e){return Math.max(1,e+this.sizeDelta)}get sup(){return ou[[0,1,0,1,2,3,2,3][this.id]]}get sub(){return ou[[0,0,0,0,2,2,2,2][this.id]]}get fracNum(){return ou[[0,1,0,1,2,3,4,5][this.id]]}get fracDen(){return ou[[0,0,0,0,2,2,4,4][this.id]]}get cramp(){return ou[[0,0,2,2,4,4,6,6][this.id]]}get isTight(){return this.sizeDelta<0}},od={7:new oc(7,0,!1),6:new oc(6,0,!0),5:new oc(5,0,!1),4:new oc(4,0,!0),3:new oc(3,-3,!1),2:new oc(2,-3,!0),1:new oc(1,-4,!1),0:new oc(0,-4,!0)},ou=h(u({},od),{displaystyle:od[7],textstyle:od[5],scriptstyle:od[3],scriptscriptstyle:od[1]});function oh(e,i){var r;if(!e)return 0;let a={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:10,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[null!=(r=e.unit)?r:"pt"];if(Number.isFinite(i)){let r=10**i;return Math.round(e.dimension/10*a*r)/r}return e.dimension*a}function op(e,i){if(null===e)return 0;let r=oh(e)/10;if(Number.isFinite(i)){let e=10**i;return Math.round(r*e)/e}return r}function om(e){var i;return`${e.dimension}${null!=(i=e.unit)?i:"pt"}`}function of(e){var i,r;let a;if(null==e)return null;let o="";if("dimension"in e&&(o=`${e.dimension}${null!=(i=e.unit)?i:"pt"}`),"glue"in e&&(a=om(e.glue),e.grow&&0!==e.grow.dimension&&(a+=` plus ${om(e.grow)}`),e.shrink&&0!==e.shrink.dimension&&(a+=` minus ${om(e.shrink)}`),o=a),"number"in e){if("base"in e&&"decimal"!==e.base){if("alpha"===e.base)o=`\`${String.fromCodePoint(e.number)}`;else{let i=Math.round(e.number)>>>0;"hexadecimal"===e.base?(o=Number(i).toString(16).toUpperCase(),o=`"${o=i<=255?o.padStart(2,"0"):i<=65535?o.padStart(4,"0"):i<=16777215?o.padStart(6,"0"):o.padStart(8,"0")}`):"octal"===e.base&&(o=Number(i).toString(8),o=`'${o=i<=63?o.padStart(2,"0"):i<=30583?o.padStart(4,"0"):o.padStart(8,"0")}`)}}else o=Number(e.number).toString()}return"register"in e&&("factor"in e&&(-1===e.factor?o="-":1!==e.factor&&(o=Number(e.factor).toString())),"global"in e&&e.global&&(o+="\\global"),o+=`\\${e.register}`),"string"in e&&(o=e.string),null!=(r=e.relax)&&r&&(o+="\\relax"),o}function oy(e,i){return null==e?null:"number"in e?h(u({},e),{number:e.number*i}):"register"in e?"factor"in e&&e.factor?h(u({},e),{factor:e.factor*i}):h(u({},e),{factor:i}):"dimension"in e?h(u({},e),{dimension:e.dimension*i}):"glue"in e?e.shrink&&e.grow?{glue:oy(e.glue,i),shrink:oy(e.shrink,i),grow:oy(e.grow,i)}:e.shrink?{glue:oy(e.glue,i),shrink:oy(e.shrink,i)}:e.grow?{glue:oy(e.glue,i),grow:oy(e.grow,i)}:{glue:oy(e.glue,i)}:null}var ob={"p@":{dimension:1},"z@":{dimension:0},maxdimen:{dimension:16383.99999},hfuzz:{dimension:.1},vfuzz:{dimension:.1},overfullrule:{dimension:5},hsize:{dimension:6.5,unit:"in"},vsize:{dimension:8.9,unit:"in"},parindent:{dimension:20},maxdepth:{dimension:4},splitmaxdepth:{register:"maxdimen"},boxmaxdepth:{register:"maxdimen"},delimitershortfall:{dimension:5},nulldelimiterspace:{dimension:1.2,unit:"pt"},scriptspace:{dimension:.5},topskip:{dimension:10},splittopskip:{dimension:10},normalbaselineskip:{dimension:12},normallineskip:{dimension:1},normallineskiplimit:{dimension:0},jot:{dimension:3},doublerulesep:{dimension:2},arrayrulewidth:{dimension:.4},arraycolsep:{dimension:5},fboxsep:{dimension:3},fboxrule:{dimension:.4},"z@skip":{glue:{dimension:0},shrink:{dimension:0},grow:{dimension:0}},hideskip:{glue:{dimension:-1e3},grow:{dimension:1,unit:"fill"}},"@flushglue":{glue:{dimension:0},grow:{dimension:1,unit:"fill"}},parskip:{glue:{dimension:0},grow:{dimension:1}},abovedisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},abovedisplayshortskip:{glue:{dimension:0},grow:{dimension:3}},belowdisplayskip:{glue:{dimension:12},grow:{dimension:3},shrink:{dimension:9}},belowdisplayshortskip:{glue:{dimension:7},grow:{dimension:3},shrink:{dimension:4}},parfillskip:{glue:{dimension:0},grow:{dimension:1,unit:"fil"}},thinmuskip:{glue:{dimension:3,unit:"mu"}},medmuskip:{glue:{dimension:4,unit:"mu"},grow:{dimension:2,unit:"mu"},shrink:{dimension:4,unit:"mu"}},thickmuskip:{glue:{dimension:5,unit:"mu"},grow:{dimension:5,unit:"mu"}},smallskipamount:{glue:{dimension:3},grow:{dimension:1},shrink:{dimension:1}},medskipamount:{glue:{dimension:6},grow:{dimension:2},shrink:{dimension:3}},bigskipamount:{glue:{dimension:12},grow:{dimension:2},shrink:{dimension:4}},pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:1,month:new Date().getMonth()+1,day:new Date().getDate(),year:new Date().getFullYear()},og=class e{constructor(i,r){var a,o,n,s,l,c,d,h,p,m,f,y,b,g,x;let w;null!=i&&i.parent?(this.parent=i.parent,w=i.parent,this.registers={}):(w=u(u({},{registers:u({},ob),smartFence:!1,renderPlaceholder:void 0,placeholderSymbol:"▢",letterShapeStyle:v.locale.startsWith("fr")?"french":"tex",minFontScale:0,colorMap:C,backgroundColorMap:z,getMacro:e=>ei(e,Y())}),null!=(a=null==i?void 0:i.from)?a:{}),this.registers=w.registers),w.atomIdsSettings&&(this.atomIdsSettings=u({},w.atomIdsSettings)),this.renderPlaceholder=w.renderPlaceholder,this.isPhantom=null!=(s=null!=(n=null==i?void 0:i.isPhantom)?n:null==(o=this.parent)?void 0:o.isPhantom)&&s,this.letterShapeStyle=w.letterShapeStyle,this.minFontScale=w.minFontScale,null!=r&&r.color&&"none"!==r.color?this.color=r.color:this.color=null!=(c=null==(l=this.parent)?void 0:l.color)?c:"",null!=r&&r.backgroundColor&&"none"!==r.backgroundColor?this.backgroundColor=r.backgroundColor:this.backgroundColor=null!=(h=null==(d=this.parent)?void 0:d.backgroundColor)?h:"",null!=r&&r.fontSize&&"auto"!==r.fontSize&&r.fontSize!==(null==(p=this.parent)?void 0:p.size)?this.size=r.fontSize:this.size=null!=(f=null==(m=this.parent)?void 0:m.size)?f:5;let k=null!=(b=null==(y=this.parent)?void 0:y.mathstyle)?b:ou.displaystyle;if("string"==typeof(null==i?void 0:i.mathstyle)){if(w instanceof e)switch(i.mathstyle){case"cramp":k=k.cramp;break;case"superscript":k=k.sup;break;case"subscript":k=k.sub;break;case"numerator":k=k.fracNum;break;case"denominator":k=k.fracDen}switch(i.mathstyle){case"textstyle":k=ou.textstyle;break;case"displaystyle":k=ou.displaystyle;break;case"scriptstyle":k=ou.scriptstyle;break;case"scriptscriptstyle":k=ou.scriptscriptstyle}}this.mathstyle=k,this.smartFence=w.smartFence,this.placeholderSymbol=w.placeholderSymbol,this.colorMap=null!=(g=w.colorMap)?g:e=>e,this.backgroundColorMap=null!=(x=w.backgroundColorMap)?x:e=>e,this.getMacro=w.getMacro,void 0!==this.parent||this.registers}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if("number"!=typeof this.atomIdsSettings.seed)return`${Date.now().toString(36).slice(-2)}${Math.floor(1e5*Math.random()).toString(36)}`;let e=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,e}scale(e){return e*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return 7===this.mathstyle.id||6===this.mathstyle.id}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get metrics(){return this.mathstyle.metrics}get effectiveFontSize(){return Math.max(aV[Math.max(1,this.size+this.mathstyle.sizeDelta)],this.minFontScale)}getRegister(e){var i;return null!=(i=this.registers)&&i[e]?this.registers[e]:this.parent?this.parent.getRegister(e):void 0}getRegisterAsNumber(e){let i=this.getRegister(e);return"number"==typeof i?i:"string"==typeof i?Number(i):void 0}getRegisterAsGlue(e){var i;if(null!=(i=this.registers)&&i[e]){let i=this.registers[e];return"object"==typeof i&&"glue"in i?i:"object"==typeof i&&"dimension"in i?{glue:{dimension:i.dimension}}:"number"==typeof i?{glue:{dimension:i}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(e)}getRegisterAsEm(e,i){return op(this.getRegisterAsDimension(e),i)}getRegisterAsDimension(e){var i;if(null!=(i=this.registers)&&i[e]){let i=this.registers[e];return"object"==typeof i&&"glue"in i?i.glue:"object"==typeof i&&"dimension"in i?i:"number"==typeof i?{dimension:i}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(e)}setRegister(e,i){if(void 0===i){delete this.registers[e];return}this.registers[e]=i}evaluate(e){if(!e||!("register"in e))return e;let i=this;if("global"in e&&e.global)for(;i.parent;)i=i.parent;let r=1;"factor"in e&&1!==e.factor&&void 0!==e.factor&&(r=e.factor);let a=i.getRegister(e.register);if(void 0===a)return;if("string"==typeof a)return{string:Number(a).toString()+a};if("number"==typeof a)return{number:r*a};let o=i.evaluate(a);if(void 0!==o)return"string"in o?{string:Number(a).toString()+o.string}:"number"in o?{number:r*o.number}:"dimension"in o?h(u({},o),{dimension:r*o.dimension}):"glue"in o?h(u({},o),{glue:h(u({},o.glue),{dimension:r*o.glue.dimension}),shrink:o.shrink?h(u({},o.shrink),{dimension:r*o.shrink.dimension}):void 0,grow:o.grow?h(u({},o.grow),{dimension:r*o.grow.dimension}):void 0}):e}toDimension(e){let i=this.evaluate(e);return void 0===i?null:"dimension"in i?i:"glue"in i?i.glue:"number"in i?{dimension:i.number}:null}toEm(e,i){if(null===e)return 0;let r=this.toDimension(e);return null===r?0:oh(r,i)/10}toNumber(e){if(null===e)return null;let i=this.evaluate(e);return void 0===i?null:"number"in i?i.number:"dimension"in i?i.dimension:"glue"in i?i.glue.dimension:"string"in i?Number(i.string):null}toColor(e){var i,r;if(null===e)return null;let a=this.evaluate(e);return void 0===a?null:"string"in a?null!=(r=null==(i=this.colorMap)?void 0:i.call(this,a.string))?r:a.string:null}toBackgroundColor(e){var i,r;if(null===e)return null;let a=this.evaluate(e);return void 0===a?null:"string"in a?null!=(r=null==(i=this.backgroundColorMap)?void 0:i.call(this,a.string))?r:a.string:null}},ov=["body","above","below","superscript","subscript"];function ox(e){return"string"==typeof e&&ov.includes(e)}function ow(e){return void 0!==e&&Array.isArray(e)&&2===e.length}var ok=class e{constructor(e){var i,r,a,o,n,s,l,c,d;this.subsupPlacement=void 0,this.explicitSubsupPlacement=!1,this.type=e.type,"string"==typeof e.value&&(this.value=e.value),this.command=null!=(r=null!=(i=e.command)?i:this.value)?r:"",this.mode=null!=(a=e.mode)?a:"math",this.isFunction=null!=(o=e.isFunction)&&o,this.subsupPlacement=e.limits,this.style=null!=(n=u({},e.style))?n:{},this.displayContainsHighlight=null!=(s=e.displayContainsHighlight)&&s,this.captureSelection=null!=(l=e.captureSelection)&&l,this.skipBoundary=null!=(c=e.skipBoundary)&&c,this.verbatimLatex=null!=(d=e.verbatimLatex)?d:void 0,e.args&&(this.args=e.args),e.body&&(this.body=e.body),this._changeCounter=0}static createBox(e,i,r){var a;if(!i)return null;let o=function(e){let i,r=[],a=[];for(let o of e)if(i||o.style){let e=o.computedStyle;i&&e.color===i.color&&e.backgroundColor===i.backgroundColor&&e.fontSize===i.fontSize?a.push(o):(a.length>0&&r.push(a),a=[o],i=e)}else a.push(o);return a.length>0&&r.push(a),r}(i),n=[];for(let i of o){let r=i[0].style,a=function(e,i,r){var a,o,n,s,l;if(!i||0===i.length)return null;let c=new og({parent:e},r.style),d=!(null!=(a=c.atomIdsSettings)&&a.groupNumbers),p=[];if(1===i.length){let e=i[0],r=e.render(c);r&&(d&&e.isSelected&&r.selected(!0),p=[r])}else{let e="",r=!0;for(let a of i){null!=(o=c.atomIdsSettings)&&o.groupNumbers&&e&&(r&&a.isDigit()||!r&&o_(a))&&(c.atomIdsSettings.overrideID=e);let i=a.render(c);c.atomIdsSettings&&(c.atomIdsSettings.overrideID=void 0),i&&(null==(n=c.atomIdsSettings)||!n.groupNumbers||((a.isDigit()||o_(a))&&(!e||r!==a.isDigit())&&(r=a.isDigit(),e=null!=(s=a.id)?s:""),!e||(a.isDigit()||o_(a))&&a.hasEmptyBranch("superscript")&&a.hasEmptyBranch("subscript")||(e="")),d&&a.isSelected&&i.selected(!0),p.push(i))}}if(0===p.length)return null;let m=new or(p,h(u({isTight:c.isTight},r),{type:null!=(l=r.type)?l:"lift"}));return m.isSelected=p.every(e=>e.isSelected),m.wrap(c)}(e,i,{style:{color:r.color,backgroundColor:r.backgroundColor,fontSize:r.fontSize}});a&&n.push(a)}if(0===n.length)return null;let s=(null!=(a=null==r?void 0:r.classes)?a:"").trim();return 1!==n.length||s||null!=r&&r.type?new or(n,{classes:s,type:null==r?void 0:r.type}).wrap(e):n[0].wrap(e)}static serialize(e,i){return a8.serialize(e,i)}static commonAncestor(e,i){if(e===i||e.parent===i.parent)return e.parent;let r=new WeakSet,{parent:a}=e;for(;a;)r.add(a),a=a.parent;for(a=i.parent;a;){if(r.has(a))return a;a=a.parent}}static fromJson(i){return new e("string"==typeof i?{type:"mord",value:i,mode:"math"}:i)}get latexMode(){return"math"===this.mode?"math":"text"}toJson(){let e={};if(this.type&&(e.type=this.type),"math"!==this.mode&&(e.mode=this.mode),this.command&&this.command!==this.value&&(e.command=this.command),void 0!==this.value&&(e.value=this.value),this.style&&Object.keys(this.style).length>0&&(e.style=u({},this.style)),void 0!==this.verbatimLatex&&(e.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(e.explicitSubsupPlacement=!0),this.isFunction&&(e.isFunction=!0),this.displayContainsHighlight&&(e.displayContainsHighlight=!0),this.isExtensibleSymbol&&(e.isExtensibleSymbol=!0),this.skipBoundary&&(e.skipBoundary=!0),this.captureSelection&&(e.captureSelection=!0),this.args&&(e.args=this.args.map(e=>null===e?"<null>":Array.isArray(e)&&e[0]instanceof ok?{atoms:e.map(e=>e.toJson())}:"object"==typeof e&&"group"in e?{group:e.group.map(e=>e.toJson())}:e)),this._branches)for(let i of Object.keys(this._branches))this._branches[i]&&(e[i]=this._branches[i].filter(e=>"first"!==e.type).map(e=>e.toJson()));return"mord"===e.type&&2===Object.keys(e).length&&"value"in e?e.value:e}get changeCounter(){return this.parent?this.parent.changeCounter:this._changeCounter}set isDirty(e){if(e){this.parent||this._changeCounter++,"verbatimLatex"in this&&(this.verbatimLatex=void 0),this._children=void 0;let{parent:e}=this;for(;e;)e.parent||e._changeCounter++,"verbatimLatex"in e&&(e.verbatimLatex=void 0),e._children=void 0,e=e.parent}}_serialize(e){var i;if(!(e.expandMacro||e.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let r=et(this.command,this.mode);return null!=r&&r.serialize?r.serialize(this,e):this.body&&this.command?a4([a2(this.command,this.bodyToLatex(e)),this.supsubToLatex(e)]):this.body?a4([this.bodyToLatex(e),this.supsubToLatex(e)]):this.value&&"​"!==this.value?null!=(i=this.command)?i:function(e,i){var r;let a;if("text"===e)return null!=(r=er(e,i.codePointAt(0)))?r:i;if(a=er(e,i.codePointAt(0)))return a;let o=function(e){var i;if((e<119808||e>120831)&&(e<8448||e>8527))return{char:String.fromCodePoint(e)};for(let r in K)if(K[r]===e){e=null!=(i=r.codePointAt(0))?i:0;break}for(let i of D)if(e>=i.start&&e<i.start+i.len)return{char:String.fromCodePoint(e-i.start+i.offset),variant:i.variant,style:i.style};return{char:String.fromCodePoint(e)}}(i.codePointAt(0));return o.style||o.variant?(a=o.char,o.variant&&(a="\\"+o.variant+"{"+a+"}"),"bold"===o.style?a="\\mathbf{"+a+"}":"italic"===o.style?a="\\mathit{"+a+"}":"bolditalic"===o.style&&(a="\\mathbfit{"+a+"}"),"\\mathord{"+a+"}"):""}(this.mode,this.value):""}bodyToLatex(e){var i;return a8.serialize(this.body,h(u({},e),{defaultMode:null!=(i=e.defaultMode)?i:this.latexMode}))}aboveToLatex(e){return a8.serialize(this.above,e)}belowToLatex(e){return a8.serialize(this.below,e)}supsubToLatex(e){let i="";if(e=h(u({},e),{defaultMode:"math"}),void 0!==this.branch("subscript")){let r=a8.serialize(this.subscript,e);0===r.length?i+="_{}":1===r.length&&/^[0-9]$/.test(r)?i+=`_${r}`:i+=`_{${r}}`}if(void 0!==this.branch("superscript")){let r=a8.serialize(this.superscript,e);0===r.length?i+="^{}":1===r.length?"′"===r?i+="^\\prime ":"″"===r?i+="^\\doubleprime ":/^[0-9]$/.test(r)?i+=`^${r}`:i+=`^{${r}}`:i+=`^{${r}}`}return i}get treeDepth(){let e=1,i=this.parent;for(;i;)i=i.parent,e+=1;return e}get inCaptureSelection(){let e=this;for(;e;){if(e.captureSelection)return!0;e=e.parent}return!1}get parentPrompt(){let e=this.parent;for(;e;){if("prompt"===e.type&&!e.captureSelection)return e;e=e.parent}return null}branch(e){if(ox(e)&&this._branches)return this._branches[e]}get branches(){if(!this._branches)return[];let e=[];for(let i of ov)this._branches[i]&&e.push(i);return e}createBranch(e){return ox(e),ox(e)?(this._branches?this._branches[e]||(this._branches[e]=[this.makeFirstAtom(e)]):this._branches={[e]:[this.makeFirstAtom(e)]},this.isDirty=!0,this._branches[e]):[]}get row(){return ow(this.parentBranch)?this.parentBranch[0]:-1}get col(){return ow(this.parentBranch)?this.parentBranch[1]:-1}get body(){var e;return null==(e=this._branches)?void 0:e.body}set body(e){this.setChildren(e,"body")}get superscript(){var e;return null==(e=this._branches)?void 0:e.superscript}set superscript(e){this.setChildren(e,"superscript")}get subscript(){var e;return null==(e=this._branches)?void 0:e.subscript}set subscript(e){this.setChildren(e,"subscript")}get above(){var e;return null==(e=this._branches)?void 0:e.above}set above(e){this.setChildren(e,"above")}get below(){var e;return null==(e=this._branches)?void 0:e.below}set below(e){this.setChildren(e,"below")}get computedStyle(){var e,i;let r="string"==typeof this.style.verbatimColor,a="string"==typeof this.style.verbatimBackgroundColor,o=u(u({},null!=(i=null==(e=this.parent)?void 0:e.computedStyle)?i:{}),this.style);return delete o.variant,delete o.variantStyle,a||delete o.verbatimBackgroundColor,r||delete o.verbatimColor,o}applyStyle(e){for(let i of(this.isDirty=!0,this.style=u(u({},this.style),e),"none"===this.style.fontFamily&&delete this.style.fontFamily,"auto"===this.style.fontShape&&delete this.style.fontShape,"auto"===this.style.fontSeries&&delete this.style.fontSeries,"none"===this.style.color&&(delete this.style.color,delete this.style.verbatimColor),"none"===this.style.backgroundColor&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),"auto"===this.style.fontSize&&delete this.style.fontSize,this.children))i.applyStyle(e)}getInitialBaseElement(){var e,i,r;return this.hasEmptyBranch("body")?this:(null==(e=this.body)||e[0].type,null!=(r=null==(i=this.body[1])?void 0:i.getInitialBaseElement())?r:this)}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){return"leftright"!==this.type&&"genfrac"!==this.type&&"subsup"!==this.type&&"delim"!==this.type&&"array"!==this.type&&"surd"!==this.type&&"mord"===this.getFinalBaseElement().type}hasEmptyBranch(e){let i=this.branch(e);return!i||(i.length,i[0].type,1===i.length)}setChildren(e,i){var r;if(!e||(ox(i),!ox(i)))return;null==(r=e[0])||r.type;let a=[this.makeFirstAtom(i),...e];for(let r of(this._branches?this._branches[i]=a:this._branches={[i]:a},e))r.parent=this,r.parentBranch=i;this.isDirty=!0}makeFirstAtom(i){let r=new e({type:"first",mode:this.mode});return r.parent=this,r.parentBranch=i,r}addChild(e,i){e.type,this.createBranch(i).push(e),this.isDirty=!0,e.parent=this,e.parentBranch=i}addChildBefore(e,i){i.parentBranch;let r=this.createBranch(i.parentBranch);r.splice(r.indexOf(i),0,e),this.isDirty=!0,e.parent=this,e.parentBranch=i.parentBranch}addChildAfter(e,i){i.parentBranch;let r=this.createBranch(i.parentBranch);r.splice(r.indexOf(i)+1,0,e),this.isDirty=!0,e.parent=this,e.parentBranch=i.parentBranch}addChildren(e,i){let r=this.createBranch(i);for(let a of e)a.parent=this,a.parentBranch=i,r.push(a);this.isDirty=!0}addChildrenAfter(e,i){0===e.length||e[0].type,i.parentBranch;let r=this.createBranch(i.parentBranch);for(let a of(r.splice(r.indexOf(i)+1,0,...e),this.isDirty=!0,e))a.parent=this,a.parentBranch=i.parentBranch;return e[e.length-1]}removeBranch(e){let i=this.branch(e);if(ox(e)&&(this._branches[e]=void 0),!i)return[];for(let e of i)e.parent=void 0,e.parentBranch=void 0;return i[0].type,i.shift(),this.isDirty=!0,i}removeChild(e){if(e.parent,"first"===e.type)return;let i=this.branch(e.parentBranch),r=i.indexOf(e);i.splice(r,1),this.isDirty=!0,e.parent=void 0,e.parentBranch=void 0}get siblings(){return this.parent?this.parent.branch(this.parentBranch):[]}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:e}=this;return e[e.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return 1===this.siblings.length}get leftSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)-1]}get rightSibling(){this.parent;let e=this.parent.branch(this.parentBranch);return e[e.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.hasChildren,this.children[0]}get lastChild(){this.hasChildren;let{children:e}=this;return e[e.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let e=[];for(let i of ov)if(this._branches[i])for(let r of this._branches[i])e.push(...r.children),e.push(r);return this._children=e,e}render(e){if("first"===this.type&&!e.atomIdsSettings)return null;let i=et(this.command,this.mode);if(null!=i&&i.render)return i.render(this,e);let r=new og({parent:e},this.style),a=this.createBox(r,{classes:this.parent?"":"ML__base"});return a?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(a=this.attachSupsub(r,{base:a})),a.wrap(r)):null}attachSupsub(i,r){var a;let o;let n=r.base,s=this.superscript,l=this.subscript;if(!s&&!l)return n;let c=null,d=null,u=null!=(a=r.isCharacterBox)?a:this.isCharacterBox(),h=0;if(s){let r=new og({parent:i,mathstyle:"superscript"});c=e.createBox(r,s),u||(h=n.height-i.metrics.supDrop*r.scalingFactor)}let p=0;if(l){let r=new og({parent:i,mathstyle:"subscript"});d=e.createBox(r,l),u||(p=n.depth+i.metrics.subDrop*r.scalingFactor)}o=i.isDisplayStyle?i.metrics.sup1:i.isCramped?i.metrics.sup3:i.metrics.sup2;let m=.05/i.scalingFactor,f=null;if(d&&c){h=Math.max(h,o,c.depth+.25*i.metrics.xHeight),p=Math.max(p,i.metrics.sub2);let e=i.metrics.defaultRuleThickness;if(h-c.depth-(d.height-p)<4*e){p=4*e-(h-c.depth)+d.height;let r=.8*i.metrics.xHeight-(h-c.depth);r>0&&(h+=r,p-=r)}let r=this.isExtensibleSymbol&&n.italic?-n.italic:0;f=new ol({individualShift:[{box:d,shift:p,marginLeft:r},{box:c,shift:-h}]}).wrap(i)}else d&&!c?(p=Math.max(p,i.metrics.sub1,d.height-.3448),f=new ol({shift:p,children:[{box:d,marginRight:m,marginLeft:this.isCharacterBox()?-n.italic:0}]})):!d&&c&&(h=Math.max(h,o,c.depth+.10775),f=new ol({shift:-h,children:[{box:c,marginRight:m}]}));return new or([n,new or(f,{caret:this.caret,isSelected:this.isSelected,classes:"msubsup"})],{type:r.type})}attachLimits(i,r){let a=this.superscript?e.createBox(new og({parent:i,mathstyle:"superscript"},this.style),this.superscript):null,o=this.subscript?e.createBox(new og({parent:i,mathstyle:"subscript"},this.style),this.subscript):null;return a||o?function(e,i){var r,a,o,n,s;let l=e.metrics,c=new or(i.base),d=null!=(r=i.baseShift)?r:0,u=null!=(a=i.slant)?a:0,h=0,p=0;i.above&&(h=null!=(o=i.aboveShift)?o:Math.max(l.bigOpSpacing1,l.bigOpSpacing3-i.above.depth)),i.below&&(p=null!=(n=i.belowShift)?n:Math.max(l.bigOpSpacing2,l.bigOpSpacing4-i.below.height));let m=null;if(i.below&&i.above){let r=l.bigOpSpacing5+i.below.height+i.below.depth+p+c.depth+d;m=new ol({bottom:r,children:[l.bigOpSpacing5,{box:i.below,marginLeft:-u,classes:["ML__center"]},p,{box:c,classes:["ML__center"]},h,{box:i.above,marginLeft:u,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(e)}else if(i.below&&!i.above)m=new ol({top:c.height-d,children:[l.bigOpSpacing5,{box:i.below,marginLeft:-u,classes:["ML__center"]},p,{box:c,classes:["ML__center"]}]}).wrap(e);else if(!i.below&&i.above){let r=c.depth+d;m=new ol({bottom:r,children:[{box:c,classes:["ML__center"]},h,{box:i.above,marginLeft:u,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(e)}else{let i=c.depth+d;m=new ol({bottom:i,children:[{box:c},l.bigOpSpacing5]}).wrap(e)}return new or(m,{type:null!=(s=i.type)?s:"op"})}(i,h(u({},r),{above:a,below:o})):r.base.wrap(i)}bind(e,i){if(!i||e.isPhantom||"​"===this.value)return i;let r=this.parent;for(;r&&!r.captureSelection;)r=r.parent;return null!=r&&r.captureSelection||(this.id||(this.id=e.makeID()),i.atomID=this.id),i}createBox(i,r){var a,o,n,s;let l=null!=(a=this.value)?a:this.body,c=null!=(o=null==r?void 0:r.boxType)?o:oe(this.type),d=null!=(n=null==r?void 0:r.classes)?n:"";"text"===this.mode&&(d+=" ML__text");let p="string"==typeof l||void 0===l?new or(null!=l?l:null,{type:c,isSelected:this.isSelected,mode:this.mode,maxFontSize:i.scalingFactor,style:h(u({variant:"normal"},this.style),{fontSize:Math.max(1,i.size+i.mathstyle.sizeDelta)}),letterShapeStyle:i.letterShapeStyle,classes:d}):null!=(s=e.createBox(i,l,{type:c,classes:d}))?s:new or(null);return i.isTight&&(p.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(p.italic=0),p.right=p.italic,this.bind(i,p),!this.caret||this.superscript||this.subscript||(p.caret=this.caret),p}isDigit(){var e;return"mord"===this.type&&this.value?/^[\d,\.]$/.test(this.value):"group"===this.type&&(null==(e=this.body)?void 0:e.length)===2&&"first"===this.body[0].type&&","===this.body[1].value}asDigit(){var e;return"mord"===this.type&&this.value&&/^[\d,\.]$/.test(this.value)?this.value:"group"===this.type&&(null==(e=this.body)?void 0:e.length)===2&&"first"===this.body[0].type&&","===this.body[1].value?".":""}};function o_(e){return"text"===e.mode}var oS=class e extends ok{constructor(e,i,r){super({type:"text",command:e,mode:"text",displayContainsHighlight:!0}),this.value=i,this.verbatimLatex=i,this.applyStyle(r)}static fromJson(i){return new e(i.command,i.value,i.style)}render(e){let i=this.createBox(e);return this.caret&&(i.caret=this.caret),i}_serialize(e){var i;return null!=(i=this.verbatimLatex)?i:er("text",this.value.codePointAt(0))}};function oM(e){let i=1/0,r=-1/0;for(let a of e.ranges)i=Math.min(i,a[0],a[1]),r=Math.max(r,a[0],a[1]);return[i,r]}function oL(e,i,r){return r?function(e,i){if(!i)return"";if("string"==typeof i)return i;if(!e||void 0===i.after)return i.value;let r=!1,a=!1,o=!1,n=!1,s=!1,l=!1,c=!1,d=!1,u=!1,h=!1,p=!1,m=!1,f=!1,y=!1,b=!1,g=e[0],v=0;for(;null!=g&&g.type&&/msubsup|placeholder/.test(g.type);)v+=1,g=e[v];return r=!g||"first"===g.type,g&&(a=!(y="text"===g.mode)&&"mord"===g.type&&B.test(g.value),o=!y&&"mord"===g.type&&/\d+$/.test(g.value),n=!y&&g.isFunction,s="genfrac"===g.type,l="surd"===g.type,c="mbin"===g.type,d="mrel"===g.type,u="mop"===g.type,h="mpunct"===g.type||"minner"===g.type,p="array"===g.type,m="mopen"===g.type,f="mclose"===g.type||"leftright"===g.type,b="space"===g.type),i.after.includes("nothing")&&r||i.after.includes("letter")&&a||i.after.includes("digit")&&o||i.after.includes("function")&&n||i.after.includes("frac")&&s||i.after.includes("surd")&&l||i.after.includes("binop")&&c||i.after.includes("relop")&&d||i.after.includes("operator")&&u||i.after.includes("punct")&&h||i.after.includes("array")&&p||i.after.includes("openfence")&&m||i.after.includes("closefence")&&f||i.after.includes("text")&&y||i.after.includes("space")&&b?i.value:""}(e,r[i]):""}var oC={"&":"\\&","%":"\\%",$:"\\$","''":"^{\\doubleprime}","'''":"^{\\prime\\prime\\prime}","''''":"^{\\prime\\prime\\prime\\prime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","∞":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"∑":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","∆":"\\differentialD","∂":"\\differentialD",arcsin:"\\arcsin",arccos:"\\arccos",arctan:"\\arctan",arcsec:"\\arcsec",arccsc:"\\arccsc",arsinh:"\\arsinh",arcosh:"\\arcosh",artanh:"\\artanh",arcsech:"\\arcsech",arccsch:"\\arccsch",arg:"\\arg",ch:"\\ch",cosec:"\\cosec",cosh:"\\cosh",cot:"\\cot",cotg:"\\cotg",coth:"\\coth",csc:"\\csc",ctg:"\\ctg",cth:"\\cth",sec:"\\sec",sinh:"\\sinh",sh:"\\sh",tanh:"\\tanh",tg:"\\tg",th:"\\th",sin:"\\sin",cos:"\\cos",tan:"\\tan",lg:"\\lg",lb:"\\lb",log:"\\log",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},sint:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\sin t"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",xx:"\\times","+-":"\\pm","≠":"\\ne","!=":"\\ne","≥":"\\ge",">=":"\\ge","≤":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","≈":"\\approx","?=":"\\questeq","\xf7":"\\div","\xac":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},µ:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",Ω:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\mod",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\operatorname{gcd}",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","-->...":"\\longrightarrow\\cdots","->":"\\to","|->":"\\mapsto","-->":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot","**":"\\star","***":"\\ast","//":"\\slash","\\\\":"\\backslash",setminus:"\\backslash","|><":"\\ltimes","><|":"\\rtimes","|><|":"\\bowtie","-:":"\\div",divide:"\\div","@":"\\circ","^^":"\\wedge","^^^":"\\bigwedge",vv:"\\vee",vvv:"\\bigvee",nn:"\\cap",nnn:"\\bigcap",uu:"\\cup",uuu:"\\bigcup","-=":"\\equiv","~=":"\\cong",lt:"<","lt=":"\\leq",gt:">","gt=":"\\geq","-<":"\\prec","-lt":"\\prec","-<=":"\\preceq",">-=":"\\succeq",prop:"\\propto",diamond:"\\diamond",square:"\\square",iff:"\\iff",sub:"\\subset",sup:"\\supset",sube:"\\subseteq",supe:"\\supseteq",uarr:"\\uparrow",darr:"\\downarrow",rarr:"\\rightarrow",rArr:"\\Rightarrow",larr:"\\leftarrow",lArr:"\\Leftarrow",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",aleph:"\\aleph",and:"\\land",or:"\\lor",not:"\\neg","_|_":"\\bot",TT:"\\top","|--":"\\vdash","|==":"\\models","|__":"\\lfloor","__|":"\\rfloor","|~":"\\lceil","~|":"\\rceil",">->":"\\rightarrowtail","->>":"\\twoheadrightarrow",">->>":"\\twoheadrightarrowtail",frac:"\\frac{#?}{#?}",cbrt:"\\sqrt[3]{#?}",nthroot:"\\sqrt[#?]{#?}"};function oz(e,i){var r,a;let o;let n=null!=(r=null==i?void 0:i.format)?r:"auto";return"auto"===n&&([n,e]=(a=(a=e).trim()).length<=1?["latex",a]:([o,a]=oT(a),o?["latex",a]:a.startsWith("`")&&a.endsWith("`")?["ascii-math",a=a.substring(1,a.length-1)]:a.includes("\\")?["latex",a]:/\$.+\$/.test(a)?["latex",`\\text{${a}}`]:[void 0,a])),"ascii-math"===n?["ascii-math",oA(e=(e=(e=(e=(e=(e=e.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),{inlineShortcuts:null==i?void 0:i.inlineShortcuts})]:["latex",e]}function oA(e,i){var r,a,o;if(!e)return"";let n=!1,s,l=null!=(r=i.inlineShortcuts)?r:oC;if(!n&&(e.startsWith("^")||e.startsWith("_"))&&(s=oE(e.slice(1),{inlineShortcuts:l,noWrap:!0}),e=e[0]+"{"+s.match+"}"+oA(s.rest,i),n=!0),n||(s=e.match(/^(sqrt|\u221A)(.*)/))&&(e="\\sqrt{"+(null!=(a=(s=oE(s[2],{inlineShortcuts:l,noWrap:!0})).match)?a:"\\placeholder{}")+"}"+oA(s.rest,i),n=!0),n||(s=e.match(/^(\\cbrt|\u221B)(.*)/))&&(e="\\sqrt[3]{"+(null!=(o=(s=oE(s[2],{inlineShortcuts:l,noWrap:!0})).match)?o:"\\placeholder{}")+"}"+oA(s.rest,i),n=!0),n||(s=e.match(/^abs(.*)/))&&(e="\\left|"+(s=oE(s[1],{inlineShortcuts:l,noWrap:!0})).match+"\\right|"+oA(s.rest,i),n=!0),n||(s=e.match(/^["”“](.*?)["”“](.*)/))&&(e="\\text{"+s[1]+"}"+oA(s[2],i),n=!0),n||(s=e.match(/^([^a-zA-Z\(\{\[\_\^\\\s"]+)(.*)/))&&(e=oK(s[1],l)+oA(s[2],i),n=!0),!n&&/^([fgh])[^a-zA-Z]/.test(e)&&(s=oE(e.slice(1),{inlineShortcuts:l,noWrap:!0}),e=("("===e[1]?e[0]+"\\left("+s.match+"\\right)":e[0]+s.match)+oA(s.rest,i),n=!0),n||(s=e.match(/^([a-zA-Z]+)(.*)/))&&(e=oK(s[1],l)+oA(s[2],i),n=!0),!n){if((s=oE(e,{inlineShortcuts:l,noWrap:!0})).match&&"/"===s.rest[0]){let r=oE(s.rest.slice(1),{inlineShortcuts:l,noWrap:!0});r.match&&(e="\\frac{"+s.match+"}{"+r.match+"}"+oA(r.rest,i)),n=!0}else s.match&&(e=e.startsWith("(")?"\\left("+s.match+"\\right)"+oA(s.rest,i):s.match+oA(s.rest,i),n=!0)}return n||(s=e.match(/^(\s+)(.*)$/))&&(e=" "+oA(s[2],i),n=!0),e}function oE(e,i){let r="",a=e=e.trim(),o=e.charAt(0),n={"(":")","{":"}","[":"]"}[o];if(n){let s=1,l=1;for(;l<e.length&&s>0;)e[l]===o&&s++,e[l]===n&&s--,l++;0===s?(i.noWrap&&"("===o?r=oA(e.substring(1,l-1),i):("{"===o&&"}"===n&&(o="\\{",n="\\}"),r="\\left"+o+oA(e.substring(1,l-1),i)+"\\right"+n),a=e.slice(Math.max(0,l))):(r=e.substring(1,l),a="")}else{let o=e.match(/^([a-zA-Z]+)/);if(o){let r=oL(null,e,i.inlineShortcuts);if(r)return{match:r=(r=r.replace("_{#?}","")).replace("^{#?}",""),rest:e.slice(r.length)}}if(o=e.match(/^([a-zA-Z])/))return{match:o[1],rest:e.slice(1)};if(o=e.match(/^(-)?\d+(\.\d*)?/))return{match:o[0],rest:e.slice(o[0].length)};/^\\(left|right)/.test(e)||(o=e.match(/^(\\[a-zA-Z]+)/))&&(a=e.slice(o[1].length),r=o[1])}return{match:r,rest:a}}function oK(e,i){let r=oL(null,e,i);return r?(r=r.replace("_{#?}","")).replace("^{#?}","")+" ":e}var oD=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function oT(e){let i=e.trim();for(let e of oD)if(i.startsWith(e[0])&&i.endsWith(e[1]))return[!0,i.substring(e[0].length,i.length-e[1].length)];return[!1,e]}var oB=(e,i,r)=>(oD.some(e=>i.startsWith(e[0])&&i.endsWith(e[1]))||(i=`$$ ${i} $$`),i),o$=class e{constructor(i){e._modes[i]=this}static onPaste(i,r,a){var o;if(!r.contentEditable&&"none"===r.userSelect)return r.model.announce("plonk"),!1;if("string"==typeof a){let e=new DataTransfer;e.setData("text/plain",a),a=e}let n=new ClipboardEvent("paste",{clipboardData:a,cancelable:!0});return!!(null!=(o=r.host)&&o.dispatchEvent(n))&&e._modes[i].onPaste(r,a)}static onCopy(e,i){var r;if(!i.clipboardData)return;if(!e.contentEditable&&"none"===e.userSelect){e.model.announce("plonk");return}let a=e.model,o=a.selectionIsCollapsed?[0,a.lastOffset]:oM(a.selection),n=a.getAtoms(o);if(n.every(e=>"text"===e.mode||!e.mode))i.clipboardData.setData("text/plain",n.filter(e=>e instanceof oS).map(e=>e.value).join(""));else if(n.every(e=>"latex"===e.mode))i.clipboardData.setData("text/plain",a.getAtoms(o,{includeChildren:!0}).map(e=>{var i;return null!=(i=e.value)?i:""}).join(""));else{let s;s=1===n.length&&void 0!==n[0].verbatimLatex?n[0].verbatimLatex:a.getValue(o,"latex-expanded"),i.clipboardData.setData("application/x-latex",s);try{i.clipboardData.setData("text/plain",e.options.onExport(e,s,o))}catch(e){}if(1===n.length){let e=n[0];("root"===e.type||"group"===e.type)&&(n=e.body.filter(e=>"first"!==e.type))}try{i.clipboardData.setData("application/json+mathlive",JSON.stringify(n.map(e=>e.toJson())))}catch(e){}if(null!=(r=window[Symbol.for("io.cortexjs.compute-engine")])&&r.ComputeEngine){let e=window.MathfieldElement.computeEngine;if(e)try{e.jsonSerializationOptions={metadata:["latex"]};let r=e.parse(a.getValue(o,"latex-unstyled")),n=JSON.stringify(r.json);n&&i.clipboardData.setData("application/json",n)}catch(e){}}}i.preventDefault()}static insert(i,r,a={}){var o;let n="auto"===a.mode?i.mode:null!=(o=a.mode)?o:i.mode;return e._modes[n].insert(i,r,a)}onPaste(e,i){return!1}insert(e,i,r){return!1}};o$._modes={};var oP=o$,oO=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",command:"moveToNextGroup"},{key:"shift+[Tab]",command:"moveToPreviousGroup"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:"complete"},{key:"[Enter]",ifMode:"latex",command:"complete"},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"cmd+x",ifPlatform:"ios",command:"cutToClipboard"},{key:"ctrl+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"cmd+c",ifPlatform:"ios",command:"copyToClipboard"},{key:"ctrl+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"cmd+v",ifPlatform:"ios",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+alt+[KeyT]",ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"shift+alt+[KeyT]",ifMode:"text",command:["switchMode","math","",""]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"alt+[Tab]",ifMode:"math",command:"addColumnAfter"},{key:"shift+alt+[Tab]",ifMode:"math",command:"addColumnBefore"},{key:"alt+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Enter]",ifMode:"math",command:"addRowBefore"},{key:"alt+[Return]",ifMode:"math",command:"addRowAfter"},{key:"shift+alt+[Return]",ifMode:"math",command:"addRowBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]}],oF={"\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\infty":"alt+[Digit5]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function oq(e,i,r,a){for(let o of i.split(" ")){let i=o.match(/(.*):(.*)/);if(i){let o=null!=a?a:{};"active"===i[2]?o.passive=!1:o[i[2]]=!0,e.addEventListener(i[1],r,o)}else e.addEventListener(o,r,a)}}function oN(e,i,r,a){for(let o of i.split(" ")){let i=o.match(/(.*):(.*)/);if(i){let o=null!=a?a:{};"active"===i[2]?o.passive=!1:o[i[2]]=!0,e.removeEventListener(i[1],r,o)}else e.removeEventListener(o,r,a)}}function oR(e){var i;return(null==(i=e.element)?void 0:i.mathfield)===e}function oI(e){var i,r;let a=null!=(r=null!=(i=e.querySelector(".ML__caret"))?i:e.querySelector(".ML__text-caret"))?r:e.querySelector(".ML__latex-caret");if(!a)return null;let o=a.getBoundingClientRect();return{x:o.right,y:o.bottom,height:o.height}}function oV(e,i,r){if(!i)return null;let a=e.field.getBoundingClientRect(),o=i.right-i.left,n=i.bottom-i.top,s=Math.ceil(i.left-a.left+e.field.scrollLeft*r),l=Math.ceil(i.top-a.top);return{left:s,right:s+o,top:l,bottom:l+n}}function oj(e,i){var r,a;if(!i.id)return null;let o=null!=(a=null==(r=e.atomBoundsCache)?void 0:r.get(i.id))?a:null;if(null!==o)return o;let n=e.fieldContent.querySelector(`[data-atom-id="${i.id}"]`);return o=n?function e(i){let r=i.getBoundingClientRect(),a=parseInt(getComputedStyle(i).marginRight),o={top:r.top-1,bottom:r.bottom,left:r.left,right:r.right-1+a};if(0===i.children.length||"SVG"===i.tagName.toUpperCase())return o;for(let r of i.children)if(1===r.nodeType&&"atomId"in r.dataset&&!r.classList.contains("pstrut")){let i=e(r);o.left=Math.min(o.left,i.left),o.right=Math.max(o.right,i.right),o.top=Math.min(o.top,i.top),o.bottom=Math.max(o.bottom,i.bottom)}return o}(n):null,e.atomBoundsCache&&(o?e.atomBoundsCache.set(i.id,o):e.atomBoundsCache.delete(i.id)),null!=o?o:null}function oH(e,i){return e.model.selection.ranges.reduce((r,a)=>r.concat(...function(e,i,r){let a=new Map;for(let o of e.model.getAtoms(i,{includeChildren:!0})){if(null!=r&&r.excludeAtomsWithBackground&&o.style.backgroundColor)continue;let i=e.field,n=parseFloat(getComputedStyle(i).width),s=i.getBoundingClientRect().width/n;s=isNaN(s)?1:s;let l=oV(e,oj(e,o),s);if(l){let e=function(e){var i;return e.parent?(null!=(i=e.parent.id)?i:"")+("string"==typeof e.parentBranch?"-"+e.parentBranch:`-${e.parentBranch[0]}/${e.parentBranch[0]}`):"root"}(o);if(a.has(e)){let i=a.get(e);a.set(e,{left:Math.min(i.left,l.left),right:Math.max(i.right,l.right),top:Math.min(i.top,l.top),bottom:Math.max(i.bottom,l.bottom)})}else a.set(e,l)}}return[...a.values()]}(e,a,i)),[])}function oW(e,i){return"*"===e||"none"===i||("same-origin"===i?!window.origin||e===window.origin:"function"==typeof i&&i(e))}function oU(e){let i=0,r=0,a=e.offsetWidth,o=e.offsetHeight;for(;e instanceof HTMLElement;)i+=e.offsetTop,r+=e.offsetLeft,e=e.offsetParent;return new DOMRect(r,i,a,o)}var oJ=`@keyframes ML__caret-blink {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}
.ML__container {
  display: inline-flex;
  flex-flow: row;
  justify-content: space-between;
  align-items: flex-end;
  min-height: 39px;
  /* Need some room for the virtual keyboard toggle */
  width: 100%;
  /* Encourage browsers to consider allocating a hardware accelerated
   layer for this element. */
  isolation: isolate;
  /* Prevent the browser from trying to interpret touch gestures in the field */
  /* "Disabling double-tap to zoom removes the need for browsers to
        delay the generation of click events when the user taps the screen." */
  touch-action: none;
  --_caret-color: var(--caret-color, hsl(var(--_hue), 40%, 49%));
  --_selection-color: var(--selection-color, #000);
  --_selection-background-color: var(--selection-background-color, hsl(var(--_hue), 70%, 85%));
  --_text-highlight-background-color: var(--highlight-text, hsla(var(--_hue), 40%, 50%, 0.1));
  --_contains-highlight-background-color: var(--contains-highlight-background-color, hsl(var(--_hue), 40%, 95%));
  --_smart-fence-color: var(--smart-fence-color, currentColor);
  --_smart-fence-opacity: var(--smart-fence-opacity, 0.5);
  --_latex-color: var(--latex-color, hsl(var(--_hue), 40%, 50%));
  --_correct-color: var(--correct-color, #10a000);
  --_incorrect-color: var(--incorrect-color, #a01b00);
  --_composition-background-color: var(--composition-background-color, #fff1c2);
  --_composition-text-color: var(--composition-text-color, black);
  --_composition-underline-color: var(--composition-underline-color, transparent);
}
/* This is the actual field content (formula) */
.ML__content {
  display: flex;
  align-items: center;
  align-self: center;
  position: relative;
  overflow: hidden;
  padding: 2px 0 2px 1px;
  width: 100%;
}
.ML__virtual-keyboard-toggle {
  box-sizing: border-box;
  display: flex;
  align-self: center;
  align-items: center;
  flex-shrink: 0;
  flex-direction: column;
  justify-content: center;
  width: 34px;
  height: 34px;
  padding: 0;
  margin-right: 4px;
  cursor: pointer;
  /* Avoid some weird blinking with :hover */
  border-radius: 8px;
  border: 1px solid transparent;
  transition: background 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  color: hsl(var(--_hue), 40%, 50%);
  fill: currentColor;
  background: transparent;
}
.ML__virtual-keyboard-toggle:hover {
  background: hsla(0, 0%, 70%, 0.3);
  color: #333;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle > span {
  display: flex;
  align-self: center;
  align-items: center;
}
/* The invisible element used to capture keyboard events. We're just trying
 really hard to make sure it doesn't show. */
.ML__keyboard-sink {
  display: inline-block;
  resize: none;
  outline: none;
  border: none;
  /* Need these for Microsoft Edge */
  position: fixed;
  clip: rect(0 0 0 0);
  /* Need this to prevent iOS Safari from auto-zooming */
  font-size: 1em;
  font-family: KaTeX_Main;
}
.ML__composition {
  background: var(--_composition-background-color);
  color: var(--_composition-text-color);
  text-decoration: underline var(--_composition-underline-color);
}
.ML__caret:after {
  content: '';
  border: none;
  border-radius: 2px;
  border-right: 2px solid var(--_caret-color);
  margin-right: -2px;
  position: relative;
  left: -1px;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__text-caret:after {
  content: '';
  border: none;
  border-radius: 1px;
  border-right: 1px solid var(--_caret-color);
  margin-right: -1px;
  position: relative;
  left: 0;
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__latex-caret:after {
  content: '_';
  border: none;
  margin-right: 0;
  margin-right: calc(-1ex - 2px);
  position: relative;
  color: var(--_caret-color);
  animation: ML__caret-blink 1.05s step-end forwards infinite;
}
.ML__focused .ML__text {
  background: var(--_text-highlight-background-color);
}
/* When using smartFence, the anticipated closing fence is displayed
with this style */
.ML__smart-fence__close {
  opacity: var(--_smart-fence-opacity);
  color: var(--_smart-fence-color);
}
.ML__selected,
.ML__focused .ML__selected .ML__contains-caret,
.ML__focused .ML__selected .ML__smart-fence__close,
.ML__focused .ML__selected .ML__placeholder {
  color: var(--_selection-color);
  opacity: 1;
}
:host(:focus) .ML__selection {
  box-sizing: border-box;
  background: var(--_selection-background-color) !important;
}
.ML__contains-caret.ML__close,
.ML__contains-caret.ML__open,
.ML__contains-caret > .ML__close,
.ML__contains-caret > .ML__open,
.ML__contains-caret .ML__sqrt-sign,
.ML__contains-caret .ML__sqrt-line {
  color: var(--_caret-color);
}
.ML__contains-highlight {
  background: var(--_contains-highlight-background-color);
  box-sizing: border-box;
}
.ML__latex {
  font-family: 'Berkeley Mono', 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  font-weight: 400;
  color: var(--_latex-color);
}
.ML__suggestion {
  opacity: 0.5;
}
.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
.ML__virtual-keyboard-toggle:focus {
  outline: none;
  border-radius: 8px;
  border: 2px solid hsl(var(--_hue), 40%, 50%);
}
.ML__virtual-keyboard-toggle.is-pressed,
.ML__virtual-keyboard-toggle.is-active:hover,
.ML__virtual-keyboard-toggle.is-active {
  background: hsl(var(--_hue), 25%, 35%);
  color: #fafafa;
  fill: currentColor;
}
/* Add an attribute 'data-ML__tooltip' to automatically show a
   tooltip over a element on hover.
   Use 'data-position="top"' to place the tooltip above the
   element rather than below.
   Use 'data-delay' to delay the triggering of the tooltip.
*/
[data-ML__tooltip] {
  position: relative;
}
[data-ML__tooltip][data-placement='top']::after {
  top: inherit;
  bottom: 100%;
}
[data-ML__tooltip]::after {
  content: attr(data-ML__tooltip);
  position: absolute;
  display: none;
  z-index: 2;
  right: 110%;
  left: calc(100% + 8px);
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  border-radius: 2px;
  background: #616161;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  text-align: center;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-style: normal;
  font-weight: 400;
  font-size: 12px;
  /* Phone */
  opacity: 0;
  transform: scale(0.5);
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1);
}
@media only screen and (max-width: 767px) {
  [data-ML__tooltip]::after {
    padding: 8px 16px;
    font-size: 16px;
  }
}
:not(.tracking) [data-ML__tooltip]:hover {
  position: relative;
}
:not(.tracking) [data-ML__tooltip]:hover::after {
  visibility: visible;
  display: inline-table;
  opacity: 1;
  transform: scale(1);
}
[data-ML__tooltip][data-delay]::after {
  transition-delay: 0s;
}
[data-ML__tooltip][data-delay]:hover::after {
  transition-delay: 1s;
  /* attr(data-delay); Should work. But doesn't. */
}
.ML__prompt {
  border-radius: 2px;
}
.ML__editablePromptBox {
  outline: 1px solid #acacac;
  border-radius: 2px;
  z-index: -1;
}
.ML__focusedPromptBox {
  outline: highlight auto 1px;
}
.ML__lockedPromptBox {
  background-color: rgba(142, 142, 141, 0.4);
  z-index: -1;
}
.ML__correctPromptBox {
  outline: 1px solid var(--_correct-color);
  box-shadow: 0 0 5px var(--_correct-color);
}
.ML__incorrectPromptBox {
  outline: 1px solid var(--_incorrect-color);
  box-shadow: 0 0 5px var(--_incorrect-color);
}
`,oX=`.ML__container {
  min-height: auto !important;
  --_hue: var(--hue, 212);
  --_placeholder-color: var(--placeholder-color, hsl(var(--_hue), 40%, 49%));
  --_placeholder-opacity: var(--placeholder-opacity, 0.4);
  --_text-font-family: var(--text-font-family, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif);
}
.ML__sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  clip-path: inset(50%);
  white-space: nowrap;
  border: 0;
}
.ML__is-inline {
  display: inline-block;
}
.ML__base {
  visibility: inherit;
  display: inline-block;
  position: relative;
  cursor: text;
  padding: 0;
  margin: 0;
  box-sizing: content-box;
  border: 0;
  outline: 0;
  vertical-align: baseline;
  font-weight: inherit;
  font-family: inherit;
  font-style: inherit;
  text-decoration: none;
  width: min-content;
}
.ML__strut,
.ML__strut--bottom {
  display: inline-block;
  min-height: 0.5em;
}
.ML__small-delim {
  font-family: KaTeX_Main;
}
/* Text mode */
.ML__text {
  font-family: var(--_text-font-family);
  white-space: pre;
}
/* Use cmr for 'math upright' */
.ML__cmr {
  font-family: KaTeX_Main;
  font-style: normal;
}
.ML__mathit {
  font-family: KaTeX_Math;
  /* The KaTeX_Math font is italic by default, so the font-style below is only 
     useful when a fallback font is used
  */
  font-style: italic;
}
.ML__mathbf {
  font-family: KaTeX_Main;
  font-weight: bold;
}
/* Lowercase greek symbols should stick to math font when \\mathbf is applied 
   to match TeX idiosyncratic behavior */
.lcGreek.ML__mathbf {
  font-family: KaTeX_Math;
  font-weight: normal;
}
.ML__mathbfit {
  font-family: KaTeX_Math;
  font-weight: bold;
  font-style: italic;
}
.ML__ams {
  font-family: KaTeX_AMS;
}
/* Blackboard */
.ML__bb {
  font-family: KaTeX_AMS;
}
.ML__cal {
  font-family: KaTeX_Caligraphic;
}
.ML__frak {
  font-family: KaTeX_Fraktur;
}
.ML__tt {
  font-family: KaTeX_Typewriter;
}
.ML__script {
  font-family: KaTeX_Script;
}
.ML__sans {
  font-family: KaTeX_SansSerif;
}
.ML__series_ul {
  font-weight: 100;
}
.ML__series_el {
  font-weight: 100;
}
.ML__series_l {
  font-weight: 200;
}
.ML__series_sl {
  font-weight: 300;
}
.ML__series_sb {
  font-weight: 500;
}
.ML__bold,
.ML__boldsymbol {
  font-weight: 700;
}
.ML__series_eb {
  font-weight: 800;
}
.ML__series_ub {
  font-weight: 900;
}
.ML__series_uc {
  font-stretch: ultra-condensed;
}
.ML__series_ec {
  font-stretch: extra-condensed;
}
.ML__series_c {
  font-stretch: condensed;
}
.ML__series_sc {
  font-stretch: semi-condensed;
}
.ML__series_sx {
  font-stretch: semi-expanded;
}
.ML__series_x {
  font-stretch: expanded;
}
.ML__series_ex {
  font-stretch: extra-expanded;
}
.ML__series_ux {
  font-stretch: ultra-expanded;
}
.ML__it {
  font-style: italic;
}
.ML__shape_ol {
  -webkit-text-stroke: 1px black;
  text-stroke: 1px black;
  color: transparent;
}
.ML__shape_sc {
  font-variant: small-caps;
}
.ML__shape_sl {
  font-style: oblique;
}
/* First level emphasis */
.ML__emph {
  color: #bc2612;
}
/* Second level emphasis */
.ML__emph .ML__emph {
  color: #0c7f99;
}
.ML__highlight {
  color: #007cb2;
  background: #edd1b0;
}
.ML__center {
  text-align: center;
}
.ML__label_padding {
  padding: 0 0.5em;
}
.ML__frac-line {
  width: 100%;
  min-height: 1px;
}
.ML__frac-line:after {
  content: '';
  display: block;
  margin-top: max(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  /* There's a bug since Chrome 62 where 
      sub-pixel border lines don't draw at some zoom 
      levels (110%, 90%). 
      Setting the min-height used to work around it, but that workaround
      broke in Chrome 84 or so.
      Setting the background (and the min-height) seems to work for now.
      */
  background: currentColor;
  box-sizing: content-box;
  /* Vuetify sets the box-sizing to inherit 
            causes the fraction line to not draw at all sizes (see #26) */
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
}
.ML__sqrt {
  display: inline-block;
}
.ML__sqrt-sign {
  display: inline-block;
  position: relative;
}
.ML__sqrt-line {
  display: inline-block;
  height: max(1px, 0.04em);
  width: 100%;
}
.ML__sqrt-line:before {
  content: '';
  display: block;
  margin-top: min(-1px, -0.04em);
  min-height: max(1px, 0.04em);
  /* Ensure the line is visible when printing even if "turn off background images" is on*/
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  background: currentColor;
  /* On some versions of Firefox on Windows, the line fails to 
            draw at some zoom levels, but setting the transform triggers
            the hardware accelerated path, which works */
  transform: translate(0, 0);
}
.ML__sqrt-line:after {
  border-bottom-width: 1px;
  content: ' ';
  display: block;
  margin-top: -0.1em;
}
.ML__sqrt-index {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}
.ML__delim-size1 {
  font-family: KaTeX_Size1;
}
.ML__delim-size2 {
  font-family: KaTeX_Size2;
}
.ML__delim-size3 {
  font-family: KaTeX_Size3;
}
.ML__delim-size4 {
  font-family: KaTeX_Size4;
}
.ML__delim-mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}
.ML__delim-mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}
.ML__accent-body > span {
  font-family: KaTeX_Main;
  width: 0;
}
.ML__accent-vec {
  position: relative;
  left: 0.24em;
}
.ML__mathlive {
  display: inline-block;
  direction: ltr;
  text-align: left;
  text-indent: 0;
  text-rendering: auto;
  font-family: KaTeX_Main, 'Times New Roman', serif;
  font-style: normal;
  font-size-adjust: none;
  font-stretch: normal;
  font-variant-caps: normal;
  letter-spacing: normal;
  line-height: 1.2;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  text-shadow: none;
  -webkit-user-select: none;
  user-select: none;
  width: min-content;
}
.ML__mathlive .style-wrap {
  position: relative;
}
.ML__mathlive .mfrac,
.ML__mathlive .left-right {
  display: inline-block;
}
.ML__mathlive .vlist-t {
  display: inline-table;
  table-layout: fixed;
  border-collapse: collapse;
}
.ML__mathlive .vlist-r {
  display: table-row;
}
.ML__mathlive .vlist {
  display: table-cell;
  vertical-align: bottom;
  position: relative;
}
.ML__mathlive .vlist > span {
  display: block;
  height: 0;
  position: relative;
}
.ML__mathlive .vlist > span > span {
  display: inline-block;
}
.ML__mathlive .vlist > span > .pstrut {
  overflow: hidden;
  width: 0;
}
.ML__mathlive .vlist-t2 {
  margin-right: -2px;
}
.ML__mathlive .vlist-s {
  display: table-cell;
  vertical-align: bottom;
  font-size: 1px;
  width: 2px;
  min-width: 2px;
}
.ML__mathlive .msubsup {
  text-align: left;
}
.ML__mathlive .negativethinspace {
  display: inline-block;
  margin-left: -0.16667em;
  height: 0.71em;
}
.ML__mathlive .thinspace {
  display: inline-block;
  width: 0.16667em;
  height: 0.71em;
}
.ML__mathlive .mediumspace {
  display: inline-block;
  width: 0.22222em;
  height: 0.71em;
}
.ML__mathlive .thickspace {
  display: inline-block;
  width: 0.27778em;
  height: 0.71em;
}
.ML__mathlive .enspace {
  display: inline-block;
  width: 0.5em;
  height: 0.71em;
}
.ML__mathlive .quad {
  display: inline-block;
  width: 1em;
  height: 0.71em;
}
.ML__mathlive .qquad {
  display: inline-block;
  width: 2em;
  height: 0.71em;
}
.ML__mathlive .llap,
.ML__mathlive .rlap {
  width: 0;
  position: relative;
  display: inline-block;
}
.ML__mathlive .llap > .inner,
.ML__mathlive .rlap > .inner {
  position: absolute;
}
.ML__mathlive .llap > .fix,
.ML__mathlive .rlap > .fix {
  display: inline-block;
}
.ML__mathlive .llap > .inner {
  right: 0;
}
.ML__mathlive .rlap > .inner {
  left: 0;
}
.ML__mathlive .rule {
  display: inline-block;
  border: solid 0;
  position: relative;
  box-sizing: border-box;
}
.ML__mathlive .overline .overline-line,
.ML__mathlive .underline .underline-line {
  width: 100%;
}
.ML__mathlive .overline .overline-line:before,
.ML__mathlive .underline .underline-line:before {
  content: '';
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  display: block;
}
.ML__mathlive .overline .overline-line:after,
.ML__mathlive .underline .underline-line:after {
  border-bottom-style: solid;
  border-bottom-width: max(1px, 0.04em);
  -webkit-print-color-adjust: exact;
  print-color-adjust: exact;
  content: '';
  display: block;
  margin-top: -1px;
}
.ML__mathlive .stretchy {
  display: block;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__mathlive .stretchy:before,
.ML__mathlive .stretchy:after {
  content: '';
}
.ML__mathlive .stretchy svg {
  display: block;
  position: absolute;
  width: 100%;
  height: inherit;
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
}
.ML__mathlive .slice-1-of-2 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__mathlive .slice-2-of-2 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 50.2%;
  overflow: hidden;
}
.ML__mathlive .slice-1-of-3 {
  display: inline-flex;
  position: absolute;
  left: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__mathlive .slice-2-of-3 {
  display: inline-flex;
  position: absolute;
  left: 25%;
  width: 50%;
  overflow: hidden;
}
.ML__mathlive .slice-3-of-3 {
  display: inline-flex;
  position: absolute;
  right: 0;
  width: 25.1%;
  overflow: hidden;
}
.ML__mathlive .slice-1-of-1 {
  display: inline-flex;
  position: absolute;
  width: 100%;
  left: 0;
  overflow: hidden;
}
.ML__mathlive .nulldelimiter {
  display: inline-block;
}
.ML__mathlive .op-group {
  display: inline-block;
}
.ML__mathlive .op-symbol {
  position: relative;
}
.ML__mathlive .op-symbol.small-op {
  font-family: KaTeX_Size1;
}
.ML__mathlive .op-symbol.large-op {
  font-family: KaTeX_Size2;
}
.ML__mathlive .mtable .vertical-separator {
  display: inline-block;
  min-width: 1px;
  box-sizing: border-box;
}
.ML__mathlive .mtable .arraycolsep {
  display: inline-block;
}
.ML__mathlive .mtable .col-align-m > .vlist-t {
  text-align: center;
}
.ML__mathlive .mtable .col-align-c > .vlist-t {
  text-align: center;
}
.ML__mathlive .mtable .col-align-l > .vlist-t {
  text-align: left;
}
.ML__mathlive .mtable .col-align-r > .vlist-t {
  text-align: right;
}
.ML__error {
  display: inline-block;
  background-image: radial-gradient(ellipse at center, hsl(341, 100%, 40%), rgba(0, 0, 0, 0) 70%);
  background-color: hsla(341, 100%, 40%, 0.1);
  background-repeat: repeat-x;
  background-size: 3px 3px;
  padding-bottom: 3px;
  background-position: 0 100%;
}
.ML__error > .ML__error {
  background: transparent;
  padding: 0;
}
.ML__placeholder {
  color: var(--_placeholder-color);
  opacity: var(--_placeholder-opacity);
  padding-left: 0.4ex;
  padding-right: 0.4ex;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}
.ML__notation {
  position: absolute;
  box-sizing: border-box;
  line-height: 0;
}
/* This class is used to implement the \`\\mathtip\` and \`\\texttip\` commands
   For UI elements, see \`[data-ML__tooltip]\`
*/
.ML__tooltip-container {
  position: relative;
  transform: scale(0);
}
.ML__tooltip-container .ML__tooltip-content {
  position: fixed;
  display: inline-table;
  visibility: hidden;
  z-index: 2;
  width: max-content;
  max-width: 400px;
  padding: 12px 12px;
  border-radius: 8px;
  background: #616161;
  --_selection-color: #fff;
  color: #fff;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  opacity: 0;
  transition: opacity 0.15s cubic-bezier(0.4, 0, 1, 1);
}
.ML__tooltip-container .ML__tooltip-content .ML__text {
  white-space: normal;
}
.ML__tooltip-container .ML__tooltip-content .ML__base {
  display: contents;
}
.ML__tooltip-container:hover .ML__tooltip-content {
  visibility: visible;
  opacity: 1;
  font-size: 0.75em;
  transform: scale(1) translate(0, 3em);
}
`,oG=`#mathlive-environment-popover.is-visible {
  visibility: visible;
}
#mathlive-environment-popover {
  --_environment-panel-height: var(--environment-panel-height, 70px);
  --_accent-color: var(--accent-color, #0c75d8);
  --_background: var(--environment-panel-background, #0c75d8);
  --_button-background: var(--environment-panel-button-background, white);
  --_button-background-hover: var(--environment-panel-button-background-hover, #f5f5f7);
  --_button-background-active: var(--environment-panel-button-background-active, #f5f5f7);
  --_button-text: var(--environment-panel-button-text, #e3e4e8);
  position: absolute;
  width: calc(var(--_environment-panel-height) * 2);
  height: var(--_environment-panel-height);
  border-radius: 4px;
  border: 1.5px solid var(--_accent-color);
  background-color: var(--_background);
  box-shadow: 0 0 30px 0 var(--environment-shadow, rgba(0, 0, 0, 0.4));
  pointer-events: all;
  visibility: hidden;
}
#mathlive-environment-popover .MLEP__array-buttons {
  height: calc(var(--_environment-panel-height) * 5/4);
  width: calc(var(--_environment-panel-height) * 5/4);
  margin-left: calc(0px - var(--_environment-panel-height) * 0.16);
  margin-top: calc(0px - var(--_environment-panel-height) * 0.19);
}
#mathlive-environment-popover .MLEP__array-buttons .font {
  fill: white;
}
#mathlive-environment-popover .MLEP__array-buttons circle {
  fill: #7f7f7f;
  transition: fill 300ms;
}
#mathlive-environment-popover .MLEP__array-buttons .MLEP__array-insert-background {
  fill-opacity: 1;
  fill: var(--_background);
  stroke: var(--_accent-color);
  stroke-width: 3px;
}
#mathlive-environment-popover .MLEP__array-buttons line {
  stroke: var(--_accent-color);
  stroke-opacity: 0;
  stroke-width: 40;
  pointer-events: none;
  transition: stroke-opacity 300ms;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover circle {
  fill: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__array-buttons g[data-command]:hover line {
  stroke-opacity: 1;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls {
  height: 100%;
  width: 50%;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options {
  width: var(--_environment-panel-height);
  height: var(--_environment-panel-height);
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  justify-content: space-around;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg {
  pointer-events: all;
  margin-top: 2px;
  width: calc(var(--_environment-panel-height) / 3 * 28 / 24);
  height: calc(var(--_environment-panel-height) / 3 - 2px);
  border-radius: calc(var(--_environment-panel-height) / 25);
  background-color: var(--_button-background);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg:hover {
  background-color: var(--_button-background-hover);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg line {
  stroke: var(--_button-text);
  stroke-width: 2;
  stroke-linecap: round;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg rect,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg path {
  fill-opacity: 0;
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active {
  pointer-events: none;
  background-color: var(--_button-background-active);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active path,
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active line {
  stroke: var(--_accent-color);
}
#mathlive-environment-popover .MLEP__environment-delimiter-controls .MLEP__array-delimiter-options svg.active circle {
  fill: var(--_accent-color);
}
`,oZ=`/* The element that display info while in latex mode */
#mathlive-suggestion-popover {
  background-color: rgba(97, 97, 97);
  color: #fff;
  text-align: center;
  border-radius: 8px;
  position: fixed;
  z-index: 1;
  display: none;
  flex-direction: column;
  justify-content: center;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
}
#mathlive-suggestion-popover.top-tip::after {
  content: '';
  position: absolute;
  top: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.bottom-tip::after {
  content: '';
  position: absolute;
  bottom: -15px;
  left: calc(50% - 15px);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 15px solid rgba(97, 97, 97);
  font-size: 1rem;
}
#mathlive-suggestion-popover.is-animated {
  transition: all 0.2s cubic-bezier(0.64, 0.09, 0.08, 1);
  animation: ML__fade-in cubic-bezier(0, 0, 0.2, 1) 0.15s;
}
#mathlive-suggestion-popover.is-visible {
  display: flex;
}
@keyframes ML__fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
/* The wrapper class for the entire content of the popover panel */
#mathlive-suggestion-popover ul {
  display: flex;
  flex-flow: column;
  list-style: none;
  margin: 0;
  padding: 0;
  align-items: flex-start;
  max-height: 400px;
  overflow-y: auto;
}
#mathlive-suggestion-popover li {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  margin: 8px;
  padding: 8px;
  width: calc(100% - 16px - 16px);
  column-gap: 1em;
  border-radius: 8px;
  cursor: pointer;
  /* Since the content can be clicked on, provide feedback on hover */
}
#mathlive-suggestion-popover li a {
  color: #5ea6fd;
  padding-top: 0.3em;
  margin-top: 0.4em;
  display: block;
}
#mathlive-suggestion-popover li a:hover {
  color: #5ea6fd;
  text-decoration: underline;
}
#mathlive-suggestion-popover li:hover,
#mathlive-suggestion-popover li.is-pressed,
#mathlive-suggestion-popover li.is-active {
  background: rgba(255, 255, 255, 0.1);
}
/* The command inside a popover (inside a #mathlive-suggestion-popover) */
.ML__popover__command {
  font-size: 1.6rem;
  font-family: KaTeX_Main;
}
.ML__popover__current {
  background: #5ea6fd;
  color: #fff;
}
.ML__popover__latex {
  font-family: 'IBM Plex Mono', 'Source Code Pro', Consolas, 'Roboto Mono', Menlo, 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
  align-self: center;
}
/* The keyboard shortcuts for a symbol as displayed in the popover */
.ML__popover__keybinding {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 0.8em;
  opacity: 0.7;
}
/* Style for the character that joins the modifiers of a keyboard shortcut 
(usually a "+" sign)*/
.ML__shortcut-join {
  opacity: 0.5;
}
`,oY=`/* The element that displays the keys as the user type them */
#mathlive-keystroke-caption-panel {
  visibility: hidden;
  /*min-width: 160px;*/
  /*background-color: rgba(97, 97, 200, .95);*/
  background: var(--secondary, hsl(var(--_hue), 19%, 26%));
  border-color: var(--secondary-border, hsl(0, 0%, 91%));
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);
  text-align: center;
  border-radius: 6px;
  padding: 16px;
  position: absolute;
  z-index: 1;
  display: flex;
  flex-direction: row-reverse;
  justify-content: center;
  --keystroke: white;
  --on-keystroke: #555;
  --keystroke-border: #f7f7f7;
}
@media (prefers-color-scheme: dark) {
  body:not([theme='light']) #mathlive-keystroke-caption-panel {
    --keystroke: hsl(var(--_hue), 50%, 30%);
    --on-keystroke: hsl(0, 0%, 98%);
    --keystroke-border: hsl(var(--_hue), 50%, 25%);
  }
}
body[theme='dark'] #mathlive-keystroke-caption-panel {
  --keystroke: hsl(var(--_hue), 50%, 30%);
  --on-keystroke: hsl(0, 0%, 98%);
  --keystroke-border: hsl(var(--_hue), 50%, 25%);
}
#mathlive-keystroke-caption-panel > span {
  min-width: 14px;
  /*height: 8px;*/
  margin: 0 8px 0 0;
  padding: 4px;
  background-color: var(--keystroke);
  color: var(--on-keystroke);
  fill: currentColor;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 1em;
  border-radius: 6px;
  border: 2px solid var(--keystroke-border);
  /*box-shadow: 0 7px 14px rgba(0,0,0,0.25), 0 5px 5px rgba(0,0,0,0.22);*/
}
`,oQ=`.ML__keyboard {
  --_keyboard-height: 0;
  --_keyboard-zindex: var(--keyboard-zindex, 105);
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_padding-horizontal: var(--keyboard-padding-horizontal, 0px);
  --_padding-top: var(--keyboard-padding-top, 5px);
  --_padding-bottom: var(--keyboard-padding-bottom, 0px);
  --_row-padding-left: var(--keyboard-row-padding-left, 0px);
  --_row-padding-right: var(--keyboard-row-padding-right, 0px);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-text-active: var(--keyboard-toolbar-text-active, var(--_accent-color));
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_toolbar-font-size: var(--keyboard-toolbar-font-size, '135%');
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background-hover, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-primary-background: var(--keycap-primary-background, var(--_accent-color));
  --_keycap-primary-text: var(--keycap-primary-text, #ddd);
  --_keycap-primary-background-hover: var(--keycap-primary-background-hover, #0d80f2);
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_keycap-height: var(--keycap-height, 60px);
  /* Keycap width (incl. margin) */
  --_keycap-max-width: var(--keycap-max-width, 100px);
  --_keycap-gap: var(--keycap-gap, 8px);
  --_keycap-font-size: var(--keycap-font-size, clamp(16px, 4cqw, 24px));
  --_keycap-small-font-size: var(--keycap-small-font-size, calc(var(--keycap-font-size) * 0.8));
  --_keycap-extra-small-font-size: var(--keycap-extra-small-font-size, calc(var(--keycap-font-size) / 1.42));
  --_variant-panel-background: var(--variant-panel-background, #fff);
  --_variant-keycap-text: var(--variant-keycap-text, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
  --_variant-keycap-length: var(--variant-keycap-length, 70px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 30px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 12px);
  --_keycap-shift-font-size: var(--keycap-shift-font-size, 16px);
  --_keycap-shift-color: var(--keycap-shift-color, var(--_accent-color));
  --_box-placeholder-color: var(--box-placeholder-color, var(--_accent-color));
}
.is-math-mode .MLK__rows .if-text-mode,
.is-text-mode .MLK__rows .if-math-mode {
  display: none;
}
.if-can-undo,
.if-can-redo,
.if-can-copy,
.if-can-cut,
.if-can-paste {
  opacity: 0.4;
  pointer-events: none;
}
.can-undo .if-can-undo,
.can-redo .if-can-redo,
.can-copy .if-can-copy,
.can-cut .if-can-cut,
.can-paste .if-can-paste {
  opacity: 1;
  pointer-events: all;
}
body > .ML__keyboard {
  position: fixed;
  --_padding-bottom: calc(var(--keyboard-padding-bottom, 0px) + env(safe-area-inset-bottom, 0));
}
body > .ML__keyboard.is-visible > .MLK__backdrop {
  box-shadow: 0 -5px 6px rgba(0, 0, 0, 0.08);
  border-top: 1px solid var(--_border);
}
body > .ML__keyboard.backdrop-is-transparent.is-visible > .MLK__backdrop {
  box-shadow: none;
  border: none;
}
body > .ML__keyboard.is-visible.animate > .MLK__backdrop {
  transition: 0.28s cubic-bezier(0, 0, 0.2, 1);
  transition-property: transform, opacity;
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}
.ML__keyboard {
  position: relative;
  overflow: hidden;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: var(--_keyboard-zindex);
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  opacity: 1;
  transform: none;
  pointer-events: none;
}
.ML__keyboard :where(div) {
  box-sizing: border-box;
  outline: none;
  border: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  overflow-wrap: unset;
  text-align: left;
  vertical-align: baseline;
  cursor: auto;
  white-space: pre;
  box-shadow: none;
  transform: none;
}
.MLK__backdrop {
  position: absolute;
  bottom: calc(-1 * var(--_keyboard-height));
  width: 100%;
  height: var(--_keyboard-height);
  box-sizing: border-box;
  padding-top: var(--_padding-top);
  padding-bottom: var(--_padding-bottom);
  padding-left: var(--_padding-horizontal);
  padding-right: var(--_padding-horizontal);
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0);
  background: var(--_background);
}
.backdrop-is-transparent .MLK__backdrop {
  background: transparent;
}
/* If a custom layout has a custom container/backdrop
  (backdrop-is-transparent), make sure to let pointer event go through. */
.backdrop-is-transparent .MLK__plate {
  background: transparent;
  pointer-events: none;
}
/* If a custom layout has a custom container/backdrop, make sure to 
   allow pointer events on it. */
.backdrop-is-transparent .MLK__layer > div > div {
  pointer-events: all;
}
.ML__keyboard.is-visible > .MLK__backdrop {
  transform: translate(0, calc(-1 * var(--_keyboard-height)));
  opacity: 1;
  visibility: visible;
}
.caps-lock-indicator {
  display: none;
  width: 8px;
  height: 8px;
  background: #0cbc0c;
  box-shadow: inset 0 0 4px 0 #13ca13, 0 0 4px 0 #a9ef48;
  border-radius: 8px;
  right: 8px;
  top: 8px;
  position: absolute;
}
.ML__keyboard.is-caps-lock .caps-lock-indicator {
  display: block;
}
.ML__keyboard.is-caps-lock .shift {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__plate {
  position: absolute;
  top: var(--_padding-top);
  left: var(--_padding-horizontal);
  width: calc(100% - 2 * var(--_padding-horizontal));
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  container-type: inline-size;
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
  pointer-events: all;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  /* Size of toolbar labels */
  font-weight: 400;
  text-shadow: none;
}
.ML__box-placeholder {
  color: var(--_box-placeholder-color);
}
.MLK__tex {
  font-family: KaTeX_Main, KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__tex-math {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
  font-style: italic;
}
.MLK__layer {
  display: none;
  outline: none;
}
.MLK__layer.is-visible {
  display: flex;
  flex-flow: column;
}
/* Keyboard layouts are made or rows of keys... */
.MLK__rows {
  --_keycap-width: min(var(--_keycap-max-width), 10cqw);
  display: flex;
  flex-flow: column;
  align-items: center;
  border-collapse: separate;
  clear: both;
  border: 0;
  margin: 0;
  margin-bottom: var(--_keycap-gap);
  gap: var(--_keycap-gap);
  /* If the styling include, e.g., some shadows, they will be
  cut off by the overflow. In that case, set the padding to 
  compensate. */
  padding-left: var(--_row-padding-left);
  padding-right: var(--_row-padding-right);
  overflow-x: auto;
  touch-action: none;
}
.MLK__rows > .row {
  display: flex;
  flex-flow: row;
  justify-content: center;
  width: 100%;
  gap: var(--_keycap-gap);
  margin: 0;
  padding: 0;
  /* For the alignment of the text on some modifiers (e.g. shift) */
  /* Extra spacing between two adjacent keys */
  /** A regular keycap */
}
.MLK__rows > .row .tex {
  font-family: KaTeX_Math, KaTeX_Main, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .row .tex-math {
  font-family: KaTeX_Math, 'Cambria Math', 'Asana Math', OpenSymbol, Symbola, STIX, Times, serif !important;
}
.MLK__rows > .row .big-op {
  font-size: calc(1.25 * var(--_keycap-font-size));
}
.MLK__rows > .row .small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__rows > .row .bottom {
  justify-content: flex-end;
}
.MLK__rows > .row .left {
  align-items: flex-start;
  padding-left: 12px;
}
.MLK__rows > .row .right {
  align-items: flex-end;
  padding-right: 12px;
}
.MLK__rows > .row .w0 {
  width: 0;
}
.MLK__rows > .row .w5 {
  width: calc(0.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .row .w15 {
  width: calc(1.5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .row .w20 {
  width: calc(2 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .row .w40 {
  width: calc(4 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .row .w50 {
  width: calc(5 * var(--_keycap-width) - var(--_keycap-gap));
}
.MLK__rows > .row .MLK__keycap.w50 {
  font-size: 80%;
  padding-top: 10px;
  font-weight: 100;
}
.MLK__rows > .row .separator {
  background: transparent;
  border: none;
  pointer-events: none;
}
.MLK__rows > .row .horizontal-rule {
  height: 6px;
  margin-top: 3px;
  margin-bottom: 0;
  width: 100%;
  border-radius: 0;
  border-top: var(--_horizontal-rule);
}
.MLK__rows > .row .ghost {
  background: var(--_toolbar-background);
  border: none;
  color: var(--_toolbar-text);
}
.MLK__rows > .row .ghost:hover {
  background: var(--_toolbar-background-hover);
}
.MLK__rows > .row .bigfnbutton {
  font-size: var(--_keycap-extra-small-font-size);
}
.MLK__rows > .row .shift,
.MLK__rows > .row .action {
  color: var(--_keycap-secondary-text);
  background: var(--_keycap-secondary-background);
  border-color: var(--_keycap-secondary-border);
  border-bottom-color: var(--_keycap-secondary-border-bottom);
  line-height: 0.8;
  font-size: min(1rem, var(--_keycap-small-font-size));
  font-weight: 600;
  padding: 8px 12px 8px 12px;
}
.MLK__rows > .row .shift:hover,
.MLK__rows > .row .action:hover {
  background: var(--_keycap-secondary-background-hover);
}
.MLK__rows > .row .action.primary {
  background: var(--_keycap-primary-background);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .row .action.primary:hover {
  background: var(--_keycap-primary-background-hover);
  color: var(--_keycap-primary-text);
}
.MLK__rows > .row .shift.selected,
.MLK__rows > .row .action.selected {
  color: var(--_toolbar-text-active);
}
.MLK__rows > .row .shift.selected.is-pressed,
.MLK__rows > .row .action.selected.is-pressed,
.MLK__rows > .row .shift.selected.is-active,
.MLK__rows > .row .action.selected.is-active {
  color: white;
}
.MLK__rows > .row .warning {
  background: #cd0030;
  color: white;
}
.MLK__rows > .row .warning svg.svg-glyph {
  width: 24px;
  height: 24px;
  min-height: 24px;
}
.MLK__rows > .row div {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-evenly;
  width: calc(var(--_keycap-width) - var(--_keycap-gap));
  height: var(--_keycap-height);
  box-sizing: border-box;
  padding: 0;
  vertical-align: top;
  text-align: center;
  float: left;
  color: var(--_keycap-text);
  fill: currentColor;
  font-size: var(--_keycap-font-size);
  background: var(--_keycap-background);
  border: 1px solid var(--_keycap-border);
  border-bottom-color: var(--_keycap-border-bottom);
  border-radius: 6px;
  cursor: pointer;
  touch-action: none;
  /* Keys with a variants panel */
  position: relative;
  overflow: hidden;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}
.MLK__rows > .row div:hover {
  background: var(--_keycap-background-hover);
}
.MLK__rows > .row div .ML__mathlive {
  pointer-events: none;
  touch-action: none;
}
.MLK__rows > .row div svg.svg-glyph {
  margin: 8px 0;
  width: 20px;
  height: 20px;
  min-height: 20px;
}
.MLK__rows > .row div svg.svg-glyph-lg {
  margin: 8px 0;
  width: 24px;
  height: 24px;
  min-height: 24px;
}
.MLK__rows > .row div.MLK__tex-math {
  font-size: 25px;
}
.MLK__rows > .row div.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
.MLK__rows > .row div.MLK__keycap.is-active,
.MLK__rows > .row div.action.is-active,
.MLK__rows > .row div.MLK__keycap.is-pressed,
.MLK__rows > .row div.action.is-pressed {
  z-index: calc(var(--_keyboard-zindex) - 5);
}
.MLK__rows > .row div.MLK__keycap.is-active aside,
.MLK__rows > .row div.action.is-active aside,
.MLK__rows > .row div.MLK__keycap.is-pressed aside,
.MLK__rows > .row div.action.is-pressed aside {
  display: none;
}
.MLK__rows > .row div.MLK__keycap.is-active .MLK__shift,
.MLK__rows > .row div.action.is-active .MLK__shift,
.MLK__rows > .row div.MLK__keycap.is-pressed .MLK__shift,
.MLK__rows > .row div.action.is-pressed .MLK__shift {
  display: none;
}
.MLK__rows > .row div.shift.is-pressed,
.MLK__rows > .row div.MLK__keycap.is-pressed,
.MLK__rows > .row div.action.is-pressed {
  background: var(--_keycap-background-pressed);
  color: var(--_keycap-text-pressed);
}
.MLK__rows > .row div.shift.is-active,
.MLK__rows > .row div.MLK__keycap.is-active,
.MLK__rows > .row div.action.is-active {
  background: var(--_keycap-background-active);
  color: var(--_keycap-text-active);
}
.MLK__rows > .row div small {
  color: var(--_keycap-secondary-text);
}
.MLK__rows > .row div aside {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 10px;
  line-height: 10px;
  color: var(--_keycap-secondary-text);
}
/* Add an attribute 'data-tooltip' to display a tooltip on hover.
Note there are a different set of tooltip rules for the keyboard toggle
(it's in a different CSS tree) */
.MLK__tooltip {
  position: relative;
}
.MLK__tooltip::after {
  position: absolute;
  display: inline-table;
  content: attr(data-tooltip);
  top: inherit;
  bottom: 100%;
  width: max-content;
  max-width: 200px;
  padding: 8px 8px;
  background: #616161;
  color: #fff;
  text-align: center;
  z-index: 2;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
  border-radius: 2px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-weight: 400;
  font-size: 12px;
  transition: all 0.15s cubic-bezier(0.4, 0, 1, 1) 1s;
  opacity: 0;
  transform: scale(0.5);
}
.MLK__tooltip:hover {
  position: relative;
}
.MLK__tooltip:hover::after {
  opacity: 1;
  transform: scale(1);
}
.MLK__toolbar {
  align-self: center;
  display: flex;
  flex-flow: row;
  justify-content: space-between;
  width: 100%;
  max-width: 996px;
  min-height: 32px;
  /* Icons for undo/redo, etc. */
}
.MLK__toolbar svg {
  height: 20px;
  width: 20px;
}
.MLK__toolbar > .left {
  position: relative;
  display: flex;
  justify-content: flex-start;
  flex-flow: row;
}
.MLK__toolbar > .right {
  display: flex;
  justify-content: flex-end;
  flex-flow: row;
}
.MLK__toolbar > div > div {
  /* "button" in the toolbar */
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--_toolbar-text);
  fill: currentColor;
  background: var(--_toolbar-background);
  font-size: var(--_toolbar-font-size);
  padding: 4px 15px;
  cursor: pointer;
  width: max-content;
  min-width: 42px;
  min-height: 34px;
  border: none;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 8px;
  padding-top: 8px;
  margin-top: 0;
  margin-bottom: 4px;
  margin-left: 4px;
  margin-right: 4px;
  border-radius: 8px;
  box-shadow: none;
  border-bottom: 2px solid transparent;
}
.MLK__toolbar > div > div:not(.disabled):not(.selected):hover {
  background: var(--_toolbar-background-hover);
}
.MLK__toolbar > div > div.disabled svg,
.MLK__toolbar > div > div.disabled:hover svg,
.MLK__toolbar > div > div.disabled.is-pressed svg {
  color: var(--_toolbar-text);
  opacity: 0.2;
}
.MLK__toolbar > div > div:hover,
.MLK__toolbar > div > div:active,
.MLK__toolbar > div > div.is-pressed,
.MLK__toolbar > div > div.is-active {
  color: var(--_toolbar-text-active);
}
.MLK__toolbar > div > div.selected {
  color: var(--_toolbar-text-active);
  background: var(--_toolbar-background-selected);
  border-radius: 0;
  border-bottom-color: var(--_toolbar-text-active);
  padding-bottom: 4px;
  margin-bottom: 8px;
}
/* This is the element that displays variants on press+hold */
.MLK__variant-panel {
  visibility: hidden;
  position: fixed;
  display: flex;
  flex-flow: row wrap-reverse;
  justify-content: center;
  align-content: center;
  margin: 0;
  padding: 0;
  bottom: auto;
  top: 0;
  box-sizing: content-box;
  transform: none;
  z-index: calc(var(--_keyboard-zindex) + 1);
  touch-action: none;
  max-width: 350px;
  background: var(--_variant-panel-background);
  text-align: center;
  border-radius: 6px;
  padding: 6px;
  box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
  transition: none;
}
.MLK__variant-panel.is-visible {
  visibility: visible;
}
.MLK__variant-panel.compact {
  --_variant-keycap-length: var(--variant-keycap-length, 50px);
  --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
  --_variant-keycap-aside-font-size: var(--variant-keycap-aside-font-size, 10px);
}
.MLK__variant-panel .item {
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: center;
  font-size: var(--_variant-keycap-font-size);
  height: var(--_variant-keycap-length);
  width: var(--_variant-keycap-length);
  margin: 0;
  box-sizing: border-box;
  border-radius: 5px;
  border: 1px solid transparent;
  background: transparent;
  pointer-events: all;
  cursor: pointer;
  color: var(--_variant-keycap-text);
  fill: currentColor;
}
@media (max-height: 412px) {
  .MLK__variant-panel .item {
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
.MLK__variant-panel .item .ML__mathlive {
  pointer-events: none;
}
.MLK__variant-panel .item.is-active {
  background: var(--_variant-keycap-background-active);
  color: var(--_variant-keycap-text-active);
}
.MLK__variant-panel .item.is-pressed {
  background: var(--_variant-keycap-background-pressed);
  color: var(--_variant-keycap-text-pressed);
}
.MLK__variant-panel .item.small {
  font-size: var(--_keycap-small-font-size);
}
.MLK__variant-panel .item.swatch-button {
  box-sizing: border-box;
  background: #fbfbfb;
}
.MLK__variant-panel .item.swatch-button > span {
  display: inline-block;
  margin: 6px;
  width: calc(100% - 12px);
  height: calc(100% - 12px);
  border-radius: 50%;
}
.MLK__variant-panel .item.swatch-button:hover {
  background: #f0f0f0;
}
.MLK__variant-panel .item.swatch-button:hover > span {
  border-radius: 2px;
}
.MLK__variant-panel .item.box > div,
.MLK__variant-panel .item.box > span {
  border: 1px dashed rgba(0, 0, 0, 0.24);
}
.MLK__variant-panel .item .warning {
  min-height: 60px;
  min-width: 60px;
  background: #cd0030;
  color: white;
  padding: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
}
.MLK__variant-panel .item .warning.is-pressed,
.MLK__variant-panel .item .warning.is-active {
  background: red;
}
.MLK__variant-panel .item .warning svg.svg-glyph {
  width: 50px;
  height: 50px;
}
.MLK__variant-panel .item aside {
  font-size: var(--_variant-keycap-aside-font-size);
  line-height: 12px;
  opacity: 0.78;
  padding-top: 2px;
}
.MLK__keycap {
  position: relative;
}
.MLK__shift {
  display: block;
  position: absolute;
  right: 4px;
  top: 4px;
  font-size: var(--_keycap-shift-font-size);
  color: var(--_keycap-shift-color);
}
.hide-shift .MLK__shift {
  display: none;
}
@media (max-width: 414px) {
  .MLK__variant-panel {
    max-width: 350px;
    --_variant-keycap-font-size: var(--variant-keycap-font-size, 24px);
    --_variant-keycap-length: var(--variant-keycap-length, 50px);
  }
}
/* @xs breakpoint: iPhone 5 */
@container (max-width: 414px) {
  .MLK__rows {
    --_keycap-gap: max(var(--_keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--_keycap-height), 42px);
    --_keycap-width: min(min(var(--_keycap-max-width), 10cqw), 62px);
  }
  .MLK__toolbar > div > div {
    font-size: 100%;
    margin-left: 2px;
    margin-right: 2px;
  }
  .MLK__rows .shift,
  .MLK__rows .action {
    font-size: 65%;
  }
  .MLK__rows .warning svg.svg-glyph {
    width: 14px;
    height: 14px;
    min-height: 14px;
  }
}
@container (max-width: 744px) {
  .MLK__rows {
    --_keycap-gap: max(var(--keycap-gap, 2px), 2px);
    --_keycap-height: max(var(--keycap-height, 52px), 52px);
    --_keycap-width: min(min(var(--_keycap-max-width), 10cqw), 62px);
  }
  .MLK__toolbar > div > div {
    padding-left: 0;
    padding-right: 0;
  }
  .MLK__tooltip::after {
    padding: 8px 16px;
    font-size: 16px;
  }
  .MLK__rows > .row > div.fnbutton {
    font-size: 16px;
  }
  .MLK__rows > .row > div.bigfnbutton {
    font-size: calc(var(--_keycap-extra-small-font-size) / 1.55);
  }
  .MLK__rows > .row > div.small {
    font-size: 13px;
  }
  .MLK__rows > .row > div > aside {
    display: none;
  }
  .MLK__shift {
    display: none;
  }
}
/* Medium breakpoint: larger phones */
@container (max-width: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .row > div > small {
    font-size: 14px;
  }
}
@media (max-height: 768px) {
  .MLK__rows {
    --_keycap-height: max(var(--keycap-height, 42px), 42px);
  }
  .MLK__rows > .row > div > small {
    font-size: 14px;
  }
}
@container (max-width: 1444px) {
  .MLK__rows .if-wide {
    display: none;
  }
}
@media (prefers-color-scheme: dark) {
  .ML__keyboard {
    --_accent-color: var(--keyboard-accent-color, #0b5c9c);
    --_background: var(--keyboard-background, #151515);
    --_border: var(--keyboard-border, transparent);
    --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
    --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
    --keyboard-toolbar-background-hover: #303030;
    --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
    --_keycap-background: var(--keycap-background, #1f2022);
    --_keycap-background-hover: var(--keycap-background, #2f3032);
    --_keycap-border: var(--_keycap-border, transparent);
    --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
    --_keycap-text: var(--keycap-text, #e3e4e8);
    --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
    --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
    --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
    --keycap-secondary-border: transparent;
    --keycap-secondary-border-bottom: transparent;
    --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
    --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
    --_variant-panel-background: var(--variant-panel-background, #303030);
    --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
  }
}
/* Same as the media query, but with a class */
[theme='dark'] .ML__keyboard .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0b5c9c);
  --_background: var(--keyboard-background, #151515);
  --_border: var(--keyboard-border, transparent);
  --_toolbar-text: var(--keyboard-toolbar-text, #e3e4e8);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #303030);
  --keyboard-toolbar-background-hover: #303030;
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #303030);
  --_keycap-background: var(--keycap-background, #1f2022);
  --_keycap-background-hover: var(--keycap-background, #2f3032);
  --_keycap-border: var(--_keycap-border, transparent);
  --_keycap-border-bottom: var(--_keycap-border-bottom, transparent);
  --_keycap-text: var(--keycap-text, #e3e4e8);
  --_keycap-secondary-background: var(--keycap-secondary-background, #3d4144);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #4d5154);
  --_keycap-secondary-text: var(--keycap-secondary-text, #e7ebee);
  --keycap-secondary-border: transparent;
  --keycap-secondary-border-bottom: transparent;
  --_keycap-secondary-border: var(--keycap-secondary-border, transparent);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, transparent);
  --_variant-panel-background: var(--variant-panel-background, #303030);
  --_variant-keycap-text-active: var(--variant-keycap-text-active, #fff);
}
[theme='light'] .ML__keyboard {
  --_accent-color: var(--keyboard-accent-color, #0c75d8);
  --_background: var(--keyboard-background, #cacfd7);
  --_border: var(--keyboard-border, #ddd);
  --_toolbar-text: var(--keyboard-toolbar-text, #2c2e2f);
  --_toolbar-background: var(--keyboard-toolbar-background, transparent);
  --_toolbar-background-hover: var(--keyboard-toolbar-background-hover, #eee);
  --_toolbar-background-selected: var(--keyboard-toolbar-background-selected, transparent);
  --_horizontal-rule: var(--keyboard-horizontal-rule, 1px solid #fff);
  --_keycap-background: var(--keycap-background, white);
  --_keycap-background-hover: var(--keycap-background, #f5f5f7);
  --_keycap-background-active: var(--keycap-background-active, var(--_accent-color));
  --_keycap-background-pressed: var(--keycap-background-pressed, var(--_accent-color));
  --_keycap-border: var(--_keycap-border, #e5e6e9);
  --_keycap-border-bottom: var(--_keycap-border-bottom, #8d8f92);
  --_keycap-text: var(--keycap-text, #000);
  --_keycap-text-active: var(--keycap-text-active, #fff);
  --_keycap-text-hover: var(--keycap-text-hover, var(--_keycap-text));
  --_keycap-text-pressed: var(--keycap-text-pressed, #fff);
  --_keycap-shift-text: var(--keycap-shift-text, var(--_accent-color));
  --_keycap-secondary-background: var(--keycap-secondary-background, #a0a9b8);
  --_keycap-secondary-background-hover: var(--keycap-secondary-background-hover, #7d8795);
  --_keycap-secondary-text: var(--keycap-secondary-text, #060707);
  --_keycap-secondary-border: var(--keycap-secondary-border, #c5c9d0);
  --_keycap-secondary-border-bottom: var(--keycap-secondary-border-bottom, #989da6);
  --_variant-panel-background: var(--variant-panel-background, #fff);
  --_variant-keycap-text: var(--variant-keycap-textvar, var(--_keycap-text));
  --_variant-keycap-text-active: var(--variant-keycap-text-active, var(--_keycap-text-active));
  --_variant-keycap-background-active: var(--variant-keycap-background-active, var(--_accent-color));
}
`;function o0(e){let i="";switch(e){case"mathfield-element":i=`
    :host { display: inline-block; background-color: field; color: fieldtext; border-width: 1px; border-style: solid; border-color: #acacac; border-radius: 2px; padding:4px;}
    :host([hidden]) { display: none; }
    :host([disabled]), :host([disabled]:focus), :host([disabled]:focus-within) { outline: none; opacity:  .5; }
    :host(:focus), :host(:focus-within) {
      outline: Highlight auto 1px;    /* For Firefox */
      outline: -webkit-focus-ring-color auto 1px;
    }
    :host([readonly]:focus), :host([readonly]:focus-within),
    :host([read-only]:focus), :host([read-only]:focus-within) {
      outline: none;
    }
    @media (hover: none) and (pointer: coarse) {
      :host(:not(:focus)) :first-child { pointer-events: none !important; }
    }`;break;case"core":i=oX;break;case"mathfield":i=oJ;break;case"environment-popover":i=oG;break;case"suggestion-popover":i=oZ;break;case"keystroke-caption":i=oY;break;case"virtual-keyboard":i=oQ}return i}function o1(e){return n9||(n9={}),n9[e]||(n9[e]=new CSSStyleSheet,n9[e].replaceSync(o0(e))),n9[e]}function o4(e){var i;if(!("adoptedStyleSheets"in document)){if(window.document.getElementById(`mathlive-style-${e}`))return;let i=window.document.createElement("style");i.id=`mathlive-style-${e}`,i.append(window.document.createTextNode(o0(e))),window.document.head.appendChild(i);return}if(se||(se={}),(null!=(i=se[e])?i:0)!==0)se[e]+=1;else{let i=o1(e);document.adoptedStyleSheets=[...document.adoptedStyleSheets,i],se[e]=1}}function o2(e){if("adoptedStyleSheets"in document&&null!=se&&se[e]&&(se[e]-=1,se[e]<=0)){let i=n9[e];document.adoptedStyleSheets=document.adoptedStyleSheets.filter(e=>e!==i)}}var o3=class e extends ok{constructor(e){var i;super(h(u({},e),{type:"accent",body:null!=(i=e.body)?i:void 0})),e.accentChar?this.accent=e.accentChar:this.svgAccent=null==e?void 0:e.svgAccent,this.skipBoundary=!0,this.captureSelection=!0}static fromJson(i){return new e(i)}toJson(){return h(u({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(e){var i;let r=new og({parent:e,mathstyle:"cramp"},this.style),a=null!=(i=ok.createBox(r,this.body))?i:new or("▢",{style:this.style}),o=0;!this.hasEmptyBranch("body")&&2===this.body.length&&this.body[1].isCharacterBox()&&(o=a.skew);let n=Math.min(a.height,.431),s;if(this.svgAccent)s=os(this.svgAccent),n=r.metrics.bigOpSpacing1-n;else if(this.accent){let e=new or(this.accent,{fontFamily:"Main-Regular"});e.italic=0;let i=8407===this.accent?" ML__accent-vec":"";s=new or(new or(e),{classes:"ML__accent-body"+i})}s=new ol({shift:0,children:[{box:new or(a)},-n,{box:s,marginLeft:a.left+2*o,classes:["ML__center"]}]});let l=new or(s,{type:"lift"});return this.caret&&(l.caret=this.caret),this.bind(r,l.wrap(r)),this.attachSupsub(r,{base:l})}},o6={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},o8=Object.fromEntries(Object.entries(o6).map(([e,i])=>[i,e]));function o5(e){var i;return null!=(i=({"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"∣":8739,"∥":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730})[e])?i:e.codePointAt(0)}function o7(e,i,r,a,o){var n,s;let l=new og({parent:a,mathstyle:"textstyle"},null==o?void 0:o.style),c=new or(o5(e),{fontFamily:`Size${i}-Regular`,isSelected:o.isSelected,classes:(null!=(n=o.classes)?n:"")+` ML__delim-size${i}`,type:null!=(s=o.type)?s:"ignore"}).wrap(l);return r&&c.setTop((1-l.scalingFactor)*.25),c}function o9(e,i,r,a,o){var n;let s,l,c,d;s=c=d=o5(e),l=null;let p="Size1-Regular";"\\vert"===e||"\\lvert"===e||"\\rvert"===e||"\\mvert"===e||"\\mid"===e?c=s=d=8739:"\\Vert"===e||"\\lVert"===e||"\\rVert"===e||"\\mVert"===e||"\\|"===e?c=s=d=8741:"\\uparrow"===e?c=d=9168:"\\Uparrow"===e?c=d=8214:"\\downarrow"===e?s=c=9168:"\\Downarrow"===e?s=c=8214:"\\updownarrow"===e?(s=8593,c=9168,d=8595):"\\Updownarrow"===e?(s=8657,c=8214,d=8659):"["===e||"\\lbrack"===e?(s=9121,c=9122,d=9123,p="Size4-Regular"):"]"===e||"\\rbrack"===e?(s=9124,c=9125,d=9126,p="Size4-Regular"):"\\lfloor"===e||"⌊"===e?(c=s=9122,d=9123,p="Size4-Regular"):"\\lceil"===e||"⌈"===e?(s=9121,c=d=9122,p="Size4-Regular"):"\\rfloor"===e||"⌋"===e?(c=s=9125,d=9126,p="Size4-Regular"):"\\rceil"===e||"⌉"===e?(s=9124,c=d=9125,p="Size4-Regular"):"("===e||"\\lparen"===e?(s=9115,c=9116,d=9117,p="Size4-Regular"):")"===e||"\\rparen"===e?(s=9118,c=9119,d=9120,p="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(s=9127,l=9128,d=9129,c=9130,p="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(s=9131,l=9132,d=9133,c=9130,p="Size4-Regular"):"\\lgroup"===e||"⟮"===e?(s=9127,d=9129,c=9130,p="Size4-Regular"):"\\rgroup"===e||"⟯"===e?(s=9131,d=9133,c=9130,p="Size4-Regular"):"\\lmoustache"===e||"⎰"===e?(s=9127,d=9133,c=9130,p="Size4-Regular"):"\\rmoustache"===e||"⎱"===e?(s=9131,d=9129,c=9130,p="Size4-Regular"):"\\surd"===e?(s=57345,d=9143,c=57344,p="Size4-Regular"):"\\ulcorner"===e?(s=9484,c=d=32):"\\urcorner"===e?(s=9488,c=d=32):"\\llcorner"===e?(d=9492,c=s=32):"\\lrcorner"===e&&(s=9496,c=s=32);let m=aH(s,p),f=m.height+m.depth,y=aH(c,p),b=y.height+y.depth,g=aH(d,p),v=g.height+g.depth,x=0,w=1;if(null!==l){let e=aH(l,p);x=e.height+e.depth,w=2}let k=f+v+x,_=Math.max(0,Math.ceil((i-k)/(w*b))),S=k+_*w*b,M=.25;r&&(M*=a.scalingFactor);let L=S/2-M,C=[];C.push({box:new or(d,{fontFamily:p})}),C.push(-.008);let z=new or(c,{fontFamily:p});if(null===l)for(let e=0;e<_;e++)C.push({box:z});else{for(let e=0;e<_;e++)C.push({box:z});C.push(-.008),C.push({box:new or(l,{fontFamily:p})}),C.push(-.008);for(let e=0;e<_;e++)C.push({box:z})}C.push(-.008),C.push({box:new or(s,{fontFamily:p})});let A="";"Size1-Regular"===p?A=" delim-size1":"Size4-Regular"===p&&(A=" delim-size4");let E=new ol({bottom:L,children:C},{classes:A});return new or(E,h(u({},null!=o?o:{}),{classes:(null!=(n=null==o?void 0:o.classes)?n:"")+" ML__delim-mult"}))}var ne=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","⌊","⌋","⌈","⌉"]),nt=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","⟮","⟯","⎰","⎱"]),ni=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),nr=[0,1.2,1.8,2.4,3],na=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],no=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],nn=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function ns(e,i,r,a,o,n){var s,l,c;let d,p;if(!i||0===i.length||"."===i)return nc(o);"<"===i||"\\lt"===i?i="\\langle":(">"===i||"\\gt"===i)&&(i="\\rangle"),d=ni.has(i)?na:ne.has(i)?nn:no;let m=function(e,i,r,a){let o={"-4":0,"-3":1,0:2}[a.mathstyle.sizeDelta];for(let s=o;s<r.length&&"stack"!==r[s].type;s++){var n;let o=aH(e,"small"===(n=r[s]).type?"Main-Regular":"large"===n.type?"Size"+n.size+"-Regular":(n.type,"Size4-Regular"));if(o.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let l=o.height+o.depth;if("small"===r[s].type&&("scriptscriptstyle"===r[s].mathstyle?l*=Math.max(aV[Math.max(1,a.size-2)],a.minFontScale):"scriptstyle"===r[s].mathstyle&&(l*=Math.max(aV[Math.max(1,a.size-1)],a.minFontScale))),l>i)return r[s]}return r[r.length-1]}(o5(i),r,d,o),f=new og({parent:o,mathstyle:m.mathstyle},null==n?void 0:n.style);return"small"===m.type?(s=i,l=h(u({},n),{type:e}),p=new or(o5(s),{fontFamily:"Main-Regular",isSelected:l.isSelected,classes:"ML__small-delim "+(null!=(c=l.classes)?c:"")}).wrap(f),a&&p.setTop((1-f.scalingFactor)*.25),p):"large"===m.type?o7(i,m.size,a,f,h(u({},n),{type:e})):(m.type,o9(i,r,a,f,h(u({},n),{type:e})))}function nl(e,i,r,a,o,n){if("."===i)return nc(o,null==n?void 0:n.classes);let s=.25*o.scalingFactor,l=Math.max(r-s,a+s);return ns(e,i,Math.max(l/500*901,2*l-.5),!0,o,n)}function nc(e,i){return new or(null,{classes:" nulldelimiter "+(null!=i?i:""),type:"ignore",width:e.getRegisterAsEm("nulldelimiterspace")}).wrap(new og({parent:e,mathstyle:"textstyle"}))}var nd=class e extends ok{constructor(e){var i;super({type:"placeholder",command:"\\placeholder",mode:null!=(i=null==e?void 0:e.mode)?i:"math",style:null==e?void 0:e.style}),this.captureSelection=!0}static fromJson(i){return new e(i)}toJson(){return super.toJson()}render(e){let i;return this.value=e.placeholderSymbol,i="function"==typeof e.renderPlaceholder?e.renderPlaceholder(e):this.createBox(e),this.caret&&(i.classes+=" ML__placeholder-selected"),i}_serialize(){return"\\placeholder{}"}},nu=["matrix","matrix*","pmatrix","pmatrix*","bmatrix","bmatrix*","Bmatrix","Bmatrix*","vmatrix","vmatrix*","Vmatrix","Vmatrix*"],nh=["cases","dcases","rcases"],np=["align","align*","aligned","gather","gathered","split"],nm=["array","subequations","eqnarray"];function nf(e){return nu.includes(e)}var ny=class e extends ok{constructor(e,i,r,a={}){var o;super({type:"array"}),this.environmentName=e,this.rowGaps=r,a.mathstyleName&&(this.mathstyleName=a.mathstyleName),a.columns&&(0===a.columns.length?this.colFormat=[{align:"l"}]:this.colFormat=a.columns),this.colFormat||(this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]),this.array=function(e,i,r){let a=0;for(let e of r)"align"in e&&(a+=1);let o=0,n=[];for(let r of i){let i=0;for(o=Math.max(o,Math.min(r.length,a));i<r.length;){let o=[],s=Math.min(r.length,i+a);for(;i<s;){let a=r[i];0===a.length?o.push([new ok({type:"first",mode:e.mode})]):"first"!==a[0].type?o.push([new ok({type:"first",mode:e.mode}),...a]):(a.slice(1).some(e=>"first"===e.type),o.push(a)),i+=1}n.push(o)}}n.length>0&&1===n[n.length-1].length&&1===n[n.length-1][0].length&&"first"===n[n.length-1][0][0].type&&n.pop();let s=[];for(let i of n){if(i.length!==o)for(let r=i.length;r<o;r++)i.push([new ok({type:"first",mode:e.mode}),new nd]);s.push(i)}let l=0,c=0;for(let i of s){for(let r of(c=0,i)){for(let i of r)i.parent=e,i.parentBranch=[l,c];c+=1}l+=1}return e.isDirty=!0,s}(this,i,this.colFormat),a.leftDelim&&(this.leftDelim=a.leftDelim),a.rightDelim&&(this.rightDelim=a.rightDelim),void 0!==a.arraycolsep&&(this.arraycolsep=a.arraycolsep),this.colSeparationType=a.colSeparationType,void 0!==a.arraystretch&&(this.arraystretch=a.arraystretch),this.minColumns=null!=(o=a.minColumns)?o:1}static fromJson(i){return new e(i.environmentName,i.array,i.rowGaps,i)}toJson(){let e=h(u({},super.toJson()),{environmentName:this.environmentName,array:this.array.map(e=>e.map(e=>e.map(e=>e.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType});return void 0!==this.arraystretch&&(e.arraystretch=this.arraystretch),void 0!==this.arraycolsep&&(e.arraycolsep=this.arraycolsep),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),e}branch(e){var i;if(ow(e))return null!=(i=this.array[e[0]][e[1]])?i:void 0}createBranch(e){var i;return ow(e)?(this.isDirty=!0,null!=(i=this.branch(e))?i:[]):[]}get rowCount(){return this.array.length}get colCount(){return this.array[0].length}get maxColumns(){return this.colFormat.filter(e=>!!e.align).length}removeBranch(e){if(ox(e))return super.removeBranch(e);let i=this.branch(e);return this.array[e[0]][e[1]]=void 0,i.forEach(e=>{e.parent=void 0,e.parentBranch=void 0}),i[0].type,i.shift(),this.isDirty=!0,i}get hasChildren(){return this.children.length>0}get children(){let e=[];for(let i of this.array)for(let r of i)if(r)for(let i of r)e.push(...i.children),e.push(i);return[...e,...super.children]}render(e){var i,r,a,o,n,s;let l=new og({parent:e,mathstyle:this.mathstyleName},this.style),c=l.getRegisterAsEm("arrayrulewidth"),d=l.getRegisterAsEm("arraycolsep"),u=l.getRegisterAsEm("doublerulesep"),h=null!=(r=null!=(i=this.arraystretch)?i:l.getRegisterAsNumber("arraystretch"))?r:1,p="number"==typeof this.arraycolsep?this.arraycolsep:d;"small"===this.colSeparationType&&(p=.2778*(new og({parent:e,mathstyle:"scriptstyle"}).scalingFactor/e.scalingFactor));let m=1.2*h,f=.7*m,y=.3*m,b=0,g=[],v=0,x=this.array.length;for(let e=0;e<x;++e){let i=this.array[e];v=Math.max(v,i.length);let r=new og({parent:l,mathstyle:this.mathstyleName},this.style),n=f/r.scalingFactor,s=y/r.scalingFactor,c={cells:[],height:0,depth:0,pos:0};for(let e of i){let i=null!=(a=ok.createBox(r,e,{type:"ignore"}))?a:new or(null,{type:"ignore"});s=Math.max(s,i.depth),n=Math.max(n,i.height),c.cells.push(i)}let d=null!=(o=op(this.rowGaps[e]))?o:0;d>0&&(d+=y,s=Math.max(s,d),d=0),e<x-1&&!nf(this.environmentName)&&"cases"!==this.environmentName&&"array"!==this.environmentName&&(s+=l.getRegisterAsEm("jot")),c.height=n,c.depth=s,b+=n,c.pos=b,b+=s+d,g.push(c)}let w=b/2+.25,k=[];for(let e=0;e<v;e++){let i=[];for(let r of g){let a=r.cells[e];a.depth=r.depth,a.height=r.height,i.push({box:a,shift:r.pos-w})}i.length>0&&k.push(new ol({individualShift:i}))}let _=[],S=!1,M=!1,L=0,C=!this.leftDelim,{colFormat:z}=this;for(let i of z){if("align"in i&&L>=k.length)break;if("align"in i)S?_.push(ng(2*p)):(M||C)&&_.push(ng(p)),_.push(new or(k[L],{classes:"col-align-"+i.align})),L++,S=!0,M=!1,C=!1;else if("gap"in i){if("number"==typeof i.gap)_.push(ng(i.gap));else{let r=function(e,i,r,a){if(!a)return null;let o=[];for(let n of i){let i=ok.createBox(e,a,{type:"ignore"});i&&(i.depth=n.depth,i.height=n.height,o.push({box:i,shift:n.pos-r}))}return new ol({individualShift:o}).wrap(e)}(e,g,w,i.gap);r&&_.push(r)}S=!1,M=!1,C=!1}else if("separator"in i){let e=new or(null,{classes:"vertical-separator"});e.setStyle("height",b,"em"),e.setStyle("border-right",`${c}em ${i.separator} currentColor`),e.setStyle("vertical-align",-(b-w),"em");let r=0;M?r=u-c:S&&(r=p-c),e.left=r,_.push(e),S=!1,M=!0,C=!1}}S&&!this.rightDelim&&_.push(ng(p));let A=new or(_,{classes:"mtable"});if((!this.leftDelim||"."===this.leftDelim)&&(!this.rightDelim||"."===this.rightDelim))return this.caret&&(A.caret=this.caret),this.bind(e,A);let E=A.height,K=A.depth,D=this.bind(e,new or([this.bind(e,nl("open",null!=(n=this.leftDelim)?n:".",E,K,l,{isSelected:this.isSelected})),A,this.bind(e,nl("close",null!=(s=this.rightDelim)?s:".",E,K,l,{isSelected:this.isSelected}))],{type:"ord"}));return D?(this.caret&&(D.caret=this.caret),this.bind(e,this.attachSupsub(e,{base:D}))):null}_serialize(e){var i;let r=[`\\begin{${this.environmentName}}`];if("array"===this.environmentName){if(r.push("{"),void 0!==this.colFormat)for(let e of this.colFormat)"align"in e&&"string"==typeof e.align?r.push(e.align):"separator"in e&&"solid"===e.separator?r.push("|"):"separator"in e&&"dashed"===e.separator&&r.push(":");r.push("}")}for(let a=0;a<this.array.length;a++){for(let i=0;i<this.array[a].length;i++)i>0&&r.push(" & "),r.push(ok.serialize(this.array[a][i],e));if(a<this.array.length-1){let e=this.rowGaps[a];null!=e&&e.dimension?r.push(`\\\\[${e.dimension} ${null!=(i=e.unit)?i:"pt"}] `):r.push("\\\\ ")}}return r.push(`\\end{${this.environmentName}}`),a4(r)}getCell(e,i){return this.array[e][i]}setCell(e,i,r){for(let r of("array"===this.type&&Array.isArray(this.array)&&this.array[e][i],this.array[e][i]))r.parent=void 0,r.parentBranch=void 0;let a=r;for(let o of((0===r.length||"first"!==r[0].type)&&(a=[new ok({type:"first",mode:this.mode}),...r]),this.array[e][i]=a,a))o.parent=this,o.parentBranch=[e,i];this.isDirty=!0}addRowBefore(e){"array"===this.type&&Array.isArray(this.array);let i=[];for(let e=0;e<this.colCount;e++)i.push(nb(this));this.array.splice(e,0,i);for(let i=e;i<this.rowCount;i++)for(let e=0;e<this.colCount;e++){let r=this.array[i][e];if(r)for(let a of r)a.parentBranch=[i,e]}this.isDirty=!0}addRowAfter(e){"array"===this.type&&Array.isArray(this.array);let i=[];for(let e=0;e<this.colCount;e++)i.push(nb(this));this.array.splice(e+1,0,i);for(let i=e+1;i<this.rowCount;i++)for(let e=0;e<this.colCount;e++){let r=this.array[i][e];if(r)for(let a of r)a.parentBranch=[i,e]}this.isDirty=!0}removeRow(e){for(let i of("array"===this.type&&Array.isArray(this.array)&&this.rowCount,this.array.splice(e,1)))for(let e of i)if(e)for(let i of e)i.parent=void 0,i.parentBranch=void 0;for(let i=e;i<this.rowCount;i++)for(let e=0;e<this.colCount;e++){let r=this.array[i][e];if(r)for(let a of r)a.parentBranch=[i,e]}this.isDirty=!0}addColumnBefore(e){for(let i of("array"===this.type&&Array.isArray(this.array),this.array))i.splice(e,0,nb(this));for(let i=0;i<this.rowCount;i++)for(let r=e;r<this.colCount;r++){let e=this.array[i][r];if(e)for(let a of e)a.parentBranch=[i,r]}this.isDirty=!0}addColumnAfter(e){for(let i of("array"===this.type&&Array.isArray(this.array),this.array))i.splice(e+1,0,nb(this));for(let i=0;i<this.rowCount;i++)for(let r=e+1;r<this.colCount;r++){let e=this.array[i][r];if(e)for(let a of e)a.parentBranch=[i,r]}this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(e){for(let i of("array"===this.type&&Array.isArray(this.array)&&this.colCount,this.array))for(let r of i.splice(e,1))if(r)for(let e of r)e.parent=void 0,e.parentBranch=void 0;for(let i=0;i<this.rowCount;i++)for(let r=e;r<this.colCount;r++){let e=this.array[i][r];if(e)for(let a of e)a.parentBranch=[i,r]}this.isDirty=!0}get cells(){let e=[];for(let i of this.array)for(let r of i)r&&e.push(r.filter(e=>"first"!==e.type));return e}};function nb(e){let i=new ok({type:"first",mode:e.mode});i.parent=e;let r=new nd;return r.parent=e,[i,r]}function ng(e){return new or(null,{classes:"arraycolsep",width:e})}var nv=class e extends ok{constructor(e){super({mode:e.mode,command:e.command,style:e.style,body:e.body,type:"box"}),this.framecolor=e.framecolor,this.backgroundcolor=e.backgroundcolor,this.padding=e.padding,this.offset=e.offset,this.border=e.border}static fromJson(i){return new e(i)}toJson(){return h(u({},super.toJson()),{framecolor:this.framecolor,backgroundcolor:this.backgroundcolor,padding:this.padding,offset:this.offset,border:this.border})}render(e){var i,r,a,o;let n=ok.createBox(e,this.body,{type:"lift"});if(!n)return null;let s=e.toEm(null!=(i=this.offset)?i:{dimension:0});n.depth+=s;let l=new og({parent:e},this.style),c=l.toEm(null!=(r=this.padding)?r:{register:"fboxsep"}),d=new or(null,{classes:"ML__box"});d.height=n.height+c,d.depth=n.depth+c,d.setStyle("box-sizing","border-box"),d.setStyle("position","absolute"),d.setStyle("top",-c+.3,"em"),d.setStyle("height",d.height+d.depth,"em"),d.setStyle("left",0),d.setStyle("width","100%"),this.backgroundcolor&&d.setStyle("background-color",null!=(a=l.toColor(this.backgroundcolor))?a:"transparent"),this.framecolor&&d.setStyle("border",`${l.getRegisterAsEm("fboxrule",2)}em solid ${null!=(o=l.toColor(this.framecolor))?o:"black"}`),this.border&&d.setStyle("border",this.border),n.setStyle("display","inline-block"),n.setStyle("position","relative"),n.setStyle("height",n.height+n.depth,"em"),n.setStyle("vertical-align",-n.height,"em");let u=new or([d,n],{type:"lift"});return u.setStyle("display","inline-block"),u.setStyle("position","relative"),u.setStyle("line-height",0),u.height=n.height+c+(s>0?s:0),u.depth=n.depth+c+(s<0?-s:0),u.setStyle("padding-left",c,"em"),u.setStyle("padding-right",c,"em"),u.setStyle("height",n.height+n.depth+2*c+Math.abs(s),"em"),u.setStyle("margin-top",-c,"em"),u.setStyle("top",n.depth-n.height+2*c-s,"em"),u.setStyle("vertical-align",n.depth+2*c,"em"),this.caret&&(u.caret=this.caret),this.attachSupsub(e,{base:u})}_serialize(e){return e.skipStyles?a4([this.bodyToLatex(e),this.supsubToLatex(e)]):super._serialize(e)}},nx=class e extends ok{constructor(e,i){var r;super({type:"composition",mode:null!=(r=null==i?void 0:i.mode)?r:"math",value:e})}static fromJson(i){return new e(i.value,i)}toJson(){return super.toJson()}get computedStyle(){return{}}render(e){let i=new or(this.value,{classes:"ML__composition",type:"composition"});return this.bind(e,i),this.caret&&(i.caret=this.caret),i}_serialize(e){return""}},nw=class e extends ok{constructor(e){super({type:"error",value:e,command:e,mode:"math"}),this.verbatimLatex=e}static fromJson(i){return new e(i.command)}toJson(){return super.toJson()}render(e){let i=this.createBox(e,{classes:"ML__error"});return this.caret&&(i.caret=this.caret),i}},nk=class e extends ok{constructor(e,i,r){super({type:"group",mode:i,style:r}),this.body=e,this.boxType=e.length>1?"ord":"ignore",this.skipBoundary=!0,this.displayContainsHighlight=!1,e&&1===e.length&&","===e[0].command&&(this.captureSelection=!0)}static fromJson(i){return new e(i.body,i.mode,i.style)}render(e){let i=ok.createBox(e,this.body,{type:this.boxType});return i?(this.caret&&(i.caret=this.caret),this.bind(e,i)):null}_serialize(e){if(!(e.expandMacro||e.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let i=et(this.command,this.mode);return null!=i&&i.serialize?i.serialize(this,e):`{${this.bodyToLatex(e)}}`}},n_=class e extends ok{constructor(e,i,r){super({type:"leftright",style:r.style,displayContainsHighlight:!0}),this.variant=e,this.body=i,this.leftDelim=r.leftDelim,this.rightDelim=r.rightDelim}static fromJson(i){var r;return new e(null!=(r=i.variant)?r:"",i.body,i)}toJson(){let e=super.toJson();return this.variant&&(e.variant=this.variant),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),e}_serialize(e){var i,r;let a=this.matchingRightDelim();return"left...right"===this.variant?a4(["\\left",null!=(i=this.leftDelim)?i:".",this.bodyToLatex(e),"\\right",a]):"mleft...mright"===this.variant?a4(["\\mleft",null!=(r=this.leftDelim)?r:".",this.bodyToLatex(e),"\\mright",a]):a4([this.leftDelim&&"."!==this.leftDelim?this.leftDelim:"",this.bodyToLatex(e),a])}matchingRightDelim(){var e,i;if(this.rightDelim&&"?"!==this.rightDelim)return this.rightDelim;let r=null!=(e=this.leftDelim)?e:".";return null!=(i=o6[r])?i:r}render(e){var i,r,a;let o=new og({parent:e},this.style);this.body;let n=new og({parent:e,mathstyle:"textstyle"},this.style),s=null!=(i=ok.createBox(o,this.body,{type:"inner"}))?i:new or(null,{type:"inner"}),l=s.height/n.scalingFactor,c=s.depth/n.scalingFactor,d=[];if(this.leftDelim&&d.push(this.bind(n,nl("open",this.leftDelim,l,c,n,{isSelected:this.isSelected,classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),s&&(function e(i,r,a,o,n){if(i)for(let s=0;s<i.length;s++){let l=i[s];"middle"===l.type?(i[s]=r.bind(a,nl("inner",l.value,o,n,a,{isSelected:r.isSelected})),i[s].caret=l.caret,i[s].isSelected=l.isSelected,i[s].cssId=l.cssId,i[s].htmlData=l.htmlData,i[s].htmlStyle=l.htmlStyle,i[s].attributes=l.attributes,i[s].cssProperties=l.cssProperties):l.children&&e(l.children,r,a,o,n)}}(s.children,this,o,l,c),d.push(s)),this.rightDelim){let e=this.containsCaret?" ML__contains-caret":"",i=this.rightDelim;"?"===i&&(o.smartFence?(i=this.matchingRightDelim(),e+=" ML__smart-fence__close"):i="."),d.push(this.bind(n,nl("close",i,l,c,n,{isSelected:this.isSelected,classes:e+" ML__close",mode:this.mode,style:this.style})))}let u=null!=(a="mleft...mright"===this.variant||(null==(r=this.leftSibling)?void 0:r.isFunction))&&a,h=new or(d,{type:u?"close":"inner",classes:"left-right"});return this.caret&&(h.caret=this.caret),this.bind(o,h.wrap(o))}},nS=class e extends ok{constructor(e,i){var r;super({type:"macro",command:e,style:i.style}),this.body=i.body,void 0===i.captureSelection?i.args?this.captureSelection=!1:this.captureSelection=!0:this.captureSelection=i.captureSelection,this.macroArgs=i.args,this.expand=null!=(r=i.expand)&&r}static fromJson(i){return new e(i.command,i)}toJson(){let e=super.toJson();return this.expand&&(e.expand=!0),void 0!==this.captureSelection&&(e.captureSelection=this.captureSelection),this.macroArgs&&(e.args=this.macroArgs),e}_serialize(e){var i;return e.expandMacro&&this.expand?this.bodyToLatex(e):this.command+(null!=(i=this.macroArgs)?i:"")}render(e){let i=ok.createBox(e,this.body);return i?(this.caret&&(i.caret=this.caret),this.bind(e,i)):null}},nM=class e extends ok{constructor(){super({type:"macro-argument"})}static fromJson(i){return new e}toJson(){return super.toJson()}_serialize(e){return""}render(e){return null}},nL=class e extends ok{constructor(e,i,r=!1,a,o){var n;super({type:"prompt",mode:null!=(n=null==o?void 0:o.mode)?n:"math",style:null==o?void 0:o.style,command:"\\placeholder"}),this.body=a,this.correctness=i,this.placeholderId=e,this.locked=r,this.captureSelection=this.locked}static fromJson(i){return new e(i.placeholderId,i.correctness,i.locked,i.body,i)}toJson(){let e=super.toJson();return this.placeholderId&&(e.placeholderId=this.placeholderId),this.body||delete e.body,this.body&&(e.body=this.body.filter(e=>"first"!==e.type).map(e=>e.toJson())),this.correctness&&(e.correctness=this.correctness),e.locked=this.locked,e}render(e){let i=new og({parent:e}),r=i.getRegisterAsEm("fboxsep"),a=ok.createBox(e,this.body);if(!a)return null;a.height||(a.height=.5),a.setStyle("vertical-align",-a.height,"em"),"correct"===this.correctness?a.setStyle("color","var(--correct-color, var(--ML__correct-color))"):"incorrect"===this.correctness&&a.setStyle("color","var(--incorrect-color, var(--ML__incorrect-color))");let o=new or(a,{type:"ord"}),n="ML__prompt ";this.locked?n+=" ML__lockedPromptBox ":n+=" ML__editablePromptBox ","correct"===this.correctness?n+=" ML__correctPromptBox ":"incorrect"===this.correctness&&(n+=" ML__incorrectPromptBox "),this.containsCaret&&(n+=" ML__focusedPromptBox ");let s=new or(null,{classes:n,attributes:{part:"prompt"}});s.height=o.height+r,s.depth=o.depth+r,s.setStyle("box-sizing","border-box"),s.setStyle("position","absolute"),s.setStyle("height",o.height+o.depth+2*r,"em"),0===r?s.setStyle("width","100%"):(s.setStyle("width",`calc(100% + ${2*r}em)`),s.setStyle("top",r,"em"),s.setStyle("left",-r,"em")),this.body&&1!==this.body.length||(s.setStyle("width",`calc(100% + ${3*r}em)`),s.setStyle("left",-1.5*r,"em"));let l="";"incorrect"===this.correctness&&(l+='<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="0.5" stroke="var(--incorrect-color, var(--ML__incorrect-color))" stroke-linecap="round" />'),l&&on(s,l,""),o.setStyle("display","inline-block"),o.setStyle("height",a.height+a.depth,"em"),o.setStyle("vertical-align",-r,"em");let c=new or([s,o],{classes:"ML__prompt-atom"});return c.setStyle("position","relative"),c.setStyle("display","inline-block"),c.setStyle("line-height",0),c.height=o.height+r+.2,c.depth=o.depth+r,c.left=r,c.right=r,c.setStyle("height",o.height+r,"em"),c.setStyle("top",o.depth-o.height,"em"),c.setStyle("vertical-align",o.depth+r,"em"),c.setStyle("margin-left",.5,"em"),c.setStyle("margin-right",.5,"em"),this.caret&&(c.caret=this.caret),this.bind(i,this.attachSupsub(e,{base:c}))}_serialize(e){var i;let r=null!=(i=this.bodyToLatex(e))?i:"",a="\\placeholder";return this.placeholderId&&(a+=`[${this.placeholderId}]`),"correct"===this.correctness?a+="[correct]":"incorrect"===this.correctness&&(a+="[incorrect]"),this.locked&&(a+="[locked]"),a2(a,r)}},nC=class e extends ok{constructor(e){super({type:"subsup",style:null==e?void 0:e.style}),this.subsupPlacement="auto"}static fromJson(i){let r=new e(i);for(let e of ov)i[e]&&r.setChildren(i[e],e);return r}render(e){var i;let r=new og({parent:e,isPhantom:!0}),a=this.leftSibling,o=null!=(i=a.render(r))?i:new or(null),n=new or(null,{height:o.height,depth:o.depth});return this.attachSupsub(e,{base:n,isCharacterBox:a.isCharacterBox(),type:"ignore"})}_serialize(e){return this.supsubToLatex(e)}};function nz(e){return!!e&&!/^(<$$>|<$>|<space>|<{>|<}>|#[0-9\?]|\\.+)$/.test(e)}var nA=class{constructor(e,i,r){var a,o,n,s;this.errors=[],this.index=0,this.endCount=0,null!=r||(r={}),this.tokens=e,this.context=i instanceof og&&!(null!=r&&r.parseMode)&&!r.mathstyle?i:new og({from:i,mathstyle:r.mathstyle},r.style),this.args=null!=(a=r.args)?a:void 0,this.smartFence=this.context.smartFence,this.parsingContext={parent:void 0,mathlist:[],style:null!=(o=r.style)?o:{},parseMode:null!=(n=r.parseMode)?n:"math",mathstyle:null!=(s=r.mathstyle)?s:"displaystyle",tabular:!1}}beginContext(e){var i,r,a;let o=this.parsingContext,n={parent:o,mathlist:[],style:u({},o.style),parseMode:null!=(i=null==e?void 0:e.mode)?i:o.parseMode,mathstyle:null!=(r=null==e?void 0:e.mathstyle)?r:o.mathstyle,tabular:null!=(a=null==e?void 0:e.tabular)&&a};this.parsingContext=n}endContext(){this.parsingContext=this.parsingContext.parent}onError(e){this.errors.push(u({before:a3(this.tokens.slice(this.index,this.index+10)),after:a3(this.tokens.slice(Math.max(0,this.index-10),this.index))},e))}get mathlist(){return this.parsingContext.mathlist}set mathlist(e){this.parsingContext.mathlist=e}get parseMode(){return this.parsingContext.parseMode}set parseMode(e){this.parsingContext.parseMode=e}get tabularMode(){return this.parsingContext.tabular}get style(){let e=this.parsingContext;for(;e;){if(e.style)return u({},e.style);e=e.parent}return{}}set style(e){this.parsingContext.style=e}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}next(){this.index+=1}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}match(e){return this.tokens[this.index]===e&&(this.index++,!0)}lastSubsupAtom(){let e;return this.mathlist.length>0&&("subsup"===(e=this.mathlist[this.mathlist.length-1]).type||void 0!==e.subsupPlacement)||(e=new nC({style:this.style}),this.mathlist.push(e)),e}hasPattern(e){return e.test(this.tokens[this.index])}hasInfixCommand(){var e;let{index:i}=this;if(i<this.tokens.length&&this.tokens[i].startsWith("\\")){let r=et(this.tokens[i],this.parseMode);return!!(r&&"symbol"!==r.definitionType&&(!r.ifMode||r.ifMode.includes(this.parseMode)))&&null!=(e=r.infix)&&e}return!1}matchColumnSeparator(){return!!this.tabularMode&&"&"===this.peek()&&(this.index++,!0)}matchRowSeparator(){if(!this.tabularMode)return!1;let e=this.peek();return("\\\\"===e||"\\cr"===e||"\\tabularnewline"===e)&&(this.index++,!0)}placeholder(){var e;let i=null==(e=this.args)?void 0:e.call(this,"?");return i?nE(i,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new nd({mode:this.parseMode,style:this.style})]}skipWhitespace(){for(;this.match("<space>"););}skipUntilToken(e){let i=this.tokens[this.index];for(;i&&i!==e;)i=this.tokens[++this.index];i===e&&this.index++}skipFiller(){for(;this.match("\\relax")||this.match("<space>"););}matchKeyword(e){let i=this.index,r=this.end(),a="";for(;!r;){let i=this.get();nz(i)?(a+=i,r=this.end()||a.length>=e.length):r=!0}let o=e.toUpperCase()===a.toUpperCase();return o||(this.index=i),o}scanString(){let e="";for(;!this.end();){let i=this.peek();if("]"===i)break;if("<space>"===i)e+=" ";else if(i.startsWith("\\"))this.onError({code:"unexpected-command-in-string"}),e+=i.substring(1);else if(nz(i))e+=i;else break;this.next()}return e}scanBalancedString(){let e="",i=this.end(),r=1;for(;!i;){let a=this.get();"<space>"===a?e+=" ":"<{>"===a?(e+="{",r+=1):"<}>"===a?(r-=1)>0?e+="}":this.index-=1:"<$>"===a?e+="$":"<$$>"===a?e+="$$":e+=a,i=0===r||this.end()}return e}scanLiteralGroup(){var e;if(!this.match("<{>"))return"";let i="",r=1;for(;r>0&&!this.end();){let a=this.get();"<}>"===a?(r-=1)>0&&(i+="}"):"<{>"===a?(r+=1,i+="{"):(/\\[a-zA-Z]+$/.test(i)&&/^[a-zA-Z]/.test(a)&&(i+=" "),i+=null!=(e=({"<space>":" ","<$$>":"$$","<$>":"$"})[a])?e:a)}return i}scanNumber(e=!0){var i,r;let a=!1,o=this.peek();for(;"<space>"===o||"+"===o||"-"===o;)this.get(),"-"===o&&(a=!a),o=this.peek();e=!!e;let n=10,s=/\d/;if(this.match("'"))n=8,s=/[0-7]/,e=!0;else if(this.match('"'))n=16,s=/[\dA-F]/,e=!0;else if(this.match("x"))n=16,s=/[\dA-Fa-f]/,e=!0;else if(this.match("`"))return(o=this.get())?2===o.length&&o.startsWith("\\")?{number:(a?-1:1)*(null!=(i=o.codePointAt(1))?i:0),base:"alpha"}:{number:(a?-1:1)*(null!=(r=o.codePointAt(0))?r:0),base:"alpha"}:null;let l="";for(;this.hasPattern(s);)l+=this.get();if(!e&&(this.match(".")||this.match(",")))for(l+=".";this.hasPattern(s);)l+=this.get();let c=e?Number.parseInt(l,n):Number.parseFloat(l);return Number.isNaN(c)?null:{number:a?-c:c,base:16===n?"hexadecimal":8===n?"octal":"decimal"}}scanRegister(){var e;let i=this.index,r=this.scanNumber(!1);if(this.skipWhitespace(),this.match("\\relax"))return r;let a=!1;if(null===r)for(;;){let e=this.peek();if("-"===e)a=!a;else if("+"!==e)break;this.next(),this.skipWhitespace()}if(this.match("\\global")){this.skipWhitespace();let e=this.get();return e.startsWith("\\")?r?{register:e,global:!0,factor:(a?-1:1)*r.number}:a?{register:e,global:!0,factor:-1}:{register:e,global:!0}:(this.index=i,null)}let o=this.get();return null!=o&&o.startsWith("\\")?(o=o.substring(1),this.context.registers[o]?a&&null===r?{register:o}:{register:o,factor:(a?-1:1)*(null!=(e=null==r?void 0:r.number)?e:1)}:(this.index=i,null)):(this.index=i,null)}scanValue(){let e=this.scanRegister();if(e)return e;let i=this.index,r=this.scanGlueOrDimen();if(r&&("unit"in r||"glue"in r&&"unit"in r.glue))return r;this.index=i;let a=this.scanNumber();if(a)return a;if(this.end()||!nz(this.peek()))return null;let o=this.scanString();return o.length>0?{string:o}:null}scanDimen(){let e,i=this.scanNumber(!1);if(null===i)return null;let r=i.number;return this.skipWhitespace(),this.matchKeyword("true"),this.skipWhitespace(),this.matchKeyword("pt")?e="pt":this.matchKeyword("mm")?e="mm":this.matchKeyword("cm")?e="cm":this.matchKeyword("ex")?e="ex":this.matchKeyword("px")?e="px":this.matchKeyword("em")?e="em":this.matchKeyword("bp")?e="bp":this.matchKeyword("dd")?e="dd":this.matchKeyword("pc")?e="pc":this.matchKeyword("in")?e="in":this.matchKeyword("mu")&&(e="mu"),e?{dimension:r,unit:e}:{dimension:r}}scanGlueOrDimen(){let e=this.scanDimen();if(null===e)return null;if(this.skipWhitespace(),this.match("\\relax"))return e;let i={glue:e};if(this.matchKeyword("plus")){let e=this.scanDimen();if(!e)return i;i.grow=e}if(this.skipWhitespace(),this.match("\\relax"))return i;if(this.skipWhitespace(),this.matchKeyword("minus")){let e=this.scanDimen();if(!e)return i;i.shrink=e}return i.grow||i.shrink?i:e}scanColspec(){this.skipWhitespace();let e=[];for(;!this.end()&&!("<}>"===this.peek()||"]"===this.peek());){let i=this.get();"c"===i||"r"===i||"l"===i?e.push({align:i}):"|"===i?e.push({separator:"solid"}):":"===i?e.push({separator:"dashed"}):"@"===i&&(this.match("<{>")&&(this.beginContext({mode:"math"}),e.push({gap:this.scan(e=>"<}>"===e)}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return e}scanModeSet(){let e;if(this.match("\\(")&&(e="textstyle"),!e&&this.match("\\[")&&(e="displaystyle"),!e)return null;this.beginContext({mode:"math",mathstyle:e});let i=this.scan(i=>i===("displaystyle"===e?"\\]":"\\)"));return this.match("displaystyle"===e?"\\]":"\\)")||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),i}scanModeShift(){let e="";if(this.match("<$>")&&(e="<$>"),!e&&this.match("<$$>")&&(e="<$$>"),!e)return null;this.beginContext({mode:"math",mathstyle:"textstyle"});let i=this.scan(i=>i===e);return this.match(e)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),i}scanEnvironment(){var e;if(!this.match("\\begin"))return null;let i=this.scanArgument("string");if(!i)return null;let r=null!=(e=q[i])?e:null;if(!r)return this.onError({code:"unknown-environment",arg:i}),null;let a=[];if(r.params)for(let e of r.params)if(e.isOptional)a.push(this.scanOptionalArgument(e.type));else{let r=this.scanArgument(e.type);r||this.onError({code:"missing-argument",arg:i}),a.push(r)}this.beginContext({tabular:r.tabular});let o=[],n=[],s=[],l=!1;do if(this.end()&&(this.onError({code:"unbalanced-environment",arg:i}),l=!0),!l&&this.match("\\end")&&(this.scanArgument("string")!==i&&this.onError({code:"unbalanced-environment",arg:i}),l=!0),!l){if(this.matchColumnSeparator())s.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){s.push(this.mathlist),this.mathlist=[];let e=null;this.skipWhitespace(),this.match("[")&&(e=this.scanDimen(),this.skipWhitespace(),this.match("]")),n.push(null!=e?e:{dimension:0}),o.push(s),s=[]}else this.mathlist.push(...this.scan(e=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(e)))}while(!l);return s.push(this.mathlist),s.length>0&&o.push(s),this.endContext(),r.createAtom(i,o,n,a)}scanExpression(){let e=this.mathlist;if(this.mathlist=[],this.parseExpression()){let i=this.mathlist;return this.mathlist=e,i}return this.mathlist=e,null}scan(e){let i;this.beginContext(),e||(e=e=>"<}>"===e);let r="",a=null,o=[],n=null;for(;!this.end()&&!e(this.peek());)this.hasInfixCommand()&&!r?((a=et(r=this.get(),"math"))&&(o=this.scanArguments(a)[1]),n=this.mathlist,this.mathlist=[]):this.parseExpression();return r?(o.unshift(this.mathlist),n&&o.unshift(n),i=[a.createAtom({command:r,args:o,style:this.style,mode:this.parseMode})]):i=this.mathlist,this.endContext(),i}scanGroup(){let e=this.index;if(!this.match("<{>"))return null;let i=this.scan(e=>"<}>"===e);this.match("<}>")||this.onError({code:"unbalanced-braces"});let r=new nk(i,this.parseMode,this.style);return r.verbatimLatex=a3(this.tokens.slice(e,this.index)),r}scanSmartFence(){if(this.skipWhitespace(),!this.match("("))return null;this.beginContext();let e=1;for(;!this.end()&&0!==e;)this.match("(")&&(e+=1),this.match(")")&&(e-=1),0!==e&&this.parseExpression();0===e&&this.match(")");let i=new n_("",this.mathlist,{leftDelim:"(",rightDelim:0===e?")":"?"});return this.endContext(),i}scanDelim(){this.skipWhitespace();let e=this.peek();if(!e)return this.onError({code:"unexpected-end-of-string"}),null;if(!nz(e)&&!e.startsWith("\\"))return null;this.next();let i=et(e,"math");return i?"function"===i.definitionType&&i.ifMode&&!i.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:e}),null):"symbol"===i.definitionType&&("mopen"===i.type||"mclose"===i.type)||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(e)?e:(this.onError({code:"unexpected-delimiter",arg:e}),null):(this.onError({code:"unknown-command",arg:e}),null)}scanLeftRight(){var e;if(this.match("\\right"))return this.onError({code:"unbalanced-braces"}),new nw("\\right");if(this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),new nw("\\mright");let i="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;i="\\mright"}let r=this.scanDelim();if(!r)return this.onError({code:"unexpected-delimiter"}),new nw("\\right"===i?"\\left":"\\mleft");for(this.beginContext();!this.end()&&!this.match(i);)this.parseExpression();let a=this.mathlist;this.endContext();let o=null!=(e=this.scanDelim())?e:".";return new n_("\\right"===i?"left...right":"mleft...mright",a,{leftDelim:r,rightDelim:o,style:this.style})}parseSupSub(){if("math"!==this.parseMode)return!1;let e=this.peek();if("^"!==e&&"_"!==e&&"'"!==e)return!1;let i=this.lastSubsupAtom();for(;"^"===e||"_"===e||"'"===e;)this.match("'")?this.match("'")?i.addChild(new ok({type:"mord",command:"\\doubleprime",mode:"math",value:"′′"}),"superscript"):i.addChild(new ok({type:"mord",command:"\\prime",mode:"math",value:"′"}),"superscript"):(this.match("^")||this.match("_"))&&i.addChildren(T(this.scanArgument("expression")),"_"===e?"subscript":"superscript"),e=this.peek();return!0}parseLimits(){if("math"!==this.parseMode)return!1;let e=this.match("\\limits"),i=!e&&this.match("\\nolimits"),r=!i&&!e&&this.match("\\displaylimits");if(!e&&!i&&!r)return!1;let a=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return null!==a&&"mop"===a.type&&(a.explicitSubsupPlacement=!0,e&&(a.subsupPlacement="over-under"),i&&(a.subsupPlacement="adjacent"),r&&(a.subsupPlacement="auto"),!0)}scanArguments(e){if(!(null!=e&&e.params))return[void 0,[]];let i,r=[],a=e.infix?2:0;for(;a<e.params.length;){let o=e.params[a];"rest"===o.type?r.push(this.scan(e=>["<}>","&","\\end","\\cr","\\\\","\\tabularnewline"].includes(e))):o.isOptional?r.push(this.scanOptionalArgument(o.type)):o.type.endsWith("*")?i=o.type.slice(0,-1):r.push(this.scanArgument(o.type)),a+=1}return[i,r]}scanSymbolOrLiteral(){let e,i=this.peek();if(!i)return null;if(this.next(),nz(i)){let e=a8.createAtom(this.parseMode,i,u({},this.style));return e?[e]:null}if(e=this.scanMacro(i))return[e];if(i.startsWith("\\")){let r=et(i,this.parseMode);if(!r)return this.onError({code:"unknown-command",arg:i}),[new nw(i)];if("symbol"===r.definitionType){let a=u({},this.style);r.variant&&(a.variant=r.variant),e=new ok({type:r.type,command:i,style:a,value:String.fromCodePoint(r.codepoint),mode:this.parseMode,verbatimLatex:i})}else{if(r.applyMode||r.applyStyle||r.infix)return this.onError({code:"invalid-command",arg:i}),[new nw(i)];r.createAtom&&(e=r.createAtom({command:i,args:[],style:this.style,mode:this.parseMode}))}}return e?[e]:null}scanArgument(e){var i;this.skipFiller();let r=this.parseMode;if("auto"===e&&(e=r),!this.match("<{>")){if("string"===e)return this.scanString();if("value"===e)return this.scanValue();if("delim"===e)return null!=(i=this.scanDelim())?i:".";if("expression"===e)return this.scanExpression();if("math"===e){e!==r&&this.beginContext({mode:"math"});let i=this.scanSymbolOrLiteral();return e!==r&&this.endContext(),i}if("text"===e){e!==r&&this.beginContext({mode:"text"});let i=this.scanSymbolOrLiteral();return e!==r&&this.endContext(),i}return null}if("text"===e){this.beginContext({mode:"text"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let e=this.mathlist;return this.endContext(),{group:e}}if("math"===e){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let e=this.mathlist;return this.endContext(),{group:e}}let a=null;if("expression"===e){this.beginContext({mode:"math"});do this.mathlist.push(...this.scan());while(!this.match("<}>")&&!this.end());let e=this.mathlist;return this.endContext(),{group:e}}return"string"===e?a=this.scanString():"balanced-string"===e?a=this.scanBalancedString():"colspec"===e?a=this.scanColspec():"value"===e&&(a=this.scanValue()),this.skipUntilToken("<}>"),a}scanOptionalArgument(e){if(e="auto"===e?this.parseMode:e,this.skipFiller(),!this.match("["))return null;let i=null;for(;!this.end()&&!this.match("]");)if("string"===e)i=this.scanString();else if("value"===e)i=this.scanValue();else if("colspec"===e)i=this.scanColspec();else if("bbox"===e){let e={};for(let i of this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/)){let r=i.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(r)e.padding={dimension:parseInt(r[1]),unit:r[2]};else{let r=i.match(/^\s*border\s*:\s*(.*)/);r?e.border=r[1]:e.backgroundcolor={string:i}}}i=e}else"math"===e&&(this.beginContext({mode:"math"}),i=this.mathlist.concat(this.scan(e=>"]"===e)),this.endContext());return i}scanSymbolOrCommand(e){var i,r;if("\\placeholder"===e){let e=this.scanOptionalArgument("string"),i=this.scanOptionalArgument("math"),r=ok.serialize(i,{defaultMode:"math"}),a=[],o;o||"correct"!==r?o||"incorrect"!==r?""!==r&&(a=i):o="incorrect":o="correct";let n="locked"===this.scanOptionalArgument("string"),s=this.scanArgument("auto"),l;return l=s&&Array.isArray(s)&&s.length>0?s:s&&"object"==typeof s&&"group"in s?s.group:a,e?[new nL(e,o,n,null!=l?l:a,{mode:this.parseMode,style:this.style})]:[new nd({mode:this.parseMode,style:this.style})]}let a=this.scanMacro(e);if(a)return[a];let o=et(e,this.parseMode);if(!o)return this.onError({code:"unknown-command",arg:e}),"text"===this.parseMode?[...e].map(e=>new ok({type:"text",value:e,mode:"text",style:this.style})):[new nw(e)];let n=this.index;if("symbol"===o.definitionType){let i=u({},this.style);o.variant&&(i.variant=o.variant),a=new ok({type:o.type,command:e,style:i,value:String.fromCodePoint(o.codepoint),mode:this.parseMode})}else{if(o.ifMode&&!o.ifMode.includes(this.parseMode))return[];let n=this.parseMode;o.applyMode&&(this.parseMode=o.applyMode);let[s,l]=this.scanArguments(o);if(this.parseMode=n,o.applyMode&&!o.applyStyle&&!o.createAtom)return T(l[0]);if(o.infix)return this.onError({code:"too-many-infix-commands",arg:e}),null;if("function"==typeof o.createAtom)a=o.createAtom({command:e,args:l,style:this.style,mode:this.parseMode}),s&&(a.body=T(this.scanArgument(s)));else if("function"==typeof o.applyStyle){let i=u(u({},this.style),o.applyStyle(e,l,this.context)),r=this.parseMode;if(o.applyMode&&(this.parseMode=o.applyMode),s){let e=this.style;this.style=i;let a=this.scanArgument(s);return this.style=e,this.parseMode=r,T(a)}this.style=i}else a=new ok({type:"mord",command:null!=(i=o.command)?i:e,style:u({},this.style),value:e,mode:null!=(r=o.applyMode)?r:this.parseMode})}if(!a)return null;if(a instanceof ok&&void 0===a.verbatimLatex&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(e)){let i=a4([e,a3(this.tokens.slice(n,this.index))]);i&&(a.verbatimLatex=i)}if(null===a.verbatimLatex&&(a.verbatimLatex=void 0),a.isFunction&&this.smartFence){let e=this.scanSmartFence();if(e)return[a,e]}return[a]}scanSymbolCommandOrLiteral(){let e=this.get();if(!e)return null;if(nz(e)){let i=a8.createAtom(this.parseMode,e,u({},this.style));if(!i)return null;if(i.isFunction&&this.smartFence){let e=this.scanSmartFence();if(e)return[i,e]}return[i]}return e.startsWith("\\")?this.scanSymbolOrCommand(e):"<space>"===e?"text"===this.parseMode?[new oS(" "," ",this.style)]:null:("<}>"===e?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:e}),null)}scanMacro(e){var i;let r=this.context.getMacro(e);if(!r)return null;let a=this.index,o=r.args,n={"?":null==(i=this.args)?void 0:i.call(this,"?")};for(let e=1;e<=o;e++)n[e]=this.scanLiteralGroup();return new nS(e,{expand:r.expand,captureSelection:r.captureSelection,args:a===this.index?null:a3(this.tokens.slice(a,this.index)),style:this.parsingContext.style,body:nE(r.def,{context:this.context,parseMode:this.parseMode,args:e=>n[e],mathstyle:this.parsingContext.mathstyle,style:this.parsingContext.style})})}parseExpression(){var e,i,r,a;let o=null!=(a=null!=(r=null!=(i=null!=(e=this.scanEnvironment())?e:this.scanModeShift())?i:this.scanModeSet())?r:this.scanGroup())?a:this.scanLeftRight();if(null===o){if(this.parseSupSub()||this.parseLimits())return!0;o=this.scanSymbolCommandOrLiteral()}return!!o&&(Array.isArray(o)?this.mathlist.push(...o):this.mathlist.push(o),!0)}};function nE(e,i){var r,a,o,n;let s=null!=(r=null==i?void 0:i.args)?r:void 0,l=new nA(a1(e,s),null==i?void 0:i.context,{args:s,mathstyle:null!=(a=null==i?void 0:i.mathstyle)?a:"displaystyle",parseMode:null!=(o=null==i?void 0:i.parseMode)?o:"math",style:null!=(n=null==i?void 0:i.style)?n:{}}),c=[];for(;!l.end();)c.push(...l.scan(()=>!1));return c}var nK=class e extends ok{constructor(e,i){super({type:"chem"},{command:e,mode:"math"});let r=nT.go(nD.go(i,"\\pu"===e?"pu":"ce"),!1);this.body=nE(r),this.verbatimLatex=e+"{"+i+"}",this.arg=i,this.captureSelection=!0}static fromJson(i){return new e(i.command,i.arg)}toJson(){return h(u({},super.toJson()),{arg:this.arg})}render(e){let i=ok.createBox(e,this.body,{type:"inner"});return this.caret&&(i.caret=this.caret),this.bind(e,i)}_serialize(e){return this.verbatimLatex}};Z(["ce","pu"],"{chemformula:balanced-string}",{createAtom:e=>{var i;return new nK(e.command,null!=(i=e.args[0])?i:"")}});var nD={go:function(e,i){if(!e)return[];void 0===i&&(i="ce");var r="0",a={};a.parenthesisLevel=0,e=(e=(e=e.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var o,n=10,s=[];;){o!==e?(n=10,o=e):n--;var l=nD.stateMachines[i],c=l.transitions[r]||l.transitions["*"];e:for(var d=0;d<c.length;d++){var u=nD.patterns.match_(c[d].pattern,e);if(u){for(var h,p=c[d].task,m=0;m<p.action_.length;m++){if(l.actions[p.action_[m].type_])h=l.actions[p.action_[m].type_](a,u.match_,p.action_[m].option);else if(nD.actions[p.action_[m].type_])h=nD.actions[p.action_[m].type_](a,u.match_,p.action_[m].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+p.action_[m].type_+")"];nD.concatArray(s,h)}if(r=p.nextState||r,!(e.length>0))return s;if(p.revisit||(e=u.remainder),!p.toContinue)break e}}if(n<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(e,i){if(i){if("[object Array]"===Object.prototype.toString.call(i))for(var r=0;r<i.length;r++)e.push(i[r]);else e.push(i)}},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(e){var i=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return i&&i[0]?{match_:i.slice(1),remainder:e.substr(i[0].length)}:null},"(-)(9)^(-9)":function(e){var i=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return i&&i[0]?{match_:i.slice(1),remainder:e.substr(i[0].length)}:null},"state of aggregation $":function(e){var i=nD.patterns.findObserveGroups(e,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(i&&i.remainder.match(/^($|[\s,;\)\]\}])/))return i;var r=e.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return r?{match_:r[0],remainder:e.substr(r[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(e){return nD.patterns.findObserveGroups(e,"^{","","","}")},"^($...$)":function(e){return nD.patterns.findObserveGroups(e,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(e){return nD.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(e){return nD.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(e){return nD.patterns.findObserveGroups(e,"_{","","","}")},"_($...$)":function(e){return nD.patterns.findObserveGroups(e,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(e){return nD.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(e){return nD.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(e){return nD.patterns.findObserveGroups(e,"","{","}","")},"{(...)}":function(e){return nD.patterns.findObserveGroups(e,"{","","","}")},"$...$":function(e){return nD.patterns.findObserveGroups(e,"","$","$","")},"${(...)}$":function(e){return nD.patterns.findObserveGroups(e,"${","","","}$")},"$(...)$":function(e){return nD.patterns.findObserveGroups(e,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(e){return nD.patterns.findObserveGroups(e,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(e){return nD.patterns.findObserveGroups(e,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(e){return nD.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(e){return nD.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(e){return nD.patterns.findObserveGroups(e,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(e){return nD.patterns.findObserveGroups(e,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(e){return nD.patterns.findObserveGroups(e,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(e){return nD.patterns.findObserveGroups(e,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(e){return nD.patterns.findObserveGroups(e,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(e){return nD.patterns.findObserveGroups(e,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(e){return nD.patterns.findObserveGroups(e,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(e){return nD.patterns.findObserveGroups(e,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(e){if(i=e.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:i[0],remainder:e.substr(i[0].length)};var i,r=nD.patterns.findObserveGroups(e,"","$","$","");return r&&(i=r.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:i[0],remainder:e.substr(i[0].length)}:null},amount2:function(e){return this.amount(e)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(e){if(e.match(/^\([a-z]+\)$/))return null;var i=e.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return i?{match_:i[0],remainder:e.substr(i[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(e,i,r,a,o,n,s,l,c,d){var u=function(e,i){if("string"==typeof i)return 0!==e.indexOf(i)?null:i;var r=e.match(i);return r?r[0]:null},h=u(e,i);if(null===h||null===(h=u(e=e.substr(h.length),r)))return null;var p=function(e,i,r){for(var a=0;i<e.length;){var o=e.charAt(i),n=u(e.substr(i),r);if(null!==n&&0===a)return{endMatchBegin:i,endMatchEnd:i+n.length};if("{"===o)a++;else if("}"===o){if(0===a)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];a--}i++}return null}(e,h.length,a||o);if(null===p)return null;var m=e.substring(0,a?p.endMatchEnd:p.endMatchBegin);if(!n&&!s)return{match_:m,remainder:e.substr(p.endMatchEnd)};var f=this.findObserveGroups(e.substr(p.endMatchEnd),n,s,l,c);if(null===f)return null;var y=[m,f.match_];return{match_:d?y.join(""):y,remainder:f.remainder}},match_:function(e,i){var r=nD.patterns.patterns[e];if(void 0===r)throw["MhchemBugP","mhchem bug P. Please report. ("+e+")"];if("function"==typeof r)return nD.patterns.patterns[e](i);var a=i.match(r);return a?{match_:a[2]?[a[1],a[2]]:a[1]?a[1]:a[0],remainder:i.substr(a[0].length)}:null}},actions:{"a=":function(e,i){e.a=(e.a||"")+i},"b=":function(e,i){e.b=(e.b||"")+i},"p=":function(e,i){e.p=(e.p||"")+i},"o=":function(e,i){e.o=(e.o||"")+i},"q=":function(e,i){e.q=(e.q||"")+i},"d=":function(e,i){e.d=(e.d||"")+i},"rm=":function(e,i){e.rm=(e.rm||"")+i},"text=":function(e,i){e.text_=(e.text_||"")+i},insert:function(e,i,r){return{type_:r}},"insert+p1":function(e,i,r){return{type_:r,p1:i}},"insert+p1+p2":function(e,i,r){return{type_:r,p1:i[0],p2:i[1]}},copy:function(e,i){return i},rm:function(e,i){return{type_:"rm",p1:i||""}},text:function(e,i){return nD.go(i,"text")},"{text}":function(e,i){var r=["{"];return nD.concatArray(r,nD.go(i,"text")),r.push("}"),r},"tex-math":function(e,i){return nD.go(i,"tex-math")},"tex-math tight":function(e,i){return nD.go(i,"tex-math tight")},bond:function(e,i,r){return{type_:"bond",kind_:r||i}},"color0-output":function(e,i){return{type_:"color0",color:i[0]}},ce:function(e,i){return nD.go(i)},"1/2":function(e,i){var r=[];i.match(/^[+\-]/)&&(r.push(i.substr(0,1)),i=i.substr(1));var a=i.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return a[1]=a[1].replace(/\$/g,""),r.push({type_:"frac",p1:a[1],p2:a[2]}),a[3]&&(a[3]=a[3].replace(/\$/g,""),r.push({type_:"tex-math",p1:a[3]})),r},"9,9":function(e,i){return nD.go(i,"9,9")}},createTransitions:function(e){var i,r,a,o,n={};for(i in e)for(r in e[i])for(a=r.split("|"),e[i][r].stateArray=a,o=0;o<a.length;o++)n[a[o]]=[];for(i in e)for(r in e[i])for(a=e[i][r].stateArray||[],o=0;o<a.length;o++){var s=e[i][r];if(s.action_){s.action_=[].concat(s.action_);for(var l=0;l<s.action_.length;l++)"string"==typeof s.action_[l]&&(s.action_[l]={type_:s.action_[l]})}else s.action_=[];for(var c=i.split("|"),d=0;d<c.length;d++)if("*"===a[o])for(var u in n)n[u].push({pattern:c[d],task:s});else n[a[o]].push({pattern:c[d],task:s})}return n},stateMachines:{}};nD.stateMachines={ce:{transitions:nD.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(e,i){var r;if((e.d||"").match(/^[0-9]+$/)){var a=e.d;e.d=void 0,r=this.output(e),e.b=a}else r=this.output(e);return nD.actions["o="](e,i),r},"d= kv":function(e,i){e.d=i,e.dType="kv"},"charge or bond":function(e,i){if(e.beginsWithBond){var r=[];return nD.concatArray(r,this.output(e)),nD.concatArray(r,nD.actions.bond(e,i,"-")),r}e.d=i},"- after o/d":function(e,i,r){var a=nD.patterns.match_("orbital",e.o||""),o=nD.patterns.match_("one lowercase greek letter $",e.o||""),n=nD.patterns.match_("one lowercase latin letter $",e.o||""),s=nD.patterns.match_("$one lowercase latin letter$ $",e.o||""),l="-"===i&&(a&&""===a.remainder||o||n||s);!l||e.a||e.b||e.p||e.d||e.q||a||!n||(e.o="$"+e.o+"$");var c=[];return l?(nD.concatArray(c,this.output(e)),c.push({type_:"hyphen"})):(a=nD.patterns.match_("digits",e.d||""),r&&a&&""===a.remainder?(nD.concatArray(c,nD.actions["d="](e,i)),nD.concatArray(c,this.output(e))):(nD.concatArray(c,this.output(e)),nD.concatArray(c,nD.actions.bond(e,i,"-")))),c},"a to o":function(e){e.o=e.a,e.a=void 0},"sb=true":function(e){e.sb=!0},"sb=false":function(e){e.sb=!1},"beginsWithBond=true":function(e){e.beginsWithBond=!0},"beginsWithBond=false":function(e){e.beginsWithBond=!1},"parenthesisLevel++":function(e){e.parenthesisLevel++},"parenthesisLevel--":function(e){e.parenthesisLevel--},"state of aggregation":function(e,i){return{type_:"state of aggregation",p1:nD.go(i,"o")}},comma:function(e,i){var r=i.replace(/\s*$/,"");return r!==i&&0===e.parenthesisLevel?{type_:"comma enumeration L",p1:r}:{type_:"comma enumeration M",p1:r}},output:function(e,i,r){var a,o,n;for(var s in e.r?(o="M"===e.rdt?nD.go(e.rd,"tex-math"):"T"===e.rdt?[{type_:"text",p1:e.rd||""}]:nD.go(e.rd),n="M"===e.rqt?nD.go(e.rq,"tex-math"):"T"===e.rqt?[{type_:"text",p1:e.rq||""}]:nD.go(e.rq),a={type_:"arrow",r:e.r,rd:o,rq:n}):(a=[],(e.a||e.b||e.p||e.o||e.q||e.d||r)&&(e.sb&&a.push({type_:"entitySkip"}),e.o||e.q||e.d||e.b||e.p||2===r?e.o||e.q||e.d||!e.b&&!e.p?e.o&&"kv"===e.dType&&nD.patterns.match_("d-oxidation$",e.d||"")?e.dType="oxidation":e.o&&"kv"===e.dType&&!e.q&&(e.dType=void 0):(e.o=e.a,e.d=e.b,e.q=e.p,e.a=e.b=e.p=void 0):(e.o=e.a,e.a=void 0),a.push({type_:"chemfive",a:nD.go(e.a,"a"),b:nD.go(e.b,"bd"),p:nD.go(e.p,"pq"),o:nD.go(e.o,"o"),q:nD.go(e.q,"pq"),d:nD.go(e.d,"oxidation"===e.dType?"oxidation":"bd"),dType:e.dType}))),e)"parenthesisLevel"!==s&&"beginsWithBond"!==s&&delete e[s];return a},"oxidation-output":function(e,i){var r=["{"];return nD.concatArray(r,nD.go(i,"oxidation")),r.push("}"),r},"frac-output":function(e,i){return{type_:"frac-ce",p1:nD.go(i[0]),p2:nD.go(i[1])}},"overset-output":function(e,i){return{type_:"overset",p1:nD.go(i[0]),p2:nD.go(i[1])}},"underset-output":function(e,i){return{type_:"underset",p1:nD.go(i[0]),p2:nD.go(i[1])}},"underbrace-output":function(e,i){return{type_:"underbrace",p1:nD.go(i[0]),p2:nD.go(i[1])}},"color-output":function(e,i){return{type_:"color",color1:i[0],color2:nD.go(i[1])}},"r=":function(e,i){e.r=i},"rdt=":function(e,i){e.rdt=i},"rd=":function(e,i){e.rd=i},"rqt=":function(e,i){e.rqt=i},"rq=":function(e,i){e.rq=i},operator:function(e,i,r){return{type_:"operator",kind_:r||i}}}},a:{transitions:nD.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:nD.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:nD.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(e){if(e.text_){var i={type_:"text",p1:e.text_};for(var r in e)delete e[r];return i}}}},pq:{transitions:nD.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(e,i){return{type_:"state of aggregation subscript",p1:nD.go(i,"o")}},"color-output":function(e,i){return{type_:"color",color1:i[0],color2:nD.go(i[1],"pq")}}}},bd:{transitions:nD.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(e,i){return{type_:"color",color1:i[0],color2:nD.go(i[1],"bd")}}}},oxidation:{transitions:nD.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(e,i){return{type_:"roman numeral",p1:i||""}}}},"tex-math":{transitions:nD.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(e){if(e.o){var i={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return i}}}},"tex-math tight":{transitions:nD.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(e,i){e.o=(e.o||"")+"{"+i+"}"},output:function(e){if(e.o){var i={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return i}}}},"9,9":{transitions:nD.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:nD.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(e,i){var r=[];return"+-"===i[0]||"+/-"===i[0]?r.push("\\pm "):i[0]&&r.push(i[0]),i[1]&&(nD.concatArray(r,nD.go(i[1],"pu-9,9")),i[2]&&(i[2].match(/[,.]/)?nD.concatArray(r,nD.go(i[2],"pu-9,9")):r.push(i[2])),(i[3]||i[4])&&("e"===i[3]||"*"===i[4]?r.push({type_:"cdot"}):r.push({type_:"times"}))),i[5]&&r.push("10^{"+i[5]+"}"),r},"number^":function(e,i){var r=[];return"+-"===i[0]||"+/-"===i[0]?r.push("\\pm "):i[0]&&r.push(i[0]),nD.concatArray(r,nD.go(i[1],"pu-9,9")),r.push("^{"+i[2]+"}"),r},operator:function(e,i,r){return{type_:"operator",kind_:r||i}},space:function(){return{type_:"pu-space-1"}},output:function(e){var i,r=nD.patterns.match_("{(...)}",e.d||"");r&&""===r.remainder&&(e.d=r.match_);var a=nD.patterns.match_("{(...)}",e.q||"");if(a&&""===a.remainder&&(e.q=a.match_),e.d&&(e.d=e.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.d=e.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),e.q){e.q=e.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.q=e.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var o={d:nD.go(e.d,"pu"),q:nD.go(e.q,"pu")};"//"===e.o?i={type_:"pu-frac",p1:o.d,p2:o.q}:(i=o.d,o.d.length>1||o.q.length>1?i.push({type_:" / "}):i.push({type_:"/"}),nD.concatArray(i,o.q))}else i=nD.go(e.d,"pu-2");for(var n in e)delete e[n];return i}}},"pu-2":{transitions:nD.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(e,i){e.rm+="^{"+i+"}"},space:function(){return{type_:"pu-space-2"}},output:function(e){var i=[];if(e.rm){var r=nD.patterns.match_("{(...)}",e.rm||"");i=r&&""===r.remainder?nD.go(r.match_,"pu"):{type_:"rm",p1:e.rm}}for(var a in e)delete e[a];return i}}},"pu-9,9":{transitions:nD.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(e){var i=[];if(e.text_=e.text_||"",e.text_.length>4){var r=e.text_.length%3;0===r&&(r=3);for(var a=e.text_.length-3;a>0;a-=3)i.push(e.text_.substr(a,3)),i.push({type_:"1000 separator"});i.push(e.text_.substr(0,r)),i.reverse()}else i.push(e.text_);for(var o in e)delete e[o];return i},"output-o":function(e){var i=[];if(e.text_=e.text_||"",e.text_.length>4){for(var r=e.text_.length-3,a=0;a<r;a+=3)i.push(e.text_.substr(a,3)),i.push({type_:"1000 separator"});i.push(e.text_.substr(a))}else i.push(e.text_);for(var o in e)delete e[o];return i}}}};var nT={go:function(e,i){if(!e)return"";for(var r="",a=!1,o=0;o<e.length;o++){var n=e[o];"string"==typeof n?r+=n:(r+=nT._go2(n),"1st-level escape"===n.type_&&(a=!0))}return i||a||!r||(r="{"+r+"}"),r},_goInner:function(e){return e&&nT.go(e,!0)},_go2:function(e){var i;switch(e.type_){case"chemfive":i="";var r={a:nT._goInner(e.a),b:nT._goInner(e.b),p:nT._goInner(e.p),o:nT._goInner(e.o),q:nT._goInner(e.q),d:nT._goInner(e.d)};r.a&&(r.a.match(/^[+\-]/)&&(r.a="{"+r.a+"}"),i+=r.a+"\\,"),(r.b||r.p)&&(i+="{\\vphantom{X}}"+("^{\\hphantom{"+(r.b||"")+"}}_{\\hphantom{")+(r.p||"")+"}}{\\vphantom{X}}^{\\smash[t]{\\vphantom{2}}\\llap{"+(r.b||"")+"}}_{\\vphantom{2}\\llap{\\smash[t]{"+(r.p||"")+"}}}"),r.o&&(r.o.match(/^[+\-]/)&&(r.o="{"+r.o+"}"),i+=r.o),"kv"===e.dType?((r.d||r.q)&&(i+="{\\vphantom{X}}"),r.d&&(i+="^{"+r.d+"}"),r.q&&(i+="_{\\smash[t]{"+r.q+"}}")):"oxidation"===e.dType?(r.d&&(i+="{\\vphantom{X}}^{"+r.d+"}"),r.q&&(i+="{\\vphantom{X}}_{\\smash[t]{"+r.q+"}}")):(r.q&&(i+="{\\vphantom{X}}_{\\smash[t]{"+r.q+"}}"),r.d&&(i+="{\\vphantom{X}}^{"+r.d+"}"));break;case"rm":case"roman numeral":i="\\mathrm{"+e.p1+"}";break;case"text":e.p1.match(/[\^_]/)?(e.p1=e.p1.replace(" ","~").replace("-","\\text{-}"),i="\\mathrm{"+e.p1+"}"):i="\\text{"+e.p1+"}";break;case"state of aggregation":i="\\mskip2mu "+nT._goInner(e.p1);break;case"state of aggregation subscript":i="\\mskip1mu "+nT._goInner(e.p1);break;case"bond":if(!(i=nT._getBond(e.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+e.kind_+")"];break;case"frac":var a="\\frac{"+e.p1+"}{"+e.p2+"}";i="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"pu-frac":var o="\\frac{"+nT._goInner(e.p1)+"}{"+nT._goInner(e.p2)+"}";i="\\mathchoice{\\textstyle"+o+"}{"+o+"}{"+o+"}{"+o+"}";break;case"tex-math":case"1st-level escape":i=e.p1+" ";break;case"frac-ce":i="\\frac{"+nT._goInner(e.p1)+"}{"+nT._goInner(e.p2)+"}";break;case"overset":i="\\overset{"+nT._goInner(e.p1)+"}{"+nT._goInner(e.p2)+"}";break;case"underset":i="\\underset{"+nT._goInner(e.p1)+"}{"+nT._goInner(e.p2)+"}";break;case"underbrace":i="\\underbrace{"+nT._goInner(e.p1)+"}_{"+nT._goInner(e.p2)+"}";break;case"color":i="{\\color{"+e.color1+"}{"+nT._goInner(e.color2)+"}}";break;case"color0":i="\\color{"+e.color+"}";break;case"arrow":var n={rd:nT._goInner(e.rd),rq:nT._goInner(e.rq)},s=nT._getArrow(e.r);n.rd||n.rq?"<=>"===e.r||"<=>>"===e.r||"<<=>"===e.r||"<-->"===e.r?(s="\\long"+s,n.rd&&(s="\\overset{"+n.rd+"}{"+s+"}"),n.rq&&(s="<-->"===e.r?"\\underset{\\lower2mu{"+n.rq+"}}{"+s+"}":"\\underset{\\lower6mu{"+n.rq+"}}{"+s+"}"),s=" {}\\mathrel{"+s+"}{} "):(n.rq&&(s+="[{"+n.rq+"}]"),s+="{"+n.rd+"}",s=" {}\\mathrel{\\x"+s+"}{} "):s=" {}\\mathrel{\\long"+s+"}{} ",i=s;break;case"operator":i=nT._getOperator(e.kind_);break;case"space":i=" ";break;case"entitySkip":case"pu-space-1":i="~";break;case"pu-space-2":i="\\mkern3mu ";break;case"1000 separator":i="\\mkern2mu ";break;case"commaDecimal":i="{,}";break;case"comma enumeration L":i="{"+e.p1+"}\\mkern6mu ";break;case"comma enumeration M":i="{"+e.p1+"}\\mkern3mu ";break;case"comma enumeration S":i="{"+e.p1+"}\\mkern1mu ";break;case"hyphen":i="\\text{-}";break;case"addition compound":i="\\,{\\cdot}\\,";break;case"electron dot":i="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":i="{\\times}";break;case"prime":i="\\prime ";break;case"cdot":i="\\cdot ";break;case"tight cdot":i="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":i="\\times ";break;case"circa":i="{\\sim}";break;case"^":i="uparrow";break;case"v":i="downarrow";break;case"ellipsis":i="\\ldots ";break;case"/":i="/";break;case" / ":i="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return i},_getArrow:function(e){switch(e){case"->":case"→":case"⟶":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":case"⇌":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(e){switch(e){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(e){switch(e){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},nB=class e extends ok{constructor(e){super(h(u({},e),{type:"delim"})),this.value=e.delim,this.size=e.size}static fromJson(i){return new e(i)}toJson(){return h(u({},super.toJson()),{delim:this.value,size:this.size})}render(e){return new or(this.value,{type:"middle"})}_serialize(e){if(!(e.expandMacro||e.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let i=et(this.command,this.mode);return null!=i&&i.serialize?i.serialize(this,e):a2(this.command,this.value)}},n$=class e extends ok{constructor(e){super(h(u({},e),{type:"sizeddelim",value:e.delim})),this.delimType=e.delimType,this.size=e.size}static fromJson(i){return new e(i)}toJson(){return h(u({},super.toJson()),{delim:this.value,size:this.size,delimType:this.delimType})}render(e){var i,r,a;let o=(i=this.value,r=this.size,a={classes:({open:"mopen",close:"mclose"})[this.delimType],type:this.delimType,isSelected:this.isSelected},void 0===i||"."===i?nc(e,a.classes):("<"===i||"\\lt"===i||"⟨"===i?i="\\langle":(">"===i||"\\gt"===i||"⟩"===i)&&(i="\\rangle"),ne.has(i)||ni.has(i)?o7(i,r,!1,e,a):nt.has(i)?o9(i,nr[r],!1,e,a):null));return o?(o=this.bind(e,o),this.caret&&(o.caret=this.caret),o):null}_serialize(e){if(!(e.expandMacro||e.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let i=et(this.command,this.mode);return null!=i&&i.serialize?i.serialize(this,e):a2(this.command,this.value)}},nP=class e extends ok{constructor(e,i,r,a){super({type:"enclose",command:e,style:a.style}),this.body=i,this.backgroundcolor=a.backgroundcolor,r.updiagonalarrow&&(r.updiagonalstrike=!1),r.box&&(r.left=!1,r.right=!1,r.bottom=!1,r.top=!1),this.notation=r,this.shadow=a.shadow,this.strokeWidth=a.strokeWidth,this.strokeStyle=a.strokeStyle,this.svgStrokeStyle=a.svgStrokeStyle,this.strokeColor=a.strokeColor,this.borderStyle=a.borderStyle,this.padding=a.padding,this.captureSelection=!0}static fromJson(i){return new e(i.command,i.body,i.notation,i)}toJson(){return h(u({},super.toJson()),{notation:this.notation,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}_serialize(e){var i;if(!(e.expandMacro||e.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let r=et(this.command,this.mode);if(null!=r&&r.serialize)return r.serialize(this,e);let a=null!=(i=this.command)?i:"";if("\\enclose"===this.command){a+="{"+Object.keys(this.notation).join(" ")+"}";let e="",i="";this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(e+=i+'mathbackground="'+this.backgroundcolor+'"',i=","),this.shadow&&"auto"!==this.shadow&&(e+=i+'shadow="'+this.shadow+'"',i=","),this.strokeWidth||"solid"!==this.strokeStyle?(e+=i+this.borderStyle,i=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(e+=i+'mathcolor="'+this.strokeColor+'"',i=","),e&&(a+=`[${e}]`)}return a2(a,this.bodyToLatex(e))}render(e){var i;let r=new og({parent:e},this.style),a=ok.createBox(r,this.body);if(!a)return null;let o=r.toEm(this.padding&&"auto"!==this.padding?{string:this.padding}:{register:"fboxsep"}),n=function(e){if(!e)return"1px";let i=e.match(/([0-9][a-zA-Z\%]+)/);return null===i?"1px":i[1]}(this.borderStyle),s=new or(null,{classes:"ML__notation"});s.setStyle("box-sizing","border-box"),s.setStyle("left",`calc(-${n} / 2 - ${o}em)`),s.setStyle("height",`calc(${a.height+a.depth+2*o}em)`),s.height=a.height+o,s.depth=a.depth+o,s.setStyle("width",`calc(100% + ${2*o}em + 2 * ${n})`),this.backgroundcolor&&s.setStyle("background-color",null!=(i=this.backgroundcolor)?i:"transparent"),this.notation.box&&s.setStyle("border",this.borderStyle),this.notation.actuarial&&(s.setStyle("border-top",this.borderStyle),s.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(s.setStyle("border-bottom",this.borderStyle),s.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(s.setStyle("border-radius","8px"),s.setStyle("border",this.borderStyle)),this.notation.circle&&(s.setStyle("border-radius","50%"),s.setStyle("border",this.borderStyle)),this.notation.top&&s.setStyle("border-top",this.borderStyle),this.notation.left&&s.setStyle("border-left",this.borderStyle),this.notation.right&&s.setStyle("border-right",this.borderStyle),this.notation.bottom&&s.setStyle("border-bottom",this.borderStyle);let l="";if(this.notation.horizontalstrike&&(l+=`<line x1="3%"  y1="50%" x2="97%" y2="50%" stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}" stroke-linecap="round"`,this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.verticalstrike&&(l+=`<line x1="50%"  y1="3%" x2="50%" y2="97%" stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}" stroke-linecap="round"`,this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.updiagonalstrike&&(l+=`<line x1="3%"  y1="97%" x2="97%" y2="3%" stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}" stroke-linecap="round"`,this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.downdiagonalstrike&&(l+=`<line x1="3%"  y1="3%" x2="97%" y2="97%" stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}" stroke-linecap="round"`,this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),l){let e;"none"!==this.shadow&&(e="auto"===this.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),on(s,l,e)}let c=new or([s,a]);return c.setStyle("position","relative"),c.setStyle("display","inline"),c.height=a.height+o,c.depth=a.depth+o,c.left=o,c.right=o,this.caret&&(c.caret=this.caret),c.wrap(r)}},nO=class e extends ok{constructor(e,i,r){var a,o;super(h(u({},r),{type:"genfrac",displayContainsHighlight:!0})),this.above=e,this.below=i,this.hasBarLine=null==(a=null==r?void 0:r.hasBarLine)||a,this.continuousFraction=null!=(o=null==r?void 0:r.continuousFraction)&&o,this.numerPrefix=null==r?void 0:r.numerPrefix,this.denomPrefix=null==r?void 0:r.denomPrefix,this.mathstyleName=null==r?void 0:r.mathstyleName,this.leftDelim=null==r?void 0:r.leftDelim,this.rightDelim=null==r?void 0:r.rightDelim,this.fractionNavigationOrder=null==r?void 0:r.fractionNavigationOrder}static fromJson(i){return new e(i.above,i.below,i)}toJson(){let e={};return this.continuousFraction&&(e.continuousFraction=!0),this.numerPrefix&&(e.numerPrefix=this.numerPrefix),this.denomPrefix&&(e.denomPrefix=this.denomPrefix),this.leftDelim&&(e.leftDelim=this.leftDelim),this.rightDelim&&(e.rightDelim=this.rightDelim),this.hasBarLine||(e.hasBarLine=!1),this.mathstyleName&&(e.mathstyleName=this.mathstyleName),this.fractionNavigationOrder&&(e.fractionNavigationOrder=this.fractionNavigationOrder),u(u({},super.toJson()),e)}get children(){if(this._children)return this._children;let e=[];if("denominator-numerator"===this.fractionNavigationOrder){for(let i of this.below)e.push(...i.children),e.push(i);for(let i of this.above)e.push(...i.children),e.push(i)}else{for(let i of this.above)e.push(...i.children),e.push(i);for(let i of this.below)e.push(...i.children),e.push(i)}return this._children=e,e}render(e){var i,r;let a=new og({parent:e,mathstyle:this.mathstyleName},this.style),o=a.metrics,n=new og({parent:a,mathstyle:this.continuousFraction?"":"numerator"},this.style),s=this.numerPrefix?new or([new or(this.numerPrefix),ok.createBox(n,this.above)],{isTight:n.isTight,type:"ignore"}):null!=(i=ok.createBox(n,this.above,{type:"ignore"}))?i:new or(null,{type:"ignore"}),l=new og({parent:a,mathstyle:this.continuousFraction?"":"denominator"},this.style),c=this.denomPrefix?new or([new or(this.denomPrefix),ok.createBox(l,this.below,{type:"ignore"})]):null!=(r=ok.createBox(l,this.below,{type:"ignore"}))?r:new or(null,{type:"ignore"}),d=this.hasBarLine?o.defaultRuleThickness:0,u,h=0,p;a.isDisplayStyle?(u=n.metrics.num1,h=d>0?3*d:7*d,p=l.metrics.denom1):(d>0?(u=n.metrics.num2,h=d):(u=n.metrics.num3,h=3*o.defaultRuleThickness),p=l.metrics.denom2);let m=[];this.isSelected&&m.push("ML__selected");let f=s.depth,y=c.height,b;if(d<=0){let e=u-f-(y-p);e<h&&(u+=(h-e)/2,p+=(h-e)/2),b=new ol({individualShift:[{box:s,shift:-u,classes:[...m,"ML__center"]},{box:c,shift:p,classes:[...m,"ML__center"]}]}).wrap(a)}else{let e=.25+d/2,i=.25-d/2;u<h+f+e&&(u=h+f+e),p<h+y-i&&(p=h+y-i);let r=new or(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});r.height=d/2,r.depth=d/2,b=new ol({individualShift:[{box:c,shift:p,classes:[...m,"ML__center"]},{box:r,shift:-i,classes:m},{box:s,shift:-u,classes:[...m,"ML__center"]}]}).wrap(a)}let g=a.isDisplayStyle?o.delim1:o.delim2,v=this.leftDelim?this.bind(e,ns("open",this.leftDelim,g,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):nc(a,"open"),x=null;x=this.continuousFraction?new or(null,{type:"close"}):this.rightDelim?this.bind(e,ns("close",this.rightDelim,g,!0,e,{style:this.style,mode:this.mode,isSelected:this.isSelected})):nc(a,"close");let w=this.bind(e,new or([v,b,x],{isTight:a.isTight,type:"inner",classes:"mfrac"}));return w?(this.caret&&(w.caret=this.caret),this.attachSupsub(e,{base:w})):null}},nF=class e extends ok{constructor(e,i){var r;super({type:"latex",value:e,mode:"latex"}),this.isSuggestion=null!=(r=null==i?void 0:i.isSuggestion)&&r,this.isError=!1}static fromJson(i){let r=new e(i.value);return i.isSuggestion&&(r.isSuggestion=!0),i.isError&&(r.isError=!0),r}toJson(){let e={};return this.isSuggestion&&(e.isSuggestion=!0),this.isError&&(e.isError=!0),u({type:"latex",value:this.value},e)}get computedStyle(){return{}}render(e){let i=new or(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return i?(this.caret&&(i.caret=this.caret),this.bind(e,i)):null}},nq=class e extends ok{constructor(e){super({type:"latexgroup",mode:"latex"}),this.body=[...e].map(e=>new nF(e)),this.skipBoundary=!1}static fromJson(i){return new e("")}toJson(){return super.toJson()}render(e){let i=ok.createBox(e,this.body);return i?(this.caret&&(i.caret=this.caret),this.bind(e,i)):null}_serialize(e){var i,r;return null!=(r=null==(i=this.body)?void 0:i.map(e=>e.value).join(""))?r:""}},nN=class e extends ok{constructor(e,i){var r,a,o;super(h(u({},i),{type:null!=(r=i.type)?r:"mop",isFunction:null==i?void 0:i.isFunction})),this.value=e,this.hasArgument=null!=(a=i.hasArgument)&&a,this.variant=null==i?void 0:i.variant,this.variantStyle=null==i?void 0:i.variantStyle,this.subsupPlacement=null==i?void 0:i.limits,this.isExtensibleSymbol=null!=(o=null==i?void 0:i.isExtensibleSymbol)&&o}static fromJson(i){return new e(i.symbol,i)}toJson(){let e=super.toJson();return this.hasArgument&&(e.hasArgument=!0),this.variant&&(e.variant=this.variant),this.variantStyle&&(e.variantStyle=this.variantStyle),this.subsupPlacement&&(e.limits=this.subsupPlacement),this.isExtensibleSymbol&&(e.isExtensibleSymbol=!0),this.value&&(e.symbol=this.value),e}render(e){var i;let r,a=0,o=0;if(this.isExtensibleSymbol){let i=e.isDisplayStyle&&"\\smallint"!==this.value;(r=new or(this.value,{fontFamily:i?"Size2-Regular":"Size1-Regular",classes:"op-symbol "+(i?"large-op":"small-op"),type:"op",maxFontSize:e.scalingFactor,isSelected:this.isSelected})).right=r.italic,a=(r.height-r.depth)/2-.25*e.scalingFactor,o=r.italic,r.setTop(a)}else this.type,r=new or(this.value,{type:"op",mode:"math",maxFontSize:e.scalingFactor,style:{variant:this.variant,variantStyle:this.variantStyle},isSelected:this.isSelected,letterShapeStyle:e.letterShapeStyle});let n=r;if(this.superscript||this.subscript){let s=null!=(i=this.subsupPlacement)?i:"auto";n="over-under"===s||"auto"===s&&e.isDisplayStyle?this.attachLimits(e,{base:r,baseShift:a,slant:o}):this.attachSupsub(e,{base:r})}return new or(this.bind(e,n),{type:"op",caret:this.caret,isSelected:this.isSelected,classes:"op-group"}).wrap(e)}_serialize(e){if(!(e.expandMacro||e.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let i=et(this.command,this.mode);if(null!=i&&i.serialize)return i.serialize(this,e);if("​"===this.value)return this.supsubToLatex(e);let r=[];return this.hasArgument?r.push(a2(this.command,this.bodyToLatex(e))):r.push(this.command),this.explicitSubsupPlacement&&("over-under"===this.subsupPlacement&&r.push("\\limits"),"adjacent"===this.subsupPlacement&&r.push("\\nolimits"),"auto"===this.subsupPlacement&&r.push("\\displaylimits")),r.push(this.supsubToLatex(e)),a4(r)}},nR=class e extends ok{constructor(e){let i=e.body;super(h(u({},e),{type:"overlap",body:"string"==typeof i?[new ok({value:i})]:i,style:null==e?void 0:e.style})),this.skipBoundary=!0,this.align=null==e?void 0:e.align,this.boxType=null==e?void 0:e.boxType}static fromJson(i){return new e(i)}toJson(){let e={};return this.align&&(e.align=this.align),this.boxType&&(e.boxType=this.boxType),u(u({},super.toJson()),e)}render(e){let i=ok.createBox(e,this.body,{classes:"inner"});return i?(this.caret&&(i.caret=this.caret),this.bind(e,new or([i,new or(null,{classes:"fix"})],{classes:"right"===this.align?"rlap":"llap",type:this.boxType}))):null}},nI=class e extends ok{constructor(e){var i,r,a,o;super({type:"overunder",command:e.command,style:e.style,mode:e.mode,body:e.body,skipBoundary:null==(i=e.skipBoundary)||i}),this.subsupPlacement=e.supsubPlacement,this.svgAbove=e.svgAbove,this.svgBelow=e.svgBelow,this.svgBody=e.svgBody,this.above=e.above,this.below=e.below,this.boxType=null!=(r=e.boxType)?r:"ord",this.paddedBody=null!=(a=e.paddedBody)&&a,this.paddedLabels=null!=(o=e.paddedLabels)&&o}static fromJson(i){return new e(i)}toJson(){let e=super.toJson();return this.skipBoundary||(e.skipBoundary=!1),this.subsupPlacement&&(e.subsupPlacement=this.subsupPlacement),this.svgAbove&&(e.svgAbove=this.svgAbove),this.svgBelow&&(e.svgBelow=this.svgBelow),this.svgBody&&(e.svgBody=this.svgBody),"ord"!==this.boxType&&(e.boxType=this.boxType),this.paddedBody&&(e.paddedBody=!0),this.paddedLabels&&(e.paddedLabels=!0),e}render(e){let i=this.svgBody?os(this.svgBody):ok.createBox(e,this.body,{type:"ignore"}),r=new og({parent:e,mathstyle:"scriptstyle"},this.style),a=null;this.svgAbove?a=os(this.svgAbove):this.above&&(a=ok.createBox(r,this.above,{type:"ignore"}));let o=null;this.svgBelow?o=os(this.svgBelow):this.below&&(o=ok.createBox(r,this.below,{type:"ignore"})),this.paddedBody&&(i=new or([nc(e,"open"),i,nc(e,"close")],{type:"ignore"}));let n=function(e,i){if(!i.base)return null;if(!i.above&&!i.below){let e=new or(i.base,{type:i.type});return e.setStyle("position","relative"),e}let r=0;i.above&&(r=e.metrics.bigOpSpacing5);let a=null,o=i.base,n=["ML__center"];if(i.paddedAboveBelow&&n.push("ML__label_padding"),i.below&&i.above){let s=e.metrics.bigOpSpacing5+i.below.height+i.below.depth+o.depth+0;a=new ol({bottom:s,children:[e.metrics.bigOpSpacing5,{box:i.below,classes:n},{box:o,classes:["ML__center"]},r,{box:i.above,classes:n},e.metrics.bigOpSpacing5]})}else i.below?a=new ol({top:o.height-0,children:[e.metrics.bigOpSpacing5,{box:i.below,classes:n},{box:o,classes:["ML__center"]}]}):i.above&&(a=new ol({bottom:o.depth+0,children:[{box:o,classes:["ML__center"]},r,{box:i.above,classes:n},e.metrics.bigOpSpacing5]}));return new or(a,{type:i.type})}(e,{base:i,above:a,below:o,type:"bin"===this.boxType||"rel"===this.boxType?this.boxType:"ord",paddedAboveBelow:this.paddedLabels});return n?(n="over-under"===this.subsupPlacement?this.attachLimits(e,{base:n,type:n.type}):this.attachSupsub(e,{base:n}),this.caret&&(n.caret=this.caret),this.bind(e,n)):null}},nV=class e extends ok{constructor(e){var i,r,a,o;super(h(u({},e),{type:"phantom"})),this.captureSelection=!0,this.isInvisible=null!=(i=e.isInvisible)&&i,this.smashDepth=null!=(r=e.smashDepth)&&r,this.smashHeight=null!=(a=e.smashHeight)&&a,this.smashWidth=null!=(o=e.smashWidth)&&o}static fromJson(i){return new e(i)}toJson(){let e={};return this.isInvisible&&(e.isInvisible=!0),this.smashDepth&&(e.smashDepth=!0),this.smashHeight&&(e.smashHeight=!0),this.smashWidth&&(e.smashWidth=!0),u(u({},super.toJson()),e)}render(e){let i=new og({parent:e,isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return this.isInvisible,ok.createBox(i,this.body,{classes:"inner"});let r=ok.createBox(this.isInvisible?i:e,this.body);if(!r)return null;if(this.smashWidth){let i=new or(null,{classes:"fix"});return new or([r,i],{classes:"rlap"}).wrap(e)}if(!this.smashHeight&&!this.smashDepth)return r;if(this.smashHeight&&(r.height=0),this.smashDepth&&(r.depth=0),r.children)for(let e of r.children)this.smashHeight&&(e.height=0),this.smashDepth&&(e.depth=0);return new ol({firstBaseline:[{box:r}]},{type:r.type}).wrap(e)}},nj=class e extends ok{constructor(e){var i;super(u({type:"spacing"},e)),this.width=null==e?void 0:e.width,this._braced=null!=(i=null==e?void 0:e.braced)&&i}static fromJson(i){return new e(i)}toJson(){let e=super.toJson();return void 0!==this.width&&(e.width=this.width),this._braced&&(e.braced=!0),e}render(e){var i;let r;if("space"===this.command)return new or("math"===this.mode?null:" ");if(void 0!==this.width)(r=new or(null,{classes:"mspace"})).left=e.toEm(this.width);else{let e=null!=(i=({"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"})[this.command])?i:"mediumspace";r=new or(null,{classes:e})}return r=this.bind(e,r),this.caret&&(r.caret=this.caret),r}_serialize(e){var i;if(!e.expandMacro&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let r=et(this.command,this.mode);if(null!=r&&r.serialize)return r.serialize(this,e);let a=null!=(i=this.command)?i:"";return void 0===this.width?a:!this._braced||"register"in this.width?`${a}${of(this.width)}`:`${a}{${of(this.width)}}`}},nH=class e extends ok{constructor(e){var i;super(h(u({},e),{type:"surd",mode:null!=(i=e.mode)?i:"math",style:e.style,displayContainsHighlight:!0,body:e.body})),this.above=e.index}static fromJson(i){return new e(h(u({},i),{index:i.above}))}_serialize(e){if(!(e.expandMacro||e.skipStyles)&&"string"==typeof this.verbatimLatex)return this.verbatimLatex;let i=et(this.command,this.mode);if(null!=i&&i.serialize)return i.serialize(this,e);let r=this.command,a=this.bodyToLatex(e);return this.above&&!this.hasEmptyBranch("above")?a2(`${r}[${this.aboveToLatex(e)}]`,a):/^[0-9]$/.test(a)?`${r}${a}`:a2(r,a)}get children(){if(this._children)return this._children;let e=[];if(this.above)for(let i of this.above)e.push(...i.children),e.push(i);if(this.body)for(let i of this.body)e.push(...i.children),e.push(i);return this._children=e,e}render(e){var i;let r=new og({parent:e,mathstyle:"cramp"},this.style),a=null!=(i=ok.createBox(r,this.body,{type:"inner"}))?i:new or(null),o=r.scalingFactor,n=r.metrics.defaultRuleThickness/o,s=e.isDisplayStyle?.431:n,l=new or(null,{classes:"ML__sqrt-line",style:this.style,height:n}),c=o*(n+s/4),d=Math.max(2*o*s,a.height+a.depth)+c+n,u=new og({parent:e},this.style),h=this.bind(u,new or(ns("inner","\\surd",d,!1,u,{isSelected:this.isSelected}),{isSelected:this.isSelected,classes:"ML__sqrt-sign",style:this.style}));if(!h)return null;let p=h.height+h.depth-n;p>a.height+a.depth+c&&(c=(c+p-(a.height+a.depth))/2),h.setTop(h.height-a.height-c);let m=this.bind(e,new ol({firstBaseline:[{box:new or(a)},c-2*n,{box:l},n]})),f=ok.createBox(new og({parent:e,mathstyle:"scriptscriptstyle"}),this.above,{type:"ignore"});if(!f){let i=new or([h,m],{classes:this.containsCaret?"ML__contains-caret":"",type:"inner"});return i.setStyle("display","inline-block"),i.setStyle("height",i.height+i.depth,"em"),this.caret&&(i.caret=this.caret),this.bind(e,i)}let y=new ol({shift:-.6*(Math.max(h.height,m.height)-Math.max(h.depth,m.depth)),children:[{box:f}]}),b=new or([new or(y,{classes:"ML__sqrt-index",type:"ignore"}),h,m],{type:"inner",classes:this.containsCaret?"ML__contains-caret":""});return b.height=h.height,b.depth=h.depth,this.caret&&(b.caret=this.caret),this.bind(e,b)}},nW=class extends or{constructor(e){super(null,{type:"skip",width:e})}toMarkup(){return`<span style="display:inline-block;width:${Math.round(100*this.width)/100}em"></span>`}};function nU(e,i){if(!e.parent)return;let r=e.parent.children,a=r.indexOf(e),o=a-1;for(;o>=0&&"ignore"===r[o].type;)o-=1;if(o<0&&e.parent.parent&&"lift"===e.parent.type){nU(e.parent,i);return}if(a>0&&"skip"===r[a-1].type){r[a-1].width+=i;return}r.splice(a,0,new nW(i))}var nJ={ord:{op:3,bin:4,rel:5,inner:3},op:{ord:3,op:3,rel:5,inner:3},bin:{ord:4,op:4,open:4,inner:4},rel:{ord:5,op:5,open:5,inner:5},close:{op:3,bin:4,rel:5,inner:3},punct:{ord:3,op:3,rel:3,open:3,punct:3,inner:3},inner:{ord:3,op:3,bin:4,rel:5,open:3,punct:3,inner:3}},nX={ord:{op:3},op:{ord:3,op:3},close:{op:3},inner:{op:3}};function nG(e,i){if(!e.children)return e;let r=e.children;nZ(r,(e,i)=>{"bin"===i.type&&(!e||/^(middle|bin|op|rel|open|punct)$/.test(e.type))&&(i.type="ord"),(null==e?void 0:e.type)==="bin"&&/^(rel|close|punct)$/.test(i.type)&&(e.type="ord"),"ignore"!==i.type&&(e=i)});let a=i.getRegisterAsEm("thinmuskip"),o=i.getRegisterAsEm("medmuskip"),n=i.getRegisterAsEm("thickmuskip");return nZ(r,(e,i)=>{var r,s,l;if(!e)return;let c=e.type,d=i.isTight?null!=(r=nX[c])?r:null:null!=(s=nJ[c])?s:null,u=null!=(l=null==d?void 0:d[i.type])?l:null;3===u&&nU(i,a),4===u&&nU(i,o),5===u&&nU(i,n)}),e}function nZ(e,i,r){if(!e)return r;for(let a of e=[...e])"lift"===a.type?r=nZ(a.children,i,r):"ignore"===a.type?nZ(a.children,i):(i(r,a),nZ(a.children,i),r=a);return r}var nY=class e extends ok{constructor(e){super({type:"tooltip",command:e.command,mode:e.mode,style:e.style,body:e.body,displayContainsHighlight:!0}),this.tooltip=new ok({type:"root",mode:e.content,body:e.tooltip,style:{}}),this.skipBoundary=!0,this.captureSelection=!1}static fromJson(i){return new e(h(u({},i),{tooltip:nQ(i.tooltip)}))}toJson(){var e;let i=null==(e=this.tooltip.body)?void 0:e.filter(e=>"first"!==e.type).map(e=>e.toJson());return h(u({},super.toJson()),{tooltip:i})}render(e){let i=ok.createBox(new og,this.body);if(!i)return null;let r=new og({parent:e,mathstyle:"displaystyle"},{fontSize:5}),a=oa(nG(new or(this.tooltip.render(r),{classes:"ML__tooltip-content"}),r)),o=new or([a,i],{classes:"ML__tooltip-container"});return this.caret&&(o.caret=this.caret),this.bind(e,o)}};function nQ(e){if(f(e))return e.map(e=>nQ(e));if("string"==typeof e)return ok.fromJson(e);for(let i of(e=u({},e),ov))e[i]&&(e[i]=nQ(e[i]));e.args&&(e.args=function(e){if(e&&Array.isArray(e))return e.map(e=>"<null>"===e?null:"object"==typeof e&&"group"in e?{group:e.group.map(e=>nQ(e))}:"object"==typeof e&&"atoms"in e?e.atoms.map(e=>nQ(e)):e)}(e.args)),e.array&&(e.array=nQ(e.array));let i=e.type,r;for(let a of("accent"===i&&(r=o3.fromJson(e)),"array"===i&&(r=ny.fromJson(e)),"box"===i&&(r=nv.fromJson(e)),"chem"===i&&(r=nK.fromJson(e)),"composition"===i&&(r=nx.fromJson(e)),"delim"===i&&(r=nB.fromJson(e)),"enclose"===i&&(r=nP.fromJson(e)),"error"===i&&(r=nw.fromJson(e)),"genfrac"===i&&(r=nO.fromJson(e)),"group"===i&&(r=nk.fromJson(e)),"latex"===i&&(r=nF.fromJson(e)),"latexgroup"===i&&(r=nq.fromJson(e)),"leftright"===i&&(r=n_.fromJson(e)),"macro"===i&&(r=nS.fromJson(e)),"macro-argument"===i&&(r=nM.fromJson(e)),"subsup"===i&&(r=nC.fromJson(e)),"overlap"===i&&(r=nR.fromJson(e)),"overunder"===i&&(r=nI.fromJson(e)),"placeholder"===i&&(r=nd.fromJson(e)),"prompt"===i&&(r=nL.fromJson(e)),"phantom"===i&&(r=nV.fromJson(e)),"sizeddelim"===i&&(r=n$.fromJson(e)),"spacing"===i&&(r=nj.fromJson(e)),"surd"===i&&(r=nH.fromJson(e)),"text"===i&&(r=oS.fromJson(e)),"tooltip"===i&&(r=nY.fromJson(e)),"mop"===i&&(r=nN.fromJson(e)),r||(i&&["first","mbin","mrel","mclose","minner","mopen","mord","mpunct","root","space"].includes(i),r=ok.fromJson(e)),ov))e[a]&&r.setChildren(e[a],a);return void 0!==e.verbatimLatex&&(r.verbatimLatex=e.verbatimLatex),e.subsupPlacement&&(r.subsupPlacement=e.subsupPlacement),e.explicitSubsupPlacement&&(r.explicitSubsupPlacement=!0),e.isFunction&&(r.isFunction=!0),e.isExtensibleSymbol&&(r.isExtensibleSymbol=!0),e.skipBoundary&&(r.skipBoundary=!0),e.captureSelection&&(r.captureSelection=!0),r}var n0={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},n1={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^’‘]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},n4=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,n2=[/^[a-z]$/,/^[A-Z]$/,n4,/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/],n3={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};function n6(e){if(!e)return"";let{style:i}=e;if(void 0===i.variant)return"";let r=i.variant;return i.variantStyle&&"up"!==i.variantStyle&&(r+="-"+i.variantStyle),r}new class extends a8{constructor(){super("math")}createAtom(e,i,r){var a,o,n,s,l;if(null===i)return new ok({type:"mord",mode:"math",command:e,value:e,style:r});if("symbol"===i.definitionType){let s=new ok({type:null!=(a=i.type)?a:"mord",mode:"math",command:null!=(o=i.command)?o:e,value:String.fromCodePoint(i.codepoint),style:r});return null!=(n=i.isFunction)&&n&&(s.isFunction=!0),e.startsWith("\\")&&(s.verbatimLatex=e),s}let c=new ok({type:"mord",mode:"math",command:null!=(s=i.command)?s:e,value:e,style:r});return null!=(l=i.isFunction)&&l&&(c.isFunction=!0),e.startsWith("\\")&&(c.verbatimLatex=e),c}serialize(e,i){let r=function(e,i){let{parent:r}=e[0],a=n6(r);return a7(e,"variant").map(e=>{let r=n6(e[0]),o="";r&&r!==a&&(o=({calligraphic:"\\mathcal",fraktur:"\\mathfrak","double-struck":"\\mathbb",script:"\\mathscr",monospace:"\\mathtt","sans-serif":"\\mathsf",normal:"\\mathrm","normal-italic":"\\mathnormal","normal-bold":"\\mathbf","normal-bolditalic":"\\mathbfit",ams:"","ams-italic":"\\mathit","ams-bold":"\\mathbf","ams-bolditalic":"\\mathbfit",main:"","main-italic":"\\mathit","main-bold":"\\mathbf","main-bolditalic":"\\mathbfit"})[r]);let n=a4(e.map(e=>e._serialize(i)));return o?a2(o,n):n})}(e,h(u({},i),{defaultMode:"math"}));return 0===r.length||"text"!==i.defaultMode?r:["$ ",...r," $"]}getFont(e,i){i.variant;let{variant:r}=i,{variantStyle:a}=i;"normal"===r&&!a&&/[\u00A3\u0131\u0237]/.test(e.value)&&(r="main",a="italic"),"normal"!==r||a||1!==e.value.length||n2.forEach((r,o)=>{var n;r.test(e.value)&&"it"===n3[null!=(n=i.letterShapeStyle)?n:"tex"][o]&&(a="italic")}),"up"===a&&(a=void 0);let o=a?r+"-"+a:r;n0[o];let[n,s]=n0[o];return n1[r]&&!n1[r].test(e.value)?(e.value=function(e,i,r){if(!/[A-Za-z\d]/.test(e)||!i&&!r)return e;let a=e.codePointAt(0);if(void 0===a)return e;for(let e of D)if((!i||e.variant===i)&&(!r||e.style===r)&&a>=e.offset&&a<e.offset+e.len){let i=e.start+a-e.offset;return String.fromCodePoint(K[i]||i)}return e}(e.value,r,a),null):(n4.test(e.value)&&(e.classes+=" lcGreek"),s&&(e.classes+=" "+s),n)}};var n8={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};function n5(e){let i=e.split("+"),r={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:i.pop()};return i.includes("shift")&&(r.shift=!0),i.includes("alt")&&(r.alt=!0),i.includes("ctrl")&&(r.ctrl=!0),i.includes("cmd")&&(r.cmd=!0),i.includes("win")&&(r.win=!0),i.includes("meta")&&(r.meta=!0),r}function n7(e){let i="";return e.shift&&(i+="shift+"),e.alt&&(i+="alt+"),e.ctrl&&(i+="ctrl+"),e.cmd&&(i+="cmd+"),e.win&&(i+="win+"),e.meta&&(i+="meta+"),i+e.key}new class extends a8{constructor(){super("text")}createAtom(e,i,r){return i&&"symbol"===i.definitionType?new oS(e,String.fromCodePoint(i.codepoint),null!=r?r:{}):null}serialize(e,i){var r;let a=(r=h(u({},i),{defaultMode:"text"}),a7(e,"fontFamily").map(e=>{var i,a;let o=a7(e,"fontSize").map(e=>{var i,a;let o=a7(e,"fontSeries").map(e=>{let i=a7(e,"fontShape").map(e=>{let i=e.map(e=>e._serialize(r)),{fontShape:a}=e[0].style,o="";return"it"===a&&(o="\\textit"),"sl"===a&&(o="\\textsl"),"sc"===a&&(o="\\textsc"),"n"===a&&(o="\\textup"),!o&&a?`{${a2("\\fontshape",a)}${a4(i)}}`:o?a2(o,a4(i)):a4(i)}),{fontSeries:a}=e[0].style,o="";return"b"===a&&(o="\\textbf"),"l"===a&&(o="\\textlf"),"m"===a&&(o="\\textmd"),a&&!o?`{${a2("\\fontseries",a)}${a4(i)}}`:o?a2(o,a4(i)):a4(i)}),n=null!=(a=["","\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"][null!=(i=e[0].style.fontSize)?i:""])?a:"";return n?`${n} ${a4(o)}`:a4(o)}),n=null!=(a=({roman:"textrm",monospace:"texttt","sans-serif":"textsf"})[null!=(i=e[0].style.fontFamily)?i:""])?a:"";return n?`\\${n}{${a4(o)}}`:e[0].style.fontFamily?`{\\fontfamily{${e[0].style.fontFamily}} ${a4(o)}}`:a4(o)}));return 0===a.length||"text"===i.defaultMode?a:["\\text{",...a,"}"]}getFont(e,i){var r,a,o,n,s;let{fontFamily:l}=i;if(n8[l]?e.classes+=" "+n8[l]:l&&e.setStyle("font-family",l),i.fontShape&&(e.classes+=" ",e.classes+=null!=(r=({it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"})[i.fontShape])?r:""),i.fontSeries){let r=i.fontSeries.match(/(.?[lbm])?(.?[cx])?/);r&&(e.classes+=" ",e.classes+=null!=(o=({ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"})[null!=(a=r[1])?a:""])?o:"",e.classes+=" ",e.classes+=null!=(s=({uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"})[null!=(n=r[2])?n:""])?s:"")}return"Main-Regular"}},new class extends a8{constructor(){super("latex")}createAtom(e){return new nF(e)}serialize(e,i){return e.filter(e=>e instanceof nF&&!e.isSuggestion).map(e=>e.value)}getFont(){return null}};var n9,se,st,si="apple"===so()?{id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","∫","ı"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","∂","\xce"],KeyE:["e","E","\xb4","\xb4"],KeyF:["f","F","ƒ","\xcf"],KeyG:["g","G","\xa9","˝"],KeyH:["h","H","˙","\xd3"],KeyI:["i","I","ˆ","ˆ"],KeyJ:["j","J","∆","\xd4"],KeyK:["k","K","˚",""],KeyL:["l","L","\xac","\xd2"],KeyM:["m","M","\xb5","\xc2"],KeyN:["n","N","˜","˜"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","\xae","‰"],KeyS:["s","S","\xdf","\xcd"],KeyT:["t","T","†","ˇ"],KeyU:["u","U","\xa8","\xa8"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","˛"],KeyY:["y","Y","\xa5","\xc1"],KeyZ:["z","Z","Ω","\xb8"],Digit1:["1","!","\xa1","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","\xa3","‹"],Digit4:["4","$","\xa2","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","\xa7","ﬂ"],Digit7:["7","&","\xb6","‡"],Digit8:["8","*","•","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","‚"],Space:[" "," "," "," "],Minus:["-","_","–","—"],Equal:["=","+","≠","\xb1"],BracketLeft:["[","{","“","”"],BracketRight:["]","}","‘","’"],Backslash:["\\","|","\xab","\xbb"],Semicolon:[";",":","…","\xda"],Quote:["'",'"',"\xe6","\xc6"],Backquote:["`","˜","`","`"],Comma:[",","<","≤","\xaf"],Period:[".",">","≥","˘"],Slash:["/","?","\xf7","\xbf"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}:"windows"===so()?{id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","\xe1","\xc1"],KeyB:["b","B","",""],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\xe9","\xc9"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","\xed","\xcd"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","\xf8","\xd8"],KeyM:["m","M","\xb5",""],KeyN:["n","N","\xf1","\xd1"],KeyO:["o","O","\xf3","\xd3"],KeyP:["p","P","\xf6","\xd6"],KeyQ:["q","Q","\xe4","\xc4"],KeyR:["r","R","\xae",""],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\xfe","\xde"],KeyU:["u","U","\xfa","\xda"],KeyV:["v","V","",""],KeyW:["w","W","\xe5","\xc5"],KeyX:["x","X","",""],KeyY:["y","Y","\xfc","\xdc"],KeyZ:["z","Z","\xe6","\xc6"],Digit1:["1","!","\xa1","\xb9"],Digit2:["2","@","\xb2",""],Digit3:["3","#","\xb3",""],Digit4:["4","$","\xa4","\xa3"],Digit5:["5","%","€",""],Digit6:["6","^","\xbc",""],Digit7:["7","&","\xbd",""],Digit8:["8","*","\xbe",""],Digit9:["9","(","‘",""],Digit0:["0",")","’",""],Space:[" "," ","",""],Minus:["-","_","\xa5",""],Equal:["=","+","\xd7","\xf7"],BracketLeft:["[","{","\xab",""],BracketRight:["]","}","\xbb",""],Backslash:["\\","|","\xac","\xa6"],Semicolon:[";",":","\xb6","\xb0"],Quote:["'",'"',"\xb4","\xa8"],Backquote:["`","~","",""],Comma:[",","<","\xe7","\xc7"],Period:[".",">","",""],Slash:["/","?","\xbf",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}}:{id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},sr={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},sa=[];function so(){switch(g()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function sn(e){e.platform&&e.platform!==so()||sa.push(e)}function ss(){return null!=st?st:sa[0]}function sl(e){let i=e;return f(i)&&(i=i.length>0?i[0]+"("+i.slice(1).join("")+")":""),i}function sc(e){var i;let r=/macos|ios|/.test(g()),a=e.split("+"),o="";for(let e of a)!r&&o&&(o+='<span class="ML__shortcut-join">+</span>'),e.startsWith("[Key")?o+=e.slice(4,5):e.startsWith("Key")?o+=e.slice(3,4):e.startsWith("[Digit")?o+=e.slice(6,7):e.startsWith("Digit")?o+=e.slice(5,6):o+=null!=(i=({cmd:"⌘",meta:r?"⌘":"command",shift:r?"⇧":"shift",alt:r?"⌥":"alt",ctrl:r?"⌃":"control","\n":r?"⏎":"return","[return]":r?"⏎":"return","[enter]":r?"⌤":"enter","[tab]":r?"⇥":"tab","[escape]":"esc","[backspace]":r?"⌫":"backspace","[delete]":r?"⌦":"del","[pageup]":r?"⇞":"page up","[pagedown]":r?"⇟":"page down","[home]":r?"⤒":"home","[end]":r?"⤓":"end","[space]":"space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",bracketLeft:"[",bracketRight:"]",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"⇠",up:"⇡",right:"⇢",down:"⇣","[arrowleft]":"⇠","[arrowup]":"⇡","[arrowright]":"⇢","[arrowdown]":"⇣","[digit0]":"0","[digit1]":"1","[digit2]":"2","[digit3]":"3","[digit4]":"4","[digit5]":"5","[digit6]":"6","[digit7]":"7","[digit8]":"8","[digit9]":"9"})[e.toLowerCase()])?i:e.toUpperCase();return o}function sd(e){if(Array.isArray(e)){let i=[...e];return i.shift()+"("+i.map(e=>"string"==typeof e?`"${e}"`:e.toString()).join(", ")+")"}return e}function su(e){return{value:e.model.getValue(),selectionIsCollapsed:e.model.selectionIsCollapsed,canUndo:e.canUndo(),canRedo:e.canRedo(),style:e.selectionStyle,mode:e.model.mode}}function sh(e){window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(su(e.mathfield)),e.silenceNotifications||(e.silenceNotifications=!0,e.listeners.onSelectionDidChange(),e.silenceNotifications=!1)}function sp(e,i={}){if(e.silenceNotifications)return!0;e.silenceNotifications=!0;let r=e.listeners.onContentWillChange(i);return e.silenceNotifications=!1,r}function sm(e,i){var r;window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(su(e.mathfield)),e.silenceNotifications||!e.mathfield.host||(e.silenceNotifications=!0,e.mathfield.host.dispatchEvent(new InputEvent("input",h(u({},i),{data:i.data?i.data:null!=(r=i.inputType)?r:"",bubbles:!0,composed:!0}))),e.silenceNotifications=!1)}function sf(e){var i,r;let a=e.atoms.find(e=>"latexgroup"===e.type);return a&&null!=(r=null==(i=a.body)?void 0:i.filter(e=>"latex"===e.type))?r:[]}function sy(e,i){var r;let a=0,o=!1,n=Number.isFinite(null==i?void 0:i.before)?null!=(r=null==i?void 0:i.before)?r:0:e.lastOffset;for(;a<=n&&!o;){let i=e.at(a);(o=i instanceof nF&&i.isSuggestion)||a++}if(!o)return[void 0,void 0];let s=a,l=!1;for(;s<=n&&!l;){let i=e.at(s);(l=!(i instanceof nF&&i.isSuggestion))||s++}return[a-1,s-1]}function sb(e){let i=sf(e.model).filter(e=>e.isSuggestion);if(0!==i.length)for(let r of(e.model.position=e.model.offsetOf(i[0].leftSibling),i))r.parent.removeChild(r)}function sg(e,i){var r;let{model:a}=e;for(let i of(sb(e),sf(a)))i.isError=!1;if(!a.selectionIsCollapsed||"off"===e.options.popoverPolicy){sM(e);return}let o=[],n=a.at(a.position);for(;n&&n instanceof nF&&/^[a-zA-Z\*]$/.test(n.value);)n=n.leftSibling;if(n&&n instanceof nF&&"\\"===n.value)for(o.push(n),n=n.rightSibling;n&&n instanceof nF&&/^[a-zA-Z\*]$/.test(n.value);)o.push(n),n=n.rightSibling;let s=o.map(e=>e.value).join(""),l=function(e,i){var r,a;if(0===i.length||"\\"===i||!i.startsWith("\\"))return[];let o=[];for(let e in F)e.startsWith(i)&&!F[e].infix&&o.push({match:e,frequency:null!=(r=F[e].frequency)?r:0});for(let e in P)e.startsWith(i)&&o.push({match:e,frequency:null!=(a=P[e].frequency)?a:0});let n=i.substring(1);for(let i of Object.keys(e.options.macros))i.startsWith(n)&&o.push({match:"\\"+i,frequency:0});return o.sort((e,i)=>{var r,a;return e.frequency===i.frequency?e.match.length===i.match.length?e.match<i.match?-1:1:e.match.length-i.match.length:(null!=(r=i.frequency)?r:0)-(null!=(a=e.frequency)?a:0)}),o.map(e=>e.match)}(e,s);if(0===l.length){if(/^\\[a-zA-Z\*]+$/.test(s))for(let e of o)e.isError=!0;sM(e);return}let c=null!=(r=null==i?void 0:i.atIndex)?r:0;e.suggestionIndex=c<0?l.length-1:c%l.length;let d=l[e.suggestionIndex];if(d!==s){let i=o[o.length-1];i.parent.addChildrenAfter([...d.slice(s.length-d.length)].map(e=>new nF(e,{isSuggestion:!0})),i),sP(e,{interactive:!0})}!function(e,i){var r,a,o;let n;if(0===i.length){sM(e);return}let s="";for(let[r,a]of i.entries()){let i=a,o=function(e,i){let r=new og({from:e.context}),a=new ok({mode:"math",type:"root",body:nE(i,{context:r})});return oo(oa(nG(new or(a.render(r),{classes:"ML__base"}),r)),{classes:"ML__mathlive"}).toMarkup()}(e,a),n=(function(e,i){let r=[];if("string"==typeof i){let e=oF[i];f(e)?r=e.slice():e&&r.push(e)}let a=RegExp("^"+sl(i).replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let i of e)a.test(sl(i.command))&&r.push(i.key);return r.map(sc)})(e.keybindings,i).join("<br>");s+=`<li role="button" data-command="${i}" ${r===e.suggestionIndex?"class=ML__popover__current":""}><span class="ML__popover__latex">${i}</span><span class="ML__popover__command">${o}</span>`,n&&(s+=`<span class="ML__popover__keybinding">${n}</span>`),s+="</li>"}let l=(a=e,o=`<ul>${s}</ul>`,(n=document.getElementById("mathlive-suggestion-popover"))||(n=sw("mathlive-suggestion-popover"),o4("suggestion-popover"),o4("core"),n.addEventListener("pointerdown",e=>e.preventDefault()),n.addEventListener("click",e=>{let i=e.target;for(;i&&!i.dataset.command;)i=i.parentElement;i&&(sx(a,"reject"),oP.insert(a.model,i.dataset.command,{selectionMode:"placeholder",format:"latex",mode:"math"}),a.dirty=!0,a.focus())})),n.innerHTML=window.MathfieldElement.createHTML(o),n);s_()&&(null==(r=l.querySelector(".ML__popover__current"))||r.scrollIntoView({block:"nearest",inline:"nearest"})),setTimeout(()=>{var i;l&&!s_()&&(l.classList.add("is-visible"),sS(e),null==(i=l.querySelector(".ML__popover__current"))||i.scrollIntoView({block:"nearest",inline:"nearest"}))},32)}(e,l)}function sv(e){let[i,r]=sy(e,{before:e.position});if(void 0===i||void 0===r)return!1;let a=!1;return e.getAtoms([i,r]).forEach(e=>{e.isSuggestion&&(e.isSuggestion=!1,a=!0)}),a}function sx(e,i="accept",r){var a,o;sM(e);let n=e.model.atoms.find(e=>"latexgroup"===e.type);if(!n)return!1;if("accept-suggestion"===i){let i=sf(e.model).filter(e=>e.isSuggestion);if(0===i.length)return!1;for(let e of i)e.isSuggestion=!1;return e.model.position=e.model.offsetOf(i[i.length-1]),!0}let s=sf(e.model).filter(e=>!e.isSuggestion).map(e=>e.value).join(""),l=n.leftSibling;return n.parent.removeChild(n),e.model.position=e.model.offsetOf(l),e.model.mode=null!=(a=null==r?void 0:r.mode)?a:"math","reject"===i||(oP.insert(e.model,s,{selectionMode:null!=(o=null==r?void 0:r.selectItem)&&o?"item":"placeholder",format:"latex",mode:"math"}),e.snapshot(),e.model.announce("replacement"),e.switchMode("math")),!0}function sw(e){var i;let r=document.getElementById(e);return r?r.dataset.refcount=Number(Number.parseInt(null!=(i=r.dataset.refcount)?i:"0")+1).toString():((r=document.createElement("div")).setAttribute("aria-hidden","true"),r.dataset.refcount="1",r.id=e,document.body.append(r)),r}function sk(e){var i;let r=document.getElementById(e);if(!r)return;let a=Number.parseInt(null!=(i=r.getAttribute("data-refcount"))?i:"0");a<=1?r.remove():r.dataset.refcount=Number(a-1).toString()}function s_(){let e=document.getElementById("mathlive-suggestion-popover");return!!e&&e.classList.contains("is-visible")}function sS(e,i){var r;if(!e.element||e.element.mathfield!==e||!s_())return;if((null==(r=e.model.at(e.model.position))?void 0:r.type)!=="latex"){sM(e);return}if(null!=i&&i.deferred){setTimeout(()=>sS(e),32);return}let a=oI(e.field);if(!a)return;let o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerWidth-document.documentElement.clientWidth,l=window.innerHeight-document.documentElement.clientHeight,c=window.mathVirtualKeyboard.boundingRect.height,d=document.getElementById("mathlive-suggestion-popover");a.x+d.offsetWidth/2>n-s?d.style.left=`${n-d.offsetWidth-s}px`:a.x-d.offsetWidth/2<0?d.style.left="0":d.style.left=`${a.x-d.offsetWidth/2}px`;let u=a.y-a.height;o-l-c-a.y<u?(d.classList.add("ML__popover--reverse-direction"),d.classList.remove("top-tip"),d.classList.add("bottom-tip"),d.style.top=`${a.y-a.height-d.offsetHeight-15}px`):(d.classList.remove("ML__popover--reverse-direction"),d.classList.add("top-tip"),d.classList.remove("bottom-tip"),d.style.top=`${a.y+15}px`)}function sM(e){e.suggestionIndex=0;let i=document.getElementById("mathlive-suggestion-popover");i&&(i.classList.remove("is-visible"),i.innerHTML="")}sn(si),sn({id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","‡","Ω"],KeyB:["b","B","\xdf","∫"],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","∂","∆"],KeyE:["e","E","\xea","\xca"],KeyF:["f","F","ƒ","\xb7"],KeyG:["g","G","ﬁ","ﬂ"],KeyH:["h","H","\xcc","\xce"],KeyI:["i","I","\xee","\xef"],KeyJ:["j","J","\xcf","\xcd"],KeyK:["k","K","\xc8","\xcb"],KeyL:["l","L","\xac","|"],KeyM:[",","?","∞","\xbf"],KeyN:["n","N","~","ı"],KeyO:["o","O","œ","Œ"],KeyP:["p","P","π","∏"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xae","‚"],KeyS:["s","S","\xd2","∑"],KeyT:["t","T","†","™"],KeyU:["u","U","\xba","\xaa"],KeyV:["v","V","◊","√"],KeyW:["z","Z","\xc2","\xc5"],KeyX:["x","X","≈","⁄"],KeyY:["y","Y","\xda","Ÿ"],KeyZ:["w","W","‹","›"],Digit1:["&","1","","\xb4"],Digit2:["\xe9","2","\xeb","„"],Digit3:['"',"3","“","”"],Digit4:["'","4","‘","’"],Digit5:["(","5","{","["],Digit6:["\xa7","6","\xb6","\xe5"],Digit7:["\xe8","7","\xab","\xbb"],Digit8:["!","8","\xa1","\xdb"],Digit9:["\xe7","9","\xc7","\xc1"],Digit0:["\xe0","0","\xf8","\xd8"],Space:[" "," "," "," "],Minus:[")","\xb0","}","]"],Equal:["-","_","—","–"],BracketLeft:["^","\xa8","\xf4","\xd4"],BracketRight:["$","*","€","\xa5"],Backslash:["`","\xa3","@","#"],Semicolon:["m","M","\xb5","\xd3"],Quote:["\xf9","%","\xd9","‰"],Backquote:["<",">","≤","≥"],Comma:[";",".","…","•"],Period:[":","/","\xf7","\\"],Slash:["=","+","≠","\xb1"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","•","Ÿ"],NumpadEqual:["=","=","=","="]}}),sn({id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\xdf",""],KeyC:["c","C","\xa9"," "],KeyD:["d","D","∂","∆"],KeyE:["e","E","€","€"],KeyF:["f","F","ƒ","ﬁ"],KeyG:["g","G","","ﬂ"],KeyH:["h","H","™"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","\xb6","\xaf"],KeyK:["k","K","\xa7","ˇ"],KeyL:["l","L"," ","˘"],KeyM:["m","M","\xb5","˚"],KeyN:["n","N"," ","˙"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","œ","Œ"],KeyR:["r","R","\xae"," "],KeyS:["s","S","∫"," "],KeyT:["t","T","†","‡"],KeyU:["u","U"," "," "],KeyV:["v","V","√","◊"],KeyW:["w","W","\xe6","\xc6"],KeyX:["x","X","∑","›"],KeyY:["y","Y","\xa5"," "],KeyZ:["z","Z","Ω","‹"],Digit1:["1","!","|","ı"],Digit2:["2",'"',"@","˝"],Digit3:["3","\xb7","#","•"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","∞","‰"],Digit6:["6","&","\xac"," "],Digit7:["7","/","\xf7","⁄"],Digit8:["8","(","“","‘"],Digit9:["9",")","”","’"],Digit0:["0","=","≠","≈"],Space:[" "," "," "," "],Minus:["'","?","\xb4","\xb8"],Equal:["\xa1","\xbf","‚","˛"],BracketLeft:["`","^","[","ˆ"],BracketRight:["+","*","]","\xb1"],Backslash:["\xe7","\xc7","}","\xbb"],Semicolon:["\xf1","\xd1","~","˜"],Quote:["\xb4","\xa8","{","\xab"],Backquote:["<",">","≤","≥"],Comma:[",",";","„",""],Period:[".",":","…","…"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["\xba","\xaa","\\","\xb0"]}}),sn({id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","\xb7","#",""],Digit4:["4","$","~",""],Digit5:["5","%","€",""],Digit6:["6","&","\xac",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["\xa1","\xbf","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["\xe7","\xc7","}",""],Semicolon:["\xf1","\xd1","",""],Quote:["\xb4","\xa8","{",""],Backquote:["\xba","\xaa","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),sn({id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe6","\xc6"],KeyB:["b","B","”","’"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","€","\xa2"],KeyF:["f","F","đ","\xaa"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:["m","M","\xb5","\xba"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["q","Q","@","Ω"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["w","W","ł","Ł"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","←","\xa5"],KeyZ:["z","Z","\xab","<"],Digit1:["1","!","|","\xa1"],Digit2:["2",'"',"@","⅛"],Digit3:["3","\xb7","#","\xa3"],Digit4:["4","$","~","$"],Digit5:["5","%","\xbd","⅜"],Digit6:["6","&","\xac","⅝"],Digit7:["7","/","{","⅞"],Digit8:["8","(","[","™"],Digit9:["9",")","]","\xb1"],Digit0:["0","=","}","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:["'","?","\\","\xbf"],Equal:["\xa1","\xbf","̃","~"],BracketLeft:["̀","̂","[","̊"],BracketRight:["+","*","]","̄"],Backslash:["\xe7","\xc7","}","̆"],Semicolon:["\xf1","\xd1","~","̋"],Quote:["́","̈","{","{"],Backquote:["\xba","\xaa","\\","\\"],Comma:[",",";","─","\xd7"],Period:[".",":","\xb7","\xf7"],Slash:["-","_","̣","̇"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}}),sn({id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","Ω"],KeyB:["b","B","”","’"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","€","\xa2"],KeyF:["f","F","đ","\xaa"],KeyG:["g","G","ŋ","Ŋ"],KeyH:["h","H","ħ","Ħ"],KeyI:["i","I","→","ı"],KeyJ:["j","J","̉","̛"],KeyK:["k","K","ĸ","&"],KeyL:["l","L","ł","Ł"],KeyM:[",","?","́","̋"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","ŧ","Ŧ"],KeyU:["u","U","↓","↑"],KeyV:["v","V","“","‘"],KeyW:["z","Z","\xab","<"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","←","\xa5"],KeyZ:["w","W","ł","Ł"],Digit1:["&","1","\xb9","\xa1"],Digit2:["\xe9","2","~","⅛"],Digit3:['"',"3","#","\xa3"],Digit4:["'","4","{","$"],Digit5:["(","5","[","⅜"],Digit6:["-","6","|","⅝"],Digit7:["\xe8","7","`","⅞"],Digit8:["_","8","\\","™"],Digit9:["\xe7","9","^","\xb1"],Digit0:["\xe0","0","@","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["	","","	",""],Space:[" "," "," "," "],Minus:[")","\xb0","]","\xbf"],Equal:["=","+","}","̨"],BracketLeft:["̂","̈","̈","̊"],BracketRight:["$","\xa3","\xa4","̄"],Backslash:["*","\xb5","̀","̆"],Semicolon:["m","M","\xb5","\xba"],Quote:["\xf9","%","̂","̌"],Backquote:["\xb2","~","\xac","\xac"],Comma:[";",".","─","\xd7"],Period:[":","/","\xb7","\xf7"],Slash:["!","\xa7","̣","̇"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"]}}),sn({id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["\xe9","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["\xe8","7","`",""],Digit8:["_","8","\\",""],Digit9:["\xe7","9","^",""],Digit0:["\xe0","0","@",""],Space:[" "," ","",""],Minus:[")","\xb0","]",""],Equal:["=","+","}",""],BracketLeft:["^","\xa8","",""],BracketRight:["$","\xa3","\xa4",""],Backslash:["*","\xb5","",""],Semicolon:["m","M","",""],Quote:["\xf9","%","",""],Backquote:["\xb2","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","\xa7","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),sn({id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","€",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","\xb5",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"\xb2",""],Digit3:["3","\xa7","\xb3",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["\xdf","?","\\","ẞ"],Equal:["\xb4","`","",""],BracketLeft:["\xfc","\xdc","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["\xf6","\xd6","",""],Quote:["\xe4","\xc4","",""],Backquote:["^","\xb0","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}}),sn({id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","∫","‹"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","∂","™"],KeyE:["e","E","€","‰"],KeyF:["f","F","ƒ","\xcf"],KeyG:["g","G","\xa9","\xcc"],KeyH:["h","H","\xaa","\xd3"],KeyI:["i","I","⁄","\xdb"],KeyJ:["j","J","\xba","ı"],KeyK:["k","K","∆","ˆ"],KeyL:["l","L","@","ﬂ"],KeyM:["m","M","\xb5","˘"],KeyN:["n","N","~","›"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","π","∏"],KeyQ:["q","Q","\xab","\xbb"],KeyR:["r","R","\xae","\xb8"],KeyS:["s","S","‚","\xcd"],KeyT:["t","T","†","˝"],KeyU:["u","U","\xa8","\xc1"],KeyV:["v","V","√","◊"],KeyW:["w","W","∑","„"],KeyX:["x","X","≈","\xd9"],KeyY:["z","Z","Ω","ˇ"],KeyZ:["y","Y","\xa5","‡"],Digit1:["1","!","\xa1","\xac"],Digit2:["2",'"',"“","”"],Digit3:["3","\xa7","\xb6","#"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","[","ﬁ"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","˜"],Digit9:["9",")","}","\xb7"],Digit0:["0","=","≠","\xaf"],Space:[" "," "," "," "],Minus:["\xdf","?","\xbf","˙"],Equal:["\xb4","`","'","˚"],BracketLeft:["\xfc","\xdc","•","\xb0"],BracketRight:["+","*","\xb1",""],Backslash:["#","'","‘","’"],Semicolon:["\xf6","\xd6","œ","Œ"],Quote:["\xe4","\xc4","\xe6","\xc6"],Backquote:["<",">","≤","≥"],Comma:[",",";","∞","˛"],Period:[".",":","…","\xf7"],Slash:["-","_","–","—"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","\xb0","„","“"],NumpadEqual:["=","=","=","="]}}),sn({id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["x","X","≈","˛"],KeyC:["j","J","∆","\xd4"],KeyD:["e","E","\xb4","\xb4"],KeyE:[".",">","≥","˘"],KeyF:["u","U","\xa8","\xa8"],KeyG:["i","I","ˆ","ˆ"],KeyH:["d","D","∂","\xce"],KeyI:["c","C","\xe7","\xc7"],KeyJ:["h","H","˙","\xd3"],KeyK:["t","T","†","ˇ"],KeyL:["n","N","˜","˜"],KeyM:["m","M","\xb5","\xc2"],KeyN:["b","B","∫","ı"],KeyO:["r","R","\xae","‰"],KeyP:["l","L","\xac","\xd2"],KeyQ:["'",'"',"\xe6","\xc6"],KeyR:["p","P","π","∏"],KeyS:["o","O","\xf8","\xd8"],KeyT:["y","Y","\xa5","\xc1"],KeyU:["g","G","\xa9","˝"],KeyV:["k","K","˚",""],KeyW:[",","<","≤","\xaf"],KeyX:["q","Q","œ","Œ"],KeyY:["f","F","ƒ","\xcf"],KeyZ:[";",":","…","\xda"],Digit1:["1","!","\xa1","⁄"],Digit2:["2","@","™","€"],Digit3:["3","#","\xa3","‹"],Digit4:["4","$","\xa2","›"],Digit5:["5","%","∞","ﬁ"],Digit6:["6","^","\xa7","ﬂ"],Digit7:["7","&","\xb6","‡"],Digit8:["8","*","•","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","‚"],Space:[" "," "," "," "],Minus:["[","{","“","”"],Equal:["]","}","‘","’"],BracketLeft:["/","?","\xf7","\xbf"],BracketRight:["=","+","≠","\xb1"],Backslash:["\\","|","\xab","\xbb"],Semicolon:["s","S","\xdf","\xcd"],Quote:["-","_","–","—"],Backquote:["`","~","`","`"],Comma:["w","W","∑","„"],Period:["v","V","√","◊"],Slash:["z","Z","Ω","\xb8"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}),new class extends oP{constructor(){super("latex")}createAtom(e){return new nF(e)}onPaste(e,i){if(!i)return!1;let r="string"==typeof i?i:i.getData("application/x-latex")||i.getData("text/plain");return!!(r&&sp(e.model,{inputType:"insertFromPaste",data:r}))&&(e.stopCoalescingUndo(),e.stopRecording(),this.insert(e.model,r)&&(e.startRecording(),e.snapshot("paste"),sm(e.model,{inputType:"insertFromPaste"}),sB(e)),e.startRecording(),!0)}insert(e,i,r){if(!sp(e,{data:i,inputType:"insertText"}))return!1;r||(r={}),r.insertionMode||(r.insertionMode="replaceSelection"),r.selectionMode||(r.selectionMode="placeholder");let{silenceNotifications:a}=e;r.silenceNotifications&&(e.silenceNotifications=!0);let o=e.silenceNotifications;e.silenceNotifications=!0,"replaceSelection"!==r.insertionMode||e.selectionIsCollapsed?"replaceAll"===r.insertionMode?(e.root.setChildren([],"body"),e.position=0):"insertBefore"===r.insertionMode?e.collapseSelection("backward"):"insertAfter"===r.insertionMode&&e.collapseSelection("forward"):e.deleteAtoms(oM(e.selection));let n=[];for(let e of i)I.test(e)&&n.push(new nF(e));let s=e.at(e.position);if(s instanceof nq&&(s=s.lastChild),!(s.parent instanceof nq)){let e=new nq("");s.parent.addChildAfter(e,s),s=e.firstChild}let l=s.parent.addChildrenAfter(n,s);return e.silenceNotifications=o,"before"===r.selectionMode||("item"===r.selectionMode?e.setSelection(e.anchor,e.offsetOf(l)):l&&(e.position=e.offsetOf(l))),sm(e,{data:i,inputType:"insertText"}),e.silenceNotifications=a,!0}};var sL,sC,sz=null,sA=(null==(sC=null==(sL=null==globalThis?void 0:globalThis.document)?void 0:sL.currentScript)?void 0:sC.src)||function(){let e=String(Error().stack).replace(/^Error.*\n/,"").split(`
`);if(0===e.length)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${Error().stack}").`),"";let i=e[1],r=i.match(/http.*\.ts[\?:]/);return r&&(i=e[2]),(r=i.match(/(https?:.*):[0-9]+:[0-9]+/))||(r=i.match(/at (.*(\.ts))[\?:]/))||(r=i.match(/at (.*(\.mjs|\.js))[\?:]/)),r?r[1]:(console.error(e),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${i}").`),"")}();async function sE(e){if(/^(?:[a-z+]+:)?\/\//i.test(e))return new URL(e).href;if(null===sz)try{let e=await fetch(sA,{method:"HEAD"});200===e.status&&(sz=e.url)}catch(i){console.error(`Invalid URL "${e}" (relative to "${sA}")`)}return new URL(e,null!=sz?sz:sA).href}var sK="not-loaded";async function sD(){return sK="not-loaded",sT()}async function sT(){var e;if("not-loaded"===sK){if(sK="loading",null!=(e=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))&&e){sK="ready";return}if(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document){let e=Array.from(document.fonts).map(e=>e.family);if(["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"].every(i=>e.includes(i))){sK="ready";return}if(!window.MathfieldElement.fontsDirectory){sK="not-loaded";return}let i=await sE(window.MathfieldElement.fontsDirectory);if(!i){document.body.classList.add("ML__fonts-did-not-load"),sK="error";return}let r=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular",{style:"italic"}],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(e=>(function(e,i,r={}){return new FontFace(e,`url(${i}.woff2) format('woff2')`,r)})(e[0].replace(/-[a-zA-Z]+$/,""),`${i}/${e[0]}`,e[1]));try{(await Promise.all(r.map(e=>{try{return e.load()}catch(e){}}))).forEach(e=>document.fonts.add(e)),sK="ready";return}catch(e){console.error(`MathLive 0.95.5: The math fonts could not be loaded from "${i}"`,{cause:e}),document.body.classList.add("ML__fonts-did-not-load")}sK="error"}}}function sB(e,i){e.dirty||(e.dirty=!0,requestAnimationFrame(()=>{oR(e)&&e.dirty&&(e.atomBoundsCache=new Map,sP(e,i),e.atomBoundsCache=void 0)}))}function s$(e,i){var r,a;let o,{model:n}=e;for(let e of(n.root.caret=void 0,n.root.isSelected=!1,n.root.containsCaret=!0,n.atoms))e.caret=void 0,e.isSelected=!1,e.containsCaret=!1;if(n.selectionIsCollapsed){if(e.isSelectionEditable&&e.hasFocus()){let i=n.at(n.position);i.caret=e.model.mode;let r=i.parent;for(;r;)r.containsCaret=!0,r=r.parent}}else for(let e of n.getAtoms(n.selection,{includeChildren:!0}))e.isSelected=!0;return(r=null!=(r=i)?r:{},o=new og({from:h(u({},e.context),{atomIdsSettings:{seed:r.forHighlighting?function(e){let i=0;for(let r=0;r<e.length;r++)i=31*i+e.charCodeAt(r)|0;return Math.abs(i)}(ok.serialize([e.model.root],{expandMacro:!1,defaultMode:e.options.defaultMode})):"random",groupNumbers:null!=(a=r.forHighlighting)&&a},letterShapeStyle:e.options.letterShapeStyle}),mathstyle:"inline-math"===e.options.defaultMode?"textstyle":"displaystyle"}),oo(nG(e.model.root.render(o),o),{classes:e.hasEditablePrompts?"ML__mathlive ML__prompting":"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})).toMarkup()}function sP(e,i){var r;if(!oR(e))return;null!=i||(i={});let a=null==(r=e.element)?void 0:r.querySelector("[part=virtual-keyboard-toggle]");a&&(a.style.display=e.hasEditableContent?"flex":"none");let o=e.field,n=e.isSelectionEditable&&e.hasFocus(),s=o.classList.contains("ML__focused");s&&!n?o.classList.remove("ML__focused"):!s&&n&&o.classList.add("ML__focused"),o.innerHTML=window.MathfieldElement.createHTML(s$(e,i)),e.fieldContent=o.getElementsByClassName("ML__mathlive")[0],sO(e,i.interactive),e.dirty=!1}function sO(e,i){let r=e.field;if(!r)return;for(let e of r.querySelectorAll(".ML__selection, .ML__contains-highlight"))e.remove();null!=i&&i||"error"===sK||"ready"===sK||setTimeout(()=>{"ready"===sK?sO(e):setTimeout(()=>sO(e),128)},32);let a=e.model,o=parseFloat(getComputedStyle(r).width),n=r.getBoundingClientRect().width/o;if(n=isNaN(n)?1:n,a.selectionIsCollapsed){sS(e,{deferred:!0});let i=a.at(a.position);for(;i&&!(i.containsCaret&&i.displayContainsHighlight);)i=i.parent;if(null!=i&&i.containsCaret&&i.displayContainsHighlight){let a=oV(e,oj(e,i),n);if(a){a.left/=n,a.right/=n,a.top/=n,a.bottom/=n;let e=document.createElement("div");e.classList.add("ML__contains-highlight"),e.style.position="absolute",e.style.left=`${a.left}px`,e.style.top=`${a.top}px`,e.style.width=`${Math.ceil(a.right-a.left)}px`,e.style.height=`${Math.ceil(a.bottom-a.top-1)}px`,r.insertBefore(e,r.childNodes[0])}}return}for(let i of function(e){let i=[];for(let r of e){let e=!1;for(let a of i)if(r.left===a.left&&r.right===a.right&&r.top===a.top&&r.bottom===a.bottom){e=!0;break}e||i.push(r)}for(let r of(e=i,i=[],e)){let a=0;for(let i of e)if(r.left>=i.left&&r.right<=i.right&&r.top>=i.top&&r.bottom<=i.bottom&&(a+=1)>1)break;1===a&&i.push(r)}return i}(oH(e,{excludeAtomsWithBackground:!0}))){i.left/=n,i.right/=n,i.top/=n,i.bottom/=n;let e=document.createElement("div");e.classList.add("ML__selection"),e.style.position="absolute",e.style.left=`${i.left}px`,e.style.top=`${i.top}px`,e.style.width=`${Math.ceil(i.right-i.left)}px`,e.style.height=`${Math.ceil(i.bottom-i.top-1)}px`,r.insertBefore(e,r.childNodes[0])}}function sF(e,i){for(let r of(i=u({target:"mathfield",canUndo:!1,audioFeedback:void 0,changeContent:!1,changeSelection:!1},null!=i?i:{}),sU||(sU={}),Object.keys(e)))sU[r],sU[r]=h(u({},i),{fn:e[r]})}function sq(e){let i;if(Array.isArray(e)){if("performWithFeedback"===e[0])return sq(e[1]);i=e[0]}else i=e;return sU[i=i.replace(/-\w/g,e=>e[1].toUpperCase())]}function sN(e){var i;return null==(i=sq(e))?void 0:i.target}sF({performWithFeedback:(e,i)=>{var r;let a,o;return e.focus(),cR.keypressVibration&&b()&&navigator.vibrate(3),a=sq(i),window.MathfieldElement.playSound(null!=(r=null==a?void 0:a.audioFeedback)?r:"keypress"),o=e.executeCommand(i),e.scrollIntoView(),o}}),sF({complete:sx},{target:"mathfield",audioFeedback:"return",canUndo:!0,changeContent:!0,changeSelection:!0}),sF({nextSuggestion:function(e){return sg(e,{atIndex:e.suggestionIndex+1}),!1},previousSuggestion:function(e){return sg(e,{atIndex:e.suggestionIndex-1}),!1}},{target:"mathfield",audioFeedback:"keypress",changeSelection:!0});var sR="mathlive#virtual-keyboard-message";function sI(e){var i;return"message"===e.type&&(null==(i=e.data)?void 0:i.type)===sR}var sV=class e{constructor(){this.targetOrigin=window.origin,this.originValidator="none",this._boundingRect=new DOMRect(0,0,0,0),this._isShifted=!1,window.addEventListener("message",this),this.sendMessage("proxy-created"),this.listeners={}}static get singleton(){return this._singleton||(this._singleton=new e),this._singleton}set alphabeticLayout(e){this.sendMessage("update-setting",{alphabeticLayout:e})}set layouts(e){this.sendMessage("update-setting",{layouts:e})}set editToolbar(e){this.sendMessage("update-setting",{editToolbar:e})}set actionKeycap(e){this.sendMessage("update-setting",{actionKeycap:e})}set shiftKeycap(e){this.sendMessage("update-setting",{shiftKeycap:e})}set backspaceKeycap(e){this.sendMessage("update-setting",{backspaceKeycap:e})}set tabKeycap(e){this.sendMessage("update-setting",{tabKeycap:e})}set container(e){throw Error("Container inside an iframe cannot be changed")}show(e){this.sendMessage("show",e)}hide(e){this.sendMessage("hide",e)}get isShifted(){return this._isShifted}get visible(){return this._boundingRect.height>0}set visible(e){e?this.show():this.hide()}get boundingRect(){return this._boundingRect}executeCommand(e){return this.sendMessage("execute-command",{command:e}),!0}updateToolbar(e){this.sendMessage("update-toolbar",e)}update(e){this.sendMessage("update-setting",e)}connect(){this.sendMessage("connect")}disconnect(){this.sendMessage("disconnect")}addEventListener(e,i,r){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(i)||this.listeners[e].add(i)}dispatchEvent(e){return!this.listeners[e.type]||0===this.listeners[e.type].size||(this.listeners[e.type].forEach(i=>{"function"==typeof i?i(e):null==i||i.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,i,r){this.listeners[e]&&this.listeners[e].delete(i)}handleEvent(e){if(sI(e)){if(!oW(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");this.handleMessage(e.data)}}handleMessage(e){let{action:i}=e;if("execute-command"===i){let{command:i}=e;"virtual-keyboard"===sN(i)&&this.executeCommand(i);return}if("synchronize-proxy"===i){this._boundingRect=e.boundingRect,this._isShifted=e.isShifted;return}if("geometry-changed"===i){this._boundingRect=e.boundingRect,this.dispatchEvent(new Event("geometrychange"));return}}sendMessage(e,i={}){if(!window.top)throw new DOMException("A frame does not have access to the top window and can‘t communicate with the keyboard. Review virtualKeyboardTargetOrigin and originValidator on mathfields embedded in an iframe","SecurityError");window.top.postMessage(u({type:sR,action:e},i),this.targetOrigin)}},sj={numeric:{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",rows:[[{latex:"x",shift:"y",variants:["y","z","t","r","x^2","x^n","x^{#?}","x_n","x_i","x_{#?}",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"}]},{latex:"n",shift:"a",variants:["i","j","p","k","a","u"]},"[separator-5]","[7]","[8]","[9]","[/]","[separator-5]",{latex:"e",shift:"\\ln",variants:["\\exp","\\times 10^{#?}","\\ln","\\log_{10}","\\log"]},{latex:"\\imaginaryI",variants:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"]},{latex:"\\pi",shift:"\\sin",variants:["\\prod",{latex:"\\theta",aside:"theta"},{latex:"\\rho",aside:"rho"},{latex:"\\tau",aside:"tau"},"\\sin","\\cos","\\tan"]}],[{label:"<",latex:"<",class:"hide-shift",shift:{latex:"\\le",label:"≤"}},{label:">",latex:">",class:"hide-shift",shift:{latex:"\\ge",label:"≥"}},"[separator-5]","[4]","[5]","[6]","[*]","[separator-5]",{class:"hide-shift",latex:"#@^2}",shift:"#@^{\\prime}}"},{latex:"#@^{#0}}",class:"hide-shift",shift:"#@_{#?}"},{class:"hide-shift",latex:"\\sqrt{#0}",shift:{latex:"\\sqrt[#0]{#?}}"}}],["[(]","[)]","[separator-5]","[1]","[2]","[3]","[-]","[separator-5]",{latex:"\\int^{\\infty}_{0}",class:"small hide-shift",shift:"\\int",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\capitalDifferentialD","\\rd","\\partial"]},{class:"hide-shift",latex:"\\forall",shift:"\\exists"},{label:"[backspace]",width:1}],[{label:"[shift]",width:2},"[separator-5]","[0]","[.]","[=]","[+]","[separator-5]","[left]","[right]",{label:"[action]",width:1}]]},greek:{label:"&alpha;&beta;&gamma;",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.greek",rows:[[{label:"<i>&#x03c6;</i>",class:"MLK__tex hide-shift",insert:"\\varphi",aside:"phi var.",shift:"\\Phi"},{label:"<i>&#x03c2;</i>",class:"MLK__tex hide-shift",insert:"\\varsigma",aside:"sigma var.",shift:"\\Sigma"},{label:"<i>&#x03f5;</i>",class:"MLK__tex hide-shift",insert:"\\epsilon",aside:"espilon",shift:'\\char"0190'},{label:"<i>&rho;</i>",class:"MLK__tex hide-shift",insert:"\\rho",aside:"rho",shift:'\\char"3A1'},{label:"<i>&tau;</i>",class:"MLK__tex hide-shift",insert:"\\tau",aside:"tau",shift:'\\char"3A4'},{label:"<i>&upsilon;</i>",class:"MLK__tex hide-shift",insert:"\\upsilon",aside:"upsilon",shift:"\\Upsilon"},{label:"<i>&theta;</i>",class:"MLK__tex hide-shift",insert:"\\theta",aside:"theta",shift:"\\Theta"},{label:"<i>&iota;</i>",class:"MLK__tex hide-shift",insert:"\\iota",aside:"iota",shift:'\\char"399'},{label:"<i>&omicron;</i>",class:"MLK__tex hide-shift",insert:"\\omicron",aside:"omicron",shift:'\\char"39F'},{label:"<i>&pi;</i>",class:"MLK__tex hide-shift",insert:"\\pi",aside:"pi",shift:"\\Pi"}],["[separator-5]",{label:"<i>&alpha;</i>",class:"MLK__tex hide-shift",insert:"\\alpha",aside:"alpha",shift:'\\char"391'},{label:"<i>&sigma;</i>",class:"MLK__tex hide-shift",insert:"\\sigma",aside:"sigma",shift:"\\Sigma"},{label:"<i>&delta;</i>",class:"MLK__tex hide-shift",insert:"\\delta",aside:"delta",shift:"\\Delta"},{label:"<i>&phi;</i>",class:"MLK__tex hide-shift",insert:"\\phi",aside:"phi",shift:"\\Phi"},{label:"<i>&gamma;</i>",class:"MLK__tex hide-shift",insert:"\\gamma",aside:"gamma",shift:"\\Gamma"},{label:"<i>&eta;</i>",class:"MLK__tex hide-shift",insert:"\\eta",aside:"eta",shift:'\\char"397'},{label:"<i>&xi;</i>",class:"MLK__tex hide-shift",insert:"\\xi",aside:"xi",shift:"\\Xi"},{label:"<i>&kappa;</i>",class:"MLK__tex hide-shift",insert:"\\kappa",aside:"kappa",shift:"\\Kappa"},{label:"<i>&lambda;</i>",class:"MLK__tex hide-shift",insert:"\\lambda",aside:"lambda",shift:"\\Lambda"},"[separator-5]"],["[shift]",{label:"<i>&zeta;</i>",class:"MLK__tex hide-shift",insert:"\\zeta",aside:"zeta",shift:'\\char"396'},{label:"<i>&chi;</i>",class:"MLK__tex hide-shift",insert:"\\chi",aside:"chi",shift:'\\char"3A7'},{label:"<i>&psi;</i>",class:"MLK__tex hide-shift",insert:"\\psi",aside:"zeta",shift:"\\Psi"},{label:"<i>&omega;</i>",class:"MLK__tex hide-shift",insert:"\\omega",aside:"omega",shift:"\\Omega"},{label:"<i>&beta;</i>",class:"MLK__tex hide-shift",insert:"\\beta",aside:"beta",shift:'\\char"392'},{label:"<i>&nu;</i>",class:"MLK__tex hide-shift",insert:"\\nu",aside:"nu",shift:'\\char"39D'},{label:"<i>&mu;</i>",class:"MLK__tex hide-shift",insert:"\\mu",aside:"mu",shift:'\\char"39C'},"[backspace]"],["[separator]",{label:"<i>&#x03b5;</i>",class:"MLK__tex",insert:"\\varepsilon",aside:"espilon var."},{label:"<i>&#x03d1;</i>",class:"MLK__tex",insert:"\\vartheta",aside:"theta var."},{label:"<i>&#x3f0;</i>",class:"MLK__tex",insert:"\\varkappa",aside:"kappa var."},{label:"<i>&#x03d6;</i>",class:"MLK__tex",insert:"\\varpi",aside:"pi var."},{label:"<i>&#x03f1;</i>",class:"MLK__tex",insert:"\\varrho",aside:"rho var."},"[left]","[right]","[action]"]]},symbols:{label:"&infin;≠∈",labelClass:"MLK__tex",tooltip:"keyboard.tooltip.symbols",rows:[[{latex:"\\sin",shift:"\\sin^{-1}",variants:[{class:"small",latex:"\\sinh"},{class:"small",latex:"\\sin^{-1}"},{class:"small",latex:"\\arsinh"}]},"\\ln",{latex:"\\mathrm{abs}",insert:"\\mathrm{abs}\\left(#0\\right)"},{latex:"\\rarr",shift:"\\rArr",variants:[{latex:"\\implies",aside:"implies"},{latex:"\\to",aside:"to"},"\\dashv",{latex:"\\roundimplies",aside:"round implies"}]},{latex:"\\exists",variants:["\\nexists"],shift:"\\nexists"},{latex:"\\in",shift:"\\notin",variants:["\\notin","\\owns"]},"\\cup",{latex:"\\overrightarrow{#@}",shift:"\\overleftarrow{#@}",variants:["\\overleftarrow{#@}","\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"]},"\\lim_{#?}","\\exponentialE"],[{latex:"\\cos",shift:"\\cos^{-1}",variants:[{class:"small",latex:"\\cosh"},{class:"small",latex:"\\cos^{-1}"},{class:"small",latex:"\\arcosh"}]},{latex:"\\log",shift:"\\log_{10}",variants:["\\log_{#0}","\\log_{10}"]},"\\left\\vert#0\\right\\vert",{latex:"\\larr",shift:"\\lArr",variants:[{latex:"\\impliedby",aside:"implied by"},{latex:"\\gets",aside:"gets"},"\\lArr","\\vdash",{latex:"\\models",aside:"models"}]},{latex:"\\forall",shift:"\\lnot",variants:[{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"}]},{latex:"\\ni",shift:"\\not\\owns"},"\\cap",{latex:"\\overline{#@}",shift:"\\underline{#@}",variants:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}","\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"]},{class:"hide-shift",latex:"\\int",shift:"\\iint",variants:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},"\\intop","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"]},{latex:"\\pi",shift:"\\tau",variants:["\\tau"]}],[{latex:"\\tan",shift:"\\tan^{-1}",variants:[{class:"small",latex:"\\tanh"},{class:"small",latex:"\\tan^{-1}"},{class:"small",latex:"\\artanh"},{class:"small",latex:"\\arctan"},{class:"small",latex:"\\arctg"},{class:"small",latex:"\\tg"}]},{latex:"\\exp",insert:"\\exp\\left(#0\\right)",variants:["\\exponentialE^{#0}"]},"\\left\\Vert#0\\right\\Vert",{latex:"\\lrArr",shift:"\\leftrightarrow",variants:[{latex:"\\iff",aside:"if and only if"},"\\leftrightarrow","\\leftrightarrows","\\Leftrightarrow",{latex:"^\\biconditional",aside:"biconditional"}]},{latex:"\\vert",shift:"!"},{latex:"#@^{\\complement}",aside:"complement",variants:[{latex:"\\setminus",aside:"set minus"},{latex:"\\smallsetminus",aside:"small set minus"}]},{latex:"\\subset",shift:"\\subseteq",variants:["\\subset","\\subseteq","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsubseteq","\\supset","\\supseteq","\\supsetneq","\\supsetneqq","\\nsupset","\\nsupseteq"]},{latex:"#@^{\\prime}",shift:"#@^{\\doubleprime}",variants:["#@^{\\doubleprime}","#@\\degree"]},{latex:"\\rd",shift:"\\partial",variants:[{latex:"\\dfrac{\\rd}{\\rd x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\capitalDifferentialD","\\rd","\\partial"]},{latex:"\\infty",variants:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"]}],[{label:"[shift]",width:2},{class:"box",latex:",",shift:";",variants:[";","?"]},{class:"box",latex:"\\colon",shift:"\\Colon",variants:[{latex:"\\Colon",aside:"such that",class:"box"},{latex:":",aside:"ratio",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\therefore",aside:"therefore",class:"box"},{latex:"\\because",aside:"because",class:"box"}]},{class:"box",latex:"\\cdot",aside:"centered dot",shift:"\\ast",variants:["\\circ","\\bigcirc","\\bullet","\\odot","\\oslash","\\circledcirc","\\ast","\\star","\\times","\\doteq","\\doteqdot"]},"[separator]","[left]","[right]",{label:"[backspace]",width:1,class:"action hide-shift"},{label:"[action]",width:1}]]},compact:{label:"compact",rows:[["[+]","[-]","[*]","[/]","[=]","[.]","[(]","[)]","\\sqrt{#0}","#@^{#?}"],["[1]","[2]","[3]","[4]","[5]","[6]","[7]","[8]","[9]","[0]"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]},minimalist:{label:"minimalist",layers:[{style:`
          .minimalist-backdrop {
            display: flex;
            justify-content: center;
          }          
          .minimalist-container {
            --keycap-height: 40px;
            --keycap-max-width: 53px;
            --keycap-small-font-size: 12px;
            background: var(--keyboard-background);
            padding: 20px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            border: 1px solid var(--keyboard-border);
            box-shadow: 0 0 32px rgb(0 0 0 / 30%);
          }        
        `,backdrop:"minimalist-backdrop",container:"minimalist-container",rows:[["+","-","\\times",{latex:"\\frac{#@}{#0}",class:"small"},"=","[.]","(",")",{latex:"\\sqrt{#0}",class:"small"},{latex:"#@^{#?}",class:"small"}],["1","2","3","4","5","6","7","8","9","0"],["[hr]"],["[undo]","[redo]","[separator]","[separator]","[separator]","[left]","[right]",{label:"[backspace]",class:"action hide-shift"},"[hide-keyboard]"]]}]},"numeric-only":{label:"123",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.numeric",id:"numeric-only",rows:[["7","8","9","[separator]",{label:"[backspace]",width:2}],["4","5","6","[separator]","[separator]","[separator]"],["1","2","3","[separator]","[separator]","[separator]"],["0",{label:"[.]",variants:[]},"-","[separator]","[left]","[right]"]]}},sH=class{constructor(e){var i,r;this.preventOverlayClose=null!=(i=null==e?void 0:e.preventOverlayClose)&&i,this.translucent=null!=(r=null==e?void 0:e.translucent)&&r,this.state="closed"}get element(){if(this._element)return this._element;let e=document.createElement("div");return e.setAttribute("role","presentation"),e.style.position="fixed",e.style.contain="content",e.style.top="0",e.style.left="0",e.style.right="0",e.style.bottom="0",e.style.zIndex="var(--scrim-zindex, 10099)",e.style.outline="none",this.translucent?(e.style.background="rgba(255, 255, 255, .2)",e.style.backdropFilter="contrast(40%)"):e.style.background="transparent",this._element=e,e}open(e){var i;if("closed"!==this.state)return;this.state="opening",this.savedActiveElement=sW();let{element:r}=this;(null!=(i=null==e?void 0:e.root)?i:document.body).appendChild(r),r.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let a=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let o=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${o+a}px`,null!=e&&e.child&&r.append(e.child),this.state="open"}close(){var e,i,r,a;if("open"!==this.state)return;this.state="closing","function"==typeof this.onClose&&this.onClose();let{element:o}=this;o.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),o.remove(),document.body.style.overflow=null!=(e=this.savedOverflow)?e:"",document.body.style.marginRight=null!=(i=this.savedMarginRight)?i:"",sW()!==this.savedActiveElement&&(null==(a=null==(r=this.savedActiveElement)?void 0:r.focus)||a.call(r)),o.innerHTML="",this.state="closed"}handleEvent(e){this.preventOverlayClose||(e.target===this._element&&"click"===e.type?(this.close(),e.preventDefault(),e.stopPropagation()):e.target===document&&("touchmove"===e.type||"scroll"===e.type)&&(this.close(),e.preventDefault(),e.stopPropagation()))}};function sW(){var e;let i=document.activeElement;for(;null!=(e=null==i?void 0:i.shadowRoot)&&e.activeElement;)i=i.shadowRoot.activeElement;return i}var sU,sJ,sX={0:["\\varnothing","\\infty"],1:["\\frac{1}{#@}","#@^{-1}","\\times 10^{#?}","\\phi","\\imaginaryI"],2:["\\frac{1}{2}","#@^2","\\sqrt2","\\exponentialE"],3:["\\frac{1}{3}","#@^3","\\sqrt3","\\pi"],4:["\\frac{1}{4}","#@^4"],5:["\\frac{1}{5}","#@^5","\\sqrt5"],6:["\\frac{1}{6}","#@^6"],7:["\\frac{1}{7}","#@^7"],8:["\\frac{1}{8}","#@^8"],9:["\\frac{1}{9}","#@^9"],".":[".",",",";","\\colon"],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn’t"}],g:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"}],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>⁻\xb3⧸₁₈ em"},{latex:'\\char"203A\\,\\char"2039',insert:"\\,",aside:"thin space<br>\xb3⧸₁₈ em"},{latex:'\\char"203A\\:\\char"2039',insert:"\\:",aside:"medium space<br>⁴⧸₁₈ em"},{latex:'\\char"203A\\;\\char"2039',insert:"\\;",aside:"thick space<br>⁵⧸₁₈ em"},{latex:'\\char"203A\\ \\char"2039',insert:"\\ ",aside:"⅓ em"},{latex:'\\char"203A\\enspace\\char"2039',insert:"\\enspace",aside:"\xbd em"},{latex:'\\char"203A\\quad\\char"2039',insert:"\\quad",aside:"1 em"},{latex:'\\char"203A\\qquad\\char"2039',insert:"\\qquad",aside:"2 em"}]};function sG(e,i){var r,a,o,n;let s=le.singleton;if(!s)return;let l=s7(e),c=null!=(a=null==(r=s.getKeycap(null==l?void 0:l.id))?void 0:r.variants)?a:"";if("string"==typeof c&&!sY(c)||Array.isArray(c)&&0===c.length){null==i||i();return}let d={},u="";for(let e of"string"!=typeof c?c:(sX[c]||(sX[c]=null!=(n=function(e){if("foreground-color"===e){let e=[];for(let i of Object.keys(S))e.push({class:"swatch-button",label:'<span style="border: 3px solid '+S[i]+'"></span>',command:["applyStyle",{color:i}]});return e}if("background-color"===e){let e=[];for(let i of Object.keys(_))e.push({class:"swatch-button",label:'<span style="background:'+_[i]+'"></span>',command:["applyStyle",{backgroundColor:i}]});return e}}(c))?n:[]),sX[c])){let i=s3(e),r=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);d[r]=i;let[a,o]=s4(i);u+=`<div id=${r} class="item ${o}">${a}</div>`}let h=document.createElement("div");h.setAttribute("aria-hidden","true"),h.className="MLK__variant-panel",h.style.height="auto";let p=Object.keys(d).length,m=5;1===p?m=1:2===p||4===p?m=2:3===p||5===p||6===p?m=3:p>=7&&p<14&&(m=4),h.style.width=`calc(var(--variant-keycap-length) * ${m} + 12px)`,h.innerHTML=cR.createHTML(u),sH.scrim||(sH.scrim=new sH),sH.scrim.open({root:null==(o=null==s?void 0:s.container)?void 0:o.querySelector(".ML__keyboard"),child:h});let{signal:f}=sJ=new AbortController,y=null==e?void 0:e.getBoundingClientRect();if(y){y.top-h.clientHeight<0&&(h.style.width="auto",p<=6?h.style.height="56px":p<=12?h.style.height="108px":p<=18?h.style.height="205px":h.classList.add("compact"));let e=Math.max(0,Math.min(window.innerWidth-h.offsetWidth,(y.left+y.right-h.offsetWidth)/2)),r=y.top-h.clientHeight+5;h.style.transform=`translate(${e}px, ${r}px)`,h.classList.add("is-visible"),requestAnimationFrame(()=>{h.addEventListener("pointerup",e=>{let r=s7(e.target);null!=r&&r.id&&d[r.id]&&(s5(d[r.id]),sZ(),null==i||i(),e.preventDefault())},{capture:!0,passive:!1,signal:f}),h.addEventListener("pointerenter",e=>{let i=s7(e.target);null!=i&&i.id&&d[i.id]&&i.classList.add("is-active")},{capture:!0,signal:f}),h.addEventListener("pointerleave",e=>{let i=s7(e.target);null!=i&&i.id&&d[i.id]&&i.classList.remove("is-active")},{capture:!0,signal:f}),window.addEventListener("pointercancel",()=>{sZ(),null==i||i()},{signal:f}),window.addEventListener("pointerup",()=>{sZ(),null==i||i()},{signal:f})})}}function sZ(){var e;null==sJ||sJ.abort(),sJ=null,null==(e=sH.scrim)||e.close()}function sY(e){return void 0!==sX[e]}function sQ(e){if(!e)return"";let i=new og,r=new ok({mode:"math",type:"root",body:nE(e,{context:i,args:e=>"@"===e?"{\\class{ML__box-placeholder}{\\blacksquare}}":"\\placeholder{}"})});return oo(oa(nG(new or(r.render(i),{classes:"ML__base"}),i)),{classes:"ML__mathlive"}).toMarkup()}function s0(e){if(Array.isArray(e))return e.map(e=>s0(e)).flat();let i="string"==typeof e?{markup:e}:e;return"rows"in i&&Array.isArray(i.rows)&&(i.rows=i.rows.map(e=>e.map(e=>s3(e)))),null!=i.id||(i.id="ML__layer_"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36)),[i]}var s1=`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

<symbol id="svg-delete-backward" viewBox="0 0 576 512">
  <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>
</symbol>

<symbol id="svg-shift" viewBox="0 0 384 512">
  <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>
</symbol>

<symbol id="svg-commit" viewBox="0 0 512 512">
  <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>
</symbol>

<symbol id="svg-command" viewBox="0 0 640 512">
  <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>
</symbol>

<symbol id="svg-undo" viewBox="0 0 512 512">
  <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>
</symbol>
<symbol id="svg-redo" viewBox="0 0 512 512">
  <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>
</symbol>
<symbol id="svg-arrow-left" viewBox="0 0 320 512">
  <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>
</symbol>
<symbol id="svg-arrow-right" viewBox="0 0 320 512">
  <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>
</symbol>
<symbol id="svg-tab" viewBox="0 0 448 512">
  <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>
</symbol>
<symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>
<symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>
<symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>
</symbol>
<symbol id="svg-angle-double-right" viewBox="0 0 512 512"><path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/>
</symbol>
<symbol id="svg-angle-double-left" viewBox="0 0 512 512"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/>
</symbol>
<symbol id="svg-trash" viewBox="0 0 448 512">
  <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>
</symbol>
<symbol id="svg-keyboard-down" viewBox="0 0 576 512"><path d="M64 48c-8.8 0-16 7.2-16 16V240c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H512c35.3 0 64 28.7 64 64V240c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM159 359c9.4-9.4 24.6-9.4 33.9 0l95 95 95-95c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L305 505c-4.5 4.5-10.6 7-17 7s-12.5-2.5-17-7L159 393c-9.4-9.4-9.4-24.6 0-33.9zm1-167c0-8.8 7.2-16 16-16H400c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V192zM120 88h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H120c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H200c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H280c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16zm64 16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H360c-8.8 0-16-7.2-16-16V104zm96-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16H440c-8.8 0-16-7.2-16-16V104c0-8.8 7.2-16 16-16z"/></symbol>
</svg>`;function s4(e,i={shifted:!1}){var r,a,o,n,s,l,c;let d="",u=null!=(r=e.class)?r:"";return(i.shifted&&s9(e)&&(u+=" is-active"),i.shifted&&"shift"in e)?("string"==typeof e.shift?d=sQ(e.shift):"object"==typeof e.shift&&(d=e.shift.label?e.shift.label:null!=(a=sQ(e.shift.latex||e.shift.insert||"")||e.shift.key)?a:""),"object"==typeof e.shift&&(u=null!=(n=null!=(o=e.shift.class)?o:e.class)?n:"")):(d=e.label?e.label:null!=(s=sQ(e.latex||e.insert||"")||e.key)?s:"",e.shift&&(d+=`<span class="MLK__shift">${"string"==typeof e.shift?sQ(e.shift):e.shift.label?e.shift.label:null!=(l=sQ(e.shift.latex||e.shift.insert||"")||e.shift.key)?l:""}</span>`),e.aside&&(d+=`<aside>${e.aside}</aside>`)),e.layer&&!/layer-switch/.test(u)&&(u+=" layer-switch"),/(^|\s)(separator|action|shift|fnbutton|bigfnbutton)($|\s)/.test(u)||(u+=" MLK__keycap"),!/\bw[0-9]+\b/.test(u)&&e.width&&(u+=null!=(c=({0:" w0",.5:" w5",1.5:" w15",2:" w20",5:" w50"})[e.width])?c:""),[d,u||"MLK__keycap"]}var s2={"[left]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-left /></svg>",command:["performWithFeedback","moveToPreviousChar"],shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-left /></svg>",command:["performWithFeedback","extendSelectionBackward"]}},"[right]":{class:"action hide-shift",label:"<svg class=svg-glyph><use xlink:href=#svg-arrow-right /></svg>",command:["performWithFeedback","moveToNextChar"],shift:{label:"<svg class=svg-glyph><use xlink:href=#svg-angle-double-right /></svg>",command:["performWithFeedback","extendSelectionForward"]}},"[return]":{class:"action",command:["performWithFeedback","commit"],width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[action]":{class:"action",command:["performWithFeedback","commit"],width:1.5,label:"<svg class=svg-glyph><use xlink:href=#svg-commit /></svg>"},"[hr]":{class:"separator horizontal-rule"},"[hide-keyboard]":{class:"action",command:["performWithFeedback","hideVirtualKeyboard"],width:1.5,label:"<svg class=svg-glyph-lg><use xlink:href=#svg-keyboard-down /></svg>"},"[.]":{variants:".",command:["performWithFeedback","insertDecimalSeparator"],shift:",",class:"big-op hide-shift"},"[+]":{variants:[{latex:"\\sum_{#0}^{#0}",class:"small"},"\\oplus"],latex:"+",label:"+",class:"big-op hide-shift",shift:{latex:"\\sum",insert:"\\sum_{#?}^{#?}",class:"small"}},"[-]":{variants:["\\pm","\\ominus"],latex:"-",label:"&#x2212;",shift:"\\pm",class:"big-op hide-shift"},"[/]":{class:"big-op hide-shift",shift:{class:"",latex:"\\frac{1}{#@}"},variants:["/","\\div","\\%","\\oslash"],latex:"\\frac{#@}{#?}",label:"&divide;"},"[*]":{variants:[{latex:"\\prod_{#0}^{#0}",class:"small"},"\\otimes"],latex:"\\times",label:"&times;",shift:{latex:"\\prod",insert:"\\prod_{#?}^{#?}",class:"small"},class:"big-op hide-shift"},"[=]":{variants:["\\neq","\\equiv","\\varpropto","\\thickapprox","\\lt","\\gt","\\le","\\ge"],latex:"=",label:"=",shift:{label:"≠",latex:"\\ne"},class:"big-op hide-shift"},"[backspace]":{class:"action bottom right hide-shift",width:1.5,command:["performWithFeedback","deleteBackward"],label:"<svg class=svg-glyph><use xlink:href=#svg-delete-backward /></svg>",shift:{class:"action warning",label:"<svg class=svg-glyph><use xlink:href=#svg-trash /></svg>",command:"deleteAll"}},"[undo]":{class:"ghost if-can-undo",command:"undo",label:"<svg class=svg-glyph><use xlink:href=#svg-undo /></svg>",tooltip:x("tooltip.undo")},"[redo]":{class:"ghost  if-can-redo",command:"redo",label:"<svg class=svg-glyph><use xlink:href=#svg-redo /></svg>",tooltip:x("tooltip.redo")},"[(]":{variants:[{latex:"\\lbrack",key:"["},"\\langle","\\lfloor","\\lceil",{latex:"\\lbrace",key:"{"}],key:"(",label:"(",shift:{label:"[",key:"["},class:"hide-shift"},"[)]":{variants:[{latex:"\\rbrack",key:"]"},"\\rangle","\\rfloor","\\rceil",{latex:"\\rbrace",key:"]"}],key:")",label:")",shift:{label:"]",latex:"\\rbrack"},class:"hide-shift"},"[0]":{variants:"0",latex:"0",label:"0",shift:"\\infty",class:"hide-shift"},"[1]":{variants:"1",latex:"1",label:"1",shift:"#@^{-1}",class:"hide-shift"},"[2]":{variants:"2",latex:"2",label:"2",shift:"#@^2",class:"hide-shift"},"[3]":{variants:"3",latex:"3",label:"3",shift:"#@^3",class:"hide-shift"},"[4]":{variants:"4",latex:"4",label:"4",shift:"#@^4",class:"hide-shift"},"[5]":{variants:"5",latex:"5",label:"5",shift:"#@^5",class:"hide-shift"},"[6]":{variants:"6",latex:"6",label:"6",shift:"#@^6",class:"hide-shift"},"[7]":{variants:"7",latex:"7",label:"7",shift:"#@^7",class:"hide-shift"},"[8]":{variants:"8",latex:"8",label:"8",shift:"#@^8",class:"hide-shift"},"[9]":{variants:"9",latex:"9",label:"9",shift:"#@^9",class:"hide-shift"},"[separator-5]":{class:"separator",width:.5},"[separator]":{class:"separator"},"[separator-10]":{class:"separator"},"[separator-15]":{class:"separator",width:1.5},"[separator-20]":{class:"separator",width:2},"[separator-50]":{class:"separator",width:5},"[shift]":{class:"shift bottom left",width:1.5,label:"<span class=caps-lock-indicator></span><svg class=svg-glyph><use xlink:href=#svg-shift /></svg>"},"[foreground-color]":{variants:"foreground-color",command:["applyStyle",{color:"red"}],label:"<span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'>"},"[background-color]":{variants:"background-color",command:["applyStyle",{backgroundColor:"yellow"}],label:"<span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span>"}};function s3(e){var i;let r;if("string"==typeof e){if(!s2[e])return{latex:e};e={label:e}}return"label"in e&&e.label&&s2[e.label]&&(r=h(u(u({},s2[e.label]),e),{label:s2[e.label].label})),"key"in e&&e.key&&s2[e.key]&&(r=h(u(u({},s2[e.key]),e),{key:s2[e.key].key})),r?("insertDecimalSeparator"===r.command&&(r.label=null!=(i=window.MathfieldElement.decimalSeparator)?i:"."),"[action]"===e.label&&(r=u(u({},r),window.mathVirtualKeyboard.actionKeycap)),"[shift]"===e.label&&(r=u(u({},r),window.mathVirtualKeyboard.shiftKeycap)),"[backspace]"===e.label&&(r=u(u({},r),window.mathVirtualKeyboard.backspaceKeycap)),"[tab]"===e.label&&(r=u(u({},r),window.mathVirtualKeyboard.tabKeycap)),r):e}function s6(e){var i;if(0!==e.button)return;let r=le.singleton;if(!r)return;let a=e.target;for(;a&&!a.getAttribute("data-layer");)a=a.parentElement;if(a){r.currentLayer=null!=(i=a.getAttribute("data-layer"))?i:"",e.preventDefault();return}let o=s7(e.target);if(!(null!=o&&o.id))return;let n=r.getKeycap(o.id);if(!n)return;e.type;let s=new AbortController;o.classList.add("is-pressed"),o.addEventListener("pointerenter",s8(s),{capture:!0,signal:s.signal}),o.addEventListener("pointerleave",s8(s),{capture:!0,signal:s.signal}),o.addEventListener("pointercancel",s8(s),{signal:s.signal}),o.addEventListener("pointerup",s8(s),{signal:s.signal}),s9(n)&&(o.classList.add("is-active"),r.shiftPressCount++),n.variants&&(cO&&clearTimeout(cO),cO=setTimeout(()=>{o.classList.contains("is-pressed")&&(o.classList.remove("is-pressed"),o.classList.add("is-active"),e.target&&"releasePointerCapture"in e.target&&e.target.releasePointerCapture(e.pointerId),sG(o,()=>{s.abort(),null==o||o.classList.remove("is-active")}))},300)),e.preventDefault()}function s8(e){return i=>{let r=s7(i.target);if(!(null!=r&&r.id))return;let a=le.singleton;if(!a)return;let o=a.getKeycap(r.id);if(o){if("pointerenter"===i.type&&i.target===r&&i.isPrimary&&r.classList.add("is-pressed"),"pointercancel"===i.type){r.classList.remove("is-pressed"),s9(o)&&(a.shiftPressCount--,r.classList.toggle("is-active",a.isShifted)),e.abort();return}if("pointerleave"===i.type&&i.target===r){r.classList.remove("is-pressed"),s9(o)&&(a.shiftPressCount--,r.classList.toggle("is-active",a.isShifted));return}if("pointerup"===i.type){cO&&clearTimeout(cO),s9(o)?r.classList.toggle("is-active",a.isShifted):r.classList.contains("is-pressed")&&(r.classList.remove("is-pressed"),a.isShifted&&o.shift?"string"==typeof o.shift?a.executeCommand(["insert",o.shift,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]):s5(o.shift):s5(o),1!==a.shiftPressCount||i.shiftKey||(a.shiftPressCount=0)),e.abort(),i.preventDefault();return}}}}function s5(e){var i;let r=e.command;!r&&e.insert&&(r=["insert",e.insert,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]),!r&&e.key&&(r=["typedText",e.key,{focus:!0,feedback:!0,simulateKeystroke:!0}]),!r&&e.latex&&(r=["insert",e.latex,{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]),r||(r=["typedText",e.label,{focus:!0,feedback:!0,simulateKeystroke:!0}]),null==(i=le.singleton)||i.executeCommand(r)}function s7(e){if(!e)return;let i=e;for(;i&&!function(e){if(1!==e.nodeType)return!1;let i=e.classList;return i.contains("MLK__keycap")||i.contains("shift")||i.contains("action")||i.contains("fnbutton")||i.contains("bigfnbutton")}(i);)i=i.parentElement;return null!=i?i:void 0}function s9(e){return!!e.class&&/(^|\s)shift($|\s)/.test(e.class)}var le=class e{constructor(){var e,i,r;this.originalContainerBottomPadding=null,this.keycapRegistry={},this._shiftPressCount=0,this.targetOrigin=window.origin,this.originValidator="none",this._alphabeticLayout="auto",this._layouts=Object.freeze(["default"]),this._editToolbar="default",this._container=null!=(i=null==(e=window.document)?void 0:e.body)?i:null,this._visible=!1,this._rebuilding=!1,this.observer=new ResizeObserver(e=>{this.adjustBoundingRect(),this.dispatchEvent(new Event("geometrychange")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})}),this.listeners={};try{null==(r=window.top)||r.addEventListener("message",this)}catch(e){window.addEventListener("message",this)}document.body.addEventListener("focusin",e=>{var i;let r=e.target;null!=r&&r.isConnected&&(null==(i=r.tagName)?void 0:i.toLowerCase())==="math-field"&&("matchMedia"in window?window.matchMedia("(any-pointer: coarse)").matches:"ontouchstart"in window||navigator.maxTouchPoints>0)&&("auto"!==r.mathVirtualKeyboardPolicy||r.readOnly||this.show({animate:!0}))}),document.addEventListener("focusout",e=>{"manual"!==e.target.mathVirtualKeyboardPolicy&&setTimeout(()=>{var e,i,r;let a=document.activeElement,o=!1;for(;a;){if((null==(e=a.tagName)?void 0:e.toLowerCase())==="math-field"){o=!0;break}a=null!=(r=null==(i=a.shadowRoot)?void 0:i.activeElement)?r:null}o||this.hide()},300)})}get currentLayer(){var e,i,r;return null!=(r=null==(i=null==(e=this._element)?void 0:e.querySelector(".MLK__layer.is-visible"))?void 0:i.id)?r:""}set currentLayer(e){var i;if(!this._element){this.latentLayer=e;return}let r=e?this._element.querySelector(`#${e}.MLK__layer`):null;r||(r=this._element.querySelector(".MLK__layer")),r&&(null==(i=this._element.querySelector(".MLK__layer.is-visible"))||i.classList.remove("is-visible"),r.classList.add("is-visible")),this.render()}get shiftPressCount(){return this._shiftPressCount}set shiftPressCount(e){var i;this._shiftPressCount=e>2||e<0?0:e,null==(i=this._element)||i.classList.toggle("is-caps-lock",2===this.shiftPressCount),this.render()}get isShifted(){return this._shiftPressCount>0}resetKeycapRegistry(){this.keycapRegistry={}}registerKeycap(e){let i="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);return this.keycapRegistry[i]=e,i}getKeycap(e){return e?this.keycapRegistry[e]:void 0}getLayer(e){for(let i of this.normalizedLayouts)for(let r of i.layers)if(r.id===e)return r}get alphabeticLayout(){return this._alphabeticLayout}set alphabeticLayout(e){this._alphabeticLayout=e,this.rebuild()}get actionKeycap(){return this._actionKeycap}set actionKeycap(e){this._actionKeycap="string"==typeof e?{label:e}:e}get shiftKeycap(){return this._shiftKeycap}set shiftKeycap(e){this._shiftKeycap="string"==typeof e?{label:e}:e}get backspaceKeycap(){return this._backspaceKeycap}set backspaceKeycap(e){this._backspaceKeycap="string"==typeof e?{label:e}:e}get tabKeycap(){return this._tabKeycap}set tabKeycap(e){this._tabKeycap="string"==typeof e?{label:e}:e}get layouts(){return this._layouts}set layouts(e){this.updateNormalizedLayouts(e),this.rebuild()}updateNormalizedLayouts(e){let i=Array.isArray(e)?[...e]:[e],r=i.findIndex(e=>"default"===e);r>=0&&i.splice(r,1,"numeric","symbols","alphabetic","greek"),this._layouts=Object.freeze(i),this._normalizedLayouts=i.map(e=>(function e(i){let r;if("alphabetic"===i)return function(){var e,i;let r=window.mathVirtualKeyboard.alphabeticLayout;if("auto"===r){let i=ss();i&&(r=i.virtualLayout),r&&"auto"!==r||(r=null!=(e=({fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"})[v.locale.slice(0,2)])?e:"qwerty")}let a={qwerty:["qwertyuiop"," asdfghjkl ","^zxcvbnm~"],azerty:["azertyuiop","qsdfghjklm","^ wxcvbn ~"],qwertz:["qwertzuiop"," asdfghjkl ","^yxcvbnm~"],dvorak:["^  pyfgcrl ","aoeuidhtns","qjkxbmwvz~"],colemak:[" qwfpgjluy ","arstdhneio","^zxcvbkm~"]},o=null!=(i=a[r])?i:a.qwerty,n=[[{label:"1",variants:"1"},{label:"2",variants:"2"},{label:"3",variants:"3"},{label:"4",variants:"4"},{label:"5",shift:{latex:"\\frac{#@}{#?}"},variants:"5"},{label:"6",shift:{latex:"#@^#?"},variants:"6"},{label:"7",variants:"7"},{label:"8",shift:{latex:"\\times"},variants:"8"},{label:"9",shift:{label:"(",latex:"("},variants:"9"},{label:"0",shift:{label:")",latex:")"},variants:"0"}]];for(let e of o){let i=[];for(let a of e)/[a-z]/.test(a)?i.push({label:a,class:"hide-shift",shift:{label:a.toUpperCase()},variants:sY(a)?a:void 0}):"~"===a?"dvorak"!==r?i.push("[backspace]"):i.push({label:"[backspace]",width:1}):"^"===a?i.push("[shift]"):" "===a&&i.push("[separator-5]");n.push(i)}return n.push(["[-]","[+]","[=]",{label:" ",width:1.5},",","[.]","[left]","[right]",{label:"[action]",width:1.5}]),{label:"abc",labelClass:"MLK__tex-math",tooltip:"keyboard.tooltip.alphabetic",layers:s0({rows:n})}}();if("string"==typeof i)return sj[i],e(sj[i]);if("rows"in i&&Array.isArray(i.rows)){let{rows:e}=i;r=h(u({},m(i,["rows"])),{layers:s0({rows:i.rows})})}else if("markup"in i&&"string"==typeof i.markup){let{markup:e}=i;r=h(u({},m(i,["markup"])),{layers:s0(i.markup)})}else r=u({},i),"layers"in i?r.layers=s0(i.layers):console.error('MathLive 0.95.5: provide either a "rows", "markup" or "layers" property');let a=!1,o=!1;for(let e of r.layers)if(e.rows)for(let i of e.rows.flat()){s9(i)&&(a=!0);let e=i.command;"string"==typeof e&&["undo","redo","cut","copy","paste"].includes(e)&&(o=!0)}return"displayShiftedKeycaps"in i&&void 0!==i.displayShiftedKeycaps||(r.displayShiftedKeycaps=a),"displayEditToolbar"in i&&void 0!==i.displayEditToolbar||(r.displayEditToolbar=!o),r})(e))}get normalizedLayouts(){return this._normalizedLayouts||this.updateNormalizedLayouts(this._layouts),this._normalizedLayouts}get editToolbar(){return this._editToolbar}set editToolbar(e){this._editToolbar=e,this.rebuild()}get container(){return this._container}set container(e){this._container=e,this.rebuild()}static get singleton(){if(void 0===this._singleton)try{this._singleton=new e}catch(e){this._singleton=null}return this._singleton}get style(){return this._style}addEventListener(e,i,r){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].has(i)||this.listeners[e].add(i)}dispatchEvent(e){return!this.listeners[e.type]||0===this.listeners[e.type].size||(this.listeners[e.type].forEach(i=>{"function"==typeof i?i(e):null==i||i.handleEvent(e)}),!e.defaultPrevented)}removeEventListener(e,i,r){this.listeners[e]&&this.listeners[e].delete(i)}get element(){return this._element}set element(e){var i;this._element!==e&&(null==(i=this._element)||i.remove(),this._element=e)}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get boundingRect(){var e;if(!this._visible)return new DOMRect;let i=null==(e=this._element)?void 0:e.getElementsByClassName("MLK__plate")[0];return i?i.getBoundingClientRect():new DOMRect}adjustBoundingRect(){var e,i;let r=this.boundingRect.height;if(this.container===document.body){null==(e=this._element)||e.style.setProperty("--_keyboard-height",`calc(${r}px + var(--_padding-top) + var(--_padding-bottom) + env(safe-area-inset-bottom, 0))`);let i=r-1;this.container.style.paddingBottom=this.originalContainerBottomPadding?`calc(${this.originalContainerBottomPadding} + ${i}px)`:`${i}px`}else null==(i=this._element)||i.style.setProperty("--_keyboard-height",`${r}px`)}rebuild(){if(this._rebuilding||!this._element)return;this._rebuilding=!0;let e=this.currentLayer;requestAnimationFrame(()=>{this._rebuilding=!1,this._element&&(this._element.remove(),this._element=void 0),this.visible&&(this.buildAndAttachElement(),this.currentLayer=e,this.render(),this.adjustBoundingRect(),this._element.classList.add("is-visible"))})}render(){if(!this._element)return;let e=this.getLayer(this.currentLayer);this._element.classList.toggle("backdrop-is-transparent",!!(e&&(e.backdrop||e.container)));let i=this._element.querySelectorAll(".MLK__layer.is-visible .MLK__keycap, .MLK__layer.is-visible .action, .fnbutton, .MLK__layer.is-visible .bigfnbutton, .MLK__layer.is-visible .shift");if(i)for(let e of i){let i=this.getKeycap(e.id);if(i){let[r,a]=s4(i,{shifted:this.isShifted});e.innerHTML=window.MathfieldElement.createHTML(r),e.className=a}}}show(e){var i;if(this._visible)return;let r=this.container;if(r&&window.mathVirtualKeyboard&&this.stateWillChange(!0)){if(this._element||(this.buildAndAttachElement(),this.adjustBoundingRect()),!this._visible){let e=this._element.getElementsByClassName("MLK__plate")[0];if(e&&this.observer.observe(e),r===window.document.body){let i=r.style.paddingBottom;this.originalContainerBottomPadding=i;let a=e.offsetHeight-1;r.style.paddingBottom=i?`calc(${i} + ${a}px)`:`${a}px`}window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("keydown",this,{capture:!0}),window.addEventListener("keyup",this,{capture:!0}),null==(i=this._element)||i.classList.toggle("is-caps-lock",2===this.shiftPressCount),this.currentLayer=this.latentLayer}this._visible=!0,null!=e&&e.animate?requestAnimationFrame(()=>{this._element&&(this._element.classList.add("animate"),this._element.addEventListener("transitionend",()=>{var e;return null==(e=this._element)?void 0:e.classList.remove("animate")},{once:!0}),this._element.classList.add("is-visible"),this.stateChanged())}):(this._element.classList.add("is-visible"),this.stateChanged())}}hide(e){var i;let r=this.container;if(r&&this._visible&&this.stateWillChange(!1)){if(this._visible=!1,this._element){this.latentLayer=this.currentLayer;let e=this._element.getElementsByClassName("MLK__plate")[0];e&&this.observer.unobserve(e),window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("keydown",this,{capture:!0}),window.removeEventListener("keyup",this,{capture:!0}),window.removeEventListener("contextmenu",this,{capture:!0}),sZ(),o2("core"),o2("virtual-keyboard"),null==(i=this._element)||i.remove(),this._element=void 0,null!==this.originalContainerBottomPadding&&(r.style.paddingBottom=this.originalContainerBottomPadding)}this.stateChanged()}}get height(){var e,i;return null!=(i=null==(e=this.element)?void 0:e.offsetHeight)?i:0}buildAndAttachElement(){var e;this.element,this.element=function(e){e.resetKeycapRegistry(),o4("virtual-keyboard"),o4("core"),sT();let i=document.createElement("div");i.className="ML__keyboard";let r=document.createElement("div");r.className="MLK__plate",r.innerHTML=window.MathfieldElement.createHTML(s1+e.normalizedLayouts.map((i,r)=>(function(e,i,r){let a=[];if(!("layers"in i))return"";for(let o of i.layers)a.push(`<div tabindex="-1" class="MLK__layer" id="${o.id}">`),(e.normalizedLayouts.length>1||i.displayEditToolbar)&&(a.push("<div class='MLK__toolbar' role='toolbar'>"),a.push(function(e,i){var r,a;let o='<div class="left">';if(e.normalizedLayouts.length>1)for(let[n,s]of e.normalizedLayouts.entries()){let e=s,l=[n===i?"selected":"layer-switch"];e.tooltip&&l.push("MLK__tooltip"),e.labelClass&&l.push(...e.labelClass.split(" ")),o+=`<div class="${l.join(" ")}"`,e.tooltip&&(o+=" data-tooltip='"+(null!=(r=x(e.tooltip))?r:e.tooltip)+"' "),n!==i&&(o+=`data-layer="${e.layers[0].id}"`),o+=`>${null!=(a=e.label)?a:"untitled"}</div>`}return o+"</div>"}(e,r)),i.displayEditToolbar&&a.push('<div class="ML__edit-toolbar right"></div>'),a.push("</div>")),a.push(function(e,i){var r;if("string"==typeof i)return i;let a="";if("string"==typeof i.style?a+=`<style>${i.style}</style>`:"object"==typeof i.style&&(a+=`<style>${Object.keys(r=i.style).map(e=>{var i;return`${e} {${"string"==typeof(i=r[e])?i:Object.entries(i).map(([e,i])=>`${e}:${i} !important`).join(";")}}`}).join("")}</style>`),i.backdrop&&(a+=`<div class='${i.backdrop}'>`),i.container&&(a+=`<div class='${i.container}'>`),i.rows){for(let r of(a+="<div class='MLK__rows'>",i.rows)){for(let i of(a+="<div dir='ltr' class=row>",r))if(i){let r=e.registerKeycap(i),[o,n]=s4(i);/(^|\s)separator/.test(n)?a+=`<div class="${n}"`:a+=`<div tabindex="-1" id="${r}" class="${n}"`,i.tooltip&&(a+=` data-tooltip="${i.tooltip}"`),a+=`>${o}</div>`}a+="</div>"}a+="</div>"}else i.markup&&(a+=i.markup);return i.container&&(a+="</div>"),i.backdrop&&(a+="</div>"),a}(e,o)),a.push("</div>");return a.join("")})(e,i,r)).join(""));let a=document.createElement("div");a.className="MLK__backdrop",a.appendChild(r),i.appendChild(a),i.addEventListener("pointerdown",s6,{passive:!1});let o=i.querySelectorAll(".ML__edit-toolbar");if(o)for(let i of o)i.addEventListener("click",i=>{var r,a;let o=i.target,n="";for(;o&&!n;)n=null!=(r=null==o?void 0:o.getAttribute("data-command"))?r:"",o=null!=(a=null==o?void 0:o.parentElement)?a:null;n&&e.executeCommand(JSON.parse(n))});!function(e){for(let i of e)(function(e){let i=le.singleton;if(!i)return;let r={};if(!e.id){if(e.hasAttribute("data-label")&&(r.label=e.dataset.label),e.hasAttribute("data-latex")&&(r.latex=e.dataset.latex),e.hasAttribute("data-key")&&(r.key=e.dataset.key),e.hasAttribute("data-insert")&&(r.insert=e.dataset.insert),e.hasAttribute("data-variants")&&(r.variants=e.dataset.variants),e.hasAttribute("data-aside")&&(r.aside=e.dataset.aside),e.className&&(r.class=e.className),r.label||r.latex||r.key||r.insert||(r.latex=e.innerText,r.label=e.innerHTML),e.hasAttribute("data-command"))try{r.command=JSON.parse(e.dataset.command)}catch(e){}e.id=i.registerKeycap(r)}if(!e.innerHTML){let[i,a]=s4(r);e.innerHTML=window.MathfieldElement.createHTML(i)}})(i)}(i.querySelectorAll(".MLK__keycap, .action, .fnbutton, .bigfnbutton"));let n=i.querySelectorAll(".MLK__layer");for(let e of(n.length,n))e.addEventListener("pointerdown",e=>e.preventDefault());return e.currentLayer=e.latentLayer,i}(this),window.addEventListener("contextmenu",this,{capture:!0}),this.element.addEventListener("contextmenu",e=>{e.shiftKey||((e.ctrlKey||2===e.button)&&sG(e.target),e.preventDefault(),e.stopPropagation())},{capture:!0}),null==(e=this.container)||e.appendChild(this.element)}handleEvent(e){if(sI(e)){if(!oW(e.origin,this.originValidator))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");"disconnect"===e.data.action?this.connectedMathfieldWindow=void 0:"update-setting"!==e.data.action&&"proxy-created"!==e.data.action&&"execute-command"!==e.data.action&&(e.source,this.connectedMathfieldWindow=e.source),this.handleMessage(e.data,e.source)}if(this._element)switch(e.type){case"mouseup":case"blur":document.body.style.userSelect="",this.shiftPressCount=0;break;case"contextmenu":2!==e.button&&e.preventDefault();break;case"keydown":"Shift"!==e.key||e.repeat||(this.shiftPressCount=1);break;case"keyup":"Shift"!==e.key&&(e.getModifierState("Shift")||2===this.shiftPressCount)||(this.shiftPressCount=0)}}handleMessage(e,i){let{action:r}=e;if("execute-command"===r){let{command:i}=e;if("virtual-keyboard"!==sN(i)&&window===window.parent)return;this.executeCommand(i);return}if(("connect"===r||"show"===r)&&this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},i),"disconnect"!==r&&window===window.top){if("show"===r){void 0!==e.animate?this.show({animate:e.animate}):this.show();return}if("hide"===r){void 0!==e.animate?this.hide({animate:e.animate}):this.hide();return}if("update-setting"===r){e.alphabeticLayout&&(this.alphabeticLayout=e.alphabeticLayout),e.layouts&&(this.layouts=e.layouts),e.editToolbar&&(this.editToolbar=e.editToolbar);return}if("proxy-created"===r){this.sendMessage("synchronize-proxy",{boundingRect:this.boundingRect,alphabeticLayout:this._alphabeticLayout,layouts:this._layouts,editToolbar:this._editToolbar},i);return}}}sendMessage(e,i,r){if(r||(r=this.connectedMathfieldWindow),null===this.targetOrigin||"null"===this.targetOrigin||r===window){window.dispatchEvent(new MessageEvent("message",{source:window,data:u({type:sR,action:e},i)}));return}if(r)r.postMessage(u({type:sR,action:e},i),{targetOrigin:this.targetOrigin});else if(i.command&&this.dispatchEvent(new CustomEvent("math-virtual-keyboard-command",{detail:i.command})),"execute-command"===e&&Array.isArray(i.command)&&"insert"===i.command[0])for(let e of i.command[1].split(""))this.dispatchEvent(new KeyboardEvent("keydown",{key:e,bubbles:!0})),this.dispatchEvent(new KeyboardEvent("keyup",{key:e,bubbles:!0}))}stateWillChange(e){return this.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:e},bubbles:!0,cancelable:!0,composed:!0}))}stateChanged(){this.dispatchEvent(new Event("virtual-keyboard-toggle")),this.sendMessage("geometry-changed",{boundingRect:this.boundingRect})}focus(){this.sendMessage("focus",{})}blur(){this.sendMessage("blur",{})}updateToolbar(e){let i=this._element;if(!i)return;i.classList.toggle("is-math-mode","math"===e.mode),i.classList.toggle("is-text-mode","text"===e.mode),i.classList.toggle("can-undo",e.canUndo),i.classList.toggle("can-redo",e.canRedo),i.classList.toggle("can-copy",!e.selectionIsCollapsed),i.classList.toggle("can-copy",!e.selectionIsCollapsed),i.classList.toggle("can-paste",!0);let r=i.querySelectorAll(".ML__edit-toolbar");if(r)for(let i of r)i.innerHTML=function(e,i){if("none"===e.editToolbar)return"";let r=[];i.selectionIsCollapsed?r.push("undo","redo","pasteFromClipboard"):r.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let a={undo:`<div class='action ${!1===i.canUndo?"disabled":""}'
          data-command='"undo"'
          data-tooltip='${x("tooltip.undo")}'>
          <svg><use xlink:href='#svg-undo' /></svg>
      </div>`,redo:`<div class='action ${!1===i.canRedo?"disabled":""}'
          data-command='"redo"'
          data-tooltip='${x("tooltip.redo")}'>
          <svg><use xlink:href='#svg-redo' /></svg>
      </div>`,cutToClipboard:`
        <div class='action'
            data-command='"cutToClipboard"'
            data-tooltip='${x("tooltip.cut to clipboard")}'>
            <svg><use xlink:href='#svg-cut' /></svg>
        </div>
    `,copyToClipboard:`
        <div class='action'
            data-command='"copyToClipboard"'
            data-tooltip='${x("tooltip.copy to clipboard")}'>
            <svg><use xlink:href='#svg-copy' /></svg>
        </div>
    `,pasteFromClipboard:`
        <div class='action'
            data-command='"pasteFromClipboard"'
            data-tooltip='${x("tooltip.paste from clipboard")}'>
            <svg><use xlink:href='#svg-paste' /></svg>
        </div>
    `};return""+r.map(e=>a[e]).join("")}(this,e)}update(e){this._style=e.style,this.updateToolbar(e)}connect(){this.connectedMathfieldWindow=window}disconnect(){this.connectedMathfieldWindow=void 0}executeCommand(e){let i,r=[];return f(e)?(i=e[0],r=e.slice(1)):i=e,i=i.replace(/-\w/g,e=>e[1].toUpperCase()),"virtual-keyboard"===sN(e)?sU[i].fn(...r):(this.sendMessage("execute-command",{command:e}),!1)}dispose(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this),window.removeEventListener("message",this)}};if(y()&&!("mathVirtualKeyboard"in window)){if(window===window.top){let e=le.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>e})}else Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>sV.singleton,configurable:!0})}function lt(e){let i={};for(let r of Object.keys(e))switch(r){case"scriptDepth":if(f(e.scriptDepth))i.scriptDepth=[e.scriptDepth[0],e.scriptDepth[1]];else if("number"==typeof e.scriptDepth)i.scriptDepth=[e.scriptDepth,e.scriptDepth];else throw TypeError("Unexpected value for scriptDepth");break;case"mathVirtualKeyboardPolicy":let a=e.mathVirtualKeyboardPolicy.toLowerCase();if("sandboxed"===a){if(window!==window.top){let e=le.singleton;Object.defineProperty(window,"mathVirtualKeyboard",{get:()=>e})}a="manual"}i.mathVirtualKeyboardPolicy=a;break;case"letterShapeStyle":"auto"===e.letterShapeStyle?v.locale.startsWith("fr")?i.letterShapeStyle="french":i.letterShapeStyle="tex":i.letterShapeStyle=e.letterShapeStyle;break;case"defaultMode":["text","math","inline-math"].includes(e.defaultMode)?i.defaultMode=e.defaultMode:(console.error('MathLive 0.95.5:  valid values for defaultMode are "text", "math" or "inline-math"'),i.defaultMode="math");break;case"macros":i.macros=ee(e.macros);break;default:f(e[r])?i[r]=[...e[r]]:"object"!=typeof e[r]||e[r]instanceof Element||"computeEngine"===r?i[r]=e[r]:i[r]=u({},e[r])}return i}function li(e,i){let r;r="string"==typeof i?[i]:void 0===i?Object.keys(e):i;let a={};for(let i of r)null===e[i]?a[i]=null:f(e[i])?a[i]=[...e[i]]:"object"!=typeof e[i]||e[i]instanceof Element||"computeEngine"===i?a[i]=e[i]:a[i]=u({},e[i]);return"string"==typeof i?a[i]:a}function lr(){return{readOnly:!1,defaultMode:"math",macros:{},registers:{},colorMap:C,backgroundColorMap:z,letterShapeStyle:v.locale.startsWith("fr")?"french":"tex",minFontScale:0,smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,mathModeSpace:"",placeholderSymbol:"▢",popoverPolicy:"auto",environmentPopoverPolicy:"auto",keybindings:oO,inlineShortcuts:oC,inlineShortcutTimeout:0,mathVirtualKeyboardPolicy:"auto",virtualKeyboardTargetOrigin:null==window?void 0:window.origin,originValidator:"none",onInlineShortcut:()=>"",onScrollIntoView:null,onExport:oB,value:""}}function la(e){return"inline-math"===e.defaultMode?"math":e.defaultMode}function lo(e){return"number"==typeof e&&!Number.isNaN(e)}function ln(e){return Array.isArray(e)&&2===e.length}function ls(e){return null!=e&&"object"==typeof e&&"ranges"in e&&Array.isArray(e.ranges)}var ll="<mo>&#x2061;</mo>",lc="<mo>&#8290;</mo>";function ld(e){return e.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function lu(e,i){return e&&i.generateID?` extid="${e}"`:""}function lh(e,i,r){var a;let o=i.atoms[i.index-1];if(!o)return!1;if(!o.superscript&&!o.subscript){if((null==(a=i.atoms[i.index])?void 0:a.type)!=="subsup")return!1;o=i.atoms[i.index],i.index+=1}let n=i.lastType;i.lastType="";let s=lp(o.superscript,r);i.lastType="";let l=lp(o.subscript,r);if(i.lastType=n,!s&&!l)return!1;let c="";return s&&l?c=`<msubsup>${e}${l}${s}</msubsup>`:s?c=`<msup>${e}${s}</msup>`:l&&(c=`<msub>${e}${l}</msub>`),i.mathML+=c,i.lastType="",!0}function lp(e,i,r,a){null!=i||(i={});let o={atoms:[],index:null!=r?r:0,mathML:"",lastType:""};if("number"==typeof e||"boolean"==typeof e)o.mathML=e.toString();else if("string"==typeof e)o.mathML=e;else if(e instanceof ok)o.mathML=ly(e,i);else if(Array.isArray(e)){o.atoms=e;let r=0;for(a=a||(e?e.length:0);o.index<a;)if(function(e,i,r){i=null!=i?i:e.atoms.length;let a=e.index,o="";for(;e.index<i&&"text"===e.atoms[e.index].mode;)o+=e.atoms[e.index].value?e.atoms[e.index].value:" ",e.index+=1;return o.length>0&&(e.mathML+=`<mtext ${lu(e.atoms[a].id,r)}>${o}</mtext>`,e.lastType="mtext",!0)}(o,a,i)||function(e,i,r){var a;i=null!=i?i:e.atoms.length;let o=e.index,n="",s=function(e){let i=-1,r=e.index,a=!1,o=!1;for(;r<e.atoms.length&&!a&&!o;){let i=e.atoms[r];o=!(a=!i.isDigit())&&void 0!==i.superscript,r++}return o&&(i=r-1),i}(e);for(s>=0&&s<i&&(i=s);e.index<i&&e.atoms[e.index].isDigit();)n+=e.atoms[e.index].asDigit(),e.index+=1;return!(n.length<=0)&&(n="<mn"+lu(e.atoms[o].id,r)+">"+n+"</mn>",s<0&&(a=e).index<a.atoms.length&&a.atoms[a.index].superscript&&"subsup"===a.atoms[a.index].type&&(s=e.index,e.index+=1),lh(n,e,r)||(e.mathML+=n,e.lastType="mn"),!0)}(o,a,i)||function(e,i,r){var a,o,n,s,l,c,d,u,h;let p=!1;i=null!=i?i:e.atoms.length;let m="",f="",y=e.atoms[e.index],b=null!=(o=null==(a=y.style)?void 0:a.variant)?o:"",g=null!=(s=null==(n=y.style)?void 0:n.variantStyle)?s:"",v="";(b||g)&&(v=`mathvariant="${v=null!=(l=({upnormal:"normal",boldnormal:"bold",italicmain:"italic",bolditalicmain:"bold-italic","double-struck":"double-struck",boldfraktur:"bold-fraktur",calligraphic:"script",upcalligraphic:"script",script:"script",boldscript:"bold-script",boldcalligraphic:"bold-script",fraktur:"fraktur","upsans-serif":"sans-serif","boldsans-serif":"bold-sans-serif","italicsans-serif":"sans-serif-italic","bolditalicsans-serif":"sans-serif-bold-italic",monospace:"monospace"})[g+b])?l:""}"`);let x={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"ℏ","\\cdotp":"⋅","\\ldots":"…","\\cdots":"⋯","\\ddots":"⋱","\\vdots":"⋮","\\ldotp":"."};if(x[y.command]){e.index+=1;let i=`<mi${lu(y.id,r)}${v}>${x[y.command]}</mi>`;return("mi"===e.lastType||"mn"===e.lastType||"mtext"===e.lastType||"fence"===e.lastType)&&(i=lc+i),lh(i,e,r)||(e.mathML+=i,e.lastType="mi"),!0}if("\\operatorname"===y.command)f=lf(y.body),e.index+=1;else if(b||g)for(;e.index<i&&("mord"===y.type||"macro"===y.type)&&!y.isDigit()&&b===(null!=(d=null==(c=y.style)?void 0:c.variant)?d:"")&&g===(null!=(h=null==(u=y.style)?void 0:u.variantStyle)?h:"");)f+=lf([y]),e.index+=1,y=e.atoms[e.index];else"mord"!==y.type&&"macro"!==y.type||y.isDigit()||(f+=lf([y]),e.index+=1);if(f.length>0){p=!0,m=`<mi${v}>${f}</mi>`;let i=e.lastType;m.endsWith(">f</mi>")||m.endsWith(">g</mi>")?(m+=ll,e.lastType="applyfunction"):e.lastType=/^<mo>(.*)<\/mo>$/.test(m)?"mo":"mi",lh(m,e,r)||(("mi"===i||"mn"===i||"mtext"===i||"fence"===i)&&(m=lc+m),e.mathML+=m)}return p}(o,a,i)||function(e,i,r){let a=!1;i=null!=i?i:e.atoms.length;let o="",n="",s=e.atoms[e.index];if(!s)return!1;let l={"\\ne":"&ne;","\\neq":"&neq;","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"∥","\\mid":"∣","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉"};if(l[s.command]){e.index+=1;let i=`<mo${lu(s.id,r)}>${l[s.command]}</mo>`;return lh(i,e,r)||(e.mathML+=i,e.lastType="mo"),!0}if(e.index<i&&("mbin"===s.type||"mrel"===s.type))o+=ly(e.atoms[e.index],r),e.index+=1,n="mo";else if(e.index<i&&"mop"===s.type){if("over-under"===s.subsupPlacement&&(s.superscript||s.subscript)){let e=lm(s,r);s.superscript&&s.subscript?o+="<munderover>"+e+lp(s.subscript,r)+lp(s.superscript,r)+"</munderover>":s.superscript?o+="<mover>"+e+lp(s.superscript,r)+"</mover>":s.subscript&&(o+="<munder>"+e+lp(s.subscript,r)+"</munder>"),n="mo"}else{let i=e.atoms[e.index],a="\\operatorname"===i.value,s=a?'<mi class="MathML-Unit"'+lu(i.id,r)+">"+lf(i.value)+"</mi>":lm(i,r);o+=s,a||/^<mo>(.*)<\/mo>$/.test(s)?n=a?"mi":"mo":(o+=ll,n="applyfunction")}"mi"!==e.lastType&&"mn"!==e.lastType||/^<mo>(.*)<\/mo>$/.test(o)||(o=lc+o),e.index+=1}return o.length>0&&(a=!0,lh(o,e,r)||(e.mathML+=o,e.lastType=n)),a}(o,a,i)||function(e,i,r){let a=!1;i=null!=i?i:e.atoms.length;let o="",n="";if(e.index<i&&"mopen"===e.atoms[e.index].type){let s=!1,l=0,c=e.index,d=-1,u=c+1;for(;u<i&&!s;)"mopen"===e.atoms[u].type?l+=1:"mclose"===e.atoms[u].type&&(l-=1),-1===l&&(s=!0,d=u),u+=1;s&&(o="<mrow>"+lm(e.atoms[c],r)+lp(e.atoms,r,c+1,d)+lm(e.atoms[d],r)+"</mrow>",e.index=d+1,("mi"===e.lastType||"mn"===e.lastType||"mfrac"===e.lastType||"fence"===e.lastType)&&(e.mathML+=lc),lh(o,e,r)&&(a=!0,e.lastType="",o=""),n="fence")}return o.length>0&&(a=!0,e.mathML+=o,e.lastType=n),a}(o,a,i))r+=1;else if(o.index<a){let e=ly(o.atoms[o.index],i);"mn"===o.lastType&&e.length>0&&"genfrac"===o.atoms[o.index].type&&(e="<mo>&#x2064;</mo>"+e),"genfrac"===o.atoms[o.index].type?o.lastType="mfrac":o.lastType="",o.index+=1,lh(e,o,i)?r+=1:e.length>0&&(o.mathML+=e,r+=1)}r>1&&(o.mathML="<mrow>"+o.mathML+"</mrow>")}return o.mathML}function lm(e,i){let r="",a=lf(e.value);return a&&(r="<mo"+lu(e.id,i)+">"+a+"</mo>"),r}function lf(e){if(!e)return"";if("string"==typeof e)return ld(e);if(!Array.isArray(e)&&"string"==typeof e.body)return ld(e.body);let i="";for(let r of e)"string"==typeof r.value&&(i+=r.value);return ld(i)}function ly(e,i){var r,a,o,n,s,l,c,d,u,h,p,m,f,y,b,g,v,x,w,k,_,S;if("text"===e.mode)return`<mi${lu(e.id,i)}>${e.value}</mi>`;let M={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",longleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",longrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",longrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xleftrightarrows:"⇄",xRightleftharpoons:"⇌",longRightleftharpoons:"⇌",xLeftrightharpoons:"⇋",longLeftrightharpoons:"⇋"},L="",C="",z,A,E,K,D,T,{command:B}=e;if("\\error"===e.command)return`<merror${lu(e.id,i)}>${lp(e.body,i)}</merror>`;let $={"\\vert":"|","\\Vert":"∥","\\mid":"∣","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"⟨","\\rangle":"⟩","\\lfloor":"⌊","\\rfloor":"⌋","\\lceil":"⌈","\\rceil":"⌉"};switch(e.type){case"first":case"line":case"overlap":case"subsup":case"phantom":case"composition":case"rule":case"chem":break;case"group":case"root":L=lp(e.body,i);break;case"array":if((e.leftDelim&&"."!==e.leftDelim||e.rightDelim&&"."!==e.rightDelim)&&(L+="<mrow>",e.leftDelim&&"."!==e.leftDelim&&(L+="<mo>"+($[e.leftDelim]||e.leftDelim)+"</mo>")),L+="<mtable",e.colFormat){for(L+=' columnalign="',E=0;E<e.colFormat.length;E++)e.colFormat[E].align&&(L+=({l:"left",c:"center",r:"right"})[e.colFormat[E].align]+" ");L+='"'}for(L+=">",A=0;A<e.array.length;A++){for(L+="<mtr>",z=0;z<e.array[A].length;z++)L+="<mtd>"+lp(e.array[A][z],i)+"</mtd>";L+="</mtr>"}L+="</mtable>",(e.leftDelim&&"."!==e.leftDelim||e.rightDelim&&"."!==e.rightDelim)&&(e.rightDelim&&"."!==e.rightDelim&&(L+="<mo>"+($[e.leftDelim]||e.rightDelim)+"</mo>"),L+="</mrow>");break;case"genfrac":(e.leftDelim||e.rightDelim)&&(L+="<mrow>"),e.leftDelim&&"."!==e.leftDelim&&(L+="<mo"+lu(e.id,i)+">"+($[e.leftDelim]||e.leftDelim)+"</mo>"),e.hasBarLine?L+="<mfrac>"+(lp(e.above,i)||"<mi>&nbsp;</mi>")+(lp(e.below,i)||"<mi>&nbsp;</mi>")+"</mfrac>":L+="<mtable"+lu(e.id,i)+"><mtr>"+lp(e.above,i)+"</mtr><mtr>"+lp(e.below,i)+"</mtr></mtable>",e.rightDelim&&"."!==e.rightDelim&&(L+="<mo"+lu(e.id,i)+">"+($[e.rightDelim]||e.rightDelim)+"</mo>"),(e.leftDelim||e.rightDelim)&&(L+="</mrow>");break;case"surd":e.hasEmptyBranch("above")?L+="<msqrt"+lu(e.id,i)+">"+lp(e.body,i)+"</msqrt>":L+="<mroot"+lu(e.id,i)+">"+lp(e.body,i)+lp(e.above,i)+"</mroot>";break;case"leftright":L="<mrow>",e.leftDelim&&"."!==e.leftDelim&&(L+=`<mo${lu(e.id,i)}>${null!=(r=$[e.leftDelim])?r:e.leftDelim}</mo>`),e.body&&(L+=lp(e.body,i)),e.rightDelim&&"."!==e.rightDelim&&(L+=`<mo${lu(e.id,i)}>${null!=(a=$[e.rightDelim])?a:e.rightDelim}</mo>`),L+="</mrow>";break;case"sizeddelim":case"delim":L+=`<mo${lu(e.id,i)}>${$[e.delim]||e.delim}</mo>`;break;case"accent":L+='<mover accent="true"'+lu(e.id,i)+">"+lp(e.body,i)+"<mo>"+(({"\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"})[B]||e.accent)+"</mo></mover>";break;case"overunder":D=e.above,K=e.below,(e.svgAbove||D)&&(e.svgBelow||K)?T=e.body:D&&D.length>0?(T=e.body,null!=(n=null==(o=e.body)?void 0:o[0])&&n.below?(K=e.body[0].below,T=e.body[0].body):(null==(l=null==(s=e.body)?void 0:s[0])?void 0:l.type)==="first"&&null!=(d=null==(c=e.body)?void 0:c[1])&&d.below&&(K=e.body[1].below,T=e.body[1].body)):K&&K.length>0&&(T=e.body,null!=(h=null==(u=e.body)?void 0:u[0])&&h.above?(D=e.body[0].above,T=e.body[0].body):(null==(m=null==(p=e.body)?void 0:p[0])?void 0:m.type)==="first"&&null!=(y=null==(f=e.body)?void 0:f[1])&&y.above&&(D=e.body[1].overscript,T=e.body[1].body)),(e.svgAbove||D)&&(e.svgBelow||K)?L+=`<munderover ${lu(e.id,i)}>`+(null!=(b=M[e.svgBody])?b:lp(T,i))+(null!=(g=M[e.svgBelow])?g:lp(K,i))+(null!=(v=M[e.svgAbove])?v:lp(D,i))+"</munderover>":e.svgAbove||D?L+=`<mover ${lu(e.id,i)}>`+(null!=(x=M[e.svgBody])?x:lp(T,i))+(null!=(w=M[e.svgAbove])?w:lp(D,i))+"</mover>":(e.svgBelow||K)&&(L+=`<munder ${lu(e.id,i)}>`+(null!=(k=M[e.svgBody])?k:lp(T,i))+(null!=(_=M[e.svgBelow])?_:lp(K,i))+"</munder>");break;case"placeholder":L+="?";break;case"mord":{L="string"==typeof e.value?e.value:B;let r=B?B.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null;r?L="&#x"+r[1]+";":L.length>0&&L.startsWith("\\")&&("string"==typeof e.value&&e.value.charCodeAt(0)>255?L="&#x"+("000000"+e.value.charCodeAt(0).toString(16)).slice(-4)+";":"string"==typeof e.value?L=e.value.charAt(0):(console.error("Did not expect this"),L=""));let a=/\d/.test(L)?"mn":"mi";L=`<${a}${lu(e.id,i)}>${ld(L)}</${a}>`;break}case"mbin":case"mrel":case"minner":L=lm(e,i);break;case"mpunct":L='<mo separator="true"'+lu(e.id,i)+">"+B+"</mo>";break;case"mop":"​"!==e.body&&(L="<mo"+lu(e.id,i)+">"+("\\operatorname"===B?e.body:B||e.body)+"</mo>");break;case"box":L='<menclose notation="box"',e.backgroundcolor&&(L+=' mathbackground="'+e.backgroundcolor+'"'),L+=lu(e.id,i)+">"+lp(e.body,i)+"</menclose>";break;case"spacing":L+='<mspace width="'+(null!=(S=({"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5})[B])?S:0)+'em"/>';break;case"enclose":for(let i in L='<menclose notation="',e.notation)Object.prototype.hasOwnProperty.call(e.notation,i)&&e.notation[i]&&(L+=C+i,C=" ");L+=lu(e.id,i)+'">'+lp(e.body,i)+"</menclose>";break;case"prompt":L='<menclose notation="roundexbox""">'+lp(e.body,i)+"</menclose>";break;case"space":L+="&nbsp;";break;case"mopen":case"mclose":L+=lm(e,i);break;case"macro":{let r=e.command+lf(e.macroArgs);r&&(L+=`<mo ${lu(e.id,i)}>${r}</mo>`)}break;case"latexgroup":case"tooltip":L+=lp(e.body,i);break;case"latex":L+="<mtext"+lu(e.id,i)+">"+e.value+"</mtext>";break;case"text":L+=`<mtext ${lu(e.id,i)}x>${e.value}</mtext>`}return L}var lb={"\\ne":"≠","\\neq":"≠","−":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" "},lg={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"},lv={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"imaginary eye ","\\imaginaryJ":"imaginary jay ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\pm":"plus or minus","\\mp":"minus or plus","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","\\ne":"is not equal to ","\\neq":"is not equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","​":"","−":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},lx={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function lw(e){let i=0;if(f(e))for(let r of e)"first"!==r.type&&(i+=1);return 1===i}function lk(e){let i="";if(f(e))for(let r of e)"first"!==r.type&&"string"==typeof r.value&&(i+=r.value);return i}function l_(e){var i,r;if("sre"===window.MathfieldElement.textToSpeechRules&&("sre"in window||"SRE"in window)){let a=lp(e);if(a){window.MathfieldElement.textToSpeechMarkup&&(window.MathfieldElement.textToSpeechRulesOptions=null!=(i=window.MathfieldElement.textToSpeechRulesOptions)?i:{},window.MathfieldElement.textToSpeechRulesOptions.markup=window.MathfieldElement.textToSpeechMarkup,"ssml"===window.MathfieldElement.textToSpeechRulesOptions.markup&&(window.MathfieldElement.textToSpeechRulesOptions.markup="ssml_step"),window.MathfieldElement.textToSpeechRulesOptions.rate=window.MathfieldElement.speechEngineRate);let e=null!=(r=window.SRE)?r:window.sre.System.getInstance();window.MathfieldElement.textToSpeechRulesOptions&&e.setupEngine(window.MathfieldElement.textToSpeechRulesOptions);let o="";try{o=e.toSpeech(a)}catch(e){console.error("MathLive 0.95.5: `SRE.toSpeech()` runtime error",e)}return o}return""}let a=function e(i,r){var a,o,n,s,l,c,d,u;function h(e){return"<emphasis>"+e+"</emphasis>"}if(!r)return"";let p="";if(f(r)){let o=!1,n=!1;for(let s=0;s<r.length;s++)"first"!==r[s].type&&("text"!==r[s].mode&&(n=!1),s<r.length-2&&"mopen"===r[s].type&&"mclose"===r[s+2].type&&"mord"===r[s+1].type?(p+=" of "+h(e(i,r[s+1])),s+=2):"text"===r[s].mode?n?p+=null!=(a=r[s].value)?a:" ":(n=!0,p+=e("text",r[s])):r[s].isDigit()?o?p+=r[s].asDigit():(o=!0,p+=e(i,r[s])):(o=!1,p+=e(i,r[s])))}else if("text"===r.mode)r.id&&"math"===i&&(p+='<mark name="'+r.id.toString()+'"/>'),p+=r.value;else{r.id&&"math"===i&&(p+='<mark name="'+r.id.toString()+'"/>');let a="",m="",y="",b=!1,{command:g}=r;switch(g){case"\\vec":return"vector "+e(i,r.body);case"\\acute":return e(i,r.body)+" acute";case"\\grave":return e(i,r.body)+" grave";case"\\dot":return"dot over"+e(i,r.body);case"\\ddot":return"double dot over"+e(i,r.body);case"\\mathring":return"ring over"+e(i,r.body);case"\\tilde":case"\\widetilde":return"tilde over"+e(i,r.body);case"\\bar":return e(i,r.body)+" bar";case"\\breve":return e(i,r.body)+" breve";case"\\check":case"\\widecheck":return"check over "+e(i,r.body);case"\\hat":case"\\widehat":return"hat over"+e(i,r.body);case"\\overarc":case"\\overparen":case"\\wideparen":return"arc over "+e(i,r.body);case"\\underarc":case"\\underparen":return"arc under "+e(i,r.body)}switch(r.type){case"prompt":p+=' <break time="300ms"/> '+(r.body.length>1?'start input . <break time="500ms"/> '+e(i,r.body)+'. <break time="500ms"/> end input':"blank")+'. <break time="700ms"/>'+(null!=(o=r.correctness)?o:"")+' . <break time="700ms"/> ';break;case"array":let v=r.array,x=r.environmentName;if(Object.keys(lx).includes(x)){p+=` begin ${lx[x]} `;for(let i=0;i<v.length;i++){i>0&&(p+=","),p+=` row ${i+1} `;for(let r=0;r<v[i].length;r++)r>0&&(p+=","),p+=` column ${r+1}: `+e("math",v[i][r])}p+=` end ${lx[x]} `}break;case"group":"\\ne"===g?p+=" not equal ":("\\not"===g&&(p+=" not "),p+=e("math",r.body));break;case"root":p+=e("math",r.body);break;case"genfrac":if(a=e("math",r.above),m=e("math",r.below),lw(r.above)&&lw(r.below)){let e={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[lk(r.above)+"/"+lk(r.below)];e?p=e:p+=a+" over "+m}else p+=' the fraction <break time="150ms"/>'+a+' over <break time="150ms"/>'+m+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(y=e("math",r.body),r.hasEmptyBranch("above"))p+=lw(r.body)?" the square root of "+y+" , ":' the square root of <break time="200ms"/>'+y+'. <break time="200ms"/> End square root';else{let i=e("math",r.above),a=(i=i.trim()).replace(/<mark([^/]*)\/>/g,"");"3"===a?p+=' the cube root of <break time="200ms"/>'+y+'. <break time="200ms"/> End cube root':"n"===a?p+=' the nth root of <break time="200ms"/>'+y+'. <break time="200ms"/> End root':p+=' the root with index: <break time="200ms"/>'+i+', of <break time="200ms"/>'+y+'. <break time="200ms"/> End root'}break;case"leftright":p+=(null!=(n=r.leftDelim?lv[r.leftDelim]:void 0)?n:r.leftDelim)+e("math",r.body)+(null!=(s=r.rightDelim?lv[r.rightDelim]:void 0)?s:r.rightDelim);break;case"rule":case"overunder":case"overlap":break;case"macro":let w=g.replace(/^\\/g,""),k=Y()[w];k&&(null!=k&&k.expand?p+=e("math",r.body):p+=`${w} `);break;case"placeholder":p+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if("\\mathbin"===g||"\\mathrel"===g||"\\mathopen"===g||"\\mathclose"===g||"\\mathpunct"===g||"\\mathord"===g||"\\mathinner"===g){p=e(i,r.body);break}let a=r.isDigit()?r.asDigit():r.value,o=r.command;if(("delim"===r.type||"sizeddelim"===r.type)&&(a=o=r.value),"text"===i)p+=a;else{if("mbin"===r.type&&(p+='<break time="150ms"/>'),a){let e=lv[a]||(o?lv[o.trim()]:"");if(e)p+=" "+e;else{let e;p+=(o?(c=o.trim(),e="",c.startsWith("\\")&&(e=" "+c.replace("\\","")+" "),e):"")||(d=a,window.MathfieldElement.textToSpeechMarkup?/[a-z]/.test(d)?` <say-as interpret-as="character">${d}</say-as>`:/[A-Z]/.test(d)?`capital <say-as interpret-as="character">${d.toLowerCase()}</say-as>`:d:/[a-z]/.test(d)?" '"+d.toUpperCase()+"'":/[A-Z]/.test(d)?" 'capital "+d.toUpperCase()+"'":d)}}else p+=e("math",r.body);"mbin"===r.type&&(p+='<break time="150ms"/>')}break}case"mop":if("​"!==r.value){let i=r.command;if("\\sum"===i){if(r.hasEmptyBranch("superscript")||r.hasEmptyBranch("subscript")){if(r.hasEmptyBranch("subscript"))p+=" the summation of";else{let i=e("math",r.subscript);p+=' the summation from <break time="200ms"/>'+(i=i.trim())+'<break time="200ms"/> of <break time="150ms"/>',b=!0}}else{let i=e("math",r.superscript);i=i.trim();let a=e("math",r.subscript);p+=' the summation from <break time="200ms"/>'+(a=a.trim())+'<break time="200ms"/> to  <break time="200ms"/>'+i+'<break time="200ms"/> of <break time="150ms"/>',b=!0}}else if("\\prod"===i){if(r.hasEmptyBranch("superscript")||r.hasEmptyBranch("subscript")){if(r.hasEmptyBranch("subscript"))p+=" the product  of ";else{let i=e("math",r.subscript);p+=' the product from <break time="200ms"/>'+(i=i.trim())+'<break time="200ms"/> of <break time="150ms"/>',b=!0}}else{let i=e("math",r.superscript);i=i.trim();let a=e("math",r.subscript);p+=' the product from <break time="200ms"/>'+(a=a.trim())+'<break time="200ms"/> to <break time="200ms"/>'+i+'<break time="200ms"/> of <break time="150ms"/>',b=!0}}else if("\\int"===i){if(r.hasEmptyBranch("superscript")||r.hasEmptyBranch("subscript"))p+=' the integral of <break time="200ms"/> ';else{let i=e("math",r.superscript);i=i.trim();let a=e("math",r.subscript);p+=' the integral from <break time="200ms"/>'+h(a=a.trim())+'<break time="200ms"/> to <break time="200ms"/>'+h(i)+' <break time="200ms"/> of ',b=!0}}else"string"==typeof r.value?p+=(null!=(l=lv[r.value])?l:r.command?lv[r.command]:void 0)||" "+r.value:r.command&&("\\mathop"===r.command?p+=e("math",r.body):"\\operatorname"===r.command?p+=(u=r.body)?u.map(e=>e.value).join(""):"":p+=r.command.startsWith("\\")?" "+r.command.slice(1):" "+r.command)}break;case"enclose":p+=" crossed out "+(y=e("math",r.body))+". End crossed out."}if(!b&&!r.hasEmptyBranch("superscript")){let a=e(i,r.superscript),o=(a=a.trim()).replace(/<[^>]*>/g,"");if(lw(r.superscript)){if("math"===i){let e=function(e){if(f(e)){for(let i of e)if("first"!==i.type&&i.id)return i.id.toString()}return""}(r.superscript);e&&(p+='<mark name="'+e+'"/>')}"′"===o?p+=" prime ":"2"===o?p+=" squared ":"3"===o?p+=" cubed ":Number.isNaN(Number.parseInt(o))?p+=" to the "+a+"; ":p+=' to the <say-as interpret-as="ordinal">'+o+"</say-as> power; "}else Number.isNaN(Number.parseInt(o))?p+=" raised to the "+a+"; ":p+=' raised to the <say-as interpret-as="ordinal">'+o+"</say-as> power; "}if(!b&&!r.hasEmptyBranch("subscript")){let i=e("math",r.subscript);i=i.trim(),p+=lw(r.subscript)?" sub "+i:" subscript "+i+". End subscript. "}}return p}("math",e);if("ssml"===window.MathfieldElement.textToSpeechMarkup){let e="";window.MathfieldElement.speechEngineRate&&(e='<prosody rate="'+window.MathfieldElement.speechEngineRate+'">'),a='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+e+"<p><s>"+a+"</s></p>"+(e?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else a="mac"===window.MathfieldElement.textToSpeechMarkup&&"macos"===g()?a.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):a.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return a}function lS(e){var i;let r;if("prompt"===e.parent.type)"body"===e.parentBranch&&(r="prompt");else if("body"===e.parentBranch)r=e.type&&null!=(i=({enclose:"cross out",leftright:"delimiter",surd:"square root",root:"math field",mop:"operator",first:"first"})[e.type])?i:"parent";else if("genfrac"===e.parent.type){if("above"===e.parentBranch)return"numerator";if("below"===e.parentBranch)return"denominator"}else"surd"===e.parent.type?"above"===e.parentBranch&&(r="index"):"superscript"===e.parentBranch?r="superscript":"subscript"===e.parentBranch&&(r="subscript");return null!=r?r:"parent"}sF({speak:(e,i,r)=>(function(e,i,r){var a,o;r=null!=r?r:{withHighlighting:!1};let{model:n}=e,s=function(e){let i=null;switch(e){case"all":default:i=n.root;break;case"selection":i=n.getAtoms(n.selection);break;case"left":i=n.getAtoms(n.offsetOf(n.at(n.position).leftSibling),n.position);break;case"right":i=n.getAtoms(n.position,n.offsetOf(n.at(n.position).rightSibling));break;case"group":i=n.getAtoms(n.getSiblingsRange(n.position));break;case"parent":{let{parent:e}=n.at(n.position);i=null!=e&&e.parent?e:n.root}}return i}(i);if(null===s)return null==(o=(a=window.MathfieldElement).speakHook)||o.call(a,function(e){let i="";switch(e){case"all":case"group":break;case"selection":i="no selection";break;case"left":i="at start";break;case"right":i="at end";break;case"parent":i="no parent"}return i}(i)),!1;(r.withHighlighting||"amazon"===window.MathfieldElement.speechEngine)&&(window.MathfieldElement.textToSpeechMarkup=window.sre&&"sre"===window.MathfieldElement.textToSpeechRules?"ssml_step":"ssml");let l=l_(s);return y()&&r.withHighlighting?(cI().readAloudMathField=e,sP(e,{forHighlighting:!0}),window.MathfieldElement.readAloudHook&&window.MathfieldElement.readAloudHook(e.field,l)):window.MathfieldElement.speakHook&&window.MathfieldElement.speakHook(l),!1})(e,i,r)},{target:"mathfield"});var lM=class{constructor(e,i,r,a){this.mathfield=e,this.mode=i,this.silenceNotifications=!1,this.listeners=a,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.root=r}dispose(){this.mathfield=void 0,this.listeners.onSelectionDidChange=void 0,this.listeners.onContentWillChange=void 0}getState(){let e={ranges:[...this._selection.ranges]};return this.selection.direction&&"none"!==this.selection.direction&&(e.direction=this.selection.direction),{content:this.root.toJson(),selection:e,mode:this.mode}}setState(e,i){var r;let a=this.silenceNotifications;this.silenceNotifications=null==(r=null==i?void 0:i.silenceNotifications)||r;let o={};if((null==i?void 0:i.type)==="undo"&&(o={inputType:"historyUndo"}),(null==i?void 0:i.type)==="redo"&&(o={inputType:"historyRedo"}),sp(this,o)){let i=this.silenceNotifications;this.silenceNotifications=!0,this.mode=e.mode,this.root=nQ(e.content),this.selection=e.selection,this.silenceNotifications=i,sm(this,o)}this.silenceNotifications=a}get atoms(){return this.root.children}get selection(){return this._selection}set selection(e){this.setSelection(e)}setSelection(e,i){return(!!this.mathfield.contentEditable||"none"!==this.mathfield.userSelect)&&this.deferNotifications({selection:!0},()=>{var r,a,o;let n=this.normalizeSelection(e,i);if(void 0===n)throw TypeError("Invalid selection");if(1===n.ranges.length&&n.ranges[0][0]===n.ranges[0][1]){let e=n.ranges[0][0];return this.mathfield.dirty||null!=(r=this.at(e))&&r.parentPrompt||!this.mathfield.hasEditablePrompts?(this._anchor=e,this._position=e,this._selection=n,!1):null!=(a=this.at(e-1))&&a.parentPrompt?(this._anchor=this.normalizeOffset(e-1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor),!0):null!=(o=this.at(e+1))&&o.parentPrompt?(this._anchor=this.normalizeOffset(e+1),this._position=this._anchor,this._selection=this.normalizeSelection(this._anchor),!0):(this._anchor=0,this._position=0,this._selection={ranges:[[0,0]]},!1)}let s=oM(n);"backward"===n.direction?[this._position,this._anchor]=s:[this._anchor,this._position]=s;let l=this.at(s[0]+1),c=this.at(s[1]),d=ok.commonAncestor(l,c);return(null==d?void 0:d.type)==="array"&&l.parent===d&&c.parent,this._selection={ranges:[s],direction:n.direction},this._position>=0&&(this._position,this.lastOffset),!1})}setPositionHandlingPlaceholder(e){var i;let r=this.at(e);(null==r?void 0:r.type)==="placeholder"?this.setSelection(e-1,e):(null==(i=null==r?void 0:r.rightSibling)?void 0:i.type)==="placeholder"?this.setSelection(e,e+1):this.position=e,r instanceof nF&&r.isSuggestion&&(r.isSuggestion=!1),this.mathfield.stopCoalescingUndo()}get position(){return this._position}set position(e){this.setSelection(e,e)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return 1===Math.abs(this._anchor-this._position)&&"placeholder"===this.at(Math.max(this._anchor,this._position)).type}collapseSelection(e="forward"){return this._anchor!==this._position&&("backward"===e?this.position=Math.min(this._anchor,this._position):this.position=Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(e){return this.atoms[e]}offsetOf(e){return this.atoms.indexOf(e)}getSiblingsRange(e){let i=this.at(e),{parent:r}=i;if(!r)return[0,this.lastOffset];let a=i.parent.branch(i.parentBranch);return[this.offsetOf(a[0]),this.offsetOf(a[a.length-1])]}getBranchRange(e,i){let r=this.at(e).branch(i);return[this.offsetOf(r[0]),this.offsetOf(r[r.length-1])]}getAtoms(e,i,r){let a,o,n=null!=r?r:{};if(ls(e)){if(n=null!=i?i:{},e.ranges.length>1)return e.ranges.reduce((e,i)=>[...e,...this.getAtoms(i,n)],[]);e=e.ranges[0]}if(lo(e)){if(a=e,!lo(i))return[];o=i}else[a,o]=e,n=null!=i?i:{};if(!Number.isFinite(a))return[];void 0===n.includeChildren&&(n.includeChildren=!1),a<0&&(a=this.lastOffset-a+1),o<0&&(o=this.lastOffset-o+1);let s=Math.min(a,o)+1,l=Math.max(a,o);if(!n.includeChildren&&1===s&&l===this.lastOffset)return[this.root];let c=[];for(let e=s;e<=l;e++){let i=this.atoms[e];lL(this,i,s,l)&&c.push(i)}return n.includeChildren||(c=c.filter(e=>{let i=!1,{parent:r}=e;for(;r&&!i;)i=lL(this,r,s,l),r=r.parent;return!i})),c}getAllAtoms(e=0){let i=[],r=this.lastOffset;for(let a=e;a<=r;a++)i.push(this.atoms[a]);for(let r=0;r<e;r++)i.push(this.atoms[r]);return i}findAtom(e,i=0,r="forward"){let a,o=this.lastOffset;if("forward"===r){for(let r=i;r<=o;r++)if(e(a=this.atoms[r]))return a;for(let r=0;r<i;r++)if(e(a=this.atoms[r]))return a;return}for(let r=i;r>=0;r--)if(e(a=this.atoms[r]))return a;for(let r=o;r>i;r--)if(e(a=this.atoms[r]))return a}extractAtoms(e){let i=this.getAtoms(e);if(1===i.length&&!i[0].parent){if("root"!==i[0].type)return i=this.root.cells.flat(),this.root=new ok({type:"root",body:[]}),i;(i=[...i[0].body]).shift()}for(let e of i)e.parent.removeChild(e);return i}deleteAtoms(e){this.extractAtoms(e),this.position=e[0]}atomToString(e,i){let r=null!=i?i:"latex";if(r.startsWith("latex"))return ok.serialize([e],{expandMacro:"latex-expanded"===r,skipStyles:"latex-unstyled"===r,defaultMode:this.mathfield.options.defaultMode});if("math-ml"===r)return lp(e);if("spoken"===r)return l_(e);if("spoken-text"===r){let i=window.MathfieldElement.textToSpeechMarkup;window.MathfieldElement.textToSpeechMarkup="";let r=l_(e);return window.MathfieldElement.textToSpeechMarkup=i,r}if("spoken-ssml"===r||"spoken-ssml-with-highlighting"===r){let i=window.MathfieldElement.textToSpeechMarkup;window.MathfieldElement.textToSpeechMarkup="ssml";let r=l_(e);return window.MathfieldElement.textToSpeechMarkup=i,r}return"ascii-math"===r?function e(i){var r,a,o,n,s,l,c,d,u,h,p,m,y;if(!i)return"";if(f(i)){if(0===i.length||("first"===i[0].type&&(i=i.slice(1)),0===i.length))return"";let a="";if("latex"===i[0].mode)for(let r of i)a+=e(r);else if("text"===i[0].mode){let o=0;for(a='"';(null==(r=i[o])?void 0:r.mode)==="text";)a+=i[o].body?e(i[o].body):i[o].value,o++;a+='"'+e(i.slice(o))}else if("math"===i[0].mode){let r=0;for(;i[r]&&"math"===i[r].mode;)a+=e(i[r]),r++;a+=e(i.slice(r))}else console.warn("toASCIIMath: Unexpected mode");return a.trim()}if("text"===i.mode)return'"'+i.value+'"';let b="",{command:g}=i,v;if("\\placeholder"===g)return`(${e(i.body)})`;switch(i.type){case"first":return"";case"group":case"root":b=null!=(a=lb[g])?a:e(i.body);break;case"genfrac":{let r=i;(r.leftDelim||r.rightDelim)&&(b+="."!==r.leftDelim&&r.leftDelim?r.leftDelim:"{:"),r.hasBarLine?b+="("+e(r.above)+")/("+e(r.below)+")":b+="("+e(r.above)+"),("+e(r.below)+")",(r.leftDelim||r.rightDelim)&&(b+="."!==r.rightDelim&&r.rightDelim?r.rightDelim:"{:")}break;case"surd":b+=i.hasEmptyBranch("above")?"sqrt("+e(i.body)+")":"root("+e(i.above)+")("+e(i.body)+")";break;case"latex":b=i.value;break;case"leftright":{let r=i;b+=("."!==r.leftDelim&&r.leftDelim?r.leftDelim:"{:")+e(r.body)+("."!==r.rightDelim&&r.rightDelim?r.rightDelim:":}")}break;case"sizeddelim":case"delim":case"overlap":case"overunder":case"box":break;case"mord":(b=null!=(n=null!=(o=lb[g])?o:g)?n:"string"==typeof i.value?i.value:"").startsWith("\\")&&(b+=" "),(v=g?g.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null)?b=String.fromCodePoint(Number.parseInt("0x"+v[1])):b.length>0&&b.startsWith("\\")&&(b="string"==typeof i.value?i.value.charAt(0):i.command);break;case"mbin":case"mrel":case"minner":b=null!=(l=null!=(s=lb[g])?s:lg[g])?l:i.value;break;case"mopen":case"mclose":b+=i.value;break;case"mpunct":b=null!=(c=lg[g])?c:g;break;case"mop":"​"!==i.value&&(b=""+("\\operatorname"===g?e(i.body):null!=(d=i.value)?d:g)+" ");break;case"array":let x=i.array,w=i.environmentName,k=null!=(u=({bmatrix:["[","]"],"bmatrix*":["[","]"]})[w])?u:["(",")"],_=[];for(let i of x){let r=[];for(let a of i)r.push(k[0]+e(a)+k[1]);_.push(r.join(","))}let S=null!=(h=({bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]})[w])?h:["(",")"];b=S[0]+_.join(",")+S[1];break;case"spacing":b=null!=(p=lb[g])?p:" ";break;case"enclose":b="("+e(i.body)+")";break;case"space":b=" ";break;case"subsup":b="";break;case"macro":b=null!=(y=null!=(m=lb[g])?m:lg[g])?y:e(i.body)}if(!i.hasEmptyBranch("subscript")){b+="_";let r=e(i.subscript);b+=r.length>1?"("+r+")":r}if(!i.hasEmptyBranch("superscript")){b+="^";let r=e(i.superscript);b+=r.length>1?"("+r+")":r}return b}(e):(console.error(`MathLive 0.95.5: Unexpected format "${r}`),"")}getValue(e,i,r){let a,o;if(void 0===e)return this.atomToString(this.root,"latex");if("string"==typeof e&&"math-json"!==e)return this.atomToString(this.root,e);if(lo(e)&&lo(i)?(a=[this.normalizeRange([e,i])],o=null!=r?r:"latex"):ln(e)?(a=[this.normalizeRange(e)],o=i):ls(e)?(a=e.ranges,o=i):(a=[this.normalizeRange([0,-1])],o=null!=e?e:"latex"),"math-json"===o){if(!window.MathfieldElement.computeEngine)return window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`The CortexJS Compute Engine library is not available.
Load the library, for example with:
import "https://unpkg.com/@cortex-js/compute-engine?module"`),'["Error", "compute-engine-not-available"]';let e=this.getValue({ranges:a},"latex-unstyled");try{let i=window.MathfieldElement.computeEngine.parse(e);return JSON.stringify(i.json)}catch(e){return JSON.stringify(["Error",`'${e.toString()}'`])}}if(o.startsWith("latex")){let e={expandMacro:"latex-expanded"===o,skipStyles:"latex-unstyled"===o,defaultMode:this.mathfield.options.defaultMode};return a4(a.map(i=>ok.serialize(this.getAtoms(i),e)))}return a.map(e=>this.getAtoms(e).map(e=>this.atomToString(e,o)).join("")).join("")}extendSelectionTo(e,i){return(!!this.mathfield.contentEditable||"none"!==this.mathfield.userSelect)&&this.deferNotifications({selection:!0},()=>{let[r,a]=this.normalizeRange([e,i]),{parent:o}=this.at(a);if(o&&("genfrac"===o.type||"subsup"===o.type))for(;o!==this.root&&lC(this,o,[r,a]);)a=this.offsetOf(o),o=o.parent;for(o=this.at(r).parent;o!==this.root&&lC(this,o,[r,a]);)r=this.offsetOf(o.leftSibling),o=o.parent;if((null==(o=this.at(a).parent)?void 0:o.type)==="genfrac")for(;o!==this.root&&lC(this,o,[r,a]);)a=this.offsetOf(o),o=o.parent;this._position=this.normalizeOffset(i),this._selection={ranges:[[r,a]],direction:"none"}})}announce(e,i,r=[]){var a,o;(null==(o=null==(a=this.mathfield.host)?void 0:a.dispatchEvent(new CustomEvent("announce",{detail:{command:e,previousPosition:i,atoms:r},cancelable:!0,bubbles:!0,composed:!0})))||o)&&function(e,i,r,a){let o="";if("plonk"===i)window.MathfieldElement.playSound("plonk"),e.flushInlineShortcutBuffer();else if("delete"===i)o="deleted: "+l_(a);else if("focus"===i||i.includes("move"))o=function(e,i){if(Number.isNaN(i))return"";let r=e.at(i);if(!r||r.treeDepth<=e.at(e.position).treeDepth)return"";let a="",o=r.parent,n=e.at(e.position).parent;for(;o!==e.root&&o!==n;)a+=`out of ${lS(o)};`,o=o.parent;return a}(e.model,r)+(e.model.selectionIsCollapsed?"":"selected: ")+function(e){if(!e.selectionIsCollapsed)return""+l_(e.getAtoms(e.selection));let i="",r=e.at(e.position),a=lS(r);return r.isFirstSibling&&(i=(a?"start of "+a:"unknown")+": "),r.isLastSibling?r.isFirstSibling||(i+=a?"end of "+a:"unknown"):i+=""+l_(r),i}(e.model);else if("replacement"===i)o=""+l_(e.model.at(e.model.position));else if("line"===i){let i=""+l_(e.model.root);e.keyboardDelegate.setAriaLabel(i)}else o=a?i+" "+l_(a):i;if(o){let i=e.ariaLiveText.textContent.includes("\xa0")?"   ":" \xa0 ";e.ariaLiveText.textContent=o+i}}(this.mathfield,e,i,r)}deferNotifications(e,i){let r=this._selection,a=this._anchor,o=this._position,n=this.silenceNotifications;this.silenceNotifications=!0;let s=this.root.changeCounter;i();let l=this.root.changeCounter!==s,c=a!==this._anchor||o!==this._position||"different"===function(e,i){if(e.direction===i.direction){let o=e.ranges.length;if(i.ranges.length===o){var r,a;let n=0;for(;n<o&&"equal"==(r=e.ranges[n],a=i.ranges[n],r[0]===a[0]&&r[1]===a[1]?"equal":"different");)n++;return n===o?"equal":"different"}}return"different"}(this._selection,r);return this.silenceNotifications=n,e.content&&l&&sm(this,{inputType:e.type}),e.selection&&c&&sh(this),l||c}normalizeOffset(e){return e>0?e=Math.min(e,this.lastOffset):e<0&&(e=this.lastOffset+e+1),e}normalizeRange(e){let[i,r]=e;return(i=this.normalizeOffset(i))<(r=this.normalizeOffset(r))?[i,r]:[r,i]}normalizeSelection(e,i){var r;let a;if(lo(e)){let r=this.normalizeOffset(e);if(lo(i)){let e=this.normalizeOffset(i);a=r<=e?{ranges:[[r,e]],direction:"none"}:{ranges:[[e,r]],direction:"backward"}}else a={ranges:[[r,r]],direction:"none"}}else if(ln(e)){let i=this.normalizeOffset(e[0]),r=this.normalizeOffset(e[1]);a=i<=r?{ranges:[[i,r]],direction:"none"}:{ranges:[[r,i]],direction:"backward"}}else ls(e)&&(a={ranges:e.ranges.map(e=>this.normalizeRange(e)),direction:null!=(r=e.direction)?r:"none"});return a}get parentEnvironment(){let e=this.at(this.position).parent;if(e){for(;e.parent&&"array"!==e.type;)e=e.parent;if("array"===e.type)return e}}};function lL(e,i,r,a){let o=e.offsetOf(i);if(o<r||o>a)return!1;if(!i.hasChildren)return!0;let n=e.offsetOf(i.firstChild);if(n>=r&&n<=a){let o=e.offsetOf(i.lastChild);if(o>=r&&o<=a)return!0}return!1}function lC(e,i,r){if(!(null!=i&&i.hasChildren))return!1;let[a,o]=r,n=e.offsetOf(i.firstChild),s=e.offsetOf(i.lastChild);return n>=a&&n<=o&&s>=n&&s<=o}function lz(e,i=1){return!function(e){for(let i of e)for(let e of i)if(e.length>0)return!1;return!0}(e)?e.map(e=>0===e.length?[[new ok({type:"first"})]]:e.map(e=>0===e.length?[new ok({type:"first"})]:("first"!==e[0].type&&e.unshift(new ok({type:"first"})),e))):Array(i).fill([[new ok({type:"first"}),new nd]])}function lA(e,i=[[[]]],r=[],a=[]){switch(i=lz(i,["split","align","align*","aligned","eqnarray"].includes(e)?2:1),e){case"math":case"displaymath":break;case"center":return new ny(e,i,r,{columns:[{align:"c"}]});case"multline":case"multline*":return new ny(e,i,r,{columns:[{align:"m"}],leftDelim:".",rightDelim:"."});case"split":return new ny(e,i,r,{columns:[{align:"r"},{align:"l"}],minColumns:2});case"gather":case"gathered":return new ny(e,i,r,{columns:[{gap:.25},{align:"c"},{gap:0}]});case"pmatrix":case"pmatrix*":return new ny(e,i,r,{mathstyleName:"textstyle",leftDelim:"(",rightDelim:")",columns:lE(a[0])});case"bmatrix":case"bmatrix*":return new ny(e,i,r,{mathstyleName:"textstyle",leftDelim:"[",rightDelim:"]",columns:lE(a[0])});case"Bmatrix":case"Bmatrix*":return new ny(e,i,r,{mathstyleName:"textstyle",leftDelim:"\\lbrace",rightDelim:"\\rbrace",columns:lE(a[0])});case"vmatrix":case"vmatrix*":return new ny(e,i,r,{mathstyleName:"textstyle",leftDelim:"\\vert",rightDelim:"\\vert",columns:lE(a[0])});case"Vmatrix":case"Vmatrix*":return new ny(e,i,r,{mathstyleName:"textstyle",leftDelim:"\\Vert",rightDelim:"\\Vert",columns:lE(a[0])});case"matrix":case"matrix*":return new ny(e,i,r,{mathstyleName:"textstyle",leftDelim:".",rightDelim:".",columns:lE(null==a?void 0:a[0])});case"smallmatrix":case"smallmatrix*":return new ny(e,i,r,{mathstyleName:"scriptstyle",columns:lE(null==a?void 0:a[0]),colSeparationType:"small",arraystretch:.5});case"cases":case"dcases":return new ny(e,i,r,{mathstyleName:"dcases"===e?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]});case"rcases":return new ny(e,i,r,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]});case"lines":return new ny(e,i,r,{leftDelim:".",rightDelim:".",columns:[{align:"l"}]});case"align":case"align*":case"aligned":case"eqnarray":{let a=0;for(let e of i)a=Math.max(a,e.length);let o=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],n=2;for(;n<a;)o.push({gap:1},{align:"r"},{gap:.25},{align:"l"}),n+=2;return o.push({gap:0}),new ny(e,i,r,{arraycolsep:0,columns:o,minColumns:2})}}return new ny(e,i,r,{mathstyleName:"textstyle"})}function lE(e){return null!=e?e:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}]}function lK(e,i,r){let a=e.getCell(i,r);return!!a&&2===a.length&&"placeholder"===a[1].type}function lD(e,i,r,a){let o;let n=(o=i.getCell(r,a))?[e.offsetOf(o[0]),e.offsetOf(o[o.length-1])]:-1;"number"!=typeof n&&e.setSelection(n)}function lT(e,i,r,a,o){let n=i.getCell(r,a);n&&e.setPositionHandlingPlaceholder(e.offsetOf(n["start"===o?0:n.length-1]))}function lB(e,i){let[r,[a,o]]=function(e,i){let r=e.at(e.position);for(;r&&!(r.parent instanceof ny);)r=r.parent;if(r&&"array"===r.type&&r.environmentName,!r||!(r.parent instanceof ny)){let a=e.at(e.position);if(!(r=a).parent.parent){let r,o=e.extractAtoms([e.position,e.lastOffset]),n=e.extractAtoms([0,e.position]);return 0===n.length&&(n=lF()),0===o.length&&(o=lF()),i.endsWith("column")?(r=lA("split",[[n,o]]),e.root=r,lK(r,0,0)?lD(e,r,0,0):lK(r,0,1)?lD(e,r,0,1):e.position=e.offsetOf(a)):(r=lA("lines",[[n],[o]]),e.root=r,lK(r,0,0)?lD(e,r,0,0):lK(r,1,0)?lD(e,r,1,0):e.position=e.offsetOf(a)),[void 0,[0,0]]}if(r.parent instanceof n_){let a=r.parent,o=e.extractAtoms([e.position,e.offsetOf(a.lastChild)]),n=e.extractAtoms([e.offsetOf(a.firstChild),e.position]);0===n.length&&(n=lF()),0===o.length&&(o=lF());let s="pmatrix",l=a.leftDelim,c=a.rightDelim;"("===l&&(")"===c||"?"===c)?s="pmatrix":("["===l||"\\lbrack"===l)&&("]"===c||"\\rbrack"===c||"?"===c)?s="bmatrix":"\\vert"===l&&"\\vert"===c?s="vmatrix":"\\Vert"===l&&"\\Vert"===c?s="Vmatrix":("{"===l||"\\lbrace"===l)&&("."===c||"?"===c)&&(s="cases");let d=lA(s,i.endsWith("column")?[[n,o]]:[[n],[o]]);return a.parent.addChildBefore(d,a),a.parent.removeChild(a),lK(d,0,0)?lD(e,d,0,0):i.endsWith("column")?lK(d,0,1)?lD(e,d,0,1):e.position=e.offsetOf(r):lK(d,1,0)?lD(e,d,1,0):e.position=e.offsetOf(r),[void 0,[0,0]]}}return r&&r.parent instanceof ny?[r.parent,r.parentBranch]:[void 0,[0,0]]}(e,i);if(r)switch(i){case"after row":r.addRowAfter(a),lT(e,r,a+1,0,"end");break;case"after column":if(r.maxColumns<=r.colCount){e.announce("plonk");return}r.addColumnAfter(o),lT(e,r,a,o+1,"end");break;case"before row":r.addRowBefore(a),lT(e,r,a,0,"start");break;case"before column":if(r.maxColumns<=r.colCount){e.announce("plonk");return}r.addColumnBefore(o),lT(e,r,a,o,"start")}}function l$(e){return!!sp(e,{inputType:"insertText"})&&(lB(e,"after row"),sm(e,{inputType:"insertText"}),!0)}function lP(e){return!!sp(e,{inputType:"insertText"})&&(lB(e,"after column"),sm(e,{inputType:"insertText"}),!0)}function lO(e,i){let r=e.at(e.position);for(;r&&!(Array.isArray(r.parentBranch)&&r.parent instanceof ny);)r=r.parent;if(Array.isArray(null==r?void 0:r.parentBranch)&&(null==r?void 0:r.parent)instanceof ny){let a=r.parent,o=r.parentBranch,n;switch(i){case"row":if(a.rowCount>1){a.removeRow(o[0]);let i=a.getCell(Math.max(0,o[0]-1),o[1]);n=e.offsetOf(i[i.length-1])}break;case"column":if(a.colCount>a.minColumns){a.removeColumn(o[1]);let i=a.getCell(o[0],Math.max(0,o[1]-1));n=e.offsetOf(i[i.length-1])}}n&&e.setPositionHandlingPlaceholder(n)}}function lF(){return[new nd]}function lq(e,i,r,a){var o,n,s,l,c,d;let u=r.parent;if(u&&r instanceof n_){let o=!a&&"forward"===i||"body"===a&&"backward"===i,n=o?e.offsetOf(r.firstChild):e.offsetOf(r.lastChild);return o?"?"!==r.rightDelim&&"."!==r.rightDelim?(r.leftDelim=".",r.isDirty=!0):(u.addChildrenAfter(r.removeBranch("body"),r),u.removeChild(r),n--):"?"!==r.leftDelim&&"."!==r.leftDelim?(r.rightDelim=".",r.isDirty=!0):(u.addChildrenAfter(r.removeBranch("body"),r),u.removeChild(r),n--),e.position=n,!0}if(u&&"surd"===r.type){if(("forward"!==i||a)&&("backward"!==i||"body"!==a))"forward"===i&&"body"===a?e.position=e.offsetOf(r):a||"backward"!==i?"above"===a&&(r.hasEmptyBranch("above")&&r.removeBranch("above"),"backward"===i?e.position=e.offsetOf(r.leftSibling):e.position=e.offsetOf(r.body[0])):r.hasChildren?e.position=e.offsetOf(r.lastChild):(e.position=Math.max(0,e.offsetOf(r)-1),u.removeChild(r));else{let i=r.leftSibling;r.hasChildren&&u.addChildrenAfter(r.removeBranch("body"),r),u.removeChild(r),e.position=e.offsetOf(i)}return!0}if(u&&("box"===r.type||"enclose"===r.type)){let o=a&&"backward"===i||!a&&"forward"===i?r.leftSibling:r.lastChild;return u.addChildrenAfter(r.removeBranch("body"),r),u.removeChild(r),e.position=e.offsetOf(o),!0}if("genfrac"===r.type||"overunder"===r.type){if(!a)return!("overunder"===r.type&&r.hasEmptyBranch("body")||"genfrac"===r.type&&r.hasEmptyBranch("below")&&r.hasEmptyBranch("above"))&&(e.position=e.offsetOf("forward"===i?r.firstChild:r.lastChild),!0);let o="numerator-denominator"===cR.fractionNavigationOrder?"above":"below",n="above"===o?"below":"above";if(u&&("forward"===i&&a===o||"backward"===i&&a===n)){let i=r.removeBranch(o),a=r.removeBranch(n);return u.addChildrenAfter([...i,...a],r),u.removeChild(r),e.position=e.offsetOf(i.length>0?i[i.length-1]:a[0]),!0}return"backward"===i?e.position=e.offsetOf(r.leftSibling):e.position=e.offsetOf(r),!0}if(r.isExtensibleSymbol||"subsup"===r.type){if(!a&&"forward"===i)return!1;if(!a){if(r.subscript||r.superscript){let a="forward"===i?null!=(s=null==(o=r.superscript)?void 0:o[0])?s:null==(n=r.subscript)?void 0:n[0]:null!=(d=null==(l=r.subscript)?void 0:l[0].lastSibling)?d:null==(c=r.superscript)?void 0:c[0].lastSibling;return a&&(e.position=e.offsetOf(a)),!0}return!1}if(a&&r.hasEmptyBranch(a)&&r.removeBranch(a),!r.hasChildren){let a="forward"===i?e.offsetOf(r):Math.max(0,e.offsetOf(r)-1);return r.parent.removeChild(r),e.position=a,!0}if("superscript"===a){if("backward"===i){let i=e.offsetOf(r.firstChild)-1;e.position=i}else r.subscript?e.position=e.offsetOf(r.subscript[0]):e.position=e.offsetOf(r)}else"subscript"===a&&("backward"===i&&r.superscript?e.position=e.offsetOf(r.superscript[0].lastSibling):"backward"===i?e.position=e.offsetOf(r.firstChild)-1:e.position=e.offsetOf(r));return!0}if((null==u?void 0:u.type)==="genfrac"&&!a&&"first"!==r.type){let i=e.offsetOf(r.leftSibling);return u.removeChild(r),u.hasEmptyBranch("above")&&u.hasEmptyBranch("below")?(i=e.offsetOf(u.leftSibling),u.parent.removeChild(u),e.announce("delete",void 0,[u]),e.position=i,!0):(e.announce("delete",void 0,[r]),e.position=i,!0)}if("backward"===i&&(null==u?void 0:u.subsupPlacement)==="adjacent"&&"body"!==r.parentBranch&&2===r.siblings.length){let i=e.offsetOf(u.leftSibling);return u.parent.removeChild(u),e.announce("delete",void 0,[u]),e.position=i,!0}return!1}function lN(e,i,r){let a=e.getAtoms(i);if(a.length>0&&a[0].parent){let o=a[0].parent.firstChild;"first"===o.type&&(o=o.rightSibling);let n=a[a.length-1].parent.lastChild,s=a[0];"first"===s.type&&(s=s.rightSibling);let l=a[a.length-1];if(s===o&&l===n){let r=a[0].parent;r.parent&&"prompt"!==r.type&&(i=[e.offsetOf(r.leftSibling),e.offsetOf(r)])}if(1===a.length&&"placeholder"===a[0].type&&"genfrac"===a[0].parent.type){let i=a[0].parent,o="below"===a[0].parentBranch?"above":"below",n=e.offsetOf(i.leftSibling);return e.deferNotifications({content:!0,selection:!0,type:r},()=>{var r,a;let s=i.removeBranch(o);if(1===s.length&&"placeholder"===s[0].type)null==(a=i.parent)||a.removeChild(i),e.position=Math.max(0,n);else{let a=i.parent.addChildrenAfter(s,i);null==(r=i.parent)||r.removeChild(i),e.position=e.offsetOf(a)}})}}return e.deferNotifications({content:!0,selection:!0,type:r},()=>e.deleteAtoms(i))}function lR(e,i){e&&i&&(f(e)?e.forEach(e=>lR(e,i)):"object"!=typeof e||e.style.color||e.style.backgroundColor||e.style.fontFamily||e.style.fontShape||e.style.fontSeries||e.style.fontSize||e.style.variant||e.style.variantStyle||(e.applyStyle(i),lR(e.body,i),lR(e.above,i),lR(e.below,i),lR(e.subscript,i),lR(e.superscript,i)))}function lI(e,i,r,a){function o(e,i){for(let r of n)if(r.style[e]!==i)return!1;return!0}if((i=e.normalizeRange(i))[0]===i[1])return!1;let n=e.getAtoms(i,{includeChildren:!0});for(let e of("toggle"===a.operation&&(r.color&&o("color",r.color)&&(r.color="none",delete r.verbatimColor),r.backgroundColor&&o("backgroundColor",r.backgroundColor)&&(r.backgroundColor="none",delete r.verbatimBackgroundColor),r.fontFamily&&o("fontFamily",r.fontFamily)&&(r.fontFamily="none"),r.fontSeries&&o("fontSeries",r.fontSeries)&&(r.fontSeries="auto"),r.fontShape&&o("fontShape",r.fontShape)&&(r.fontShape="auto"),r.fontSize&&o("fontSize",r.fontSize)&&(r.fontSize=5)),n))e.applyStyle(r);return!0}X(["math","displaymath"],lA),X("center",lA),G("array","{columns:colspec}",(e,i,r,a)=>new ny(e,lz(i),r,{columns:a[0],mathstyleName:"textstyle"})),G(["equation","equation*","subequations"],"",(e,i,r)=>new ny(e,lz(i),r,{columns:[{align:"c"}]})),G(["multline","multline*"],"",lA),G(["align","align*","aligned","eqnarray"],"",lA),G("split","",lA),G(["gather","gathered"],"",lA),G(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",lA),G(["smallmatrix","smallmatrix*"],"[columns:colspec]",lA),G(["cases","dcases","rcases"],"",lA),sF({addRowAfter:l$,addColumnAfter:lP,addRowBefore:function(e){return!!sp(e,{inputType:"insertText"})&&(lB(e,"before row"),sm(e,{inputType:"insertText"}),!0)},addColumnBefore:function(e){return!!sp(e,{inputType:"insertText"})&&(lB(e,"before column"),sm(e,{inputType:"insertText"}),!0)},removeRow:function(e){return!!sp(e,{inputType:"deleteContent"})&&(lO(e,"row"),sm(e,{inputType:"deleteContent"}),!0)},removeColumn:function(e){return!!sp(e,{inputType:"deleteContent"})&&(lO(e,"column"),sm(e,{inputType:"deleteContent"}),!0)},setEnvironment:function(e,i){if(!sp(e,{}))return!1;e.mathfield.snapshot();let r=".",a=".";switch(i){case"pmatrix":case"pmatrix*":r="(",a=")";break;case"bmatrix":case"bmatrix*":r="[",a="]";break;case"Bmatrix":case"Bmatrix*":r="\\lbrace",a="\\rbrace";break;case"vmatrix":case"vmatrix*":r="\\vert",a="\\vert";break;case"Vmatrix":case"Vmatrix*":r="\\Vert",a="\\Vert";break;case"matrix":case"matrix*":r=".",a=".";break;case"cases":case"dcases":r="\\lbrace";break;case"rcases":a="\\rbrace"}let o=e.parentEnvironment;return o.environmentName=i,o.leftDelim=r,o.rightDelim=a,sm(e,{}),!0}},{target:"model",canUndo:!0,changeContent:!0,changeSelection:!0});var lV=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function lj(e){return!(e.ctrlKey||e.metaKey||["Dead","Process"].includes(e.key))&&(""===e.code||lV.has(e.code))}function lH(e){e=function(e){if(e.code)return e;let i=Object.entries(ss().mapping),r=!1,a=!1,o="";for(let n=0;n<4;n++){for(let[s,l]of i)if(l[n]===e.key){o=s,3===n?(r=!0,a=!0):2===n?r=!0:1===n&&(a=!0);break}if(o)break}return new KeyboardEvent(e.type,h(u({},e),{altKey:r,shiftKey:a,code:o}))}(e);let i=[];return e.ctrlKey&&i.push("ctrl"),e.metaKey&&i.push("meta"),e.altKey&&i.push("alt"),e.shiftKey&&i.push("shift"),0===i.length?`[${e.code}]`:(i.push(`[${e.code}]`),i.join("+"))}function lW(e){var i;let r;return e&&lj(e)?("Unidentified"===e.key&&e.target&&(r=e.target.value),r=null!=(i=null!=r?r:e.key)?i:e.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(r)&&(r=""),r):""}var lU=class e{constructor(e){this.recording=!1,this.model=e,this.reset()}reset(){this.stack=[],this.index=-1,this.lastOp=""}startRecording(){this.recording=!0}stopRecording(){this.recording=!1}canUndo(){return this.index-1>=0}canRedo(){return this.stack.length-1>this.index}stopCoalescing(e){e&&this.index>=0&&(this.stack[this.index].selection=e),this.lastOp=""}undo(){return!!this.canUndo()&&(this.model.setState(this.stack[this.index-1],{silenceNotifications:!1,type:"undo"}),this.index-=1,this.lastOp="",!0)}redo(){return!!this.canRedo()&&(this.index+=1,this.model.setState(this.stack[this.index],{silenceNotifications:!1,type:"redo"}),this.lastOp="",!0)}pop(){this.canUndo()&&(this.stack.splice(this.index,this.stack.length-this.index),this.index-=1)}snapshot(i){return!!this.recording&&(i&&i===this.lastOp&&this.pop(),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index+=1,this.stack.length>e.maximumDepth&&(this.stack.shift(),this.index-=1),this.lastOp=null!=i?i:"",!0)}};function lJ(e){let i=e.position,r=e.at(i).parent;return null!=r&&r.parent?(e.position=e.offsetOf(r),e.mathfield.stopCoalescingUndo(),e.announce("move",i),!0):(e.announce("plonk"),!1)}function lX(e){var i;if(e.collapseSelection(),function(e){let i=0,r=e.at(e.position),a=!1;for(;r;)r.hasEmptyBranch("superscript")&&r.hasEmptyBranch("subscript")||(i+=1),r.hasEmptyBranch("superscript")?r.hasEmptyBranch("subscript")||(a=!1):a=!0,r=r.parent;return a?i:0}(e)>=e.mathfield.options.scriptDepth[1])return e.announce("plonk"),!1;let r=e.at(e.position);return void 0===r.subsupPlacement&&((null==(i=r.rightSibling)?void 0:i.type)!=="subsup"&&r.parent.addChildAfter(new nC({style:r.computedStyle}),r),r=r.rightSibling),r.createBranch("superscript"),e.setSelection(e.getSiblingsRange(e.offsetOf(r.superscript[0]))),!0}function lG(e){var i;if(e.collapseSelection(),function(e){let i=0,r=e.at(e.position),a=!1;for(;r;)r.hasEmptyBranch("superscript")&&r.hasEmptyBranch("subscript")||(i+=1),r.hasEmptyBranch("superscript")?r.hasEmptyBranch("subscript")||(a=!0):a=!1,r=r.parent;return a?i:0}(e)>=e.mathfield.options.scriptDepth[0])return e.announce("plonk"),!1;let r=e.at(e.position);return void 0===r.subsupPlacement&&((null==(i=e.at(e.position+1))?void 0:i.type)!=="subsup"&&r.parent.addChildAfter(new nC({style:e.at(e.position).computedStyle}),r),r=e.at(e.position+1)),r.createBranch("subscript"),e.setSelection(e.getSiblingsRange(e.offsetOf(r.subscript[0]))),!0}function lZ(e,i,r="forward"){let a=e.position;if(Array.isArray(i)){let o=e.offsetOf(i[0]),n=e.offsetOf(i[i.length-1]);return"forward"===r?e.setSelection(o,n):e.setSelection(n,o),e.announce("move",a),e.mathfield.stopCoalescingUndo(),!0}return"forward"===r?lZ(e,[i.leftSibling,i]):lZ(e,[i,i.leftSibling])}function lY(e,i){let r=e.position;if("number"==typeof i&&(i=e.at(i)),"prompt"===i.type)e.setSelection(e.offsetOf(i.firstChild),e.offsetOf(i.lastChild));else{let r=e.offsetOf(i);"placeholder"===i.type?e.setSelection(r-1,r):e.position=r}return e.announce("move",r),e.mathfield.stopCoalescingUndo(),!0}function lQ(e,i,r=!0){var a,o;let n="forward"===i?1:-1;"placeholder"===e.at(e.anchor).type&&cL(e,i);let s,l=e.at(e.anchor).parentPrompt;s=l?"forward"===i?e.offsetOf(l)+1:e.offsetOf(l.leftSibling):Math.max(e.position+n,0);let c=l0(e,s,i);if(!c||"forward"===i&&e.offsetOf(c)<s||"backward"===i&&e.offsetOf(c)>s){if(!r||!(null==(o=null==(a=e.mathfield.host)?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:i},cancelable:!0,bubbles:!0,composed:!0})))||o))return e.announce("plonk"),!1;let s=function(){var e;let i,r;function a(e){var i;let r=Number.parseInt(null!=(i=e.getAttribute("tabindex"))?i:"NaN",10);return Number.isNaN(r)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:r}return y()?(e=document.body,i=[],r=[],[...e.querySelectorAll(`input, select, textarea, a[href], button,
        [tabindex], audio[controls], video[controls],
        [contenteditable]:not([contenteditable="false"]), details>summary`)].filter(function(e){return!(e.disabled||"hidden"===e.type&&"INPUT"===e.tagName.toUpperCase()||function(e){if(!y()||e===document.activeElement||e.contains(document.activeElement))return!1;if("hidden"===getComputedStyle(e).visibility)return!0;let i=e.getBoundingClientRect();if(0===i.width||0===i.height)return!0;for(;e;){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(e)||"INPUT"===e.tagName.toUpperCase()&&"radio"===e.type&&!function(e){var i;if(!e.name)return!0;let r=function(e,i){for(let r of e)if(r.checked&&r.form===i)return r;return null}((null!=(i=e.form)?i:e.ownerDocument).querySelectorAll('input[type="radio"][name="'+e.name+'"]'),e.form);return!r||r===e}(e)||0>a(e))}).forEach((e,o)=>{let n=a(e);0===n?i.push(e):r.push({documentOrder:o,tabIndex:n,node:e})}),r.sort((e,i)=>e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex).map(e=>e.node).concat(i)):[]}();if(!document.activeElement||s.length<=1)return e.announce("plonk"),!1;let l=s.indexOf(document.activeElement)+n;return l<0&&(l=s.length-1),l>=s.length&&(l=0),s[l].focus(),e.mathfield.stopCoalescingUndo(),!0}return lY(e,c),!0}function l0(e,i=0,r="forward"){return e.findAtom(i=>"placeholder"===i.type||"prompt"===i.type||!e.mathfield.readOnly&&i.treeDepth>2&&i.isFirstSibling&&i.isLastSibling,i,r)}function l1(e,i,r,a){if("forward"===a){let e=i.rightSibling;for(;e&&!r(e);)e=e.rightSibling;return e}let o=i.leftSibling;for(;o&&!r(o);)o=o.leftSibling;return o}function l4(e,i,r){"function"==typeof i&&(r=i,i=1/0),void 0===i&&(i=1/0);let a=e.position,o=!1,n="";for(;!o;){let s=e.at(a);(o=0===i||void 0===s||"first"===s.type||"math"!==s.mode||!(s.type&&/mord|mpunct/.test(s.type)||"mop"===s.type&&/[a-zA-Z]+/.test(s.value))||!s.hasEmptyBranch("superscript")||!s.hasEmptyBranch("subscript")||"function"==typeof r&&!r(s))||(s.mode="text",s.command=s.value,s.verbatimLatex=void 0,n+=s.value),a-=1,i-=1}sm(e,{data:n,inputType:"insertText"})}function l2(e,i,r){"function"==typeof i&&(r=i,i=1/0),void 0===i&&(i=1/0);let a=e.position,o=!1,n=[];for(;!o;){let s=e.at(a);(o=0===i||!s||"first"===s.type||s.isFirstSibling||"text"!==s.mode||" "===s.value||"function"==typeof r&&!r(s))||(n.push(ok.serialize([s],{defaultMode:"math"})),s.mode="math"),a-=1,i-=1}l3(e),sm(e,{data:a4(n),inputType:"insertText"})}function l3(e){var i;let r=e.position-1;for(;r>=0&&(null==(i=e.at(r))?void 0:i.mode)==="math";)r-=1;if(!(r<0)&&"text"===e.at(r).mode&&" "===e.at(r).value&&"math"===e.at(r-1).mode){e.at(r-1).parent.removeChild(e.at(r-1));let i=e.silenceNotifications;e.silenceNotifications=!0,e.position-=1,e.silenceNotifications=i,sm(e,{inputType:"deleteContent"})}}function l6(){return document.getElementById("mathlive-keystroke-caption-panel")||(o4("keystroke-caption"),o4("core"),sw("mathlive-keystroke-caption-panel"))}function l8(e,i,r){var a,o,n,s;let{model:l}=e;if(r.isTrusted){!function(e){var i,r;if(!e||"Unidentified"===e.key||"Dead"===e.key)return;let a=e.shiftKey&&e.altKey?3:e.altKey?2:e.shiftKey?1:0;for(let o of sa)(null==(i=o.mapping[e.code])?void 0:i[a])===e.key?o.score+=1:null!=(r=o.mapping[e.code])&&r[a]&&(o.score=0);sa.sort((e,i)=>i.score-e.score)}(r);let i=ss();e.keyboardLayout!==i.id&&(e.keyboardLayout=i.id,e._keybindings=void 0)}if(clearTimeout(e.inlineShortcutBufferFlushTimer),e.inlineShortcutBufferFlushTimer=0,function(e,i){if(!e.isSelectionEditable||!e.keystrokeCaptionVisible)return;let r=l6(),a=e.element.getBoundingClientRect();r.style.left=`${a.left}px`,r.style.top=`${a.top-64}px`,r.innerHTML=window.MathfieldElement.createHTML("<span>"+(sc(i)||i)+"</span>"+r.innerHTML),r.style.visibility="visible",setTimeout(()=>{r.childNodes.length>0&&r.childNodes[r.childNodes.length-1].remove(),0===r.childNodes.length&&(r.style.visibility="hidden")},3e3)}(e,i),r.isTrusted&&r.defaultPrevented)return e.flushInlineShortcutBuffer(),!1;if(l.mathfield.smartFence){if(l7(l,lW(r),e.style))return e.flushInlineShortcutBuffer(),e.dirty=!0,e.scrollIntoView(),r.preventDefault&&r.preventDefault(),!1}else{let{parent:a}=l.at(l.position);if(a instanceof n_&&"?"===a.rightDelim&&l.at(l.position).isLastSibling&&/^[)}\]|]$/.test(i))return e.snapshot(),a.isDirty=!0,a.rightDelim=i,l.position+=1,sh(l),sm(l,{data:lW(r),inputType:"insertText"}),e.snapshot("insert-fence"),e.dirty=!0,e.scrollIntoView(),r.preventDefault&&r.preventDefault(),!1;if(!l.selectionIsCollapsed){let i=lW(r);if("("===i||"{"===i||"["===i){let[a,o]=oM(l.selection);return e.snapshot(),l.position=o,oP.insert(l,{"(":")","{":"\\rbrace","[":"\\rbrack"}[i],{format:"latex"}),l.position=a,oP.insert(l,{"(":"(","{":"\\lbrace","[":"\\lbrack"}[i],{format:"latex"}),l.setSelection(a+1,o+1),sm(l,{data:i,inputType:"insertText"}),e.snapshot("insert-fence"),e.dirty=!0,e.scrollIntoView(),r.preventDefault&&r.preventDefault(),!1}}}let c,d="",h,p=e.inlineShortcutBuffer;if(e.isSelectionEditable){if("math"===l.mode){if("[Backspace]"===i)p.pop();else if(lj(r)){let i=lW(r),n=[...null!=(o=null==(a=p[p.length-1])?void 0:a.keystrokes)?o:[],i];p.push({state:l.getState(),keystrokes:n,leftSiblings:function(e){let i=e.model,r=[],a=i.at(Math.min(i.position,i.anchor));for(;"first"!==a.type;)r.push(a),a=a.leftSibling;return r}(e)});let s=0,d="";for(;!c&&s<n.length;)h=p.length-(n.length-s),d=n.slice(s).join(""),!(c=oL(p[h].leftSiblings,d,e.options.inlineShortcuts))&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(d)&&(c=e.options.onInlineShortcut(e,d)),s+=1;e.flushInlineShortcutBuffer({defer:!0})}else e.flushInlineShortcutBuffer()}if(e.options.smartMode){let a=l.mode;c?l.mode="math":function(e,i,r){let{model:a}=e;if("latex"===a.mode||!a.at(a.position).isLastSibling||!r||!lj(r))return!1;let o=lW(r);if(!a.selectionIsCollapsed)return!!("text"===e.model.mode&&/[/_^]/.test(o));let n=function(e){let i="",r=e.position,a=!1;for(;!a;){let o=e.at(r);(a=!(o&&("text"===o.mode||"math"===o.mode&&o.type&&/mord|mpunct/.test(o.type))))||(i=o.value+i),r-=1}return i}(a)+o;if("text"===e.model.mode){if("Esc"===i||/[/\\]/.test(o))return!0;if(/[\^_]/.test(o))return/(^|\s)[a-zA-Z][^_]$/.test(n)&&l2(a,1),!0;let e={")":"(","}":"{","]":"["}[o],{parent:r}=a.at(a.position);if(e&&r instanceof n_&&r.leftDelim===e)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(n))return!1;if(/[$€£₤₺¥¤฿¢₡₧₨₹₩₱]/u.test(o))return!0;if(/(^|[^a-zA-Z'’])[a-zA-Z] $/.test(n))return l2(a,1),!1;if(/\D\.[^\d\s]$/.test(n)){l2(a,1);let e=a.at(a.position);return e.value="⋅",e.style.variant="normal",e.command="\\cdot",e.verbatimLatex=void 0,sm(a,{data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(n)||/\.\d$/.test(n)||/\([\d+\-.]$/.test(n))return l2(a,1),!0;if(/\([a-z][,;]$/.test(n))return l2(a,2),!0;if(/[\d+\-=><*|]$/.test(o))return l3(a),!0}else{if("[Space]"===i)return l4(a,void 0,e=>/[a-z][:,;.]$/.test(e.value)),!0;if(/[a-zA-Z]{3,}$/.test(n)&&!/(dxd|abc|xyz|uvw)$/.test(n))return l4(a,void 0,e=>/[a-zA-Z]/.test(e.value)),!0;if(/(^|\W)(if)$/i.test(n))return l4(a,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(n)&&!/(αβγ)$/.test(n))return l4(a,void 0,e=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(e.value)),!0;if("?"===o||"."===o&&!/[\d-+]\.$/.test(n))return!0}return!1}(e,i,r)&&(l.mode=({math:"text",text:"math"})[l.mode],d=""),l.mode!==a&&(null!=(n=e.host)&&n.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))||(l.mode=a))}}if(!c){if(d||(d=function(e,i,r){if(0===e.length)return"";let a=n7(n5(r));for(let r=e.length-1;r>=0;r--)if(e[r].key===a&&(!e[r].ifMode||e[r].ifMode===i))return e[r].command;return""}(e.keybindings,l.mode,i)),!d&&("[Enter]"===i||"[Return]"===i)){let i=!1;return sp(l,{inputType:"insertLineBreak"})&&(e.host&&(i=!e.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),i||r.preventDefault&&(r.preventDefault(),r.stopPropagation()),sm(l,{inputType:"insertLineBreak"})),i}if((!d||"[Space]"===i)&&"math"===l.mode){if("[Space]"===i){if(e.adoptStyle="none",e.flushInlineShortcutBuffer(),e.options.mathModeSpace)return oP.insert(l,e.options.mathModeSpace,{format:"latex",mode:"math"}),e.snapshot("insert-space"),d="",e.dirty=!0,e.scrollIntoView(),r.preventDefault&&(r.preventDefault(),r.stopPropagation()),!1;let i=l.at(l.position+1),a=l.at(l.position-1);if((null==i?void 0:i.mode)==="text"||(null==a?void 0:a.mode)==="text")return oP.insert(l," ",{mode:"text"}),e.snapshot("insert-space"),e.dirty=!0,e.scrollIntoView(),!1}null!=(s=l.at(l.position))&&s.isDigit()&&","===window.MathfieldElement.decimalSeparator&&","===lW(r)&&(d="insertDecimalSeparator")}}if(!c&&!d)return!0;let m=l.at(Math.max(l.position,l.anchor)),{parent:f}=m;if("moveAfterParent"===d&&(null==f?void 0:f.type)==="leftright"&&m.isLastSibling&&e.options.smartFence&&l7(l,".",e.style)&&(d="",sB(e)),e.keyboardDelegate.cancelComposition(),d)e.executeCommand(d);else if(c){let i=u(u({},l.at(l.position).computedStyle),e.style);for(let e of(l.setState(p[h].state),p[p.length-1].keystrokes))oP.insert(l,e,{silenceNotifications:!0,style:i});e.snapshot("insert-shortcut"),l.setState(p[h].state),l.deferNotifications({content:!0,selection:!0,data:c,type:"insertText"},()=>(oP.insert(l,c,{format:"latex",style:i}),l3(e.model),c.endsWith(" ")&&(l.mode="text",oP.insert(l," ",{style:i,mode:"text"})),e.snapshot(),l.selectionIsCollapsed||e.flushInlineShortcutBuffer(),!0)),e.dirty=!0,l.announce("replacement")}return e.scrollIntoView(),r.preventDefault&&r.preventDefault(),!1}function l5(e,i,r){let{model:a}=e;if(!e.isSelectionEditable){a.announce("plonk");return}null!=r||(r={}),r.focus&&e.focus(),r.feedback&&window.MathfieldElement.playSound("keypress"),"string"==typeof r.mode&&(e.switchMode(r.mode),e.snapshot());let o=aQ(i),n=window.mathVirtualKeyboard;if(null!=n&&n.isShifted&&(o="string"==typeof o?o.toUpperCase():o.map(e=>e.toUpperCase())),r.simulateKeystroke){let i=!0;for(let r of o)l8(e,r,new KeyboardEvent("keypress",{key:r}))&&(i=!1);if(i)return}let s=a.at(a.position),l=u(u({},s.computedStyle),e.style);if(a.selectionIsCollapsed||(a.deleteAtoms(oM(a.selection)),e.snapshot("delete")),"latex"===a.mode)a.deferNotifications({content:!0,selection:!0,data:i,type:"insertText"},()=>{for(let i of(sb(e),o))oP.insert(a,i);e.snapshot("insert-latex"),sg(e)});else if("text"===a.mode){for(let e of o)oP.insert(a,e,{style:l});e.snapshot("insert-text")}else if("math"===a.mode)for(let i of o)!function(e,i,r,a){var o;let n=e.model,s={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[i];if(" "===i&&e.options.mathModeSpace&&(s=["insert",e.options.mathModeSpace]),s){e.executeCommand(s);return}if(/\d/.test(i)&&e.options.smartSuperscript&&"superscript"===a.parentBranch&&(null==(o=a.parent)?void 0:o.type)!=="mop"&&a.hasNoSiblings){n.selectionIsCollapsed||(n.deleteAtoms(oM(n.selection)),n.mathfield.snapshot("delete")),oP.insert(n,i,{style:r}),e.snapshot(),lJ(n),e.snapshot();return}if("none"!==e.adoptStyle){let o="left"===e.adoptStyle?a:a.parent?a.rightSibling:null;(null==o?void 0:o.type)==="mord"&&/[a-zA-Z0-9]/.test(o.value)&&/[a-zA-Z0-9]/.test(i)&&(r=u({},r),o.style.variant&&(r.variant=o.style.variant),o.style.variantStyle&&(r.variantStyle=o.style.variantStyle))}oP.insert(n,i,{style:r}),e.snapshot(`insert-${n.at(n.position).type}`)}(e,i,l,s);e.dirty=!0,e.scrollIntoView()}function l7(e,i,r){if(!i||"math"!==e.mode)return!1;let a=e.at(e.position),{parent:o}=a,n={"(":"(",")":")","{":"\\lbrace","}":"\\rbrace","[":"\\lbrack","]":"\\rbrack","|":"|"}[i];if(!n)return!1;let s=o8[n],l=o6[n];if(!e.selectionIsCollapsed){e.mathfield.snapshot();let[i,r]=oM(e.selection),a=e.extractAtoms([i,r]),s=o.addChildrenAfter([new n_("left...right",a,{leftDelim:n,rightDelim:l})],e.at(i));return e.setSelection(e.offsetOf(s.firstChild),e.offsetOf(s.lastChild)),e.mathfield.snapshot("insert-fence"),sm(e,{data:n,inputType:"insertText"}),!0}if("|"===n){let i=o instanceof n_?o.leftDelim+o.rightDelim:"";if("\\lbrace\\rbrace"===i||"\\{\\}"===i||"\\lbrace?"===i)return e.mathfield.snapshot(),oP.insert(e,"\\,\\middle\\vert\\,",{format:"latex",style:r}),e.mathfield.snapshot("insert-fence"),sm(e,{data:n,inputType:"insertText"}),!0}if(l){if(o instanceof n_&&o.firstChild===a&&("?"===o.leftDelim||"."===o.leftDelim))return o.leftDelim=n,o.isDirty=!0,e.mathfield.snapshot(),sm(e,{data:n,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0;if(!(o instanceof n_)){let i=a;for(;i&&!("mclose"===i.type&&i.value===l);)i=i.rightSibling;if(i){e.mathfield.snapshot();let r=e.extractAtoms([e.offsetOf(a),e.offsetOf(i)]);return r.pop(),o.addChildrenAfter([new n_("left...right",r,{leftDelim:n,rightDelim:l})],a),e.position=e.offsetOf(o.firstChild)+1,sm(e,{data:n,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0}}let i=e.offsetOf(a.lastSibling),s;for(s=e.position;s<=i;s++){let i=e.at(s);if(i instanceof n_&&("?"===i.leftDelim||"."===i.leftDelim)&&ce(n,i.rightDelim))break}let c=e.at(s);if(s<=i&&c instanceof n_){c.leftDelim=n,e.mathfield.snapshot();let i=e.extractAtoms([e.position,s-1]);return i=i.filter(e=>"first"!==e.type),c.addChildren(i,c.parentBranch),e.position+=1,sm(e,{data:n,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0}if(o instanceof n_&&("?"===o.leftDelim||"."===o.leftDelim)&&ce(n,o.rightDelim)){for(let i of(o.isDirty=!0,o.leftDelim=n,e.mathfield.snapshot(),e.extractAtoms([e.offsetOf(a.firstSibling),e.position])))o.parent.addChildBefore(i,o);return sm(e,{data:n,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0}if(!(o instanceof n_&&"|"===o.leftDelim)){if(e.mathfield.snapshot(),oP.insert(e,`\\left${n}\\right?`,{format:"latex",style:r}),"first"!==a.lastSibling.type){let i=e.offsetOf(a.lastSibling),r=e.extractAtoms([e.position,i]);e.at(e.position).body=r,e.position-=1}return e.mathfield.snapshot("insert-fence"),!0}}if(s){let i=a;for(;i;){if("mopen"===i.type&&i.value===s){e.mathfield.snapshot();let r=i.leftSibling,l=e.extractAtoms([e.offsetOf(i.leftSibling),e.offsetOf(a)]);l.shift();let c=new n_("left...right",l,{leftDelim:s,rightDelim:n});return o.addChildrenAfter([c],r),e.position=e.offsetOf(c),sm(e,{data:n,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0}i=i.leftSibling}if(o instanceof n_&&a.isLastSibling&&l9(o.leftDelim,n))return e.mathfield.snapshot(),o.isDirty=!0,o.rightDelim=n,e.position+=1,sm(e,{data:n,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0;let l=e.offsetOf(a.firstSibling),c;for(c=e.position;c>=l;c--){let i=e.at(c);if(i instanceof n_&&("?"===i.rightDelim||"."===i.rightDelim)&&l9(i.leftDelim,n))break}let d=e.at(c);if(c>=l&&d instanceof n_)return e.mathfield.snapshot(),d.rightDelim=n,d.addChildren(e.extractAtoms([c,e.position]),d.parentBranch),sm(e,{data:n,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0;if(o instanceof n_&&("?"===o.rightDelim||"."===o.rightDelim)&&l9(o.leftDelim,n))return e.mathfield.snapshot(),o.isDirty=!0,o.rightDelim=n,o.parent.addChildren(e.extractAtoms([e.position,e.offsetOf(a.lastSibling)]),o.parentBranch),e.position=e.offsetOf(o),sm(e,{data:n,inputType:"insertText"}),e.mathfield.snapshot("insert-fence"),!0;let u=o.parent;return u instanceof n_&&("?"===u.rightDelim||"."===u.rightDelim)&&!!e.at(e.position).isLastSibling&&(e.position=e.offsetOf(u),l7(e,n,r))}return!1}function l9(e,i){return!e||(["(","{","[","\\lbrace","\\lparen","\\{","\\lbrack"].includes(e)?[")","}","]","\\rbrace","\\rparen","\\}","\\rbrack"].includes(i):o6[e]===i)}function ce(e,i){return!i||([")","}","]","\\rbrace","\\rparen","\\}","\\rbrack"].includes(i)?["(","{","[","\\lbrace","\\lparen","\\{","\\lbrack"].includes(e):o8[i]===e)}lU.maximumDepth=1e3,sF({moveToOpposite:e=>{let i=e.at(e.position),{parent:r}=i;if(!r)return e.announce("plonk"),!1;let a=i.parentBranch,o;if("string"==typeof a&&(o=({superscript:"subscript",subscript:"superscript",above:"below",below:"above"})[a]),!o){let r=i.subsupPlacement?lG(e):lX(e);return e.mathfield.stopCoalescingUndo(),r}r.branch(o)||r.createBranch(o);let n=e.setSelection(e.getBranchRange(e.offsetOf(r),o));return e.mathfield.stopCoalescingUndo(),n},moveBeforeParent:e=>{let{parent:i}=e.at(e.position);return i?(e.position=e.offsetOf(i),e.mathfield.stopCoalescingUndo(),!0):(e.announce("plonk"),!1)},moveAfterParent:e=>lJ(e),moveToNextChar:e=>cL(e,"forward"),moveToPreviousChar:e=>cL(e,"backward"),moveUp:e=>cL(e,"upward"),moveDown:e=>cL(e,"downward"),moveToNextWord:e=>cM(e,"forward"),moveToPreviousWord:e=>cM(e,"backward"),moveToGroupStart:e=>{let i=e.offsetOf(e.at(e.position).firstSibling);return i===e.position?(e.announce("plonk"),!1):(e.position=i,e.mathfield.stopCoalescingUndo(),!0)},moveToGroupEnd:e=>{let i=e.offsetOf(e.at(e.position).lastSibling);return i===e.position?(e.announce("plonk"),!1):(e.position=i,e.mathfield.stopCoalescingUndo(),!0)},moveToNextGroup:e=>{var i,r,a,o;if(e.position===e.lastOffset&&e.anchor===e.lastOffset)return lQ(e,"forward");let n=e.at(e.position);if("text"===n.mode){if(e.selectionIsCollapsed){let r=n;for(;r&&"text"===r.mode;)r=r.leftSibling;let a=n;for(;(null==(i=a.rightSibling)?void 0:i.mode)==="text";)a=a.rightSibling;if(r&&a)return lZ(e,[r,a])}if("text"===n.rightSibling.mode){let i=n;for(;i&&"text"===i.mode;)i=i.rightSibling;return i?(lY(e,null!=(r=i.leftSibling)?r:i),e.mathfield.switchMode("math"),!0):lY(e,e.lastOffset)}}let s=l0(e,e.position+1,"forward");if(s)return lY(e,s);let l=l1(e,n,e=>"leftright"===e.type||"text"===e.type,"forward");if(l){if("text"===l.mode){let i=l;for(;i&&"text"===i.mode;)i=i.rightSibling;return lZ(e,[null!=(a=l.leftSibling)?a:l,null!=(o=i.leftSibling)?o:i])}return lZ(e,l)}let c=n.parent;if(c){if("leftright"===c.type||"surd"===c.type)return lZ(e,c);if("superscript"===n.parentBranch&&c.subscript)return lZ(e,c.subscript);if("above"===n.parentBranch&&c.below)return lZ(e,c.below);if("superscript"===n.parentBranch||"subscript"===n.parentBranch)return lY(e,c);if("above"===n.parentBranch||"below"===n.parentBranch)return lZ(e,c)}return lY(e,e.lastOffset)},moveToPreviousGroup:e=>{var i;if(0===e.position&&0===e.anchor)return lQ(e,"backward");let r=e.at(e.position),a=r.mode;if("text"===a){if(e.selectionIsCollapsed){let a=r;for(;a&&"text"===a.mode;)a=a.leftSibling;let o=r;for(;(null==(i=o.rightSibling)?void 0:i.mode)==="text";)o=o.rightSibling;if(a&&o)return lZ(e,[a,o])}for(;r&&"text"===r.mode;)r=r.leftSibling;return r?lY(e,r):lY(e,0)}let o=l0(e,e.position-1,"backward");if(o)return lY(e,o);if("math"===a){let i=l1(e,r,e=>"leftright"===e.type||"text"===e.type,"backward");if(i){if("text"===i.mode){let r=i;for(;r&&"text"===r.mode;)r=r.leftSibling;return lZ(e,[i,r])}return lZ(e,i)}let a=r.parent;if(a){if("leftright"===a.type||"surd"===a.type)return lZ(e,a);if("subscript"===r.parentBranch&&a.superscript)return lZ(e,a.superscript);if("below"===r.parentBranch&&a.above)return lZ(e,a.above);if("superscript"===r.parentBranch||"subscript"===r.parentBranch)return lY(e,a);if("above"===r.parentBranch||"below"===r.parentBranch)return lZ(e,a)}return lY(e,0)}return!1},moveToMathfieldStart:e=>0===e.position?(e.announce("plonk"),!1):(e.position=0,e.mathfield.stopCoalescingUndo(),!0),moveToMathfieldEnd:e=>e.position===e.lastOffset?(e.announce("plonk"),!1):(e.position=e.lastOffset,e.mathfield.stopCoalescingUndo(),!0),moveToSuperscript:e=>lX(e),moveToSubscript:e=>lG(e)},{target:"model",changeSelection:!0}),sF({moveToNextPlaceholder:e=>lQ(e,"forward"),moveToPreviousPlaceholder:e=>lQ(e,"backward")},{target:"model",changeSelection:!0,audioFeedback:"return"});var ct={acute:714,grave:715,dot:729,ddot:168,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};Z(Object.keys(ct),"{body:auto}",{createAtom:e=>new o3(h(u({},e),{body:T(e.args[0]),accentChar:ct[e.command.slice(1)]}))}),Z(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:e=>{let i=J(T(e.args[0]));return new o3(h(u({},e),{body:T(e.args[0]),svgAccent:e.command.slice(1)+(i.length>5?"4":["1","1","2","2","3","3"][i.length])}))}}),Z(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:e=>new o3(h(u({},e),{body:T(e.args[0]),svgAccent:"overarc"}))}),Z(["underarc","underparen"],"{body:auto}",{createAtom:e=>new nI(h(u({},e),{body:T(e.args[0]),svgBelow:"underarc"}))}),Z("utilde","{body:auto}",{createAtom:e=>{let i=T(e.args[0]),r=J(i),a="widetilde"+(r.length>5?"4":["1","1","2","2","3","3"][r.length]);return new nI(h(u({},e),{body:i,svgBelow:a,boxType:ot(i)}))}}),Z("^","{:string}",{createAtom:e=>{var i;return new ok(h(u({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(i=({a:"\xe2",e:"\xea",i:"\xee",o:"\xf4",u:"\xfb",A:"\xc2",E:"\xca",I:"\xce",O:"\xd4",U:"\xdb"})[e.args[0]])?i:"^"}))}}),Z("`","{:string}",{createAtom:e=>{var i;return new ok(h(u({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(i=({a:"\xe0",e:"\xe8",i:"\xec",o:"\xf2",u:"\xf9",A:"\xc0",E:"\xc8",I:"\xcc",O:"\xd2",U:"\xd9"})[e.args[0]])?i:"`"}))}}),Z("'","{:string}",{createAtom:e=>{var i;return new ok(h(u({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(i=({a:"\xe1",e:"\xe9",i:"\xed",o:"\xf3",u:"\xfa",A:"\xc1",E:"\xc9",I:"\xcd",O:"\xd3",U:"\xda"})[e.args[0]])?i:"^"}))}}),Z("~","{:string}",{createAtom:e=>{var i;return new ok(h(u({type:"mord"},e),{isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(i=({n:"\xf1",N:"\xd1",a:"\xe3",o:"\xf5",A:"\xc3",O:"\xd5"})[e.args[0]])?i:"\xb4"}))}}),Z("c","{:string}",{createAtom:e=>{var i;return new ok(h(u({},e),{type:"mord",isFunction:!1,limits:"adjacent",value:e.args[0]&&null!=(i=({c:"\xe7",C:"\xc7"})[e.args[0]])?i:""}))}}),Z("enclose","{notation:string}[style:string]{body:auto}",{createAtom:e=>{var i,r;let a=e.args,o={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",svgStrokeStyle:void 0,borderStyle:void 0,style:null!=(i=e.style)?i:{}};if(a[1]){for(let e of a[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/)){let i=e.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(i)o.strokeWidth=i[1],o.strokeStyle=i[2],o.strokeColor=i[3];else{let i=e.match(/\s*([a-z]*)\s*=\s*"(.*)"/);i&&("mathbackground"===i[1]?o.backgroundcolor=i[2]:"mathcolor"===i[1]?o.strokeColor=i[2]:"padding"===i[1]?o.padding=i[2]:"shadow"===i[1]&&(o.shadow=i[2]))}}"dashed"===o.strokeStyle?o.svgStrokeStyle="5,5":"dotted"===o.strokeStyle&&(o.svgStrokeStyle="1,5")}o.borderStyle=`${o.strokeWidth} ${o.strokeStyle} ${o.strokeColor}`;let n={};return(null!=(r=a[0])?r:"").split(/[, ]/).filter(e=>e.length>0).forEach(e=>{n[e.toLowerCase()]=!0}),new nP(e.command,T(a[2]),n,o)}}),Z("cancel","{body:auto}",{createAtom:e=>{var i;return new nP(e.command,T(e.args[0]),{updiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:null!=(i=e.style)?i:{}})}}),Z("bcancel","{body:auto}",{createAtom:e=>{var i;return new nP(e.command,T(e.args[0]),{downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:null!=(i=e.style)?i:{}})}}),Z("xcancel","{body:auto}",{createAtom:e=>{var i;return new nP(e.command,T(e.args[0]),{updiagonalstrike:!0,downdiagonalstrike:!0},{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:null!=(i=e.style)?i:{}})}}),Z(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:e=>{var i;return new nI(h(u({},e),{body:T(null==(i=e.args)?void 0:i[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgAbove:e.command.slice(1)}))}}),Z("overbrace","{:auto}",{createAtom:e=>new nI(h(u({},e),{body:T(e.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgAbove:e.command.slice(1)}))}),Z(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:e=>new nI(h(u({},e),{body:T(e.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"rel",svgBelow:e.command.slice(1)}))}),Z(["underbrace"],"{:auto}",{createAtom:e=>new nI(h(u({},e),{body:T(e.args[0]),skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"ord",svgBelow:e.command.slice(1)}))}),Z(["xrightarrow","longrightarrow","xleftarrow","longleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","longleftrightarrow","xLeftrightarrow","xrightleftharpoons","longrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xleftrightarrows","longleftrightarrows","xRightleftharpoons","longRightleftharpoons","xLeftrightharpoons","longLeftrightharpoons"],"[:auto]{:auto}",{createAtom:e=>{var i,r,a,o,n;return new nI(h(u({},e),{svgBody:e.command.slice(1),above:(null==(r=T(null==(i=e.args)?void 0:i[1]))?void 0:r.length)===0?void 0:T(null==(a=e.args)?void 0:a[1]),below:null!=(n=T(null==(o=e.args)?void 0:o[0]))?n:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"rel"}))},serialize:(e,i)=>e.command+(e.hasEmptyBranch("below")?"":`[${e.belowToLatex(i)}]`)+`{${e.aboveToLatex(i)}}${e.supsubToLatex(i)}`}),Z(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","dim","exp","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,ifMode:"math",createAtom:e=>new nN(e.command.slice(1),h(u({},e),{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up"}))}),Z(["liminf","limsup"],"",{ifMode:"math",createAtom:e=>new nN({"\\liminf":"lim inf","\\limsup":"lim sup"}[e.command],h(u({},e),{limits:"over-under",variant:"main"}))}),Z(["lim","mod"],"",{ifMode:"math",createAtom:e=>new nN(e.command.slice(1),h(u({},e),{limits:"over-under",variant:"main"}))}),Z(["det","max","min"],"",{ifMode:"math",isFunction:!0,createAtom:e=>new nN(e.command.slice(1),h(u({},e),{limits:"over-under",isFunction:!0,variant:"main"}))}),Z(["ang"],"{:math}",{ifMode:"math",createAtom:e=>new ok(h(u({},e),{body:T(e.args[0])})),serialize:(e,i)=>`\\ang{${e.bodyToLatex(i)}}`,render:(e,i)=>{let r=e.createBox(i),a=r.caret;r.caret=void 0;let o=new or("\xb0",{style:h(u({},e.style),{variant:"normal",variantStyle:"up"})});return new or([r,o],{type:"inner",isSelected:e.isSelected,caret:a})}}),Z("sqrt","[index:auto]{radicand:expression}",{ifMode:"math",createAtom:e=>new nH(h(u({},e),{body:T(e.args[1]),index:e.args[0]?T(e.args[0]):void 0}))}),Z(["frac","dfrac","tfrac","cfrac","binom","dbinom","tbinom"],"{:expression}{:expression}",{ifMode:"math",createAtom:e=>{let i=u({},e),r=e.command,a=e.args;switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":i.hasBarLine=!0;break;case"\\atopfrac":i.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i.hasBarLine=!1,i.leftDelim="(",i.rightDelim=")";break;case"\\cfrac":i.hasBarLine=!0,i.continuousFraction=!0}switch(r){case"\\dfrac":case"\\dbinom":i.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":i.mathstyleName="textstyle"}return new nO(a[0]?T(a[0]):[new nd],a[1]?T(a[1]):[new nd],i)},serialize:(e,i)=>{let r=e.aboveToLatex(i),a=e.belowToLatex(i);return/^[0-9]$/.test(r)&&/^[0-9]$/.test(a)?`${e.command}${r}${a}`:a2(e.command,r,a)}}),Z(["brace","brack"],"",{infix:!0,createAtom:e=>new nO(T(e.args[0]),T(e.args[1]),h(u({},e),{hasBarLine:!1,leftDelim:"\\brace"===e.command?"\\lbrace":"\\lbrack",rightDelim:"\\brace"===e.command?"\\rbrace":"\\rbrack"})),serialize:(e,i)=>a4([e.aboveToLatex(i),e.command,e.belowToLatex(i)])}),Z(["over","atop","choose"],"",{infix:!0,createAtom:e=>{let i,r,a=e.args;return"\\choose"===e.command&&(i="(",r=")"),new nO(T(a[0]),T(a[1]),h(u({},e),{hasBarLine:"\\over"===e.command,leftDelim:i,rightDelim:r}))},serialize:(e,i)=>a4([e.aboveToLatex(i),e.command,e.belowToLatex(i)])}),Z(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:e=>{var i,r;let a=e.args;return new nO(T(a[0]),T(a[1]),h(u({},e),{leftDelim:null!=(i=a[2])?i:".",rightDelim:null!=(r=a[3])?r:".",hasBarLine:!1}))},serialize:(e,i)=>`${e.aboveToLatex(i)} ${e.command}${e.leftDelim}${e.rightDelim}${e.belowToLatex(i)}`}),Z("pdiff","{numerator}{denominator}",{ifMode:"math",createAtom:e=>new nO(T(e.args[0]),T(e.args[1]),h(u({},e),{hasBarLine:!0,numerPrefix:"∂",denomPrefix:"∂"}))}),Z(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{ifMode:"math",createAtom:e=>new nN({coprod:"∐",bigvee:"⋁",bigwedge:"⋀",biguplus:"⨄",bigcap:"⋂",bigcup:"⋃",intop:"∫",prod:"∏",sum:"∑",bigotimes:"⨂",bigoplus:"⨁",bigodot:"⨀",bigsqcup:"⨆",smallint:"∫"}[e.command.slice(1)],h(u({},e),{isExtensibleSymbol:!0,limits:"auto",variant:"main"}))}),Z("smallint","",{ifMode:"math",createAtom:e=>new nN("∫",h(u({},e),{limits:"adjacent",isExtensibleSymbol:!1,variant:"main"}))});var ci={int:"∫",iint:"∬",iiint:"∭",oint:"∮",oiint:"∯",oiiint:"∰",intclockwise:"∱",varointclockwise:"∲",ointctrclockwise:"∳",intctrclockwise:"⨑",sqcup:"⊔",sqcap:"⊓",uplus:"⊎",wr:"≀",amalg:"⨿",Cap:"⋒",Cup:"⋓",doublecap:"⋒",doublecup:"⋓"};Z(Object.keys(ci),"",{ifMode:"math",createAtom:e=>{let i=ci[e.command.slice(1)];return new nN(i,h(u({},e),{limits:"adjacent",isExtensibleSymbol:!0,variant:{"⋒":"ams","⋓":"ams"}[i]}))}}),Z(["Re","Im"],"",{ifMode:"math",createAtom:e=>new nN({"\\Re":"ℜ","\\Im":"ℑ"}[e.command],h(u({},e),{limits:"adjacent",isFunction:!0,variant:"fraktur"}))}),Z("middle","{:delim}",{ifMode:"math",createAtom:e=>{var i;return new nB(h(u({},e),{delim:null!=(i=e.args[0])?i:"|",size:1}))}}),Z("the","{:value}",{createAtom:e=>new ok(h(u({},e),{captureSelection:!0,verbatimLatex:null})),render:(e,i)=>{var r;let a=new og({parent:i},e.style),o="";e.isSelected&&(o+=" ML__selected");let n=a.evaluate(e.args[0]);return new or((null!=(r=of(n))?r:"").split("").map(i=>new or(i,{type:"ord",classes:o,mode:e.mode,isSelected:e.isSelected,style:u({variant:"main"},e.style)})),{type:"lift",style:e.style,caret:e.caret,isSelected:e.isSelected,classes:o}).wrap(a)},serialize:e=>{var i;return`\\the${null!=(i=of(e.args[0]))?i:"\\relax"}`}}),Z("mathtip","{:auto}{:math}",{createAtom:e=>new nY(h(u({},e),{body:T(e.args[0]),tooltip:T(e.args[1]),content:"math"})),serialize:(e,i)=>i.skipStyles?e.bodyToLatex(i):`\\texttip{${e.bodyToLatex(i)}}{${ok.serialize([e.tooltip],h(u({},i),{defaultMode:"math"}))}}`}),Z("texttip","{:auto}{:text}",{createAtom:e=>new nY(h(u({},e),{body:T(e.args[0]),tooltip:T(e.args[1]),content:"text"})),serialize:(e,i)=>i.skipStyles?e.bodyToLatex(i):`\\texttip{${e.bodyToLatex(i)}}{${ok.serialize([e.tooltip],h(u({},i),{defaultMode:"text"}))}}`}),Z("error","{:math}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[0])})),serialize:(e,i)=>`\\error{${e.bodyToLatex(i)}}`,render:(e,i)=>e.createBox(i,{classes:"ML__error"})}),Z("ensuremath","{:math}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[0])})),serialize:(e,i)=>`${e.command}{${e.bodyToLatex(h(u({},i),{defaultMode:"math"}))}}`}),Z("color","{:value}",{applyStyle:(e,i,r)=>{var a,o;return{verbatimColor:null!=(a=of(i[0]))?a:void 0,color:r.toColor(null!=(o=i[0])?o:{string:"red"})}}}),Z("textcolor","{:value}{content:auto*}",{applyStyle:(e,i,r)=>{var a,o;return{verbatimColor:null!=(a=of(i[0]))?a:void 0,color:r.toColor(null!=(o=i[0])?o:{string:"red"})}}}),Z("boxed","{content:math}",{createAtom:e=>new nv(h(u({},e),{body:T(e.args[0]),framecolor:{string:"black"}}))}),Z("colorbox","{:value}{:text*}",{applyStyle:(e,i,r)=>{var a,o;return{verbatimBackgroundColor:null!=(a=of(i[0]))?a:void 0,backgroundColor:r.toBackgroundColor(null!=(o=i[0])?o:{string:"yellow"})}}}),Z("fcolorbox","{frame-color:value}{background-color:value}{content:text}",{applyMode:"text",createAtom:e=>{var i,r;return new nv(h(u({},e),{body:T(e.args[2]),framecolor:null!=(i=e.args[0])?i:{string:"blue"},backgroundcolor:null!=(r=e.args[1])?r:{string:"yellow"}}))},serialize:(e,i)=>{var r,a;return i.skipStyles?e.bodyToLatex(h(u({},i),{defaultMode:"text"})):a2(e.command,null!=(r=of(e.framecolor))?r:"",null!=(a=of(e.backgroundcolor))?a:"",e.bodyToLatex(h(u({},i),{defaultMode:"text"})))}}),Z("bbox","[:bbox]{body:auto}",{createAtom:e=>{var i;let r=e.args[0],a=T(e.args[1]);return new nv(r?h(u({},e),{body:a,padding:r.padding,border:r.border,backgroundcolor:null!=(i=r.backgroundcolor)?i:void 0}):h(u({},e),{body:a}))},serialize:(e,i)=>{var r,a;if(i.skipStyles)return e.bodyToLatex(i);let o=e.command;if(Number.isFinite(e.padding)||void 0!==e.border||void 0!==e.backgroundcolor){let i=[];e.padding&&i.push(null!=(r=of(e.padding))?r:""),e.border&&i.push(`border: ${e.border}`),e.backgroundcolor&&i.push(null!=(a=of(e.backgroundcolor))?a:""),o+=`[${i.join(",")}]`}return a2(o,e.bodyToLatex(i))}}),Z(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[0])})),render:(e,i)=>{let r=new og({parent:i,mathstyle:e.command.slice(1)},e.style),a=ok.createBox(r,e.body,{type:"lift"});return e.caret&&(a.caret=e.caret),e.bind(i,a)},serialize:(e,i)=>i.skipStyles?e.bodyToLatex(i):`{${a4([e.command,e.bodyToLatex(i)])}}`}),Z(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:e=>({fontSize:({"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10})[e]})}),Z("fontseries","{:string}",{ifMode:"text",applyStyle:(e,i)=>{var r;return{fontSeries:null!=(r=i[0])?r:"auto"}}}),Z("fontshape","{:string}",{ifMode:"text",applyStyle:(e,i)=>{var r;return{fontShape:null!=(r=i[0])?r:"auto"}}}),Z("fontfamily","{:string}",{ifMode:"text",applyStyle:(e,i)=>{var r;return{fontFamily:null!=(r=i[0])?r:"roman"}}}),Z("selectfont","",{ifMode:"text",applyStyle:()=>({})}),Z("bf","{:rest}",{applyStyle:()=>({fontSeries:"b",fontShape:"n",fontFamily:"roman"})}),Z(["boldsymbol","bm"],"{:math}",{applyMode:"math",createAtom:e=>new ok(h(u({},e),{body:T(e.args[0])})),serialize:(e,i)=>`${e.command}{${e.bodyToLatex(i)}}`,render:(e,i)=>e.createBox(i,{classes:"ML__boldsymbol"})}),Z("bold","{:math*}",{applyMode:"math",applyStyle:()=>({variantStyle:"bold"})}),Z("bfseries","{:rest}",{applyMode:"text",applyStyle:()=>({fontSeries:"b"})}),Z("mdseries","{:rest}",{applyMode:"text",applyStyle:()=>({fontSeries:"m"})}),Z("upshape","{:rest}",{applyMode:"text",applyStyle:()=>({fontShape:"n"})}),Z("slshape","{:rest}",{applyMode:"text",applyStyle:()=>({fontShape:"sl"})}),Z("scshape","{:rest}",{applyMode:"text",applyStyle:()=>({fontShape:"sc"})}),Z("textbf","{:text*}",{applyMode:"text",applyStyle:()=>({fontSeries:"b"})}),Z("textmd","{:text*}",{applyMode:"text",applyStyle:()=>({fontSeries:"m"})}),Z("textup","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"n"})}),Z("textnormal","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"n",fontSeries:"m"})}),Z("textsl","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"sl"})}),Z("textit","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"it"})}),Z("textsc","{:text*}",{applyMode:"text",applyStyle:()=>({fontShape:"sc"})}),Z("textrm","{:text*}",{applyMode:"text",applyStyle:()=>({fontFamily:"roman"})}),Z("textsf","{:text*}",{applyMode:"text",applyStyle:()=>({fontFamily:"sans-serif"})}),Z("texttt","{:text*}",{applyMode:"text",applyStyle:()=>({fontFamily:"monospace"})}),Z("mathbf","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"normal",variantStyle:"bold"})}),Z("mathit","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"main",variantStyle:"italic"})}),Z("mathnormal","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"normal",variantStyle:"italic"})}),Z("mathbfit","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"main",variantStyle:"bolditalic"})}),Z("mathrm","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"normal",variantStyle:"up"})}),Z("mathsf","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"sans-serif",variantStyle:"up"})}),Z("mathtt","{:math*}",{applyMode:"math",applyStyle:()=>({variant:"monospace",variantStyle:"up"})}),Z("it","{:rest}",{applyStyle:()=>({fontSeries:"m",fontShape:"it",fontFamily:"roman",variantStyle:"italic"})}),Z("rmfamily","",{applyStyle:()=>({fontFamily:"roman"})}),Z("sffamily","",{applyStyle:()=>({fontFamily:"sans-serif"})}),Z("ttfamily","",{applyStyle:()=>({fontFamily:"monospace"})}),Z(["Bbb","mathbb"],"{:math*}",{applyStyle:()=>({variant:"double-struck",variantStyle:"up"})}),Z(["frak","mathfrak"],"{:math*}",{applyStyle:()=>({variant:"fraktur",variantStyle:"up"})}),Z("mathcal","{:math*}",{applyStyle:()=>({variant:"calligraphic",variantStyle:"up"})}),Z("mathscr","{:math*}",{applyStyle:()=>({variant:"script",variantStyle:"up"})}),Z("mbox","{:text}",{ifMode:"math",createAtom:e=>new ok(h(u({},e),{type:"mord",body:T(e.args[0]),mode:"math"})),serialize:(e,i)=>a2("\\mbox",e.bodyToLatex(h(u({},i),{defaultMode:"text"})))}),Z("text","{:text}",{ifMode:"math",applyMode:"text"}),Z(["class","htmlClass"],"{name:string}{content:auto}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[1])})),serialize:(e,i)=>!e.args[0]||i.skipStyles?e.bodyToLatex(i):`${e.command}{${e.args[0]}}{${e.bodyToLatex(i)}}`,render:(e,i)=>{var r;return e.createBox(i,{classes:null!=(r=e.args[0])?r:""})}}),Z(["cssId","htmlId"],"{id:string}{content:auto}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[1])})),serialize:(e,i)=>{var r;return!(null!=(r=e.args)&&r[0])||i.skipStyles?e.bodyToLatex(i):`${e.command}{${e.args[0]}}{${e.bodyToLatex(i)}}`},render:(e,i)=>{var r;let a=e.createBox(i);return a.cssId=null!=(r=e.args[0])?r:"",a}}),Z("htmlData","{data:string}{content:auto}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[1])})),serialize:(e,i)=>{var r;return!(null!=(r=e.args)&&r[0])||i.skipStyles?e.bodyToLatex(i):`\\htmlData{${e.args[0]}}{${e.bodyToLatex(i)}}`},render:(e,i)=>{var r;let a=e.createBox(i);return a.htmlData=null!=(r=e.args[0])?r:"",a}}),Z(["style","htmlStyle"],"{data:string}{content:auto}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[1])})),serialize:(e,i)=>{var r;return!(null!=(r=e.args)&&r[0])||i.skipStyles?e.bodyToLatex(i):`${e.command}{${e.args[0]}}{${e.bodyToLatex(i)}}`},render:(e,i)=>{var r;let a=e.createBox(i);return a.htmlStyle=null!=(r=e.args[0])?r:"",a}}),Z("em","{:rest}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[0])})),serialize:(e,i)=>i.skipStyles?e.bodyToLatex(i):`{\\em ${e.bodyToLatex(i)}}`,render:(e,i)=>e.createBox(i,{classes:"ML__emph",boxType:"lift"})}),Z("emph","{:auto}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[1])})),serialize:(e,i)=>i.skipStyles?e.bodyToLatex(i):`\\emph{${e.bodyToLatex(i)}}`,render:(e,i)=>e.createBox(i,{classes:"ML__emph",boxType:"lift"})});var cr={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};function ca(e,i){var r,a,o,n,s,l;let c={};"string"==typeof i.color&&(c.verbatimColor=i.color,c.color=null!=(r=e.colorMap(i.color))?r:"none"),"string"==typeof i.backgroundColor&&(c.verbatimBackgroundColor=i.backgroundColor,c.backgroundColor=null!=(a=e.backgroundColorMap(i.backgroundColor))?a:"none"),"string"==typeof i.fontFamily&&(c.fontFamily=i.fontFamily),"string"==typeof i.series&&(c.fontSeries=i.series),"string"==typeof i.fontSeries&&(c.fontSeries=i.fontSeries.toLowerCase()),c.fontSeries&&(c.fontSeries=null!=(o=({bold:"b",medium:"m",normal:"m"})[c.fontSeries])?o:c.fontSeries),"string"==typeof i.shape&&(c.fontShape=i.shape),"string"==typeof i.fontShape&&(c.fontShape=i.fontShape.toLowerCase()),c.fontShape&&(c.fontShape=null!=(n=({italic:"it",up:"n",upright:"n",normal:"n"})[c.fontShape])?n:c.fontShape);let d=null!=(s=i.size)?s:i.fontSize;return"number"==typeof d?c.fontSize=Math.max(1,Math.min(10,d)):"string"==typeof d&&(c.fontSize=null!=(l=({size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10})[d.toLowerCase()])?l:({tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10})[d]),c}function co(e){let[i,r]=oM(e.selection);return i=cn(e,i,"backward"),r=cn(e,r,"forward"),e.setSelection(i,r),!0}function cn(e,i,r){var a,o,n;let s=e.at(i);if(!s)return i;let l="forward"===r?1:-1;if("text"===s.mode){for(;s&&!("text"!==s.mode||!$.test(s.value));)i+=l,s=e.at(i);return"backward"===r?i-1:i}if("latex"===s.mode){if(/[a-zA-Z\*]/.test(s.value)){if("backward"===r)for(;s&&"latex"===s.mode&&"\\"!==s.value&&/[a-zA-Z]/.test(s.value);)i+=l,s=e.at(i);else for(;s&&"latex"===s.mode&&/[a-zA-Z\*]/.test(s.value);)i+=l,s=e.at(i)}else if("{"===s.value){if("forward"===r){for(;s&&"latex"===s.mode&&"}"!==s.value;)i+=l,s=e.at(i);return i}}else if("}"===s.value){if("backward"===r){for(;s&&"latex"===s.mode&&"{"!==s.value;)i+=l,s=e.at(i);return i-1}return i}return i-1}if("math"===s.mode){if(s.isDigit()){for(;null!=(a=e.at(i+l))&&a.isDigit();)i+=l;return"backward"===r?i-1:i}if(s.style.variant||s.style.variantStyle){let a=null==(o=e.at(i))?void 0:o.style;for(;a&&a.variant===s.style.variant&&a.variantStyle===s.style.variantStyle;)a=null==(n=e.at(i+l))?void 0:n.style,i+=l;return"backward"===r?i-1:i}}return i}Z(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:e=>{var i;return new n$(h(u({},e),{delim:null!=(i=e.args[0])?i:".",size:cr[e.command].size,delimType:cr[e.command].mclass}))}}),Z(["hspace","hspace*"],"{width:value}",{createAtom:e=>{var i;return new nj(h(u({},e),{width:null!=(i=e.args[0])?i:{dimension:0}}))}}),Z(["mkern","kern","mskip","hskip","mspace"],"{width:value}",{createAtom:e=>{var i;return new nj(h(u({},e),{width:null!=(i=e.args[0])?i:{dimension:0}}))}}),Z("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:e=>new ok(e),render:(e,i)=>{let r=0,a=i.mathstyle.id;(5===a||4===a)&&(r=1),(3===a||2===a)&&(r=2),(1===a||0===a)&&(r=3);let o=T(e.args[r]);return ok.createBox(i,o)},serialize:(e,i)=>`\\mathchoice{${ok.serialize(e.args[0],i)}}{${ok.serialize(e.args[1],i)}}{${ok.serialize(e.args[2],i)}}{${ok.serialize(e.args[3],i)}}`}),Z("mathop","{:auto}",{createAtom:e=>new ok(h(u({},e),{type:"mop",body:T(e.args[0]),limits:"over-under",isFunction:!0,captureSelection:!0})),render:(e,i)=>{var r;let a=ok.createBox(i,e.body);if(e.superscript||e.subscript){let o=null!=(r=e.subsupPlacement)?r:"auto";a="over-under"===o||"auto"===o&&i.isDisplayStyle?e.attachLimits(i,{base:a}):e.attachSupsub(i,{base:a})}return new or(e.bind(i,a),{type:"op",isSelected:e.isSelected,classes:"op-group"})},serialize:(e,i)=>{let r=[a2(e.command,e.bodyToLatex(i))];return e.explicitSubsupPlacement&&("over-under"===e.subsupPlacement&&r.push("\\limits"),"adjacent"===e.subsupPlacement&&r.push("\\nolimits"),"auto"===e.subsupPlacement&&r.push("\\displaylimits")),r.push(e.supsubToLatex(i)),a4(r)}}),Z(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:e=>new ok(h(u({},e),{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[e.command],body:T(e.args[0]),captureSelection:!0}))}),Z(["operatorname","operatorname*"],"{operator:math}",{createAtom:e=>{let i=T(e.args[0]).map(e=>{var i;return"first"===e.type||(e.type="mord",e.value=null!=(i=({"∗":"*","−":"-"})[e.value])?i:e.value,e.isFunction=!1,e.style.variant||e.style.variantStyle||(e.style.variant="main",e.style.variantStyle="up")),e});return new ok(h(u({},e),{type:"mop",body:i,isFunction:!0,limits:"\\operatorname"===e.command?"adjacent":"over-under"}))},render:(e,i)=>{var r;let a=ok.createBox(i,e.body);if(e.superscript||e.subscript){let o=null!=(r=e.subsupPlacement)?r:"auto";a="over-under"===o||"auto"===o&&i.isDisplayStyle?e.attachLimits(i,{base:a}):e.attachSupsub(i,{base:a})}return e.caret&&(a.caret=e.caret),new or(e.bind(i,a),{type:"op",isSelected:e.isSelected,classes:"op-group"})},serialize:(e,i)=>{let r=[a2(e.command,e.bodyToLatex(i))];return e.explicitSubsupPlacement&&("over-under"===e.subsupPlacement&&r.push("\\limits"),"adjacent"===e.subsupPlacement&&r.push("\\nolimits"),"auto"===e.subsupPlacement&&r.push("\\displaylimits")),r.push(e.supsubToLatex(i)),a4(r)}}),Z(["char","unicode"],"{charcode:value}",{createAtom:e=>new ok(h(u({},e),{type:"text"===e.mode?"text":"mord"})),serialize:e=>{var i;return`${e.command}${of(null!=(i=e.args[0])?i:{number:10067,base:"hexadecimal"})}`},render:(e,i)=>{let r=i.evaluate(e.args[0]);return r&&"number"in r||(r={number:10067,base:"hexadecimal"}),e.value=String.fromCodePoint(r.number),e.createBox(i)}}),Z("rule","[raise:value]{width:value}{thickness:value}",{createAtom:e=>new ok(e),render:(e,i)=>{var r,a,o;let n=new og({parent:i,mathstyle:"textstyle"},e.style),s=n.toEm(null!=(r=e.args[0])?r:{dimension:0}),l=n.toEm(null!=(a=e.args[1])?a:{dimension:10}),c=n.toEm(null!=(o=e.args[2])?o:{dimension:10}),d=new or(null,{classes:"rule",type:"ord",width:l,height:c+s,depth:-s});return d.setStyle("border-right-width",l,"em"),d.setStyle("border-top-width",c,"em"),d.setStyle("border-color",e.style.color),d.setStyle("vertical-align",s,"em"),e.isSelected&&d.setStyle("opacity","50%"),e.bind(n,d),e.caret&&(d.caret=e.caret),d.wrap(i)},serialize:e=>`\\rule${e.args[0]?`[${of(e.args[0])}]`:""}{${of(e.args[1])}}{${of(e.args[2])}}`}),Z(["overline","underline"],"{:auto}",{createAtom:e=>new ok(h(u({},e),{body:T(e.args[0])})),render:(e,i)=>{let r,a=e.command.substring(1),o=new og({parent:i,mathstyle:"cramp"},e.style),n=ok.createBox(o,e.body);if(!n)return null;let s=o.metrics.defaultRuleThickness/o.scalingFactor,l=new or(null,{classes:a+"-line"});return l.height=s,l.maxFontSize=1.125*s*o.scalingFactor,r=new ol("overline"===a?{shift:0,children:[{box:n},3*s,{box:l},s]}:{top:n.height,children:[s,{box:l},3*s,{box:n}]}),e.caret&&(r.caret=e.caret),new or(r,{classes:a,type:"ignore"})}}),Z("overset","{:auto}{base:auto}",{createAtom:e=>{let i=T(e.args[1]);return new nI(h(u({},e),{above:T(e.args[0]),body:i,skipBoundary:!1,boxType:ot(i)}))},serialize:(e,i)=>a2(e.command,e.aboveToLatex(i),e.bodyToLatex(i))}),Z("underset","{:auto}{base:auto}",{createAtom:e=>{let i=T(e.args[1]);return new nI(h(u({},e),{below:T(e.args[0]),body:i,skipBoundary:!1,boxType:ot(i)}))},serialize:(e,i)=>a2(e.command,e.belowToLatex(i),e.bodyToLatex(i))}),Z("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:e=>{let i=T(e.args[2]);return new nI(h(u({},e),{above:T(e.args[0]),below:T(e.args[1]),body:i,skipBoundary:!1,boxType:ot(i)}))},serialize:(e,i)=>a2(e.command,e.belowToLatex(i),e.bodyToLatex(i))}),Z(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:e=>new nI(h(u({},e),{body:T(e.args[2]),above:T(e.args[1]),below:T(e.args[0]),skipBoundary:!1,boxType:"\\stackrel"===e.command?"rel":"bin"})),serialize:(e,i)=>a2(e.command,e.aboveToLatex(i),e.bodyToLatex(i))}),Z("smash","[:string]{:auto}",{createAtom:e=>{var i,r,a,o;return new nV(h(u({},e),{body:T(e.args[1]),smashHeight:null==(r=null==(i=e.args[0])?void 0:i.includes("t"))||r,smashDepth:null==(o=null==(a=e.args[0])?void 0:a.includes("b"))||o}))}}),Z(["vphantom"],"{:auto}",{createAtom:e=>new nV(h(u({},e),{body:T(e.args[0]),isInvisible:!0,smashWidth:!0}))}),Z(["hphantom"],"{:auto}",{createAtom:e=>new nV(h(u({},e),{body:T(e.args[0]),isInvisible:!0,smashHeight:!0,smashDepth:!0}))}),Z(["phantom"],"{:auto}",{createAtom:e=>new nV(h(u({},e),{body:T(e.args[0]),isInvisible:!0}))}),Z("not","{:math}",{createAtom:e=>{let i=T(e.args[0]);return new ok(0===i.length?h(u({},e),{type:"mrel",value:""}):h(u({},e),{body:[new nR(h(u({},e),{body:"",align:"right"})),...i],captureSelection:!0}))},serialize:(e,i)=>{let r=e.args[0],a=r&&"object"==typeof r&&"group"in r;return""!==e.value?a?`\\not{${ok.serialize(r.group,i)}}`:`\\not${ok.serialize(r,i)}`:a?"\\not{}":"\\not"},render:(e,i)=>{if(e.value)return e.createBox(i);let r=e.args[0]&&"object"==typeof e.args[0]&&"group"in e.args[0]?"ord":ot(T(e.args[0])),a=ok.createBox(i,e.body,{type:r});return e.caret&&(a.caret=e.caret),e.bind(i,a)}}),Z(["ne","neq"],"",{createAtom:e=>new ok(h(u({},e),{type:"mrel",body:[new nR(h(u({},e),{body:"",align:"right",boxType:"rel"})),new ok(h(u({},e),{value:"="}))],captureSelection:!0})),serialize:e=>e.command}),Z("rlap","{:auto}",{createAtom:e=>new nR(h(u({},e),{body:T(e.args[0]),align:"right"}))}),Z("llap","{:auto}",{createAtom:e=>new nR(h(u({},e),{body:T(e.args[0]),align:"left"}))}),Z("mathrlap","{:math}",{createAtom:e=>new nR(h(u({},e),{body:T(e.args[0]),align:"left"}))}),Z("mathllap","{:math}",{createAtom:e=>new nR(h(u({},e),{body:T(e.args[0]),align:"left"}))}),Z("raisebox","{:value}{:text}",{createAtom:e=>{var i;return new nv(h(u({},e),{body:T(e.args[1]),padding:{dimension:0},offset:null!=(i=e.args[0])?i:{dimension:0}}))},serialize:(e,i)=>{var r;return a2("\\raisebox",null!=(r=of(e.offset))?r:"0pt",e.bodyToLatex(i))}}),Z("raise","{:value}{:auto}",{createAtom:e=>{var i;return new nv(h(u({},e),{body:T(e.args[1]),padding:{dimension:0},offset:null!=(i=e.args[0])?i:{dimension:0}}))},serialize:(e,i)=>{var r;return a2("\\raise",null!=(r=of(e.offset))?r:"0pt",e.bodyToLatex(i))}}),Z("lower","{:value}{:auto}",{createAtom:e=>{var i;return new nv(h(u({},e),{body:T(e.args[1]),padding:{dimension:0},offset:null!=(i=oy(e.args[0],-1))?i:{dimension:0}}))},serialize:(e,i)=>{var r,a;return a2("\\lower",null!=(a=of(oy(null!=(r=e.offset)?r:{dimension:0},-1)))?a:"0pt",e.bodyToLatex(i))}}),j("0123456789/@.?!"),H(65,90),H(97,122),j([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]),j([["\\sharp",9839],["\\flat",9837],["\\natural",9838],["\\#",35],["\\&",38],["\\clubsuit",9827],["\\heartsuit",9825],["\\spadesuit",9824],["\\diamondsuit",9826],["\\parallelogram",9649]]),j([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\Q",81,"mord","double-struck"],["\\C",67,"mord","double-struck"],["\\P",80,"mord","double-struck"],["\\pounds",163],["\\euro",8364]]),j([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel"),j([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]),j([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\twoheadrightarrowtail",10518],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nleftarrow",8602],["\\nrightarrow",8603],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\nvrightarrow",8696],["\\nvtwoheadrightarrow",10496],["\\nvrightarrowtail",10516],["\\nvtwoheadrightarrowtail",10519],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams"),j([["+",43],["-",8722],["−",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin"),j([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams"),j([["\\surd",8730],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\emptyset",8709]]),j([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",8869],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel"),j([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams"),j([["\\wp",8472],["\\aleph",8501]]),j([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams"),j([["\\ ",160],["~",160]],"space"),Z(["!",",",":",";","enskip","enspace","quad","qquad"],"",{createAtom:e=>new nj(e)}),Z("space","",{createAtom:e=>new nj(e)}),j([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct"),j([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner"),j([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]),sF({undo:e=>(e.undo(),!0),redo:e=>(e.redo(),!0),scrollIntoView:e=>(e.scrollIntoView(),!0),scrollToStart:e=>(e.field.scroll(0,0),!0),scrollToEnd:e=>{let i=e.field.getBoundingClientRect();return e.field.scroll(i.left-window.scrollX,0),!0},toggleKeystrokeCaption:function(e){return(e.keystrokeCaptionVisible=!e.keystrokeCaptionVisible,e.keystrokeCaptionVisible)?l6().innerHTML="":sw("mathlive-keystroke-caption-panel").style.visibility="hidden",!1},plonk:e=>(e.model.announce("plonk"),!0),switchMode:(e,i,r,a)=>(e.switchMode(i,r,a),!0),insert:(e,i,r)=>e.insert(i,r),typedText:(e,i,r)=>(l5(e,i,r),!0),insertDecimalSeparator:e=>{let i=e.model;return"math"===i.mode&&","===window.MathfieldElement.decimalSeparator&&i.at(Math.max(i.position,i.anchor)).isDigit()?(e.insert("{,}",{format:"latex"}),e.snapshot("insert-mord"),!0):(e.insert("."),!0)},commit:e=>{var i;return sp(e.model,{inputType:"insertLineBreak"})&&(null==(i=e.host)||i.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),sm(e.model,{inputType:"insertLineBreak"})),!0},insertPrompt:(e,i,r)=>{let a=e.getPrompts(),o="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36),n=0;for(;a.includes(o)&&n<100;){if(99===n)return console.error("could not find a unique ID after 100 tries"),!1;o="prompt-"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36),n++}return e.insert(`\\placeholder[${null!=i?i:o}]{}`,r),!0}}),sF({copyToClipboard:e=>(e.focus(),e.model.selectionIsCollapsed&&e.select(),"queryCommandSupported"in document&&document.queryCommandSupported("copy")?document.execCommand("copy"):e.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1)},{target:"mathfield"}),sF({cutToClipboard:e=>(e.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("cut")?document.execCommand("cut"):e.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:e=>(e.focus(),"queryCommandSupported"in document&&document.queryCommandSupported("paste")?(document.execCommand("paste"),!0):(navigator.clipboard.readText().then(i=>{i&&sp(e.model,{inputType:"insertFromPaste",data:i})?(e.stopCoalescingUndo(),e.stopRecording(),e.insert(i,{mode:e.model.mode})&&(sg(e),e.startRecording(),e.snapshot("paste"),sm(e.model,{inputType:"insertFromPaste"}),sB(e))):e.model.announce("plonk"),e.startRecording()}),!0))},{target:"mathfield",canUndo:!0,changeContent:!0,changeSelection:!0}),sF({applyStyle:function(e,i){e.flushInlineShortcutBuffer(),e.stopCoalescingUndo();let r=ca(e,i),{model:a}=e;return a.selectionIsCollapsed?(e.style.fontSeries&&r.fontSeries===e.style.fontSeries&&(r.fontSeries="auto"),r.fontShape&&r.fontShape===e.style.fontShape&&(r.fontShape="auto"),r.color&&r.color===e.style.color&&(r.color="none"),r.backgroundColor&&r.backgroundColor===e.style.backgroundColor&&(r.backgroundColor="none"),r.fontSize&&r.fontSize===e.style.fontSize&&(r.fontSize="auto"),e.style=u(u({},e.style),r)):e.model.deferNotifications({content:!0,type:"insertText"},()=>{a.selection.ranges.forEach(e=>lI(a,e,r,{operation:"toggle"})),e.snapshot("style-change")}),!0}},{target:"mathfield",canUndo:!0,changeContent:!0}),sF({selectGroup:e=>{let i=co(e);return i||e.announce("plonk"),i},selectAll:e=>e.setSelection(0,e.lastOffset),extendSelectionForward:e=>cL(e,"forward",{extend:!0}),extendSelectionBackward:e=>cL(e,"backward",{extend:!0}),extendToNextWord:e=>cM(e,"forward",{extend:!0}),extendToPreviousWord:e=>cM(e,"backward",{extend:!0}),extendSelectionUpward:e=>cL(e,"upward",{extend:!0}),extendSelectionDownward:e=>cL(e,"downward",{extend:!0}),extendToNextBoundary:e=>cM(e,"forward",{extend:!0}),extendToPreviousBoundary:e=>cM(e,"backward",{extend:!0}),extendToGroupStart:e=>{let i=e.setSelection(e.anchor,e.offsetOf(e.at(e.position).firstSibling));return i||e.announce("plonk"),i},extendToGroupEnd:e=>{let i=e.setSelection(e.anchor,e.offsetOf(e.at(e.position).lastSibling));return i||e.announce("plonk"),i},extendToMathFieldStart:e=>{let i=e.setSelection(e.anchor,0);return i||e.announce("plonk"),i},extendToMathFieldEnd:e=>{let i=e.setSelection(e.anchor,e.lastOffset);return i||e.announce("plonk"),i}},{target:"model",changeSelection:!0});var cs=null,cl=0;function cc(e){return null!==e&&void 0!==globalThis.PointerEvent&&e instanceof PointerEvent}function cd(e,i,r,a){var o,n;let s=null==(o=e.fieldContent)?void 0:o.getBoundingClientRect();if(!s)return 0;if(i>s.right||r>s.bottom+8)return e.model.lastOffset;if(i<s.left||r<s.top-8)return 0;(a=null!=a?a:{}).bias=null!=(n=a.bias)?n:0;let l=function(e,i,r){let[,a]=function e(i,r,a,o,n){if(!a.id)return[1/0,null];if(r.has(a.id))return r.get(a.id);let s=oj(i,a);if(!s)return[1/0,null];let l=[1/0,null];if(a.hasChildren&&!a.captureSelection&&o>=s.left&&o<=s.right)for(let s of a.children){let a=e(i,r,s,o,n);a[0]<=l[0]&&(l=a)}return l[1]||(l=[function(e,i,r){if(e>=r.left&&e<=r.right&&i>=r.top&&i<=r.bottom)return 0;let a=e-(r.left+r.right)/2,o=i-(r.top+r.bottom)/2;return a*a+o*o}(o,n,s),a]),r.set(a.id,l),l}(e,new Map,e.model.root,i,r);return a}(e,i,r),c=[],d=l;for(;d;)c.unshift(d),d=d.parent;for(let e of c)if(e.captureSelection){l=e;break}let u=e.model.offsetOf(l);if(u<0)return -1;if(l.leftSibling){if(0===a.bias&&"placeholder"!==l.type){let r=oj(e,l);r&&i<(r.left+r.right)/2&&(u=e.model.offsetOf(l.leftSibling))}else a.bias<0&&(u=e.model.offsetOf(l.leftSibling))}return u}function cu(e){if(e){for(let i=0;e[i];i++){let r=e[i];if(r instanceof n_&&"("===r.leftDelim){let a=0,o=0,n=0;for(let e=0;r.body[e];e++)"genfrac"===r.body[e].type&&(a++,o=e),n++;0===n&&1===a&&(e[i]=r.body[o])}}for(let i of e){for(let e of i.branches)if(!i.hasEmptyBranch(e)){cu(i.branch(e));let r=function(e){if(!e||(e[0].type,e.length>1))return null;let i=e[0];return i instanceof n_&&"("===i.leftDelim&&")"===i.rightDelim?i.removeBranch("body"):null}(i.branch(e));r&&i.setChildren(r,e)}if(i instanceof ny)for(let e of i.cells)cu(e)}}}function ch(e){return!!e.isDigit()||!!(e.type&&/^(mord|surd|msubsup|leftright|mop|mclose)$/.test(e.type))&&!(e.isExtensibleSymbol||e.isFunction)}new class extends oP{constructor(){super("math")}onPaste(e,i){if(!i||!sp(e.model,{data:"string"==typeof i?i:null,dataTransfer:"string"==typeof i?null:i,inputType:"insertFromPaste"}))return!1;let r="",a="auto",o="string"!=typeof i?i.getData("application/json+mathlive"):"";if(o)try{let i=JSON.parse(o);if(i&&Array.isArray(i)){e.snapshot();let r=nQ(i),{model:a}=e;a.selectionIsCollapsed||a.deleteAtoms(oM(a.selection));let o=a.at(a.position);if(o.parent instanceof ny){o.parentBranch;let e=[],i=[];for(let a of("first"===r[0].type&&r.shift(),"first"===r[r.length-1].type&&r.pop(),r))"first"===a.type&&i.length>0?(e.push(i),i=[a]):i.push(a);i.length>0&&e.push(i);let a=Number(o.parentBranch[0]),n=Number(o.parentBranch[1]),s=o.parent.maxColumns;for(;o.parent.colCount-n<e.length&&o.parent.colCount<s;)o.parent.addColumn();o.parent.addChildrenAfter(e[0],o);for(let i=1;i<e.length;i++)++n>=s&&(n=0,o.parent.addRowAfter(a),a++),o.parent.setCell(a,n,e[i])}else o.parent.addChildrenAfter(r.filter(e=>"first"!==e.type),o);return a.position=a.offsetOf(r[r.length-1]),sm(a,{inputType:"insertFromPaste"}),sB(e),!0}}catch(e){}if((o="string"!=typeof i?i.getData("application/json"):"")&&window.MathfieldElement.computeEngine)try{let e=JSON.parse(o);if("object"==typeof e&&"latex"in e&&e.latex&&(r=e.latex),!r){let i=window.MathfieldElement.computeEngine.box(e);i&&!i.has("Error")&&(r=i.latex)}r||(a="latex")}catch(e){}if(!r&&"string"!=typeof i&&(r=i.getData("application/x-latex"))&&(a="latex"),r||(r="string"==typeof i?i:i.getData("text/plain")),r){let i;return[i,r]=oT(r),"auto"===a&&i&&(a="latex"),e.stopCoalescingUndo(),e.stopRecording(),this.insert(e.model,r,{format:a})&&(e.startRecording(),e.snapshot("paste"),sB(e)),e.startRecording(),!0}return!1}insert(e,i,r){var a,o;let n="string"==typeof i?i:null!=(o=null==(a=window.MathfieldElement.computeEngine)?void 0:a.box(i).latex)?o:"";if(!r.silenceNotifications&&!sp(e,{data:n,inputType:"insertText"}))return!1;r.insertionMode||(r.insertionMode="replaceSelection"),r.selectionMode||(r.selectionMode="placeholder"),r.format||(r.format="auto");let{silenceNotifications:s}=e;r.silenceNotifications&&(e.silenceNotifications=!0);let l=e.silenceNotifications;e.silenceNotifications=!0;let c={};if(c[0]="replaceAll"===r.insertionMode?"":e.getValue(e.selection,"latex-unstyled"),c["?"]="\\placeholder{}",c["@"]=c["?"],"replaceSelection"!==r.insertionMode||e.selectionIsCollapsed?"replaceAll"===r.insertionMode?(e.root.setChildren([],"body"),e.position=0):"insertBefore"===r.insertionMode?e.collapseSelection("backward"):"insertAfter"===r.insertionMode&&e.collapseSelection("forward"):e.deleteAtoms(oM(e.selection)),e.at(e.position).isLastSibling||"placeholder"!==e.at(e.position+1).type?"placeholder"===e.at(e.position).type&&e.deleteAtoms([e.position-1,e.position]):e.deleteAtoms([e.position,e.position+1]),c[0])c["@"]=c[0];else if("string"==typeof i&&/(^|[^\\])#@/.test(i)){let i=function(e){let i=e.at(e.position);if("text"===i.mode){for(;!i.isFirstSibling&&"text"===i.mode;)i=i.leftSibling;return e.offsetOf(i)}let r=i,a=!1;if("mclose"===i.type){let e=o8[i.value];for(;!i.isFirstSibling&&!("mopen"===i.type&&i.value===e);)i=i.leftSibling;i.isFirstSibling||(i=i.leftSibling),a=!0}else"leftright"===i.type&&(i=i.leftSibling,a=!0);if(a)for(;!i.isFirstSibling&&(i.isFunction||ch(i));)i=i.leftSibling;else{let e=[];for(;!i.isFirstSibling&&(ch(i)||e.length>0);)"mclose"===i.type&&e.unshift(i.value),"mopen"===i.type&&e.length>0&&i.value===o8[e[0]]&&e.shift(),i=i.leftSibling}return r===i?-1:e.offsetOf(i)}(e);i>=0&&(c["@"]=e.getValue(i,e.position,"latex-unstyled"),e.deleteAtoms([i,e.position]))}c[0]||(c[0]=c["?"]);let d=!1,[u,h]=function(e,i,r,a){var o;let n,s=[];if("string"!=typeof i||"math-json"===a.format){let r=window.MathfieldElement.computeEngine;if(!r)return["math-json",[]];[n,i]=["latex",r.box(i).latex],s=nE(i,{context:e.mathfield.context})}else"string"==typeof i&&"ascii-math"===a.format?([n,i]=oz(i,{format:"ascii-math",inlineShortcuts:e.mathfield.options.inlineShortcuts}),s=nE(i,{context:e.mathfield.context}),"latex"!==n&&e.mathfield.options.removeExtraneousParentheses&&cu(s)):("auto"===a.format||null!=(o=a.format)&&o.startsWith("latex"))&&("auto"===a.format&&([n,i]=oz(i,{format:"auto",inlineShortcuts:e.mathfield.options.inlineShortcuts})),"latex"===a.format&&([,i]=oT(i)),s=nE(i,{context:e.mathfield.context,args:r}),"latex"!==a.format&&e.mathfield.options.removeExtraneousParentheses&&cu(s));return lR(s,a.style),[null!=n?n:"latex",s]}(e,i,e=>(d=!0,c[e]),r);if(!h)return!1;let{parent:p}=e.at(e.position);if("latex"!==u&&e.mathfield.options.removeExtraneousParentheses&&p instanceof n_&&"("===p.leftDelim&&p.hasEmptyBranch("body")&&1===h.length&&"genfrac"===h[0].type){let e=p.parent,i=p.parentBranch;e.removeChild(p),e.setChildren(h,i)}let m=p.hasEmptyBranch("body"),f=e.at(e.position);f.parent.addChildrenAfter(h,f),"latex"===u&&"string"==typeof i&&(null==p?void 0:p.type)==="root"&&m&&!d&&(p.verbatimLatex=i),e.silenceNotifications=l;let y=h[h.length-1];if("placeholder"===r.selectionMode){let i=h.flatMap(e=>[e,...e.children]).find(e=>"placeholder"===e.type);if(i){let r=e.offsetOf(i);e.setSelection(r-1,r),e.announce("move")}else y&&(e.position=e.offsetOf(y))}else"before"===r.selectionMode||("after"===r.selectionMode?y&&(e.position=e.offsetOf(y)):"item"===r.selectionMode&&e.setSelection(e.anchor,e.offsetOf(y)));return sm(e,{data:n,inputType:"insertText"}),e.silenceNotifications=s,!0}},new class extends oP{constructor(){super("text")}onPaste(e,i){if(!i)return!1;let r="string"==typeof i?i:i.getData("text/plain");return!!(r&&sp(e.model,{inputType:"insertFromPaste",data:r}))&&(e.stopCoalescingUndo(),e.stopRecording(),this.insert(e.model,r)&&(sm(e.model,{inputType:"insertFromPaste"}),e.startRecording(),e.snapshot("paste"),sB(e)),e.startRecording(),!0)}insert(e,i,r={}){var a,o;if(!sp(e,{data:i,inputType:"insertText"}))return!1;r.insertionMode||(r.insertionMode="replaceSelection"),r.selectionMode||(r.selectionMode="placeholder"),r.format||(r.format="auto");let{silenceNotifications:n}=e;r.silenceNotifications&&(e.silenceNotifications=!0);let s=e.silenceNotifications;e.silenceNotifications=!0,"replaceSelection"!==r.insertionMode||e.selectionIsCollapsed?"replaceAll"===r.insertionMode?(e.root.setChildren([],"body"),e.position=0):"insertBefore"===r.insertionMode?e.collapseSelection("backward"):"insertAfter"===r.insertionMode&&e.collapseSelection("forward"):e.deleteAtoms(oM(e.selection));let l=(a=i,o=e.mathfield.context,nE(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/£/g,"\\textsterling "),{context:o,parseMode:"text"}));if(lR(l,r.style),!l)return!1;let c=e.at(e.position),d=c.parent.addChildrenAfter(l,c);return e.silenceNotifications=s,"before"===r.selectionMode||("item"===r.selectionMode?e.setSelection(e.anchor,e.offsetOf(d)):d&&(e.position=e.offsetOf(d))),sm(e,{data:i,inputType:"insertText"}),e.silenceNotifications=n,!0}};var cp=(e,i)=>`
  <line x1="${e+20}" y1="${i+20}" 
    x2="${e>i?e+20:180}" 
    y2="${e<i?i+20:180}"/>
  <svg id="plus" viewBox="0 0 40 40" x="${e}" y="${i}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.34-3.33,3.34h-6.67v6.66c0,1.84-1.49,3.34-3.33,3.34s-3.34-1.5-3.34-3.34v-6.66h-6.66c-1.84,0-3.34-1.5-3.34-3.34s1.5-3.33,3.34-3.33h6.66v-6.67c0-1.84,1.5-3.33,3.34-3.33s3.33,1.49,3.33,3.33v6.67h6.67c1.84,0,3.33,1.49,3.33,3.33Z"/>
  </svg>`,cm=(e,i)=>`
  <line x1="${e+20}" y1="${i+20}" 
    x2="${e>i?e+20:180}" 
    y2="${e<i?i+20:180}"/>
  <svg id="minus" viewBox="0 0 40 40" x="${e}" y="${i}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <path class="font" d="m33.33,20c0,1.84-1.49,3.33-3.33,3.33H10c-1.84,0-3.34-1.49-3.34-3.33s1.5-3.34,3.34-3.34h20c1.84,0,3.33,1.5,3.33,3.34Z"/>
  </svg>`,cf=(e,i,r)=>`
  <svg id="arrow" viewBox="0 0 40 40" x="${e}" y="${i}" width="40" height="40">
    <circle class="cls-2" cx="20" cy="20" r="20"/>
    <g transform="rotate(${r})" transform-origin="20 20">
      <path class="font" d="m17.7,7.23h4.6c.52,0,.94.42.94.94v13.82c0,.52.42.94.94.94h3.39c.83,0,1.25,1.01.66,1.6l-7.56,7.56c-.37.37-.96.37-1.32,0l-7.56-7.56c-.59-.59-.17-1.6.66-1.6h3.39c.52,0,.94-.42.94-.94v-13.82c0-.52.42-.94.94-.94Z"/>
    </g>  
  </svg>`,cy=`
<svg class="MLEP__array-buttons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
viewBox=
"-2 -2 205 205">
  <rect 
      class="MLEP__array-insert-background rows"
      x="0" 
      y="52" 
      height="144" 
      width="48" 
      rx="24"/>
      <rect 
      class="MLEP__array-insert-background columns"
      x="52" 
      y="0" 
      height="48" 
      width="144" 
      rx="24"/>
  <g data-command='"moveDown"'>
  ${cf(104,152,0)}
  </g>
  <g data-command='"moveUp"'>
  ${cf(104,56,180)}
  </g>
  <g data-command='"moveToNextWord"'>
  ${cf(152,104,-90)}
  </g>
  <g data-command='"moveToPreviousWord"'>
  ${cf(56,104,90)}
  </g>
  <g>

  <g data-command='"addColumnBefore"'>
  ${cp(56,4)}
  </g>
  <g data-command='"removeColumn"'>
  ${cm(104,4)}
  </g>
  <g data-command='"addColumnAfter"'>
  ${cp(152,4)}
  </g>
  <g data-command='"addRowBefore"'>
  ${cp(4,56)}
  </g>
  <g data-command='"removeRow"'>
  ${cm(4,104)}
  </g>
  <g data-command='"addRowAfter"'>
    ${cp(4,152)}
  </g>
</svg>`,cb=e=>`
<svg id="Bmatrix" class="${e}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","Bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <path class="cls-2" d="m22,4c1.1,0,2,.9,2,2v3c0,1.66.9,3,2,3-1.1,0-2,1.34-2,3v3c0,1.1-.9,2-2,2"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,cg={matrix:e=>`
<svg id="matrix" class="${e}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","matrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,pmatrix:e=>`
<svg id="pmatrix" class="${e}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
data-command='["setEnvironment","pmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4c-3.96,4.6-3.96,11.4,0,16"/>
  <path class="cls-2" d="m22,4c3.96,4.6,3.96,11.4,0,16"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/></svg>`,bmatrix:e=>`
<svg id="bmatrix" class="${e}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","bmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m6,4h-3v16h3"/>
  <path class="cls-2" d="m22,4h3v16h-3"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
</svg>`,Bmatrix:cb,vmatrix:e=>`
<svg id="vmatrix" class="${e}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="4" y1="4" x2="4" y2="20"/>
  <line class="cls-2" x1="24" y1="4" x2="24" y2="20"/>
</svg>`,Vmatrix:e=>`
<svg id="Vmatrix" class="${e}" xmlns="http://www.w3.org/2000/svg" viewBox="-3.5 -3 35 30" 
  data-command='["setEnvironment","Vmatrix"]'>
  <rect class="cls-1" width="28" height="24"/>
  <circle cx="10" cy="8" r="1"/>
  <circle cx="14" cy="12" r="1"/>
  <circle cx="18" cy="16" r="1"/>
  <line class="cls-2" x1="6" y1="4" x2="6" y2="20"/>
  <line class="cls-2" x1="22" y1="4" x2="22" y2="20"/>
  <line class="cls-2" x1="2" y1="4" x2="2" y2="20"/>
  <line class="cls-2" x1="26" y1="4" x2="26" y2="20"/>
</svg>`},cv={cases:e=>`
<svg id="cases" class="${e}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","cases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m10,4c-1.1,0-2,.9-2,2v3c0,1.66-.9,3-2,3,1.1,0,2,1.34,2,3v3c0,1.1.9,2,2,2"/>
  <circle cx="13" cy="8" r="1"/>
  <circle cx="13" cy="16" r="1"/>
  <circle cx="21" cy="8" r="1"/>
  <circle cx="21" cy="16" r="1"/>
</svg>`,rcases:e=>`
<svg id="rcases" class="${e}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 24" 
  data-command='["setEnvironment","rcases"]'>
  <rect class="cls-1" width="28" height="24"/>
  <path class="cls-2" d="m18,20c1.1,0,2-.9,2-2v-3c0-1.66.9-3,2-3-1.1,0-2-1.34-2-3v-3c0-1.1-.9-2-2-2"/>
  <circle cx="15" cy="8" r="1"/>
  <circle cx="15" cy="16" r="1"/>
  <circle cx="7" cy="8" r="1"/>
  <circle cx="7" cy="16" r="1"/>
</svg>`,Bmatrix:cb};function cx(){let e=document.getElementById("mathlive-environment-popover");null==e||e.classList.remove("is-visible")}function cw(e){if(!e.hasFocus())return;let i=!1;if("math"===e.model.mode){var r;let a=e.model.parentEnvironment;if(null!=a&&a.array&&(r=a.environmentName,nm.concat(np).concat(nh).concat(nu).includes(r))){let r=e.options.environmentPopoverPolicy;i="auto"===r&&window.mathVirtualKeyboard.visible||"on"===r}}i?function(e){var i,r;let a=null==(i=e.model.parentEnvironment)?void 0:i.array;if(!a)return;let o=0;a.forEach(e=>{(!o||e.length>o)&&(o=e.length)});let n=document.getElementById("mathlive-environment-popover");n||(n=sw("mathlive-environment-popover"),o4("environment-popover"),o4("core"),n.setAttribute("aria-hidden","true"));let s,l=n.querySelector(".MLEP__environment-controls");l?s=l:(s=document.createElement("div"),n.innerHTML="",n.appendChild(s)),s.className="MLEP__environment-controls",s.style.display="flex",s.style.width="100%",s.style.height="100%",s.style.boxSizing="border-box",s.innerHTML=cy;let c=[],d="",u=e.model.parentEnvironment.environmentName;if(nf(u)){let e=u.replace("*","");d=cg[e]("active");let{[e]:i}=cg;c=Object.values(m(cg,[p(e)])).map(e=>e("inactive"))}else if(nh.includes(u)){let e="dcases"===u?"cases":u;d=cv[e]("active");let{[e]:i}=cv;c=Object.values(m(cv,[p(e)])).map(e=>e("inactive"))}else np.includes(u)&&(d=cg.matrix("active"),c=Object.values(cv).map(e=>e("inactive")));let h=document.createElement("div");h.className="MLEP__environment-delimiter-controls",h.style.display="flex",h.style.flexDirection="column",h.innerHTML=`
  <div class='MLEP__array-delimiter-options'>
  ${d}
  ${c.join("")}
  </div>`,d&&s.appendChild(h),s.querySelectorAll("[data-command]").forEach(i=>{let r=i.dataset.command,a=r;try{a=JSON.parse(r)}catch(e){}i.addEventListener("mousedown",e=>e.preventDefault()),a&&i.addEventListener("click",()=>e.executeCommand(a))});let f=null==(r=e.field)?void 0:r.getBoundingClientRect();f&&(n.style.top=`${window.scrollY+(f.top-n.clientHeight-15)}px`,n.style.left=`${f.left+20}px`,n.classList.add("is-visible"))}(e):cx()}var ck=`<svg style="width: 21px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" role="img" aria-label="${x("tooltip.toggle virtual keyboard")}"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg>`,c_=class{constructor(e,i){var r,a,o,n,s,l,c;let d,p,m,f,y,b,g;this.focusBlurInProgress=!1,this.options=u(h(u({},lr()),{macros:Y(),registers:u({},ob)}),lt(i)),this.eventController=new AbortController,i.eventSink&&(this.host=i.eventSink),this.element=e,e.mathfield=this,this.blurred=!0,this.keystrokeCaptionVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.style={},this.adoptStyle="left","inline-math"===this.options.defaultMode?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline"),this.dirty=!1;let w=null!=(a=null!=(r=i.value)?r:this.element.textContent)?a:"";w=w.trim();let k=la(this.options),_=new ok({type:"root",mode:k,body:nE(w,{context:this.context})});this.model=new lM(this,k,_,{onSelectionDidChange:()=>this.onSelectionDidChange(),onContentWillChange:e=>this.onContentWillChange(e)}),this.undoManager=new lU(this.model);let S=[];if(S.push("<span contenteditable=true aria-multiline=false part=keyboard-sink class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=0></span>"),S.push('<span part=container class=ML__container aria-hidden=true  style="visibility:hidden">'),S.push("<span part=content class=ML__content>"),S.push(s$(this)),S.push("</span>"),window.mathVirtualKeyboard&&(S.push(`<div part=virtual-keyboard-toggle class=ML__virtual-keyboard-toggle role=button ${this.hasEditableContent?"":'style="display:none;"'}data-ML__tooltip="${x("tooltip.toggle virtual keyboard")}">`),S.push(ck),S.push("</div>")),S.push("</span>"),S.push("<span class=ML__sr-only>"),S.push("<span role=status aria-live=assertive aria-atomic=true></span>"),S.push("</span>"),this.element.innerHTML=window.MathfieldElement.createHTML(S.join("")),!this.element.children){console.error("%cMathLive 0.95.5: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include `runtimeCompiler: true` in your Vue configuration. There may a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");return}this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",e=>e.stopImmediatePropagation(),{capture:!1,signal:this.eventController.signal}),this.field.addEventListener("wheel",this,{passive:!1,signal:this.eventController.signal}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this,{signal:this.eventController.signal}):this.field.addEventListener("mousedown",this,{signal:this.eventController.signal}),null==(o=this.element.querySelector("[part=virtual-keyboard-toggle]"))||o.addEventListener("click",()=>{window.mathVirtualKeyboard.visible?window.mathVirtualKeyboard.hide():(window.mathVirtualKeyboard.show({animate:!0}),window.mathVirtualKeyboard.update(su(this)))},{signal:this.eventController.signal}),this.ariaLiveText=this.element.querySelector("[role=status]"),this.keyboardDelegate=(n=this.element.querySelector(".ML__keyboard-sink"),s=this.element,l=this,d=null,p=null,m=!1,f=!1,y=!1,g=(b=new AbortController).signal,n.addEventListener("keydown",e=>{if(m||"Process"===e.key||"CapsLock"===e.code||/(Control|Meta|Alt|Shift)(Left|Right)/.test(e.code)){d=null;return}d=e,p=null,l.onKeystroke(lH(e),e)?n.textContent="":d=null},{capture:!0,signal:g}),n.addEventListener("keypress",e=>{m||(d&&p&&l.onKeystroke(lH(d),d),p=e)},{capture:!0,signal:g}),n.addEventListener("compositionstart",e=>{n.textContent="",m=!0,l.onCompositionStart(e.data)},{capture:!0,signal:g}),n.addEventListener("compositionupdate",e=>{m&&l.onCompositionUpdate(e.data)},{capture:!0,signal:g}),n.addEventListener("compositionend",e=>{n.textContent="",m&&(m=!1,l.onCompositionEnd(e.data))},{capture:!0,signal:g}),n.addEventListener("beforeinput",e=>e.stopImmediatePropagation(),{signal:g}),n.addEventListener("input",e=>{var i;if(!m&&(n.textContent="","insertCompositionText"!==e.inputType)){if("insertFromPaste"===e.inputType){e.preventDefault(),e.stopPropagation();return}l.onInput(null!=(i=e.data)?i:""),e.preventDefault(),e.stopPropagation()}},{signal:g}),n.addEventListener("paste",e=>{n.focus({preventScroll:!0}),n.textContent="",l.onPaste(e)||e.preventDefault(),e.stopImmediatePropagation()},{signal:g}),n.addEventListener("cut",e=>l.onCut(e),{capture:!0,signal:g}),n.addEventListener("copy",e=>l.onCopy(e),{capture:!0,signal:g}),n.addEventListener("blur",e=>{var i,r,a;if((null==(r=null==(i=e.relatedTarget)?void 0:i._mathfield)?void 0:r.element)===s){n.focus({preventScroll:!0}),e.preventDefault(),e.stopPropagation();return}let o=null==(a=sH.scrim)?void 0:a.state;if("open"===o||"opening"===o||e.relatedTarget===e.target.getRootNode().host){e.preventDefault(),e.stopPropagation();return}y||f||(y=!0,d=null,p=null,l.onBlur(),y=!1)},{capture:!0,signal:g}),n.addEventListener("focus",e=>{y||f||(f=!0,l.onFocus(),f=!1)},{capture:!0,signal:g}),{dispose:()=>b.abort(),cancelComposition:()=>{m&&(n.blur(),requestAnimationFrame(()=>n.focus({preventScroll:!0})))},blur:()=>{"function"==typeof n.blur&&n.blur()},focus:()=>{f||"function"!=typeof n.focus||n.focus({preventScroll:!0})},hasFocus:()=>(function(){var e;let i=document.activeElement;for(;null!=(e=null==i?void 0:i.shadowRoot)&&e.activeElement;)i=i.shadowRoot.activeElement;return i})()===n,setAriaLabel:e=>n.setAttribute("aria-label",e),setValue:e=>{var i;n.textContent=e,n.style.left="-1000px",null==(i=window.getSelection())||i.selectAllChildren(n)},moveTo:(e,i)=>{n.style.top=`${i}px`,n.style.left=`${e}px`}}),window.addEventListener("resize",this,{signal:this.eventController.signal}),document.addEventListener("scroll",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.addEventListener("virtual-keyboard-toggle",this),st&&!v.locale.startsWith(st.locale)&&(c=v.locale,st=sa.find(e=>c.startsWith(e.locale))),"ready"!==sK&&document.fonts.ready.then(()=>sO(this)),e.querySelector(".ML__container").style.removeProperty("visibility"),this.undoManager.startRecording(),this.undoManager.snapshot("set-value")}connectToVirtualKeyboard(){this.connectedToVirtualKeyboard||(this.connectedToVirtualKeyboard=!0,window.addEventListener("message",this,{signal:this.eventController.signal}),window.mathVirtualKeyboard.connect(),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(su(this)),cw(this))}disconnectFromVirtualKeyboard(){this.connectedToVirtualKeyboard&&(window.removeEventListener("message",this),window.mathVirtualKeyboard.disconnect(),this.connectedToVirtualKeyboard=!1,cx())}get colorMap(){return e=>{var i,r,a;return null!=(a=null==(r=(i=this.options).colorMap)?void 0:r.call(i,e))?a:C(e)}}get backgroundColorMap(){return e=>{var i,r,a,o,n,s;return null!=(s=null!=(n=null==(r=(i=this.options).backgroundColorMap)?void 0:r.call(i,e))?n:null==(o=(a=this.options).colorMap)?void 0:o.call(a,e))?s:z(e)}}get smartFence(){var e;return null!=(e=this.options.smartFence)&&e}get readOnly(){var e;return null!=(e=this.options.readOnly)&&e}get disabled(){var e,i;return null!=(i=null==(e=this.host)?void 0:e.disabled)&&i}get contentEditable(){var e;return(null==(e=this.host)?void 0:e.getAttribute("contenteditable"))!=="false"}get userSelect(){if(!this.host)return"";let e=getComputedStyle(this.host);return e.getPropertyValue("user-select")||e.getPropertyValue("-webkit-user-select")}get hasEditableContent(){return!this.disabled&&!!this.contentEditable&&(!this.readOnly||this.hasEditablePrompts)}get hasEditablePrompts(){return this.readOnly&&!this.disabled&&this.contentEditable&&void 0!==this.model.findAtom(e=>"prompt"===e.type&&!e.locked)}get isSelectionEditable(){if(this.disabled||!this.contentEditable)return!1;if(!this.readOnly)return!0;let e=this.model.at(this.model.anchor),i=this.model.at(this.model.position),r=ok.commonAncestor(e,i);return!!((null==r?void 0:r.type)==="prompt"||null!=r&&r.parentPrompt)}get letterShapeStyle(){var e;return null!=(e=this.options.letterShapeStyle)?e:"tex"}get minFontScale(){return this.options.minFontScale}get selectionStyle(){if(this.model.selectionIsCollapsed){let e=this.model.at(this.model.selection.ranges[0][0]),i="right"===this.adoptStyle?e.rightSibling:e;if(!i)return{};if("group"===i.type){let e=i.branch("body");return!e||e.length<2?{}:"right"===this.adoptStyle?e[1].style:e[e.length-1].style}return i.style}let e=this.model.getAtoms(this.model.selection);if(0===e.length)return{};let i=u({},e[0].style);return e.forEach(e=>{for(let[r,a]of Object.entries(e.style))i[r]&&i[r]===a||(i[r]=void 0)}),i}get keybindings(){var e,i;if(this._keybindings)return this._keybindings;let[r,a]=function(e,i){let r=[],a=[];for(let o of e)try{let e=function(e,i){if(e.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(e.ifPlatform))throw Error(`Unexpected platform "${e.ifPlatform}" for keybinding ${e.key}`);if(void 0!==e.ifLayout&&(0===i.score||!e.ifLayout.includes(i.id)))return;let r=n5(e.key),a=e.ifPlatform;if(r.cmd){if(a&&"macos"!==a&&"ios"!==a)throw Error('Unexpected "cmd" modifier with platform "'+a+`"
"cmd" modifier can only be used with macOS or iOS platform.`);a||(a="ios"===g()?"ios":"macos"),r.win=!1,r.cmd=!1,r.meta=!0}if(r.win){if(a&&"windows"!==a)throw Error('Unexpected "win" modifier with platform "'+a+`"
"win" modifier can only be used with Windows platform.`);a="windows",r.win=!1,r.cmd=!1,r.meta=!0}if(a&&!function(e){if(y()){let i=g(),r=e.startsWith("!"),a=e.endsWith(i);if(r&&!a||!r&&a)return!0}return"!other"!==e&&"other"===e}(a))return;if(/^\[.+\]$/.test(r.key))return h(u({},e),{ifPlatform:a,key:n7(r)});let o=function(e,i){var r;let a={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!e)return a;for(let[r,o]of Object.entries(i.mapping)){if(o[0]===e)return a.key=`[${r}]`,a;if(o[1]===e)return a.shift=!0,a.key=`[${r}]`,a;if(o[2]===e)return a.alt=!0,a.key=`[${r}]`,a;if(o[3]===e)return a.shift=!0,a.alt=!0,a.key=`[${r}]`,a}return a.key=null!=(r=sr[e])?r:"",a}(r.key,i);if(!o)throw Error('Invalid keybinding key "'+e.key+'"');if(o.shift&&r.shift||o.alt&&r.alt)throw Error(`The keybinding ${e.key} (${sd(e.command)}) is conflicting with the key combination ${n7(o)} using the ${i.displayName} keyboard layout`);return o.shift=o.shift||r.shift,o.alt=o.alt||r.alt,o.meta=r.meta,o.ctrl=r.ctrl,h(u({},e),{ifPlatform:a,key:n7(o)})}(o,i);if(e){let a=r.filter(i=>i.key===e.key&&i.ifMode===e.ifMode);if(a.length>0)throw Error(`Ambiguous key binding ${o.key} (${sd(o.command)}) matches ${a[0].key} (${sd(a[0].command)}) with the ${i.displayName} keyboard layout`);r.push(e)}}catch(e){e instanceof Error&&a.push(e.message)}return[r,a]}(this.options.keybindings,null!=(e=ss())?e:si);return(null==(i=ss())?void 0:i.score)>0&&(this._keybindings=r,a.length>0&&console.error("MathLive 0.95.5: Invalid keybindings for current keyboard layout",a)),r}setOptions(e){var i;this.options=u(u({},this.options),lt(e)),this._keybindings=void 0,"inline-math"===this.options.defaultMode?this.element.classList.add("ML__is-inline"):this.element.classList.remove("ML__is-inline");let r=this.options.defaultMode;"inline-math"===r&&(r="math"),(null==(i=this.model.root.firstChild)?void 0:i.mode)!==r&&(this.model.root.firstChild.mode=r),this.options.readOnly&&this.hasFocus()&&window.mathVirtualKeyboard.visible&&this.executeCommand("hideVirtualKeyboard");let a=ok.serialize([this.model.root],{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in e||this.model.getValue()!==a)&&oP.insert(this.model,a,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",silenceNotifications:!0,mode:"math"}),("value"in e||"macros"in e||"registers"in e||"colorMap"in e||"backgroundColorMap"in e||"letterShapeStyle"in e||"minFontScale"in e||"readOnly"in e||"placeholderSymbol"in e)&&sB(this)}getOptions(e){return li(this.options,e)}getOption(e){return li(this.options,e)}handleEvent(e){var i;if(oR(this)){if(sI(e)){if(!oW(e.origin,null!=(i=this.options.originValidator)?i:"none"))throw new DOMException(`Message from unknown origin (${e.origin}) cannot be handled`,"SecurityError");let{action:r}=e.data;if("execute-command"===r){let i=e.data.command;if("virtual-keyboard"===sN(i))return;this.executeCommand(i)}else"update-state"===r||("focus"===r?this.focus({preventScroll:!0}):"blur"===r&&this.blur());return}switch(e.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":case"pointerdown":!function(e,i){var r;e.atomBoundsCache=new Map;let a,o=!1,n=!1,s="none";if(i.buttons>1)return;let l=!1,c=!1,d=i.clientX,u=i.clientY,h=Date.now(),p=e.field,m=setInterval(()=>{l?p.scroll({top:0,left:p.scrollLeft-16}):c&&p.scroll({top:0,left:p.scrollLeft+16})},32);function f(i){"PointerEvent"in window?(oN(p,"pointermove",y),oN(p,"pointerup pointercancel",f),cc(i)&&p.releasePointerCapture(i.pointerId)):(oN(window,"mousemove",y),oN(window,"mouseup blur",f)),o=!1,clearInterval(m),e.element.classList.remove("tracking"),i&&i.preventDefault()}function y(i){if(!e.hasFocus()){f(null);return}let r=i.clientX,o=i.clientY,s=cc(i)&&"touch"===i.pointerType?20:5;if(Date.now()<h+500&&Math.abs(d-r)<s&&Math.abs(u-o)<s){i.preventDefault(),i.stopPropagation();return}let m=p.getBoundingClientRect();c=r>m.right,l=r<m.left;let y=a;cc(i)&&(i.isPrimary||(y=cd(e,i.clientX,i.clientY,{bias:0})));let b=cd(e,r,o,{bias:r<=d?r===d?0:-1:1});y>=0&&b>=0&&(e.model.extendSelectionTo(y,b),sB(e)),n&&co(e.model),i.preventDefault(),i.stopPropagation()}cs&&5>Math.abs(cs.x-d)&&5>Math.abs(cs.y-u)&&Date.now()<cs.time+500?(cl+=1,cs.time=h):(cs={x:d,y:u,time:h},cl=1);let b=p.getBoundingClientRect();if(d>=b.left&&d<=b.right&&u>=b.top&&u<=b.bottom){if(e.flushInlineShortcutBuffer(),e.adoptStyle="left",(a=cd(e,d,u,{bias:0}))>=0){if(e.element.classList.add("tracking"),i.shiftKey){let i=e.model.selectionIsCollapsed;e.model.extendSelectionTo(e.model.anchor,a),s=sv(e.model)||i?"all":"selection"}else"placeholder"===e.model.at(a).type?(e.model.setSelection(a-1,a),s="selection"):(null==(r=e.model.at(a).rightSibling)?void 0:r.type)==="placeholder"?(e.model.setSelection(a,a+1),s="selection"):(e.model.position=a,s=sv(e.model)?"all":"selection");e.style={},3===i.detail||cl>2?(f(i),(3===i.detail||3===cl)&&(e.model.selection={ranges:[[0,e.model.lastOffset]]},s="all")):o||(o=!0,"PointerEvent"in window?(oq(p,"pointermove",y),oq(p,"pointerup pointercancel",f),cc(i)&&p.setPointerCapture(i.pointerId)):(oq(window,"blur",f),oq(window,"mousemove",y),oq(window,"mouseup",f)),(2===i.detail||2===cl)&&(n=!0,co(e.model),s="all"))}e.hasFocus()||(s="none",e.focus({preventScroll:!0}))}else cs=null;e.stopCoalescingUndo(),"none"!==s&&(e.model.selectionIsCollapsed&&(s="all"),sB(e)),i.preventDefault()}(this,e);break;case"virtual-keyboard-toggle":this.hasFocus()&&cw(this);break;case"resize":case"scroll":this.geometryChangeTimer&&cancelAnimationFrame(this.geometryChangeTimer),this.geometryChangeTimer=requestAnimationFrame(()=>oR(this)&&this.onGeometryChange());break;case"wheel":this.onWheel(e);break;default:console.warn("Unexpected event type",e.type)}}}dispose(){if(!oR(this))return;this.keyboardDelegate.dispose(),this.keyboardDelegate=void 0,this.eventController.abort(),window.mathVirtualKeyboard.removeEventListener("virtual-keyboard-toggle",this),this.disconnectFromVirtualKeyboard(),this.model.dispose();let e=this.element;delete e.mathfield,this.element=void 0,this.host=void 0,this.field=void 0,this.fieldContent=void 0,this.ariaLiveText=void 0,document.getElementById("mathlive-keystroke-caption-panel")&&(sk("mathlive-keystroke-caption-panel"),o2("core"),o2("keystroke-caption")),document.getElementById("mathlive-suggestion-popover")&&(sk("mathlive-suggestion-popover"),o2("suggestion-popover"),o2("core")),document.getElementById("mathlive-environment-popover")&&(sk("mathlive-environment-popover"),o2("environment-popover"),o2("core"))}flushInlineShortcutBuffer(e){if(null!=e||(e={defer:!1}),!e.defer){this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=0;return}this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(e){return"virtual-keyboard"===sN(e)?(this.focus({preventScroll:!0}),window.mathVirtualKeyboard.executeCommand(e),requestAnimationFrame(()=>window.mathVirtualKeyboard.update(su(this))),!1):function(e,i){var r;if(!i)return!1;let a,o=[],n=!1,s=!1;f(i)?(a=i[0],o=i.slice(1)):a=i;let l=sU[a=a.replace(/-\w/g,e=>e[1].toUpperCase())],c=null==l?void 0:l.target;if("model"===c){if(!e.isSelectionEditable&&null!=l&&l.changeContent)return e.model.announce("plonk"),!1;/^(delete|add)/.test(a)&&("deleteBackward"!==a&&e.flushInlineShortcutBuffer(),e.snapshot(a)),/^complete/.test(a)||sb(e),sU[a].fn(e.model,...o),sg(e),s=!0,n=!0}else if("virtual-keyboard"===c)s=null!=(r=window.mathVirtualKeyboard.executeCommand(i))&&r,n=!0;else if(sU[a]){if(!e.isSelectionEditable&&null!=l&&l.changeContent)return e.model.announce("plonk"),!1;/^(undo|redo)/.test(a)&&e.flushInlineShortcutBuffer(),s=sU[a].fn(e,...o),n=!0}else throw Error(`Unknown command "${a}"`);return"virtual-keyboard"!==c&&(!e.model.selectionIsCollapsed||null!=l&&l.changeSelection&&"deleteBackward"!==i)&&(e.flushInlineShortcutBuffer(),null!=l&&l.changeContent||e.stopCoalescingUndo(),e.style={}),s&&sB(e),n}(this,e)}get errors(){return function(e,i){var r;let a=new nA(a1(e,null),null==i?void 0:i.context,{mathstyle:"displaystyle",parseMode:null!=(r=null==i?void 0:i.parseMode)?r:"math"});for(;!a.end();)a.scan();return a.errors}(this.model.getValue(),{context:this.context})}getValue(e,i,r){return this.model.getValue(e,i,r)}setValue(e,i){var r;void 0===(i=null!=i?i:{mode:"math"}).insertionMode&&(i.insertionMode="replaceAll"),(void 0===i.format||"auto"===i.format)&&(i.format="latex"),(void 0===i.mode||"auto"===i.mode)&&(i.mode=null!=(r=function(e,i){let r=e.at(i),a;if(r){a=r.mode;let e=r.parent;for(;!a&&e;)e&&(a=e.mode),e=e.parent}return a}(this.model,this.model.position))?r:"math"),oP.insert(this.model,e,i)&&(sB(this),this.undoManager.snapshot("set-value"))}get expression(){let e=window.MathfieldElement.computeEngine;return e?e.box(e.parse(this.model.getValue("latex-unstyled"))):(console.error("MathLive 0.95.5:  no compute engine available. Make sure the Compute Engine library is loaded."),null)}scrollIntoView(){var e;if(!this.element)return;if(this.host){if(this.options.onScrollIntoView)this.options.onScrollIntoView(this);else if(this.host.scrollIntoView({block:"nearest",inline:"nearest"}),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.container===window.document.body){let i=window.mathVirtualKeyboard.boundingRect,r=this.host.getBoundingClientRect();r.bottom>i.top&&(null==(e=window.document.scrollingElement)||e.scrollBy(0,r.bottom-i.top+8))}}this.dirty&&sP(this,{interactive:!0});let i=this.field.getBoundingClientRect(),r=null;if(this.model.selectionIsCollapsed)r=oI(this.field);else{let e=oH(this);if(e.length>0){let a=-1/0,o=-1/0;for(let i of e)i.right>a&&(a=i.right),i.top<o&&(o=i.top);r={x:a+i.left-this.field.scrollLeft,y:o+i.top-this.field.scrollTop,height:0}}}if(this.host&&r){let e=this.host.getBoundingClientRect(),i=r.y,a=this.host.scrollTop;i<e.top?a=i-e.top+this.host.scrollTop:i>e.bottom&&(a=i-e.bottom+this.host.scrollTop+r.height),this.host.scroll({top:a,left:0})}if(r){let e=r.x-window.scrollX,a=this.field.scrollLeft;e<i.left?a=e-i.left+this.field.scrollLeft-20:e>i.right&&(a=e-i.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:a})}}insert(e,i){if("string"!=typeof e||0===e.length&&((null==i?void 0:i.insertionMode)==="insertBefore"||(null==i?void 0:i.insertionMode)==="insertAfter")||0===e.length&&this.model.selectionIsCollapsed)return!1;if(this.flushInlineShortcutBuffer(),(i=null!=i?i:{mode:"math"}).focus&&this.focus(),i.feedback&&(window.MathfieldElement.keypressVibration&&b()&&navigator.vibrate(3),window.MathfieldElement.playSound("keypress")),"\\\\"===e)l$(this.model);else if("&"===e)lP(this.model);else{let r=this.style;this.model.selectionIsCollapsed?oP.insert(this.model,e,u({style:this.model.at(this.model.position).computedStyle},i)):oP.insert(this.model,e,i),i.resetStyle&&(this.style=r)}return this.snapshot(`insert-${this.model.at(this.model.position).type}`),sB(this),i.scrollIntoView&&this.scrollIntoView(),!0}switchMode(e,i="",r=""){var a;if(this.model.mode===e||!this.hasEditableContent||!this.contentEditable||this.disabled||!(null!=(a=this.host)&&a.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))))return;let o=this.model.mode,{model:n}=this;n.deferNotifications({content:!!r||!!i,selection:!0,type:"insertText"},()=>{let a=!1;if(this.flushInlineShortcutBuffer(),this.stopCoalescingUndo(),i&&"latex"!==e){let r=nE(i,{context:this.context,parseMode:e});n.collapseSelection("forward");let o=n.at(n.position);n.position=n.offsetOf(o.parent.addChildrenAfter(r,o)),a=!0}if(this.model.mode=e,"latex"===e){let e=n.selectionIsCollapsed;sx(this,"accept");let r,a=n.at(n.position);if(e)r="\\";else{let o=oM(n.selection);r=this.model.getValue(o,"latex");let s=this.model.extractAtoms(o);1===s.length&&"placeholder"===s[0].type&&(r=i,e=!0),a=n.at(o[0])}let o=new nq(r);a.parent.addChildAfter(o,a),e?n.position=n.offsetOf(o.lastChild):n.setSelection(n.offsetOf(o.firstChild),n.offsetOf(o.lastChild))}else sf(n).forEach(e=>{e.isError=!1});if(r){let e=nE(r,{context:this.context,parseMode:o});n.collapseSelection("forward");let i=n.at(n.position);n.position=n.offsetOf(i.parent.addChildrenAfter(e,i)),a=!0}return sB(this),this.undoManager.snapshot("latex"===e?"insert-latex":"insert"),a}),this.model.mode=e,window.mathVirtualKeyboard.update(su(this))}hasFocus(){return!this.blurred}focus(e){this.hasFocus()||(this.keyboardDelegate.focus(),this.connectToVirtualKeyboard(),this.model.announce("line")),null!=e&&e.preventScroll||this.scrollIntoView()}blur(){this.disconnectFromVirtualKeyboard(),this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]}}applyStyle(e,i={}){var r,a;let o={operation:"set",silenceNotifications:!1};ln(i)?o.range=i:(o.range=i.range,o.silenceNotifications=null!=(r=i.silenceNotifications)&&r);let n=ca(this,e),s=null!=(a=o.operation)?a:"set";this.model.deferNotifications({content:!o.silenceNotifications,type:"insertText"},()=>{if(void 0===o.range)for(let e of this.model.selection.ranges)lI(this.model,e,n,{operation:s});else lI(this.model,o.range,n,{operation:s})}),sB(this)}getCaretPoint(){let e=oI(this.field);return e?{x:e.x,y:e.y}:null}setCaretPoint(e,i){let r=cd(this,e,i,{bias:0});if(r<0)return!1;let a=this.model.position;return this.model.position=r,this.model.announce("move",a),sB(this),!0}getPrompt(e){return this.model.findAtom(i=>"prompt"===i.type&&i.placeholderId===e)}getPromptValue(e,i){let r=this.getPrompt(e);if(!r)return"";let a=this.model.offsetOf(r.firstChild),o=this.model.offsetOf(r.lastChild);return this.model.getValue(a,o,i)}getPrompts(e){return this.model.getAllAtoms().filter(i=>"prompt"===i.type&&(!e||!(e.id&&i.placeholderId!==e.id||e.locked&&i.locked!==e.locked||"undefined"===e.correctness&&i.correctness||e.correctness&&i.correctness!==e.correctness))).map(e=>e.placeholderId)}setPromptValue(e,i,r){if(void 0!==i){let a=this.getPrompt(e);if(!a){console.error(`MathLive 0.95.5: unknown prompt ${e}`);return}let o=this.model.getBranchRange(this.model.offsetOf(a),"body");this.model.setSelection(o),this.insert(i,h(u({},r),{insertionMode:"replaceSelection"}))}null!=r&&r.silenceNotifications&&(this.valueOnFocus=this.getValue()),sB(this)}setPromptState(e,i,r){let a=this.getPrompt(e);if(!a){console.error(`MathLive 0.95.5: unknown prompt ${e}`);return}"undefined"===i?a.correctness=void 0:"string"==typeof i&&(a.correctness=i),"boolean"==typeof r&&(a.locked=r,a.captureSelection=r),sB(this)}stripPromptContent(e){let i=this.model.getAllAtoms().filter(i=>"prompt"===i.type&&(!e||!(e.id&&i.placeholderId!==e.id||e.locked&&i.locked!==e.locked||"undefined"===e.correctness&&i.correctness||e.correctness&&i.correctness!==e.correctness))),r={};return i.forEach(e=>{let i=e.placeholderId;r[i]=this.getPromptValue(i),this.setPromptValue(i,"")}),r}getPromptState(e){let i=this.getPrompt(e);return i?[i.correctness,i.locked]:(console.error(`MathLive 0.95.5: unknown prompt ${e}`),[void 0,!0])}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop()}snapshot(e){var i;this.undoManager.snapshot(e)&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(su(this)),null==(i=this.host)||i.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}stopCoalescingUndo(){this.undoManager.stopCoalescing(this.model.selection)}stopRecording(){this.undoManager.stopRecording()}startRecording(){this.undoManager.startRecording()}undo(){var e;this.undoManager.undo()&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(su(this)),null==(e=this.host)||e.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var e;this.undoManager.redo()&&(window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(su(this)),null==(e=this.host)||e.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}resetUndo(){var e;null==(e=this.undoManager)||e.reset()}onSelectionDidChange(){var e,i;let r=this.model;this.keyboardDelegate.setValue(r.getValue(this.model.selection,"latex-expanded"));{let i=r.at(r.position),a=null!=(e=i.mode)?e:la(this.options);this.model.mode!==a&&("latex"===this.model.mode?(sx(this,"accept",{mode:a}),r.position=r.offsetOf(i)):this.switchMode(a))}null==(i=this.host)||i.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0})),window.mathVirtualKeyboard.visible&&window.mathVirtualKeyboard.update(su(this)),cw(this)}onContentWillChange(e){var i,r,a;return null==(a=null==(r=this.host)?void 0:r.dispatchEvent(new InputEvent("beforeinput",h(u({},e),{data:e.data?e.data:null!=(i=e.inputType)?i:"",cancelable:!0,bubbles:!0,composed:!0}))))||a}onFocus(){this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.keyboardDelegate.focus(),this.stopCoalescingUndo(),sP(this,{interactive:!0}),this.valueOnFocus=this.model.getValue(),this.hasEditablePrompts&&!this.model.at(this.model.anchor).parentPrompt&&this.executeCommand("moveToNextPlaceholder"),this.focusBlurInProgress=!1)}onBlur(){var e,i,r;if(this.focusBlurInProgress||this.blurred)return;this.focusBlurInProgress=!0,this.stopCoalescingUndo(),this.blurred=!0,this.ariaLiveText.textContent="",sx(this,"accept"),this.model.getValue()!==this.valueOnFocus&&(null==(e=this.host)||e.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),this.disconnectFromVirtualKeyboard(),null==(i=this.host)||i.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),null==(r=this.host)||r.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),sB(this),this.focusBlurInProgress=!1,cx();let a=new AbortController,o=a.signal;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&document.addEventListener("visibilitychange",()=>{oR(this)&&"visible"===document.visibilityState&&this.focus({preventScroll:!0})},{once:!0})},{once:!0,signal:o}),setTimeout(()=>a.abort(),100)}onInput(e){l5(this,e)}onKeystroke(e,i){return l8(this,e,i)}onCompositionStart(e){this.model.deleteAtoms(oM(this.model.selection));let i=oI(this.field);i&&requestAnimationFrame(()=>{sP(this),this.keyboardDelegate.moveTo(i.x,i.y-i.height)})}onCompositionUpdate(e){(function(e,i){let r=e.at(e.position);if("composition"===r.type)r.value=i;else{let{caret:a}=r;r.caret=void 0;let o=new nx(i,{mode:r.mode});o.caret=a,r.parent.addChildAfter(o,r),e.position+=1}})(this.model,e),sB(this)}onCompositionEnd(e){var i;let r;"composition"===(r=(i=this.model).at(i.position)).type&&(r.parent.removeChild(r),i.position-=1),l5(this,e,{simulateKeystroke:!0})}onCut(e){if(!this.isSelectionEditable){this.model.announce("plonk");return}sp(this.model,{inputType:"deleteByCut"})&&(this.stopCoalescingUndo(),oP.onCopy(this,e),lN(this.model,oM(this.model.selection),"deleteByCut"),this.snapshot("cut"),sB(this))}onCopy(e){oP.onCopy(this,e)}onPaste(e){let i=this.isSelectionEditable;return i&&(i=oP.onPaste(this.model.at(this.model.position).mode,this,e.clipboardData)),i||this.model.announce("plonk"),e.preventDefault(),e.stopPropagation(),i}onGeometryChange(){sS(this),cw(this)}onWheel(e){let i=5*e.deltaX;if(!Number.isFinite(i)||0===i)return;let r=this.field;i<0&&0===r.scrollLeft||i>0&&r.offsetWidth+r.scrollLeft>=r.scrollWidth||(r.scrollBy({top:0,left:i}),e.preventDefault(),e.stopPropagation())}getHTMLElement(e){let i=e;for(;!i.id&&i.hasChildren;)i=e.children[0];return this.fieldContent.querySelector(`[data-atom-id="${i.id}"]`)}get context(){var e,i;return{registers:null!=(e=this.options.registers)?e:{},smartFence:this.smartFence,letterShapeStyle:this.letterShapeStyle,minFontScale:this.minFontScale,placeholderSymbol:null!=(i=this.options.placeholderSymbol)?i:"▢",colorMap:e=>this.colorMap(e),backgroundColorMap:e=>this.backgroundColorMap(e),getMacro:e=>ei(e,this.options.macros),atomIdsSettings:{seed:"random",groupNumbers:!1}}}};function cS(e,i,r){if("text"!==e.at(i).mode)return i;let a="backward"===r?-1:1,o;if($.test(e.at(i).value)){let r=i,n;do n="text"===e.at(r).mode&&$.test(e.at(r).value),r+=a;while(e.at(r)&&n);o=e.at(r)?r-2*a:r-a}else if(/\s/.test(e.at(i).value)){let r=i;for(;e.at(r)&&"text"===e.at(r).mode&&/\s/.test(e.at(r).value);)r+=a;if(e.at(r)){let i=!0;do i="text"===e.at(r).mode&&!/\s/.test(e.at(r).value),r+=a;while(e.at(r)&&i);o=e.at(r)?r-2*a:r-a}else o=r-a}else{let r=i;for(;e.at(r)&&"text"===e.at(r).mode&&!/\s/.test(e.at(r).value);)r+=a;o=e.at(r)?r:r-a;let n=!0;for(;e.at(r)&&n;)(n="text"===e.at(r).mode&&/\s/.test(e.at(r).value))&&(o=r),r+=a;o=e.at(r)?r-2*a:r-a}return o-(a>0?0:1)}function cM(e,i,r){var a,o,n,s,l,c,d;let u=e.position;null!=(a=null==r?void 0:r.extend)&&a||e.collapseSelection(i);let h=e.at(e.position);if("forward"===i&&("subsup"===h.type&&(h=h.rightSibling)||(h=e.at(e.position+1))),!h)return e.announce("plonk"),!1;let p=e.offsetOf(h);if(h instanceof oS)p=cS(e,p,i);else if(h instanceof nF){if(h.isSuggestion)for(;h&&h instanceof nF;)h.isSuggestion=!1,p=e.offsetOf(h),h=h.rightSibling;else if("forward"===i){if(!(h=h.rightSibling)||!(h instanceof nF))return e.announce("plonk"),!1;for(;h&&h instanceof nF&&/[a-zA-Z\*]/.test(h.value);)p=e.offsetOf(h),h=h.rightSibling}else{if(!(h=h.leftSibling)||!(h instanceof nF))return e.announce("plonk"),!1;for(;h&&h instanceof nF&&/[a-zA-Z\*]/.test(h.value);)p=e.offsetOf(h),h=h.leftSibling}}else if("forward"===i&&"mopen"===h.type){let i=0;do"mopen"===h.type?i+=1:"mclose"===h.type&&(i-=1),h=h.rightSibling;while(!h.isLastSibling&&0!==i);p=e.offsetOf(h.leftSibling)}else if("backward"===i&&"mclose"===h.type){let i=0;do"mopen"===h.type?i+=1:"mclose"===h.type&&(i-=1),h=h.leftSibling;while(!h.isFirstSibling&&0!==i);p=e.offsetOf(h)}else if("backward"===i){if("first"===h.type)for(;p>0&&"first"===h.type;)p-=1,h=e.at(p);else{let i=h.type;"subsup"===h.type&&(p=e.offsetOf(e.at(p).leftSibling)),p-=1;let r=null==(o=e.at(p))?void 0:o.type;for(;p>=0&&r===i;)(null==(n=e.at(p))?void 0:n.type)==="subsup"?p=e.offsetOf(e.at(p).leftSibling):p-=1,r=e.at(p).type}}else{let{type:i}=h,r=null==(s=e.at(p))?void 0:s.type,{lastOffset:a}=e;for(;p<=a&&(r===i||"subsup"===r);){for(;(null==(l=e.at(p).rightSibling)?void 0:l.type)==="subsup";)p=e.offsetOf(e.at(p).rightSibling);p+=1,r=null==(c=e.at(p))?void 0:c.type}p-=1}if(null!=(d=null==r?void 0:r.extend)&&d){if(!e.setSelection(e.anchor,p))return e.announce("plonk"),!1}else{if(p===e.position)return e.announce("plonk"),!1;e.position=p}return e.announce("move",u),e.mathfield.stopCoalescingUndo(),!0}function cL(e,i,r){var a,o;if(r=null!=r?r:{extend:!1},e.mathfield.adoptStyle="backward"===i?"right":"left","forward"!==i){let[i,r]=sy(e);void 0!==i&&void 0!==r&&e.deleteAtoms([i,r])}if("upward"===i)return function(e,i){var r,a;let o=null!=(r=null==i?void 0:i.extend)&&r;o||e.collapseSelection("backward");let n=()=>{var i,r;let a=!0;return e.silenceNotifications||(a=null==(r=null==(i=e.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))||r),e.announce(a?"plonk":"line"),a},s=e.at(e.position),l=s;for(;l&&"below"!==l.parentBranch&&!(Array.isArray(l.parentBranch)&&l.parent instanceof ny);)l=l.parent;if(Array.isArray(null==l?void 0:l.parentBranch)&&l.parent instanceof ny){let i=l.parent;if(l.parentBranch[0]<1)return n();let r=l.parentBranch[0]-1,a=i.array[r][l.parentBranch[1]];if(!a.some(e=>"prompt"===e.type&&!e.captureSelection)&&e.mathfield.hasEditablePrompts)return n();cA(e,s,a,o,"up")}else{if(!l)return n();let i=null!=(a=l.parent.branch("above"))?a:l.parent.createBranch("above");if(!i.some(e=>"prompt"===e.type&&e.placeholderId)&&e.mathfield.hasEditablePrompts)return n();cA(e,s,i,o,"up")}return e.mathfield.stopCoalescingUndo(),!0}(e,r);if("downward"===i)return function(e,i){var r,a;let o=null!=(r=null==i?void 0:i.extend)&&r;o||e.collapseSelection("forward");let n=()=>{var i,r;let a=!0;return e.silenceNotifications||(a=null==(r=null==(i=e.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))||r),e.announce(a?"plonk":"line"),a},s=e.at(e.position),l=s;for(;l&&"above"!==l.parentBranch&&!(Array.isArray(l.parentBranch)&&l.parent instanceof ny);)l=l.parent;if(Array.isArray(null==l?void 0:l.parentBranch)&&l.parent instanceof ny){let i=l.parent;if(l.parentBranch[0]+1>i.array.length-1)return n();let r=l.parentBranch[0]+1,a=i.array[r][l.parentBranch[1]];if(!a.some(e=>"prompt"===e.type&&!e.captureSelection)&&e.mathfield.hasEditablePrompts)return n();cA(e,s,a,o,"down")}else{if(!l)return n();let i=null!=(a=l.parent.branch("below"))?a:l.parent.createBranch("below");if(!i.some(e=>"prompt"===e.type)&&e.mathfield.hasEditablePrompts)return n();cA(e,s,i,o,"down")}return!0}(e,r);if(r.extend){let r=cC(e,e.position,i);r<0&&(r=0),r>e.lastOffset&&(r=e.lastOffset);let a=e.setSelection(e.anchor,r);return e.mathfield.stopCoalescingUndo(),a}if(e.selectionIsPlaceholder){e.collapseSelection(i);let r=cL(e,i);return e.mathfield.stopCoalescingUndo(),r}let n=e.position,s=n;if(e.collapseSelection(i)?(n=e.position,cz(e,n)||(n=cC(e,n,i))):n=cC(e,n,i),n<0||n>e.lastOffset){let r=!0;return e.silenceNotifications||(r=null==(o=null==(a=e.mathfield.host)?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:i},cancelable:!0,bubbles:!0,composed:!0})))||o),r&&e.announce("plonk"),r}return e.setPositionHandlingPlaceholder(n),e.mathfield.stopCoalescingUndo(),e.announce("move",s),!0}function cC(e,i,r){return(i+="forward"===r?1:-1)<0||i>e.lastOffset||cz(e,i)?i:cC(e,i,r)}function cz(e,i){var r;let a=e.at(i),o=a.parent;for(;o&&!o.inCaptureSelection;)o=o.parent;return!(null!=o&&o.inCaptureSelection||null!=(r=a.parent)&&r.skipBoundary&&(!a.isFirstSibling&&a.isLastSibling||"first"===a.type)||e.mathfield.hasEditablePrompts&&!a.parentPrompt)}function cA(e,i,r,a,o){let n=e.mathfield.hasEditablePrompts,s=n?r.filter(e=>"prompt"===e.type&&!e.captureSelection):r,l=oU(e.mathfield.getHTMLElement(i)).right,c=e.offsetOf(function(e,i,r){let a=1/0,o=0;for(;o<i.length;o++){let n=Math.abs(r-oU(e.getHTMLElement(i[o])).right);if(n<=a)a=n;else break}return i[o-1]}(e.mathfield,s,l))-(n?1:0);if(a){let[i,r]=e.selection.ranges[0];e.setSelection(c<("up"===o?i:r)?{ranges:[[c,r]],direction:"backward"}:{ranges:[[i,c]],direction:"forward"})}else e.setPositionHandlingPlaceholder(c);e.announce(`move ${o}`)}sF({deleteAll:e=>sp(e,{inputType:"deleteContent"})&&lN(e,[0,-1],"deleteContent"),deleteForward:e=>!!(e.mathfield.isSelectionEditable&&sp(e,{inputType:"deleteContentForward"}))&&(e.selectionIsCollapsed?e.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var i,r;let a=e.at(e.position).rightSibling;if(a&&lq(e,"forward",a))return;if(a){if(e.at(e.position).isLastSibling&&lq(e,"forward",a.parent,a.parentBranch))return}else{if((a=e.at(e.position)).isLastSibling&&lq(e,"forward",a.parent,a.parentBranch))return;a=void 0}if(e.position===e.lastOffset||!a){e.announce("plonk");return}a.parent.removeChild(a);let o=null==(i=e.at(e.position))?void 0:i.rightSibling;for(;(null==o?void 0:o.type)==="subsup";)o.parent.removeChild(o),o=null==(r=e.at(e.position))?void 0:r.rightSibling;e.announce("delete",void 0,[a])}):lN(e,oM(e.selection),"deleteContentForward")),deleteBackward:e=>{var i;return!!((i=e).mathfield.isSelectionEditable&&sp(i,{inputType:"deleteContentBackward"}))&&(i.selectionIsCollapsed?i.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let e=i.at(i.position);if(!(e&&lq(i,"backward",e))){if(null!=e&&e.isFirstSibling){if(lq(i,"backward",e.parent,e.parentBranch))return;e=null}if(!e){i.announce("plonk");return}i.position=i.offsetOf(e.leftSibling),e.parent.removeChild(e),i.announce("delete",void 0,[e])}}):lN(i,oM(i.selection),"deleteContentBackward"))},deleteNextWord:e=>sp(e,{inputType:"deleteWordForward"})&&lN(e,[e.anchor,cS(e,e.position,"forward")],"deleteWordForward"),deletePreviousWord:e=>sp(e,{inputType:"deleteWordBackward"})&&lN(e,[e.anchor,cS(e,e.position,"backward")],"deleteWordBackward"),deleteToGroupStart:e=>sp(e,{inputType:"deleteSoftLineBackward"})&&lN(e,[e.anchor,e.offsetOf(e.at(e.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:e=>sp(e,{inputType:"deleteSoftLineForward"})&&lN(e,[e.anchor,e.offsetOf(e.at(e.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:e=>sp(e,{inputType:"deleteHardLineBackward"})&&lN(e,[e.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:e=>sp(e,{inputType:"deleteHardLineForward"})&&lN(e,[e.anchor,-1],"deleteHardLineForward")},{target:"model",audioFeedback:"delete",canUndo:!0,changeContent:!0,changeSelection:!0}),y()||console.error('MathLive 0.95.5: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var cE=new WeakMap,cK={letterShapeStyle:"mf.letterShapeStyle = ...",horizontalSpacingScale:'Removed. Use `"thinmuskip"`, `"medmuskip"`, and `"thickmuskip"` registers ',macros:"mf.macros = ...",registers:"mf.registers = ...",backgroundColorMap:"mf.backgroundColorMap = ...",colorMap:"mf.colorMap = ...",enablePopover:"mf.popoverPolicy = ...",mathModeSpace:"mf.mathModeSpace = ...",placeholderSymbol:"mf.placeholderSymbol = ...",readOnly:"mf.readOnly = ...",removeExtraneousParentheses:"mf.removeExtraneousParentheses = ...",scriptDepth:"mf.scriptDepth = ...",smartFence:"mf.smartFence = ...",smartMode:"mf.smartMode = ...",smartSuperscript:"mf.smartSuperscript = ...",inlineShortcutTimeout:"mf.inlineShortcutTimeout = ...",inlineShortcuts:"mf.inlineShortcuts = ...",keybindings:"mf.keybindings = ...",virtualKeyboardMode:"mf.mathVirtualKeyboardPolicy = ...",customVirtualKeyboardLayers:"mathVirtualKeyboard.layers = ...",customVirtualKeyboards:"mathVirtualKeyboard.layouts = ...",keypressSound:"mathVirtualKeyboard.keypressSound = ...",keypressVibration:"mathVirtualKeyboard.keypressVibration = ...",plonkSound:"mathVirtualKeyboard.plonkSound = ...",virtualKeyboardContainer:"mathVirtualKeyboard.container = ...",virtualKeyboardLayout:"mathVirtualKeyboard.alphabeticLayout = ...",virtualKeyboardTheme:"No longer supported",virtualKeyboardToggleGlyph:"No longer supported",virtualKeyboardToolbar:"mathVirtualKeyboard.editToolbar = ...",virtualKeyboards:"Use `mathVirtualKeyboard.layouts`",speechEngine:"`MathfieldElement.speechEngine`",speechEngineRate:"`MathfieldElement.speechEngineRate`",speechEngineVoice:"`MathfieldElement.speechEngineVoice`",textToSpeechMarkup:"`MathfieldElement.textToSpeechMarkup`",textToSpeechRules:"`MathfieldElement.textToSpeechRules`",textToSpeechRulesOptions:"`MathfieldElement.textToSpeechRulesOptions`",readAloudHook:"`MathfieldElement.readAloudHook`",speakHook:"`MathfieldElement.speakHook`",computeEngine:"`MathfieldElement.computeEngine`",fontsDirectory:"`MathfieldElement.fontsDirectory`",soundsDirectory:"`MathfieldElement.soundsDirectory`",createHTML:"`MathfieldElement.createHTML`",onExport:"`MathfieldElement.onExport`",onInlineShortcut:"`MathfieldElement.onInlineShortcut`",onScrollIntoView:"`MathfieldElement.onScrollIntoView`",locale:"MathfieldElement.locale = ...",strings:"MathfieldElement.strings = ...",decimalSeparator:"MathfieldElement.decimalSeparator = ...",fractionNavigationOrder:"MathfieldElement.fractionNavigationOrder = ..."},cD=class e extends HTMLElement{constructor(e){if(super(),e){let i=[];for(let r of Object.keys(e))if(cK[r]){if(cK[r].startsWith("mf.")){if(cK[r].startsWith(`mf.${r}`))i.push(`Option \`${r}\` cannot be used as a constructor option. Use ${cK[r]}`);else{let e=cK[r].match(/([a-zA-Z]+) =/);i.push(`Option \`${r}\` has been renamed \`${e[1]}\``)}}else i.push(`Option \`${r}\` cannot be used as a constructor option. Use ${cK[r]}`)}if(i.length>0){for(let e of(console.group("%cMathLive 0.95.5: %cInvalid Options","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn("Some of the options passed to `new MathFieldElement(...)` are invalid. \n          See https://cortexjs.io/mathlive/changelog/ for details."),i))console.warn(e);console.groupEnd()}}cP()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open",delegatesFocus:!0}),this.shadowRoot&&"adoptedStyleSheets"in this.shadowRoot?(this.shadowRoot.adoptedStyleSheets=[o1("core"),o1("mathfield"),o1("mathfield-element")],this.shadowRoot.innerHTML='<span style="pointer-events:auto"></span><slot style="display:none"></slot>'):this.shadowRoot.innerHTML=`<style>${o0("core")}${o0("mathfield")}${o0("mathfield-element")}</style><span style="pointer-events:auto"></span><slot style="display:none"></slot>`,e&&this._setOptions(e)}static get formAssociated(){return cP()}static get optionsAttributes(){return{"default-mode":"string","letter-shape-style":"string","min-font-scale":"number","popover-policy":"string","math-mode-space":"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","inline-shortcut-timeout":"string","script-depth":"string","virtual-keyboard-target-origin":"string","math-virtual-keyboard-policy":"string"}}static get observedAttributes(){return[...Object.keys(this.optionsAttributes),"contenteditable","disabled","readonly","read-only"]}static get fontsDirectory(){return this._fontsDirectory}static set fontsDirectory(e){e!==this._fontsDirectory&&(this._fontsDirectory=e,sD())}static get soundsDirectory(){return this._soundsDirectory}static set soundsDirectory(e){this._soundsDirectory=e,this.audioBuffers={}}static get keypressSound(){return this._keypressSound}static set keypressSound(e){var i,r,a;this.audioBuffers={},null===e?this._keypressSound={spacebar:null,return:null,delete:null,default:null}:"string"==typeof e?this._keypressSound={spacebar:e,return:e,delete:e,default:e}:"object"==typeof e&&"default"in e&&(this._keypressSound={spacebar:null!=(i=e.spacebar)?i:e.default,return:null!=(r=e.return)?r:e.default,delete:null!=(a=e.delete)?a:e.default,default:e.default})}static get plonkSound(){return this._plonkSound}static set plonkSound(e){this.audioBuffers={},this._plonkSound=e}static get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}static get speechEngine(){return this._speechEngine}static set speechEngine(e){this._speechEngine=e}static get speechEngineRate(){return this._speechEngineRate}static set speechEngineRate(e){this._speechEngineRate=e}static get speechEngineVoice(){return this._speechEngineVoice}static set speechEngineVoice(e){this._speechEngineVoice=e}static get textToSpeechMarkup(){return this._textToSpeechMarkup}static set textToSpeechMarkup(e){this._textToSpeechMarkup=e}static get textToSpeechRules(){return this._textToSpeechRules}static set textToSpeechRules(e){this._textToSpeechRules=e}static get textToSpeechRulesOptions(){return this._textToSpeechRulesOptions}static set textToSpeechRulesOptions(e){this._textToSpeechRulesOptions=e}static get locale(){return v.locale}static set locale(e){"auto"===e&&(e=navigator.language.slice(0,5)),v.locale=e}static get decimalSeparator(){return this._decimalSeparator}static set decimalSeparator(e){this._decimalSeparator=e,this._computeEngine&&(this._computeEngine.latexOptions.decimalMarker=","===this.decimalSeparator?"{,}":".")}static get strings(){return v.strings}static set strings(e){v.merge(e)}static get computeEngine(){var e,i;if(void 0===this._computeEngine){let i=null==(e=window[Symbol.for("io.cortexjs.compute-engine")])?void 0:e.ComputeEngine;if(!i)return null;this._computeEngine=new i,this._computeEngine&&","===this.decimalSeparator&&(this._computeEngine.latexOptions.decimalMarker="{,}")}return null!=(i=this._computeEngine)?i:null}static set computeEngine(e){this._computeEngine=e}static async loadSound(e){delete this.audioBuffers[e];let i="";switch(e){case"keypress":i=this._keypressSound.default;break;case"return":i=this._keypressSound.return;break;case"spacebar":i=this._keypressSound.spacebar;break;case"delete":i=this._keypressSound.delete;break;case"plonk":i=this.plonkSound}if("string"!=typeof i)return;i=i.trim();let r=this.soundsDirectory;if(!(null==r||"null"===r||"none"===i||"null"===i))try{let a=await (await fetch(await sE(`${r}/${i}`))).arrayBuffer(),o=await this.audioContext.decodeAudioData(a);this.audioBuffers[e]=o}catch(e){}}static async playSound(e){if(("suspended"===this.audioContext.state||"interrupted"===this.audioContext.state)&&await this.audioContext.resume(),this.audioBuffers[e]||await this.loadSound(e),!this.audioBuffers[e])return;let i=this.audioContext.createBufferSource();i.buffer=this.audioBuffers[e];let r=this.audioContext.createGain();r.gain.value=.5,i.connect(r).connect(this.audioContext.destination),i.start()}get mathVirtualKeyboard(){throw Error("The `mathVirtualKeyboard` property is not available on the MathfieldElement. Use `window.mathVirtualKeyboard` instead.")}onPointerDown(){window.addEventListener("pointerup",e=>{var i;e.target!==this||null!=(i=this._mathfield)&&i.disabled||this.dispatchEvent(new MouseEvent("click",{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,movementX:e.movementX,movementY:e.movementY,relatedTarget:e.relatedTarget,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey}))},{once:!0})}getPromptValue(e,i){var r,a;return null!=(a=null==(r=this._mathfield)?void 0:r.getPromptValue(e,i))?a:""}getPrompts(e){var i,r;return null!=(r=null==(i=this._mathfield)?void 0:i.getPrompts(e))?r:[]}get form(){var e;return null==(e=this._internals)?void 0:e.form}get name(){var e;return null!=(e=this.getAttribute("name"))?e:""}get type(){return this.localName}get mode(){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.model.mode)?i:"text"===this.defaultMode?"text":"math"}set mode(e){this._mathfield&&(this._mathfield.model.mode=e)}get expression(){if(this._mathfield)return window[Symbol.for("io.cortexjs.compute-engine")]?this._mathfield.expression:(console.error(`MathLive 0.95.5: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://unpkg.com/@cortex-js/compute-engine?module"`),null)}set expression(i){var r,a;if(!this._mathfield)return;let o=null!=(a=null==(r=e.computeEngine)?void 0:r.box(i).latex)?a:null;null!==o&&this._mathfield.setValue(o),window[Symbol.for("io.cortexjs.compute-engine")]||console.error(`MathLive 0.95.5: The CortexJS Compute Engine library is not available.
        
        Load the library, for example with:
        
        import "https://unpkg.com/@cortex-js/compute-engine?module"`)}get errors(){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.errors)?i:[]}_getOptions(e){return this._mathfield?li(this._mathfield.options,e):cE.has(this)?u({},li(u(u({},lr()),lt(cE.get(this).options)),e)):null}getOptions(e){return console.warn("%cMathLive 0.95.5: %cDeprecated Usage%c\n      `mf.getOptions()` is deprecated. Read the property directly on the mathfield instead.\n      See https://cortexjs.io/mathlive/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._mathfield?li(this._mathfield.options,e):cE.has(this)?li(u(u({},lr()),lt(cE.get(this).options)),e):null}reflectAttributes(){let i=lr(),r=this._getOptions();Object.keys(e.optionsAttributes).forEach(a=>{let o=cB(a);"on/off"===e.optionsAttributes[a]?i[o]!==r[o]?this.setAttribute(a,r[o]?"on":"off"):this.removeAttribute(a):i[o]!==r[o]&&("boolean"===e.optionsAttributes[a]?r[o]?this.setAttribute(a,""):this.removeAttribute(a):("string"==typeof r[o]||"number"==typeof r[o])&&this.setAttribute(a,r[o].toString()))})}getOption(e){return console.warn("%cMathLive 0.95.5: %cDeprecated Usage%c\n      `mf.getOption()` is deprecated. Read the property directly on the mathfield instead.\n      See https://cortexjs.io/mathlive/changelog/ for details.","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem","color: inherit, font-size: 1rem"),this._getOptions([e])[e]}_getOption(e){return this._getOptions([e])[e]}_setOptions(e){if(this._mathfield)this._mathfield.setOptions(e);else if(cE.has(this)){let i=u(u({},cE.get(this).options),e);cE.set(this,h(u({},cE.get(this)),{selection:{ranges:i.readOnly?[[0,0]]:[[0,-1]]},options:i}))}else cE.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:e});this.reflectAttributes()}setOptions(e){for(let i of(console.group("%cMathLive 0.95.5: %cDeprecated Usage","color:#12b; font-size: 1.1rem","color:#db1111; font-size: 1.1rem"),console.warn(" `mf.setOptions()` is deprecated. Set the property directly on the mathfield instead.\n      See https://cortexjs.io/mathlive/changelog/ for details."),Object.keys(e)))cK[i]&&console.warn(`\`mf.setOptions({${i}:...})\` -> ${cK[i]}`);console.groupEnd(),this._setOptions(e)}executeCommand(e){var i,r;return null!=(r=null==(i=this._mathfield)?void 0:i.executeCommand(e))&&r}getValue(e,i,r){var a,o;if(this._mathfield)return this._mathfield.model.getValue(e,i,r);if(cE.has(this)){let n,s,l;if(ls(e)?([n,s]=e.ranges[0],l=i):ln(e)?([n,s]=e,l=i):lo(e)&&lo(i)?(n=e,s=i,l=r):(n=0,s=-1,l=e),(void 0===l||"latex"===l)&&0===n&&-1===s)return null!=(o=null!=(a=cE.get(this).value)?a:this.textContent)?o:""}return""}setValue(e,i){if(this._mathfield&&void 0!==e){null!=i||(i={silenceNotifications:!0,mode:"math"}),this._mathfield.setValue(e,i);return}if(cE.has(this)){let i=cE.get(this).options;cE.set(this,{value:e,selection:{ranges:i.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:i});return}let r=c$(this);cE.set(this,{value:e,selection:{ranges:r.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:r})}hasFocus(){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.hasFocus())&&i}focus(){var e;null==(e=this._mathfield)||e.focus()}blur(){var e;null==(e=this._mathfield)||e.blur()}select(){var e;null==(e=this._mathfield)||e.select()}insert(e,i){var r,a;return null!=(a=null==(r=this._mathfield)?void 0:r.insert(e,i))&&a}applyStyle(e,i){var r;return null==(r=this._mathfield)?void 0:r.applyStyle(e,i)}get caretPoint(){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.getCaretPoint())?i:null}set caretPoint(e){var i;e&&(null==(i=this._mathfield)||i.setCaretPoint(e.x,e.y))}setCaretPoint(e,i){var r,a;return null!=(a=null==(r=this._mathfield)?void 0:r.setCaretPoint(e,i))&&a}offsetFromPoint(e,i,r){return this._mathfield?cd(this._mathfield,e,i,r):-1}hitboxFromOffset(e){if(!this._mathfield)return null;let i=this._mathfield.model.at(e);if(!i)return null;let r=oj(this._mathfield,i);return r?new DOMRect(r.left,r.top,r.right-r.left,r.bottom-r.top):null}resetUndo(){var e;null==(e=this._mathfield)||e.resetUndo()}canUndo(){return!!this._mathfield&&this._mathfield.canUndo()}canRedo(){return!!this._mathfield&&this._mathfield.canRedo()}handleEvent(e){var i,r,a;"pointerdown"===e.type&&this.onPointerDown(),"focus"===e.type&&(null==(i=this._mathfield)||i.focus()),"blur"===e.type&&(null==(r=sH.scrim)?void 0:r.state)==="closed"&&(null==(a=this._mathfield)||a.blur())}connectedCallback(){var i,r,a;this.shadowRoot.host.addEventListener("pointerdown",this,!0),this.shadowRoot.host.addEventListener("focus",this,!0),this.shadowRoot.host.addEventListener("blur",this,!0),cP()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),this.hasAttribute("contenteditable")||this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let o=this.shadowRoot.querySelector("slot:not([name])");try{this._style=o.assignedElements().filter(e=>"style"===e.tagName.toLowerCase()).map(e=>e.textContent).join("")}catch(e){console.error(e)}if(this._style){let e=document.createElement("style");e.textContent=this._style,this.shadowRoot.appendChild(e)}let n="";if(n=this.hasAttribute("value")?null!=(i=this.getAttribute("value"))?i:"":null!=(r=null==o?void 0:o.assignedNodes().map(e=>3===e.nodeType?e.textContent:"").join("").trim())?r:"",this._mathfield=new c_(this.shadowRoot.querySelector(":host > span"),h(u({},cE.has(this)?cE.get(this).options:c$(this)),{eventSink:this,value:n})),!cE.has(this))for(let i of(this.upgradeProperty("disabled"),this.upgradeProperty("readonly"),Object.keys(e.optionsAttributes)))this.upgradeProperty(cB(i));if(!(null!=(a=this._mathfield)&&a.model)){this._mathfield=null;return}cE.has(this)&&this._mathfield.model.deferNotifications({content:!1,selection:!1},()=>{let e=cE.get(this).value;void 0!==e&&this._mathfield.setValue(e),this._mathfield.model.selection=cE.get(this).selection,cE.delete(this)}),window.queueMicrotask(()=>{this.isConnected&&this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))}),sT()}disconnectedCallback(){if(this.shadowRoot.host.removeEventListener("pointerdown",this,!0),!this._mathfield)return;window.queueMicrotask(()=>this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})));let i=li(this._mathfield.options,Object.keys(e.optionsAttributes).map(e=>cB(e)));cE.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,options:i}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(e){if(this.hasOwnProperty(e)){let i=this[e];delete this[e],("readonly"===e||"read-only"===e)&&(e="readOnly"),this[e]=i}}attributeChangedCallback(e,i,r){if(i===r)return;let a=null!==r;switch(e){case"contenteditable":this._mathfield&&sB(this._mathfield);break;case"disabled":this.disabled=a;break;case"read-only":case"readonly":this.readOnly=a}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(e){let i=!!e;i?(this.setAttribute("readonly",""),cP()?this._internals.ariaReadOnly="true":this.setAttribute("aria-readonly","true"),this.setAttribute("aria-readonly","true")):(cP()?this._internals.ariaReadOnly="false":this.removeAttribute("aria-readonly"),this.removeAttribute("readonly"),this.removeAttribute("read-only")),this._setOptions({readOnly:i})}get disabled(){return this.hasAttribute("disabled")}set disabled(e){var i;let r=!!e;r?this.setAttribute("disabled",""):this.removeAttribute("disabled"),cP()?this._internals.ariaDisabled=r?"true":"false":this.setAttribute("aria-disabled",r?"true":"false"),r&&null!=(i=this._mathfield)&&i.hasFocus&&window.mathVirtualKeyboard.visible&&this._mathfield.executeCommand("hideVirtualKeyboard")}get value(){return this.getValue()}set value(e){this.setValue(e)}get defaultMode(){return this._getOption("defaultMode")}set defaultMode(e){this._setOptions({defaultMode:e})}get macros(){return this._getOption("macros")}set macros(e){this._setOptions({macros:e})}get registers(){return this._getOption("registers")}set registers(e){this._setOptions({registers:e})}get colorMap(){return this._getOption("colorMap")}set colorMap(e){this._setOptions({colorMap:e})}get backgroundColorMap(){return this._getOption("backgroundColorMap")}set backgroundColorMap(e){this._setOptions({backgroundColorMap:e})}get letterShapeStyle(){return this._getOption("letterShapeStyle")}set letterShapeStyle(e){this._setOptions({letterShapeStyle:e})}get minFontScale(){return this._getOption("minFontScale")}set minFontScale(e){this._setOptions({minFontScale:e})}get smartMode(){return this._getOption("smartMode")}set smartMode(e){this._setOptions({smartMode:e})}get smartFence(){return this._getOption("smartFence")}set smartFence(e){this._setOptions({smartFence:e})}get smartSuperscript(){return this._getOption("smartSuperscript")}set smartSuperscript(e){this._setOptions({smartSuperscript:e})}get scriptDepth(){return this._getOption("scriptDepth")}set scriptDepth(e){this._setOptions({scriptDepth:e})}get removeExtraneousParentheses(){return this._getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(e){this._setOptions({removeExtraneousParentheses:e})}get mathModeSpace(){return this._getOption("mathModeSpace")}set mathModeSpace(e){this._setOptions({mathModeSpace:e})}get placeholderSymbol(){return this._getOption("placeholderSymbol")}set placeholderSymbol(e){this._setOptions({placeholderSymbol:e})}get popoverPolicy(){return this._getOption("popoverPolicy")}set popoverPolicy(e){this._setOptions({popoverPolicy:e})}get environmentPopoverPolicy(){return this._getOption("environmentPopoverPolicy")}set environmentPopoverPolicy(e){this._setOptions({environmentPopoverPolicy:e})}get mathVirtualKeyboardPolicy(){return this._getOption("mathVirtualKeyboardPolicy")}set mathVirtualKeyboardPolicy(e){this._setOptions({mathVirtualKeyboardPolicy:e})}get inlineShortcuts(){return this._getOption("inlineShortcuts")}set inlineShortcuts(e){this._setOptions({inlineShortcuts:e})}get inlineShortcutTimeout(){return this._getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(e){this._setOptions({inlineShortcutTimeout:e})}get keybindings(){return this._getOption("keybindings")}set keybindings(e){this._setOptions({keybindings:e})}get onInlineShortcut(){return this._getOption("onInlineShortcut")}set onInlineShortcut(e){this._setOptions({onInlineShortcut:e})}get onScrollIntoView(){return this._getOption("onScrollIntoView")}set onScrollIntoView(e){this._setOptions({onScrollIntoView:e})}get onExport(){return this._getOption("onExport")}set onExport(e){this._setOptions({onExport:e})}get readOnly(){return this._getOption("readOnly")}set readOnly(e){this._setOptions({readOnly:e})}get isSelectionEditable(){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.isSelectionEditable)&&i}setPromptState(e,i,r){var a;null==(a=this._mathfield)||a.setPromptState(e,i,r)}getPromptState(e){var i,r;return null!=(r=null==(i=this._mathfield)?void 0:i.getPromptState(e))?r:[void 0,!0]}setPromptContent(e,i,r){var a;null==(a=this._mathfield)||a.setPromptValue(e,i,r)}stripPromptContent(e){var i,r;return null!=(r=null==(i=this._mathfield)?void 0:i.stripPromptContent(e))?r:{}}get virtualKeyboardTargetOrigin(){return this._getOption("virtualKeyboardTargetOrigin")}set virtualKeyboardTargetOrigin(e){this._setOptions({virtualKeyboardTargetOrigin:e})}get selection(){return this._mathfield?this._mathfield.model.selection:cE.has(this)?cE.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(e){if("number"==typeof e&&(e={ranges:[[e,e]]}),this._mathfield){this._mathfield.model.selection=e;return}if(cE.has(this)){cE.set(this,h(u({},cE.get(this)),{selection:e}));return}cE.set(this,{value:void 0,selection:e,options:c$(this)})}get selectionIsCollapsed(){let e=this.selection;return 1===e.ranges.length&&e.ranges[0][0]===e.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:cE.has(this)?cE.get(this).selection.ranges[0][0]:0}set position(e){if(this._mathfield&&(this._mathfield.model.position=e),cE.has(this)){cE.set(this,h(u({},cE.get(this)),{selection:{ranges:[[e,e]]}}));return}cE.set(this,{value:void 0,selection:{ranges:[[e,e]]},options:c$(this)})}getOffsetDepth(e){var i;return this._mathfield?(null==(i=this._mathfield.model.at(e))?void 0:i.treeDepth)-2:0}get lastOffset(){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.model.lastOffset)?i:-1}};cD.version="0.95.5",cD._fontsDirectory="./fonts",cD._soundsDirectory="./sounds",cD.keypressVibration=!0,cD._keypressSound={spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"},cD._plonkSound="plonk.wav",cD.audioBuffers={},cD.createHTML=e=>e,cD._speechEngineRate="100%",cD._speechEngineVoice="Joanna",cD._textToSpeechMarkup="",cD._textToSpeechRules="mathlive",cD._textToSpeechRulesOptions={},cD.speakHook=function(e){var i,r;if(y()){if(window.MathfieldElement.speechEngine&&"local"!==window.MathfieldElement.speechEngine){if("amazon"===window.MathfieldElement.speechEngine){if("AWS"in window){let a=new window.AWS.Polly({apiVersion:"2016-06-10"}),o={OutputFormat:"mp3",VoiceId:null!=(i=window.MathfieldElement.speechEngineVoice)?i:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes(null!=(r=window.MathfieldElement.speechEngineVoice)?r:"Joanna")?"neural":"standard",Text:e,TextType:"ssml"};a.synthesizeSpeech(o,(e,i)=>{if(e)console.trace(`MathLive 0.95.5: \`polly.synthesizeSpeech()\` error: ${e}`);else if(null!=i&&i.AudioStream){let e=new Uint8Array(i.AudioStream),r=new Blob([e.buffer],{type:"audio/mpeg"}),a=URL.createObjectURL(r);new Audio(a).play().catch(e=>console.log(e))}})}else console.error("MathLive 0.95.5: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk")}else"google"===window.MathfieldElement.speechEngine&&console.error("MathLive 0.95.5: The Google speech engine is not supported yet. Please come again.")}else{let i=new SpeechSynthesisUtterance(e);window.speechSynthesis.speak(i)}}},cD.readAloudHook=function(e,i){var r;if(!y())return;if("amazon"!==window.MathfieldElement.speechEngine){console.error("MathLive 0.95.5: Use Amazon TTS Engine for synchronized highlighting"),"function"==typeof window.MathfieldElement.speakHook&&window.MathfieldElement.speakHook(i);return}if(!window.AWS){console.error("MathLive 0.95.5: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");return}let a=new window.AWS.Polly({apiVersion:"2016-06-10"}),o={OutputFormat:"json",VoiceId:null!=(r=window.MathfieldElement.speechEngineVoice)?r:"Joanna",Engine:"standard",Text:i,TextType:"ssml",SpeechMarkTypes:["ssml"]};cI().readAloudElement=e,a.synthesizeSpeech(o,(e,r)=>{if(e){console.trace(`MathLive 0.95.5: \`polly.synthesizeSpeech()\` error: ${e}`);return}if(!(null!=r&&r.AudioStream))return;let n=new TextDecoder("utf-8").decode(new Uint8Array(r.AudioStream));for(let e of(cI().readAloudMarks=n.split(`
`).map(e=>e?JSON.parse(e):{}),cI().readAloudTokens=[],cI().readAloudMarks))e.value&&cI().readAloudTokens.push(e.value);cI().readAloudCurrentMark="",o.OutputFormat="mp3",o.SpeechMarkTypes=[],a.synthesizeSpeech(o,(e,r)=>{if(e){console.trace(`MathLive 0.95.5: \`polly.synthesizeSpeech("${i}") error:${e}`);return}if(!(null!=r&&r.AudioStream))return;let a=new Uint8Array(r.AudioStream),o=new Blob([a.buffer],{type:"audio/mpeg"}),n=URL.createObjectURL(o),s=cI();s.readAloudAudio?s.readAloudAudio.pause():(s.readAloudAudio=new Audio,s.readAloudAudio.addEventListener("ended",()=>{let e=s.readAloudMathField;s.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),e?(sP(e),s.readAloudElement=null,s.readAloudMathField=null,s.readAloudTokens=[],s.readAloudMarks=[],s.readAloudCurrentMark=""):function e(i){if(i&&(i.classList.remove("ML__highlight"),i.children))for(let r of i.children)e(r)}(s.readAloudElement)}),s.readAloudAudio.addEventListener("timeupdate",()=>{let e="",i=1e3*s.readAloudAudio.currentTime+100;for(let r of s.readAloudMarks)r.time<i&&(e=r.value);s.readAloudCurrentMark!==e&&(s.readAloudCurrentToken=e,e&&e===s.readAloudFinalToken?s.readAloudAudio.pause():(s.readAloudCurrentMark=e,function e(i,r){var a;i&&(r&&(null==(a=i.dataset)?void 0:a.atomId)!==r?(i.classList.remove("ML__highlight"),i.children&&i.children.length>0&&[...i.children].forEach(i=>{i instanceof HTMLElement&&e(i,r)})):(i.classList.add("ML__highlight"),i.children&&i.children.length>0&&[...i.children].forEach(i=>{i instanceof HTMLElement&&e(i)})))}(s.readAloudElement,s.readAloudCurrentMark)))})),s.readAloudAudio.src=n,s.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),s.readAloudAudio.play()})})},cD._decimalSeparator=".",cD.fractionNavigationOrder="numerator-denominator";var cT=cD;function cB(e){return e.replace(/[^a-zA-Z\d]+(.)/g,(e,i)=>i.toUpperCase())}function c$(e){let i={readOnly:!1},r=cT.optionsAttributes;return Object.keys(r).forEach(a=>{if(e.hasAttribute(a)){let o=e.getAttribute(a);"boolean"===r[a]?i[cB(a)]=!0:"on/off"===r[a]?"on"===o?i[cB(a)]=!0:"off"===o?i[cB(a)]=!1:i[cB(a)]=void 0:"number"===r[a]?i[cB(a)]=Number.parseFloat(null!=o?o:"0"):i[cB(a)]=o}}),i}function cP(){return!(!("ElementInternals"in window)||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var cO,cF,cq,cN,cR=cT;function cI(){var e;return null!=globalThis[e=Symbol.for("io.cortexjs.mathlive")]||(globalThis[e]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}y()&&!(null!=(cF=window.customElements)&&cF.get("math-field"))&&(null!=window[cq=Symbol.for("io.cortexjs.mathlive")]||(window[cq]={}),window[Symbol.for("io.cortexjs.mathlive")].version="0.95.5",window.MathfieldElement=cT,null==(cN=window.customElements)||cN.define("math-field",cT)),sF({switchKeyboardLayer:function(e){let i=le.singleton;return!!i&&(i.show(),sZ(),i.currentLayer=e,i.render(),i.focus(),!0)},toggleVirtualKeyboard:function(){let e=window.mathVirtualKeyboard;return e.visible?e.hide({animate:!0}):e.show({animate:!0}),!1},hideVirtualKeyboard:()=>(window.mathVirtualKeyboard.hide({animate:!0}),!1),showVirtualKeyboard:()=>(window.mathVirtualKeyboard.show({animate:!0}),!1)},{target:"virtual-keyboard"})}}]);